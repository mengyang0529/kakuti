(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))i(h);new MutationObserver(h=>{for(const E of h)if(E.type==="childList")for(const R of E.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&i(R)}).observe(document,{childList:!0,subtree:!0});function d(h){const E={};return h.integrity&&(E.integrity=h.integrity),h.referrerPolicy&&(E.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?E.credentials="include":h.crossOrigin==="anonymous"?E.credentials="omit":E.credentials="same-origin",E}function i(h){if(h.ep)return;h.ep=!0;const E=d(h);fetch(h.href,E)}})();function getDefaultExportFromCjs(y){return y&&y.__esModule&&Object.prototype.hasOwnProperty.call(y,"default")?y.default:y}function getAugmentedNamespace(y){if(Object.prototype.hasOwnProperty.call(y,"__esModule"))return y;var a=y.default;if(typeof a=="function"){var d=function i(){var h=!1;try{h=this instanceof i}catch{}return h?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};d.prototype=a.prototype}else d={};return Object.defineProperty(d,"__esModule",{value:!0}),Object.keys(y).forEach(function(i){var h=Object.getOwnPropertyDescriptor(y,i);Object.defineProperty(d,i,h.get?h:{enumerable:!0,get:function(){return y[i]}})}),d}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var y=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function d(i,h,E){var R=null;if(E!==void 0&&(R=""+E),h.key!==void 0&&(R=""+h.key),"key"in h){E={};for(var M in h)M!=="key"&&(E[M]=h[M])}else E=h;return h=E.ref,{$$typeof:y,type:i,key:R,ref:h!==void 0?h:null,props:E}}return reactJsxRuntime_production.Fragment=a,reactJsxRuntime_production.jsx=d,reactJsxRuntime_production.jsxs=d,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var y=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),R=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),l=Symbol.for("react.lazy"),c=Symbol.iterator;function m(g){return g===null||typeof g!="object"?null:(g=c&&g[c]||g["@@iterator"],typeof g=="function"?g:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,_={};function D(g,w,I){this.props=g,this.context=w,this.refs=_,this.updater=I||x}D.prototype.isReactComponent={},D.prototype.setState=function(g,w){if(typeof g!="object"&&typeof g!="function"&&g!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,g,w,"setState")},D.prototype.forceUpdate=function(g){this.updater.enqueueForceUpdate(this,g,"forceUpdate")};function b(){}b.prototype=D.prototype;function L(g,w,I){this.props=g,this.context=w,this.refs=_,this.updater=I||x}var N=L.prototype=new b;N.constructor=L,p(N,D.prototype),N.isPureReactComponent=!0;var U=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function z(g,w,I,B,X,H){return I=H.ref,{$$typeof:y,type:g,key:w,ref:I!==void 0?I:null,props:H}}function Y(g,w){return z(g.type,w,void 0,void 0,void 0,g.props)}function q(g){return typeof g=="object"&&g!==null&&g.$$typeof===y}function K(g){var w={"=":"=0",":":"=2"};return"$"+g.replace(/[=:]/g,function(I){return w[I]})}var Z=/\/+/g;function it(g,w){return typeof g=="object"&&g!==null&&g.key!=null?K(""+g.key):w.toString(36)}function nt(){}function at(g){switch(g.status){case"fulfilled":return g.value;case"rejected":throw g.reason;default:switch(typeof g.status=="string"?g.then(nt,nt):(g.status="pending",g.then(function(w){g.status==="pending"&&(g.status="fulfilled",g.value=w)},function(w){g.status==="pending"&&(g.status="rejected",g.reason=w)})),g.status){case"fulfilled":return g.value;case"rejected":throw g.reason}}throw g}function pt(g,w,I,B,X){var H=typeof g;(H==="undefined"||H==="boolean")&&(g=null);var v=!1;if(g===null)v=!0;else switch(H){case"bigint":case"string":case"number":v=!0;break;case"object":switch(g.$$typeof){case y:case a:v=!0;break;case l:return v=g._init,pt(v(g._payload),w,I,B,X)}}if(v)return X=X(g),v=B===""?"."+it(g,0):B,U(X)?(I="",v!=null&&(I=v.replace(Z,"$&/")+"/"),pt(X,w,I,"",function(G){return G})):X!=null&&(q(X)&&(X=Y(X,I+(X.key==null||g&&g.key===X.key?"":(""+X.key).replace(Z,"$&/")+"/")+v)),w.push(X)),1;v=0;var A=B===""?".":B+":";if(U(g))for(var k=0;k<g.length;k++)B=g[k],H=A+it(B,k),v+=pt(B,w,I,H,X);else if(k=m(g),typeof k=="function")for(g=k.call(g),k=0;!(B=g.next()).done;)B=B.value,H=A+it(B,k++),v+=pt(B,w,I,H,X);else if(H==="object"){if(typeof g.then=="function")return pt(at(g),w,I,B,X);throw w=String(g),Error("Objects are not valid as a React child (found: "+(w==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":w)+"). If you meant to render a collection of children, use an array instead.")}return v}function W(g,w,I){if(g==null)return g;var B=[],X=0;return pt(g,B,"","",function(H){return w.call(I,H,X++)}),B}function F(g){if(g._status===-1){var w=g._result;w=w(),w.then(function(I){(g._status===0||g._status===-1)&&(g._status=1,g._result=I)},function(I){(g._status===0||g._status===-1)&&(g._status=2,g._result=I)}),g._status===-1&&(g._status=0,g._result=w)}if(g._status===1)return g._result.default;throw g._result}var O=typeof reportError=="function"?reportError:function(g){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var w=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof g=="object"&&g!==null&&typeof g.message=="string"?String(g.message):String(g),error:g});if(!window.dispatchEvent(w))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",g);return}console.error(g)};function T(){}return react_production.Children={map:W,forEach:function(g,w,I){W(g,function(){w.apply(this,arguments)},I)},count:function(g){var w=0;return W(g,function(){w++}),w},toArray:function(g){return W(g,function(w){return w})||[]},only:function(g){if(!q(g))throw Error("React.Children.only expected to receive a single React element child.");return g}},react_production.Component=D,react_production.Fragment=d,react_production.Profiler=h,react_production.PureComponent=L,react_production.StrictMode=i,react_production.Suspense=C,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(g){return S.H.useMemoCache(g)}},react_production.cache=function(g){return function(){return g.apply(null,arguments)}},react_production.cloneElement=function(g,w,I){if(g==null)throw Error("The argument must be a React element, but you passed "+g+".");var B=p({},g.props),X=g.key,H=void 0;if(w!=null)for(v in w.ref!==void 0&&(H=void 0),w.key!==void 0&&(X=""+w.key),w)!P.call(w,v)||v==="key"||v==="__self"||v==="__source"||v==="ref"&&w.ref===void 0||(B[v]=w[v]);var v=arguments.length-2;if(v===1)B.children=I;else if(1<v){for(var A=Array(v),k=0;k<v;k++)A[k]=arguments[k+2];B.children=A}return z(g.type,X,void 0,void 0,H,B)},react_production.createContext=function(g){return g={$$typeof:R,_currentValue:g,_currentValue2:g,_threadCount:0,Provider:null,Consumer:null},g.Provider=g,g.Consumer={$$typeof:E,_context:g},g},react_production.createElement=function(g,w,I){var B,X={},H=null;if(w!=null)for(B in w.key!==void 0&&(H=""+w.key),w)P.call(w,B)&&B!=="key"&&B!=="__self"&&B!=="__source"&&(X[B]=w[B]);var v=arguments.length-2;if(v===1)X.children=I;else if(1<v){for(var A=Array(v),k=0;k<v;k++)A[k]=arguments[k+2];X.children=A}if(g&&g.defaultProps)for(B in v=g.defaultProps,v)X[B]===void 0&&(X[B]=v[B]);return z(g,H,void 0,void 0,null,X)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(g){return{$$typeof:M,render:g}},react_production.isValidElement=q,react_production.lazy=function(g){return{$$typeof:l,_payload:{_status:-1,_result:g},_init:F}},react_production.memo=function(g,w){return{$$typeof:u,type:g,compare:w===void 0?null:w}},react_production.startTransition=function(g){var w=S.T,I={};S.T=I;try{var B=g(),X=S.S;X!==null&&X(I,B),typeof B=="object"&&B!==null&&typeof B.then=="function"&&B.then(T,O)}catch(H){O(H)}finally{S.T=w}},react_production.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},react_production.use=function(g){return S.H.use(g)},react_production.useActionState=function(g,w,I){return S.H.useActionState(g,w,I)},react_production.useCallback=function(g,w){return S.H.useCallback(g,w)},react_production.useContext=function(g){return S.H.useContext(g)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(g,w){return S.H.useDeferredValue(g,w)},react_production.useEffect=function(g,w,I){var B=S.H;if(typeof I=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return B.useEffect(g,w)},react_production.useId=function(){return S.H.useId()},react_production.useImperativeHandle=function(g,w,I){return S.H.useImperativeHandle(g,w,I)},react_production.useInsertionEffect=function(g,w){return S.H.useInsertionEffect(g,w)},react_production.useLayoutEffect=function(g,w){return S.H.useLayoutEffect(g,w)},react_production.useMemo=function(g,w){return S.H.useMemo(g,w)},react_production.useOptimistic=function(g,w){return S.H.useOptimistic(g,w)},react_production.useReducer=function(g,w,I){return S.H.useReducer(g,w,I)},react_production.useRef=function(g){return S.H.useRef(g)},react_production.useState=function(g){return S.H.useState(g)},react_production.useSyncExternalStore=function(g,w,I){return S.H.useSyncExternalStore(g,w,I)},react_production.useTransition=function(){return S.H.useTransition()},react_production.version="19.1.1",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(y){function a(W,F){var O=W.length;W.push(F);t:for(;0<O;){var T=O-1>>>1,g=W[T];if(0<h(g,F))W[T]=F,W[O]=g,O=T;else break t}}function d(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var F=W[0],O=W.pop();if(O!==F){W[0]=O;t:for(var T=0,g=W.length,w=g>>>1;T<w;){var I=2*(T+1)-1,B=W[I],X=I+1,H=W[X];if(0>h(B,O))X<g&&0>h(H,B)?(W[T]=H,W[X]=O,T=X):(W[T]=B,W[I]=O,T=I);else if(X<g&&0>h(H,O))W[T]=H,W[X]=O,T=X;else break t}}return F}function h(W,F){var O=W.sortIndex-F.sortIndex;return O!==0?O:W.id-F.id}if(y.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var E=performance;y.unstable_now=function(){return E.now()}}else{var R=Date,M=R.now();y.unstable_now=function(){return R.now()-M}}var C=[],u=[],l=1,c=null,m=3,x=!1,p=!1,_=!1,D=!1,b=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function U(W){for(var F=d(u);F!==null;){if(F.callback===null)i(u);else if(F.startTime<=W)i(u),F.sortIndex=F.expirationTime,a(C,F);else break;F=d(u)}}function S(W){if(_=!1,U(W),!p)if(d(C)!==null)p=!0,P||(P=!0,it());else{var F=d(u);F!==null&&pt(S,F.startTime-W)}}var P=!1,z=-1,Y=5,q=-1;function K(){return D?!0:!(y.unstable_now()-q<Y)}function Z(){if(D=!1,P){var W=y.unstable_now();q=W;var F=!0;try{t:{p=!1,_&&(_=!1,L(z),z=-1),x=!0;var O=m;try{e:{for(U(W),c=d(C);c!==null&&!(c.expirationTime>W&&K());){var T=c.callback;if(typeof T=="function"){c.callback=null,m=c.priorityLevel;var g=T(c.expirationTime<=W);if(W=y.unstable_now(),typeof g=="function"){c.callback=g,U(W),F=!0;break e}c===d(C)&&i(C),U(W)}else i(C);c=d(C)}if(c!==null)F=!0;else{var w=d(u);w!==null&&pt(S,w.startTime-W),F=!1}}break t}finally{c=null,m=O,x=!1}F=void 0}}finally{F?it():P=!1}}}var it;if(typeof N=="function")it=function(){N(Z)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,at=nt.port2;nt.port1.onmessage=Z,it=function(){at.postMessage(null)}}else it=function(){b(Z,0)};function pt(W,F){z=b(function(){W(y.unstable_now())},F)}y.unstable_IdlePriority=5,y.unstable_ImmediatePriority=1,y.unstable_LowPriority=4,y.unstable_NormalPriority=3,y.unstable_Profiling=null,y.unstable_UserBlockingPriority=2,y.unstable_cancelCallback=function(W){W.callback=null},y.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<W?Math.floor(1e3/W):5},y.unstable_getCurrentPriorityLevel=function(){return m},y.unstable_next=function(W){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var O=m;m=F;try{return W()}finally{m=O}},y.unstable_requestPaint=function(){D=!0},y.unstable_runWithPriority=function(W,F){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var O=m;m=W;try{return F()}finally{m=O}},y.unstable_scheduleCallback=function(W,F,O){var T=y.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?T+O:T):O=T,W){case 1:var g=-1;break;case 2:g=250;break;case 5:g=1073741823;break;case 4:g=1e4;break;default:g=5e3}return g=O+g,W={id:l++,callback:F,priorityLevel:W,startTime:O,expirationTime:g,sortIndex:-1},O>T?(W.sortIndex=O,a(u,W),d(C)===null&&W===d(u)&&(_?(L(z),z=-1):_=!0,pt(S,O-T))):(W.sortIndex=g,a(C,W),p||x||(p=!0,P||(P=!0,it()))),W},y.unstable_shouldYield=K,y.unstable_wrapCallback=function(W){var F=m;return function(){var O=m;m=F;try{return W.apply(this,arguments)}finally{m=O}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var y=requireReact();function a(C){var u="https://react.dev/errors/"+C;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)u+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+C+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(){}var i={d:{f:d,r:function(){throw Error(a(522))},D:d,C:d,L:d,m:d,X:d,S:d,M:d},p:0,findDOMNode:null},h=Symbol.for("react.portal");function E(C,u,l){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:c==null?null:""+c,children:C,containerInfo:u,implementation:l}}var R=y.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function M(C,u){if(C==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,reactDom_production.createPortal=function(C,u){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(a(299));return E(C,u,null,l)},reactDom_production.flushSync=function(C){var u=R.T,l=i.p;try{if(R.T=null,i.p=2,C)return C()}finally{R.T=u,i.p=l,i.d.f()}},reactDom_production.preconnect=function(C,u){typeof C=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,i.d.C(C,u))},reactDom_production.prefetchDNS=function(C){typeof C=="string"&&i.d.D(C)},reactDom_production.preinit=function(C,u){if(typeof C=="string"&&u&&typeof u.as=="string"){var l=u.as,c=M(l,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,x=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;l==="style"?i.d.S(C,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:c,integrity:m,fetchPriority:x}):l==="script"&&i.d.X(C,{crossOrigin:c,integrity:m,fetchPriority:x,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},reactDom_production.preinitModule=function(C,u){if(typeof C=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var l=M(u.as,u.crossOrigin);i.d.M(C,{crossOrigin:l,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&i.d.M(C)},reactDom_production.preload=function(C,u){if(typeof C=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var l=u.as,c=M(l,u.crossOrigin);i.d.L(C,l,{crossOrigin:c,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},reactDom_production.preloadModule=function(C,u){if(typeof C=="string")if(u){var l=M(u.as,u.crossOrigin);i.d.m(C,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:l,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else i.d.m(C)},reactDom_production.requestFormReset=function(C){i.d.r(C)},reactDom_production.unstable_batchedUpdates=function(C,u){return C(u)},reactDom_production.useFormState=function(C,u,l){return R.H.useFormState(C,u,l)},reactDom_production.useFormStatus=function(){return R.H.useHostTransitionStatus()},reactDom_production.version="19.1.1",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function y(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(y)}catch(a){console.error(a)}}return y(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var y=requireScheduler(),a=requireReact(),d=requireReactDom();function i(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function E(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function R(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function M(t){if(E(t)!==t)throw Error(i(188))}function C(t){var e=t.alternate;if(!e){if(e=E(t),e===null)throw Error(i(188));return e!==t?null:t}for(var n=t,s=e;;){var o=n.return;if(o===null)break;var f=o.alternate;if(f===null){if(s=o.return,s!==null){n=s;continue}break}if(o.child===f.child){for(f=o.child;f;){if(f===n)return M(o),t;if(f===s)return M(o),e;f=f.sibling}throw Error(i(188))}if(n.return!==s.return)n=o,s=f;else{for(var j=!1,$=o.child;$;){if($===n){j=!0,n=o,s=f;break}if($===s){j=!0,s=o,n=f;break}$=$.sibling}if(!j){for($=f.child;$;){if($===n){j=!0,n=f,s=o;break}if($===s){j=!0,s=f,n=o;break}$=$.sibling}if(!j)throw Error(i(189))}}if(n.alternate!==s)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?t:e}function u(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=u(t),e!==null)return e;t=t.sibling}return null}var l=Object.assign,c=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),N=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function it(t){return t===null||typeof t!="object"?null:(t=Z&&t[Z]||t["@@iterator"],typeof t=="function"?t:null)}var nt=Symbol.for("react.client.reference");function at(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===nt?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case p:return"Fragment";case D:return"Profiler";case _:return"StrictMode";case S:return"Suspense";case P:return"SuspenseList";case q:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case x:return"Portal";case N:return(t.displayName||"Context")+".Provider";case L:return(t._context.displayName||"Context")+".Consumer";case U:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case z:return e=t.displayName||null,e!==null?e:at(t.type)||"Memo";case Y:e=t._payload,t=t._init;try{return at(t(e))}catch{}}return null}var pt=Array.isArray,W=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=d.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},T=[],g=-1;function w(t){return{current:t}}function I(t){0>g||(t.current=T[g],T[g]=null,g--)}function B(t,e){g++,T[g]=t.current,t.current=e}var X=w(null),H=w(null),v=w(null),A=w(null);function k(t,e){switch(B(v,e),B(H,t),B(X,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Td(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Td(e),t=Rd(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}I(X),B(X,t)}function G(){I(X),I(H),I(v)}function V(t){t.memoizedState!==null&&B(A,t);var e=X.current,n=Rd(e,t.type);e!==n&&(B(H,t),B(X,n))}function Q(t){H.current===t&&(I(X),I(H)),A.current===t&&(I(A),Gi._currentValue=O)}var et=Object.prototype.hasOwnProperty,ot=y.unstable_scheduleCallback,At=y.unstable_cancelCallback,ct=y.unstable_shouldYield,dt=y.unstable_requestPaint,ht=y.unstable_now,yt=y.unstable_getCurrentPriorityLevel,Et=y.unstable_ImmediatePriority,Rt=y.unstable_UserBlockingPriority,wt=y.unstable_NormalPriority,Mt=y.unstable_LowPriority,kt=y.unstable_IdlePriority,Dt=y.log,Ft=y.unstable_setDisableYieldValue,$t=null,Ut=null;function Kt(t){if(typeof Dt=="function"&&Ft(t),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode($t,t)}catch{}}var Bt=Math.clz32?Math.clz32:$e,Me=Math.log,hn=Math.LN2;function $e(t){return t>>>=0,t===0?32:31-(Me(t)/hn|0)|0}var De=256,St=4194304;function lt(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function J(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var o=0,f=t.suspendedLanes,j=t.pingedLanes;t=t.warmLanes;var $=s&134217727;return $!==0?(s=$&~f,s!==0?o=lt(s):(j&=$,j!==0?o=lt(j):n||(n=$&~t,n!==0&&(o=lt(n))))):($=s&~f,$!==0?o=lt($):j!==0?o=lt(j):n||(n=s&~t,n!==0&&(o=lt(n)))),o===0?0:e!==0&&e!==o&&(e&f)===0&&(f=o&-o,n=e&-e,f>=n||f===32&&(n&4194048)!==0)?e:o}function xt(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function Tt(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function It(){var t=De;return De<<=1,(De&4194048)===0&&(De=256),t}function Ot(){var t=St;return St<<=1,(St&62914560)===0&&(St=4194304),t}function Jt(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xt(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Se(t,e,n,s,o,f){var j=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var $=t.entanglements,tt=t.expirationTimes,ft=t.hiddenUpdates;for(n=j&~n;0<n;){var vt=31-Bt(n),_t=1<<vt;$[vt]=0,tt[vt]=-1;var gt=ft[vt];if(gt!==null)for(ft[vt]=null,vt=0;vt<gt.length;vt++){var mt=gt[vt];mt!==null&&(mt.lane&=-536870913)}n&=~_t}s!==0&&ae(t,s,0),f!==0&&o===0&&t.tag!==0&&(t.suspendedLanes|=f&~(j&~e))}function ae(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-Bt(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&4194090}function Oe(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Bt(n),o=1<<s;o&e|t[s]&e&&(t[s]|=e),n&=~o}}function Ve(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Cn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ue(){var t=F.p;return t!==0?t:(t=window.event,t===void 0?32:$d(t.type))}function gs(t,e){var n=F.p;try{return F.p=t,e()}finally{F.p=n}}var Fe=Math.random().toString(36).slice(2),fe="__reactFiber$"+Fe,xe="__reactProps$"+Fe,Xe="__reactContainer$"+Fe,Ae="__reactEvents$"+Fe,Qn="__reactListeners$"+Fe,ti="__reactHandles$"+Fe,fl="__reactResources$"+Fe,ei="__reactMarker$"+Fe;function ar(t){delete t[fe],delete t[xe],delete t[Ae],delete t[Qn],delete t[ti]}function ms(t){var e=t[fe];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Xe]||n[fe]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Dd(t);t!==null;){if(n=t[fe])return n;t=Dd(t)}return e}t=n,n=t.parentNode}return null}function ys(t){if(t=t[fe]||t[Xe]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function ni(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(i(33))}function xs(t){var e=t[fl];return e||(e=t[fl]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function ve(t){t[ei]=!0}var pl=new Set,gl={};function Zn(t,e){vs(t,e),vs(t+"Capture",e)}function vs(t,e){for(gl[t]=e,t=0;t<e.length;t++)pl.add(e[t])}var Qd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ml={},yl={};function Zd(t){return et.call(yl,t)?!0:et.call(ml,t)?!1:Qd.test(t)?yl[t]=!0:(ml[t]=!0,!1)}function Wi(t,e,n){if(Zd(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Ki(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function fn(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}var rr,xl;function bs(t){if(rr===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rr=e&&e[1]||"",xl=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rr+t+xl}var or=!1;function lr(t,e){if(!t||or)return"";or=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var _t=function(){throw Error()};if(Object.defineProperty(_t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_t,[])}catch(mt){var gt=mt}Reflect.construct(t,[],_t)}else{try{_t.call()}catch(mt){gt=mt}t.call(_t.prototype)}}else{try{throw Error()}catch(mt){gt=mt}(_t=t())&&typeof _t.catch=="function"&&_t.catch(function(){})}}catch(mt){if(mt&&gt&&typeof mt.stack=="string")return[mt.stack,gt.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=s.DetermineComponentFrameRoot(),j=f[0],$=f[1];if(j&&$){var tt=j.split(`
`),ft=$.split(`
`);for(o=s=0;s<tt.length&&!tt[s].includes("DetermineComponentFrameRoot");)s++;for(;o<ft.length&&!ft[o].includes("DetermineComponentFrameRoot");)o++;if(s===tt.length||o===ft.length)for(s=tt.length-1,o=ft.length-1;1<=s&&0<=o&&tt[s]!==ft[o];)o--;for(;1<=s&&0<=o;s--,o--)if(tt[s]!==ft[o]){if(s!==1||o!==1)do if(s--,o--,0>o||tt[s]!==ft[o]){var vt=`
`+tt[s].replace(" at new "," at ");return t.displayName&&vt.includes("<anonymous>")&&(vt=vt.replace("<anonymous>",t.displayName)),vt}while(1<=s&&0<=o);break}}}finally{or=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?bs(n):""}function Jd(t){switch(t.tag){case 26:case 27:case 5:return bs(t.type);case 16:return bs("Lazy");case 13:return bs("Suspense");case 19:return bs("SuspenseList");case 0:case 15:return lr(t.type,!1);case 11:return lr(t.type.render,!1);case 1:return lr(t.type,!0);case 31:return bs("Activity");default:return""}}function vl(t){try{var e="";do e+=Jd(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Ye(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bl(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function th(t){var e=bl(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,f=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(j){s=""+j,f.call(this,j)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(j){s=""+j},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qi(t){t._valueTracker||(t._valueTracker=th(t))}function El(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=bl(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Zi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var eh=/[\n"\\]/g;function We(t){return t.replace(eh,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function cr(t,e,n,s,o,f,j,$){t.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?t.type=j:t.removeAttribute("type"),e!=null?j==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Ye(e)):t.value!==""+Ye(e)&&(t.value=""+Ye(e)):j!=="submit"&&j!=="reset"||t.removeAttribute("value"),e!=null?ur(t,j,Ye(e)):n!=null?ur(t,j,Ye(n)):s!=null&&t.removeAttribute("value"),o==null&&f!=null&&(t.defaultChecked=!!f),o!=null&&(t.checked=o&&typeof o!="function"&&typeof o!="symbol"),$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?t.name=""+Ye($):t.removeAttribute("name")}function _l(t,e,n,s,o,f,j,$){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),e!=null||n!=null){if(!(f!=="submit"&&f!=="reset"||e!=null))return;n=n!=null?""+Ye(n):"",e=e!=null?""+Ye(e):n,$||e===t.value||(t.value=e),t.defaultValue=e}s=s??o,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=$?t.checked:!!s,t.defaultChecked=!!s,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(t.name=j)}function ur(t,e,n){e==="number"&&Zi(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Es(t,e,n,s){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Ye(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,s&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Sl(t,e,n){if(e!=null&&(e=""+Ye(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Ye(n):""}function Al(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(i(92));if(pt(s)){if(1<s.length)throw Error(i(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=Ye(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s)}function _s(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tl(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||nh.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function Rl(t,e,n){if(e!=null&&typeof e!="object")throw Error(i(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var o in e)s=e[o],e.hasOwnProperty(o)&&n[o]!==s&&Tl(t,o,s)}else for(var f in e)e.hasOwnProperty(f)&&Tl(t,f,e[f])}function dr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ih=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ji(t){return ih.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var hr=null;function fr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ss=null,As=null;function wl(t){var e=ys(t);if(e&&(t=e.stateNode)){var n=t[xe]||null;t:switch(t=e.stateNode,e.type){case"input":if(cr(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+We(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var o=s[xe]||null;if(!o)throw Error(i(90));cr(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&El(s)}break t;case"textarea":Sl(t,n.value,n.defaultValue);break t;case"select":e=n.value,e!=null&&Es(t,!!n.multiple,e,!1)}}}var pr=!1;function Cl(t,e,n){if(pr)return t(e,n);pr=!0;try{var s=t(e);return s}finally{if(pr=!1,(Ss!==null||As!==null)&&(Ua(),Ss&&(e=Ss,t=As,As=Ss=null,wl(e),t)))for(e=0;e<t.length;e++)wl(t[e])}}function si(t,e){var n=t.stateNode;if(n===null)return null;var s=n[xe]||null;if(s===null)return null;n=s[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break t;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(i(231,e,typeof n));return n}var pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gr=!1;if(pn)try{var ii={};Object.defineProperty(ii,"passive",{get:function(){gr=!0}}),window.addEventListener("test",ii,ii),window.removeEventListener("test",ii,ii)}catch{gr=!1}var Mn=null,mr=null,ta=null;function Ml(){if(ta)return ta;var t,e=mr,n=e.length,s,o="value"in Mn?Mn.value:Mn.textContent,f=o.length;for(t=0;t<n&&e[t]===o[t];t++);var j=n-t;for(s=1;s<=j&&e[n-s]===o[f-s];s++);return ta=o.slice(t,1<s?1-s:void 0)}function ea(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function na(){return!0}function Dl(){return!1}function ke(t){function e(n,s,o,f,j){this._reactName=n,this._targetInst=o,this.type=s,this.nativeEvent=f,this.target=j,this.currentTarget=null;for(var $ in t)t.hasOwnProperty($)&&(n=t[$],this[$]=n?n(f):f[$]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?na:Dl,this.isPropagationStopped=Dl,this}return l(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=na)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=na)},persist:function(){},isPersistent:na}),e}var Jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sa=ke(Jn),ai=l({},Jn,{view:0,detail:0}),ah=ke(ai),yr,xr,ri,ia=l({},ai,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:br,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ri&&(ri&&t.type==="mousemove"?(yr=t.screenX-ri.screenX,xr=t.screenY-ri.screenY):xr=yr=0,ri=t),yr)},movementY:function(t){return"movementY"in t?t.movementY:xr}}),Pl=ke(ia),rh=l({},ia,{dataTransfer:0}),oh=ke(rh),lh=l({},ai,{relatedTarget:0}),vr=ke(lh),ch=l({},Jn,{animationName:0,elapsedTime:0,pseudoElement:0}),uh=ke(ch),dh=l({},Jn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hh=ke(dh),fh=l({},Jn,{data:0}),Ol=ke(fh),ph={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yh(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mh[t])?!!e[t]:!1}function br(){return yh}var xh=l({},ai,{key:function(t){if(t.key){var e=ph[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ea(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gh[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:br,charCode:function(t){return t.type==="keypress"?ea(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ea(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vh=ke(xh),bh=l({},ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kl=ke(bh),Eh=l({},ai,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:br}),_h=ke(Eh),Sh=l({},Jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ah=ke(Sh),Th=l({},ia,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rh=ke(Th),wh=l({},Jn,{newState:0,oldState:0}),Ch=ke(wh),Mh=[9,13,27,32],Er=pn&&"CompositionEvent"in window,oi=null;pn&&"documentMode"in document&&(oi=document.documentMode);var Dh=pn&&"TextEvent"in window&&!oi,jl=pn&&(!Er||oi&&8<oi&&11>=oi),Ll=" ",Nl=!1;function Fl(t,e){switch(t){case"keyup":return Mh.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ul(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ts=!1;function Ph(t,e){switch(t){case"compositionend":return Ul(e);case"keypress":return e.which!==32?null:(Nl=!0,Ll);case"textInput":return t=e.data,t===Ll&&Nl?null:t;default:return null}}function Oh(t,e){if(Ts)return t==="compositionend"||!Er&&Fl(t,e)?(t=Ml(),ta=mr=Mn=null,Ts=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jl&&e.locale!=="ko"?null:e.data;default:return null}}var kh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Il(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kh[t.type]:e==="textarea"}function Bl(t,e,n,s){Ss?As?As.push(s):As=[s]:Ss=s,e=Ga(e,"onChange"),0<e.length&&(n=new sa("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var li=null,ci=null;function jh(t){bd(t,0)}function aa(t){var e=ni(t);if(El(e))return t}function Hl(t,e){if(t==="change")return e}var zl=!1;if(pn){var _r;if(pn){var Sr="oninput"in document;if(!Sr){var ql=document.createElement("div");ql.setAttribute("oninput","return;"),Sr=typeof ql.oninput=="function"}_r=Sr}else _r=!1;zl=_r&&(!document.documentMode||9<document.documentMode)}function Gl(){li&&(li.detachEvent("onpropertychange",$l),ci=li=null)}function $l(t){if(t.propertyName==="value"&&aa(ci)){var e=[];Bl(e,ci,t,fr(t)),Cl(jh,e)}}function Lh(t,e,n){t==="focusin"?(Gl(),li=e,ci=n,li.attachEvent("onpropertychange",$l)):t==="focusout"&&Gl()}function Nh(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return aa(ci)}function Fh(t,e){if(t==="click")return aa(e)}function Uh(t,e){if(t==="input"||t==="change")return aa(e)}function Ih(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ue=typeof Object.is=="function"?Object.is:Ih;function ui(t,e){if(Ue(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var o=n[s];if(!et.call(e,o)||!Ue(t[o],e[o]))return!1}return!0}function Vl(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xl(t,e){var n=Vl(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Vl(n)}}function Yl(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Yl(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Wl(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Zi(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zi(t.document)}return e}function Ar(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Bh=pn&&"documentMode"in document&&11>=document.documentMode,Rs=null,Tr=null,di=null,Rr=!1;function Kl(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rr||Rs==null||Rs!==Zi(s)||(s=Rs,"selectionStart"in s&&Ar(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),di&&ui(di,s)||(di=s,s=Ga(Tr,"onSelect"),0<s.length&&(e=new sa("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Rs)))}function ts(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ws={animationend:ts("Animation","AnimationEnd"),animationiteration:ts("Animation","AnimationIteration"),animationstart:ts("Animation","AnimationStart"),transitionrun:ts("Transition","TransitionRun"),transitionstart:ts("Transition","TransitionStart"),transitioncancel:ts("Transition","TransitionCancel"),transitionend:ts("Transition","TransitionEnd")},wr={},Ql={};pn&&(Ql=document.createElement("div").style,"AnimationEvent"in window||(delete ws.animationend.animation,delete ws.animationiteration.animation,delete ws.animationstart.animation),"TransitionEvent"in window||delete ws.transitionend.transition);function es(t){if(wr[t])return wr[t];if(!ws[t])return t;var e=ws[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ql)return wr[t]=e[n];return t}var Zl=es("animationend"),Jl=es("animationiteration"),tc=es("animationstart"),Hh=es("transitionrun"),zh=es("transitionstart"),qh=es("transitioncancel"),ec=es("transitionend"),nc=new Map,Cr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cr.push("scrollEnd");function sn(t,e){nc.set(t,e),Zn(e,[t])}var sc=new WeakMap;function Ke(t,e){if(typeof t=="object"&&t!==null){var n=sc.get(t);return n!==void 0?n:(e={value:t,source:e,stack:vl(e)},sc.set(t,e),e)}return{value:t,source:e,stack:vl(e)}}var Qe=[],Cs=0,Mr=0;function ra(){for(var t=Cs,e=Mr=Cs=0;e<t;){var n=Qe[e];Qe[e++]=null;var s=Qe[e];Qe[e++]=null;var o=Qe[e];Qe[e++]=null;var f=Qe[e];if(Qe[e++]=null,s!==null&&o!==null){var j=s.pending;j===null?o.next=o:(o.next=j.next,j.next=o),s.pending=o}f!==0&&ic(n,o,f)}}function oa(t,e,n,s){Qe[Cs++]=t,Qe[Cs++]=e,Qe[Cs++]=n,Qe[Cs++]=s,Mr|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function Dr(t,e,n,s){return oa(t,e,n,s),la(t)}function Ms(t,e){return oa(t,null,null,e),la(t)}function ic(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var o=!1,f=t.return;f!==null;)f.childLanes|=n,s=f.alternate,s!==null&&(s.childLanes|=n),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(o=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,o&&e!==null&&(o=31-Bt(n),t=f.hiddenUpdates,s=t[o],s===null?t[o]=[e]:s.push(e),e.lane=n|536870912),f):null}function la(t){if(50<Ni)throw Ni=0,Fo=null,Error(i(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Ds={};function Gh(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ie(t,e,n,s){return new Gh(t,e,n,s)}function Pr(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gn(t,e){var n=t.alternate;return n===null?(n=Ie(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function ac(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function ca(t,e,n,s,o,f){var j=0;if(s=t,typeof t=="function")Pr(t)&&(j=1);else if(typeof t=="string")j=Xf(t,n,X.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case q:return t=Ie(31,n,e,o),t.elementType=q,t.lanes=f,t;case p:return ns(n.children,o,f,e);case _:j=8,o|=24;break;case D:return t=Ie(12,n,e,o|2),t.elementType=D,t.lanes=f,t;case S:return t=Ie(13,n,e,o),t.elementType=S,t.lanes=f,t;case P:return t=Ie(19,n,e,o),t.elementType=P,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case b:case N:j=10;break t;case L:j=9;break t;case U:j=11;break t;case z:j=14;break t;case Y:j=16,s=null;break t}j=29,n=Error(i(130,t===null?"null":typeof t,"")),s=null}return e=Ie(j,n,e,o),e.elementType=t,e.type=s,e.lanes=f,e}function ns(t,e,n,s){return t=Ie(7,t,s,e),t.lanes=n,t}function Or(t,e,n){return t=Ie(6,t,null,e),t.lanes=n,t}function kr(t,e,n){return e=Ie(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Ps=[],Os=0,ua=null,da=0,Ze=[],Je=0,ss=null,mn=1,yn="";function is(t,e){Ps[Os++]=da,Ps[Os++]=ua,ua=t,da=e}function rc(t,e,n){Ze[Je++]=mn,Ze[Je++]=yn,Ze[Je++]=ss,ss=t;var s=mn;t=yn;var o=32-Bt(s)-1;s&=~(1<<o),n+=1;var f=32-Bt(e)+o;if(30<f){var j=o-o%5;f=(s&(1<<j)-1).toString(32),s>>=j,o-=j,mn=1<<32-Bt(e)+o|n<<o|s,yn=f+t}else mn=1<<f|n<<o|s,yn=t}function jr(t){t.return!==null&&(is(t,1),rc(t,1,0))}function Lr(t){for(;t===ua;)ua=Ps[--Os],Ps[Os]=null,da=Ps[--Os],Ps[Os]=null;for(;t===ss;)ss=Ze[--Je],Ze[Je]=null,yn=Ze[--Je],Ze[Je]=null,mn=Ze[--Je],Ze[Je]=null}var Pe=null,le=null,Wt=!1,as=null,on=!1,Nr=Error(i(519));function rs(t){var e=Error(i(418,""));throw pi(Ke(e,t)),Nr}function oc(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[fe]=t,e[xe]=s,n){case"dialog":Gt("cancel",e),Gt("close",e);break;case"iframe":case"object":case"embed":Gt("load",e);break;case"video":case"audio":for(n=0;n<Ui.length;n++)Gt(Ui[n],e);break;case"source":Gt("error",e);break;case"img":case"image":case"link":Gt("error",e),Gt("load",e);break;case"details":Gt("toggle",e);break;case"input":Gt("invalid",e),_l(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),Qi(e);break;case"select":Gt("invalid",e);break;case"textarea":Gt("invalid",e),Al(e,s.value,s.defaultValue,s.children),Qi(e)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||Ad(e.textContent,n)?(s.popover!=null&&(Gt("beforetoggle",e),Gt("toggle",e)),s.onScroll!=null&&Gt("scroll",e),s.onScrollEnd!=null&&Gt("scrollend",e),s.onClick!=null&&(e.onclick=$a),e=!0):e=!1,e||rs(t)}function lc(t){for(Pe=t.return;Pe;)switch(Pe.tag){case 5:case 13:on=!1;return;case 27:case 3:on=!0;return;default:Pe=Pe.return}}function hi(t){if(t!==Pe)return!1;if(!Wt)return lc(t),Wt=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Jo(t.type,t.memoizedProps)),n=!n),n&&le&&rs(t),lc(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));t:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){le=rn(t.nextSibling);break t}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}le=null}}else e===27?(e=le,$n(t.type)?(t=sl,sl=null,le=t):le=e):le=Pe?rn(t.stateNode.nextSibling):null;return!0}function fi(){le=Pe=null,Wt=!1}function cc(){var t=as;return t!==null&&(Ne===null?Ne=t:Ne.push.apply(Ne,t),as=null),t}function pi(t){as===null?as=[t]:as.push(t)}var Fr=w(null),os=null,xn=null;function Dn(t,e,n){B(Fr,e._currentValue),e._currentValue=n}function vn(t){t._currentValue=Fr.current,I(Fr)}function Ur(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Ir(t,e,n,s){var o=t.child;for(o!==null&&(o.return=t);o!==null;){var f=o.dependencies;if(f!==null){var j=o.child;f=f.firstContext;t:for(;f!==null;){var $=f;f=o;for(var tt=0;tt<e.length;tt++)if($.context===e[tt]){f.lanes|=n,$=f.alternate,$!==null&&($.lanes|=n),Ur(f.return,n,t),s||(j=null);break t}f=$.next}}else if(o.tag===18){if(j=o.return,j===null)throw Error(i(341));j.lanes|=n,f=j.alternate,f!==null&&(f.lanes|=n),Ur(j,n,t),j=null}else j=o.child;if(j!==null)j.return=o;else for(j=o;j!==null;){if(j===t){j=null;break}if(o=j.sibling,o!==null){o.return=j.return,j=o;break}j=j.return}o=j}}function gi(t,e,n,s){t=null;for(var o=e,f=!1;o!==null;){if(!f){if((o.flags&524288)!==0)f=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var j=o.alternate;if(j===null)throw Error(i(387));if(j=j.memoizedProps,j!==null){var $=o.type;Ue(o.pendingProps.value,j.value)||(t!==null?t.push($):t=[$])}}else if(o===A.current){if(j=o.alternate,j===null)throw Error(i(387));j.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(t!==null?t.push(Gi):t=[Gi])}o=o.return}t!==null&&Ir(e,t,n,s),e.flags|=262144}function ha(t){for(t=t.firstContext;t!==null;){if(!Ue(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ls(t){os=t,xn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ce(t){return uc(os,t)}function fa(t,e){return os===null&&ls(t),uc(t,e)}function uc(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},xn===null){if(t===null)throw Error(i(308));xn=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else xn=xn.next=e;return n}var $h=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},Vh=y.unstable_scheduleCallback,Xh=y.unstable_NormalPriority,me={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Br(){return{controller:new $h,data:new Map,refCount:0}}function mi(t){t.refCount--,t.refCount===0&&Vh(Xh,function(){t.controller.abort()})}var yi=null,Hr=0,ks=0,js=null;function Yh(t,e){if(yi===null){var n=yi=[];Hr=0,ks=Go(),js={status:"pending",value:void 0,then:function(s){n.push(s)}}}return Hr++,e.then(dc,dc),e}function dc(){if(--Hr===0&&yi!==null){js!==null&&(js.status="fulfilled");var t=yi;yi=null,ks=0,js=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function Wh(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var o=0;o<n.length;o++)(0,n[o])(e)},function(o){for(s.status="rejected",s.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),s}var hc=W.S;W.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&Yh(t,e),hc!==null&&hc(t,e)};var cs=w(null);function zr(){var t=cs.current;return t!==null?t:ie.pooledCache}function pa(t,e){e===null?B(cs,cs.current):B(cs,e.pool)}function fc(){var t=zr();return t===null?null:{parent:me._currentValue,pool:t}}var xi=Error(i(460)),pc=Error(i(474)),ga=Error(i(542)),qr={then:function(){}};function gc(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ma(){}function mc(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(ma,ma),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,xc(t),t;default:if(typeof e.status=="string")e.then(ma,ma);else{if(t=ie,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var o=e;o.status="fulfilled",o.value=s}},function(s){if(e.status==="pending"){var o=e;o.status="rejected",o.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,xc(t),t}throw vi=e,xi}}var vi=null;function yc(){if(vi===null)throw Error(i(459));var t=vi;return vi=null,t}function xc(t){if(t===xi||t===ga)throw Error(i(483))}var Pn=!1;function Gr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $r(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function On(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function kn(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,(Qt&2)!==0){var o=s.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),s.pending=e,e=la(t),ic(t,null,n),e}return oa(t,s,e,n),la(t)}function bi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Oe(t,n)}}function Vr(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var o=null,f=null;if(n=n.firstBaseUpdate,n!==null){do{var j={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};f===null?o=f=j:f=f.next=j,n=n.next}while(n!==null);f===null?o=f=e:f=f.next=e}else o=f=e;n={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:f,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Xr=!1;function Ei(){if(Xr){var t=js;if(t!==null)throw t}}function _i(t,e,n,s){Xr=!1;var o=t.updateQueue;Pn=!1;var f=o.firstBaseUpdate,j=o.lastBaseUpdate,$=o.shared.pending;if($!==null){o.shared.pending=null;var tt=$,ft=tt.next;tt.next=null,j===null?f=ft:j.next=ft,j=tt;var vt=t.alternate;vt!==null&&(vt=vt.updateQueue,$=vt.lastBaseUpdate,$!==j&&($===null?vt.firstBaseUpdate=ft:$.next=ft,vt.lastBaseUpdate=tt))}if(f!==null){var _t=o.baseState;j=0,vt=ft=tt=null,$=f;do{var gt=$.lane&-536870913,mt=gt!==$.lane;if(mt?(Vt&gt)===gt:(s&gt)===gt){gt!==0&&gt===ks&&(Xr=!0),vt!==null&&(vt=vt.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});t:{var Nt=t,jt=$;gt=e;var ne=n;switch(jt.tag){case 1:if(Nt=jt.payload,typeof Nt=="function"){_t=Nt.call(ne,_t,gt);break t}_t=Nt;break t;case 3:Nt.flags=Nt.flags&-65537|128;case 0:if(Nt=jt.payload,gt=typeof Nt=="function"?Nt.call(ne,_t,gt):Nt,gt==null)break t;_t=l({},_t,gt);break t;case 2:Pn=!0}}gt=$.callback,gt!==null&&(t.flags|=64,mt&&(t.flags|=8192),mt=o.callbacks,mt===null?o.callbacks=[gt]:mt.push(gt))}else mt={lane:gt,tag:$.tag,payload:$.payload,callback:$.callback,next:null},vt===null?(ft=vt=mt,tt=_t):vt=vt.next=mt,j|=gt;if($=$.next,$===null){if($=o.shared.pending,$===null)break;mt=$,$=mt.next,mt.next=null,o.lastBaseUpdate=mt,o.shared.pending=null}}while(!0);vt===null&&(tt=_t),o.baseState=tt,o.firstBaseUpdate=ft,o.lastBaseUpdate=vt,f===null&&(o.shared.lanes=0),Hn|=j,t.lanes=j,t.memoizedState=_t}}function vc(t,e){if(typeof t!="function")throw Error(i(191,t));t.call(e)}function bc(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)vc(n[t],e)}var Ls=w(null),ya=w(0);function Ec(t,e){t=Rn,B(ya,t),B(Ls,e),Rn=t|e.baseLanes}function Yr(){B(ya,Rn),B(Ls,Ls.current)}function Wr(){Rn=ya.current,I(Ls),I(ya)}var jn=0,Ht=null,te=null,pe=null,xa=!1,Ns=!1,us=!1,va=0,Si=0,Fs=null,Kh=0;function de(){throw Error(i(321))}function Kr(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ue(t[n],e[n]))return!1;return!0}function Qr(t,e,n,s,o,f){return jn=f,Ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,W.H=t===null||t.memoizedState===null?iu:au,us=!1,f=n(s,o),us=!1,Ns&&(f=Sc(e,n,s,o)),_c(t),f}function _c(t){W.H=Ta;var e=te!==null&&te.next!==null;if(jn=0,pe=te=Ht=null,xa=!1,Si=0,Fs=null,e)throw Error(i(300));t===null||be||(t=t.dependencies,t!==null&&ha(t)&&(be=!0))}function Sc(t,e,n,s){Ht=t;var o=0;do{if(Ns&&(Fs=null),Si=0,Ns=!1,25<=o)throw Error(i(301));if(o+=1,pe=te=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}W.H=sf,f=e(n,s)}while(Ns);return f}function Qh(){var t=W.H,e=t.useState()[0];return e=typeof e.then=="function"?Ai(e):e,t=t.useState()[0],(te!==null?te.memoizedState:null)!==t&&(Ht.flags|=1024),e}function Zr(){var t=va!==0;return va=0,t}function Jr(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function to(t){if(xa){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}xa=!1}jn=0,pe=te=Ht=null,Ns=!1,Si=va=0,Fs=null}function je(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?Ht.memoizedState=pe=t:pe=pe.next=t,pe}function ge(){if(te===null){var t=Ht.alternate;t=t!==null?t.memoizedState:null}else t=te.next;var e=pe===null?Ht.memoizedState:pe.next;if(e!==null)pe=e,te=t;else{if(t===null)throw Ht.alternate===null?Error(i(467)):Error(i(310));te=t,t={memoizedState:te.memoizedState,baseState:te.baseState,baseQueue:te.baseQueue,queue:te.queue,next:null},pe===null?Ht.memoizedState=pe=t:pe=pe.next=t}return pe}function eo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ai(t){var e=Si;return Si+=1,Fs===null&&(Fs=[]),t=mc(Fs,t,e),e=Ht,(pe===null?e.memoizedState:pe.next)===null&&(e=e.alternate,W.H=e===null||e.memoizedState===null?iu:au),t}function ba(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ai(t);if(t.$$typeof===N)return Ce(t)}throw Error(i(438,String(t)))}function no(t){var e=null,n=Ht.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=Ht.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(o){return o.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=eo(),Ht.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=K;return e.index++,n}function bn(t,e){return typeof e=="function"?e(t):e}function Ea(t){var e=ge();return so(e,te,t)}function so(t,e,n){var s=t.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=n;var o=t.baseQueue,f=s.pending;if(f!==null){if(o!==null){var j=o.next;o.next=f.next,f.next=j}e.baseQueue=o=f,s.pending=null}if(f=t.baseState,o===null)t.memoizedState=f;else{e=o.next;var $=j=null,tt=null,ft=e,vt=!1;do{var _t=ft.lane&-536870913;if(_t!==ft.lane?(Vt&_t)===_t:(jn&_t)===_t){var gt=ft.revertLane;if(gt===0)tt!==null&&(tt=tt.next={lane:0,revertLane:0,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null}),_t===ks&&(vt=!0);else if((jn&gt)===gt){ft=ft.next,gt===ks&&(vt=!0);continue}else _t={lane:0,revertLane:ft.revertLane,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null},tt===null?($=tt=_t,j=f):tt=tt.next=_t,Ht.lanes|=gt,Hn|=gt;_t=ft.action,us&&n(f,_t),f=ft.hasEagerState?ft.eagerState:n(f,_t)}else gt={lane:_t,revertLane:ft.revertLane,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null},tt===null?($=tt=gt,j=f):tt=tt.next=gt,Ht.lanes|=_t,Hn|=_t;ft=ft.next}while(ft!==null&&ft!==e);if(tt===null?j=f:tt.next=$,!Ue(f,t.memoizedState)&&(be=!0,vt&&(n=js,n!==null)))throw n;t.memoizedState=f,t.baseState=j,t.baseQueue=tt,s.lastRenderedState=f}return o===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function io(t){var e=ge(),n=e.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=t;var s=n.dispatch,o=n.pending,f=e.memoizedState;if(o!==null){n.pending=null;var j=o=o.next;do f=t(f,j.action),j=j.next;while(j!==o);Ue(f,e.memoizedState)||(be=!0),e.memoizedState=f,e.baseQueue===null&&(e.baseState=f),n.lastRenderedState=f}return[f,s]}function Ac(t,e,n){var s=Ht,o=ge(),f=Wt;if(f){if(n===void 0)throw Error(i(407));n=n()}else n=e();var j=!Ue((te||o).memoizedState,n);j&&(o.memoizedState=n,be=!0),o=o.queue;var $=wc.bind(null,s,o,t);if(Ti(2048,8,$,[t]),o.getSnapshot!==e||j||pe!==null&&pe.memoizedState.tag&1){if(s.flags|=2048,Us(9,_a(),Rc.bind(null,s,o,n,e),null),ie===null)throw Error(i(349));f||(jn&124)!==0||Tc(s,e,n)}return n}function Tc(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ht.updateQueue,e===null?(e=eo(),Ht.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Rc(t,e,n,s){e.value=n,e.getSnapshot=s,Cc(e)&&Mc(t)}function wc(t,e,n){return n(function(){Cc(e)&&Mc(t)})}function Cc(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ue(t,n)}catch{return!0}}function Mc(t){var e=Ms(t,2);e!==null&&Ge(e,t,2)}function ao(t){var e=je();if(typeof t=="function"){var n=t;if(t=n(),us){Kt(!0);try{n()}finally{Kt(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bn,lastRenderedState:t},e}function Dc(t,e,n,s){return t.baseState=n,so(t,te,typeof s=="function"?s:bn)}function Zh(t,e,n,s,o){if(Aa(t))throw Error(i(485));if(t=e.action,t!==null){var f={payload:o,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){f.listeners.push(j)}};W.T!==null?n(!0):f.isTransition=!1,s(f),n=e.pending,n===null?(f.next=e.pending=f,Pc(e,f)):(f.next=n.next,e.pending=n.next=f)}}function Pc(t,e){var n=e.action,s=e.payload,o=t.state;if(e.isTransition){var f=W.T,j={};W.T=j;try{var $=n(o,s),tt=W.S;tt!==null&&tt(j,$),Oc(t,e,$)}catch(ft){ro(t,e,ft)}finally{W.T=f}}else try{f=n(o,s),Oc(t,e,f)}catch(ft){ro(t,e,ft)}}function Oc(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){kc(t,e,s)},function(s){return ro(t,e,s)}):kc(t,e,n)}function kc(t,e,n){e.status="fulfilled",e.value=n,jc(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,Pc(t,n)))}function ro(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,jc(e),e=e.next;while(e!==s)}t.action=null}function jc(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Lc(t,e){return e}function Nc(t,e){if(Wt){var n=ie.formState;if(n!==null){t:{var s=Ht;if(Wt){if(le){e:{for(var o=le,f=on;o.nodeType!==8;){if(!f){o=null;break e}if(o=rn(o.nextSibling),o===null){o=null;break e}}f=o.data,o=f==="F!"||f==="F"?o:null}if(o){le=rn(o.nextSibling),s=o.data==="F!";break t}}rs(s)}s=!1}s&&(e=n[0])}}return n=je(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lc,lastRenderedState:e},n.queue=s,n=eu.bind(null,Ht,s),s.dispatch=n,s=ao(!1),f=ho.bind(null,Ht,!1,s.queue),s=je(),o={state:e,dispatch:null,action:t,pending:null},s.queue=o,n=Zh.bind(null,Ht,o,f,n),o.dispatch=n,s.memoizedState=t,[e,n,!1]}function Fc(t){var e=ge();return Uc(e,te,t)}function Uc(t,e,n){if(e=so(t,e,Lc)[0],t=Ea(bn)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=Ai(e)}catch(j){throw j===xi?ga:j}else s=e;e=ge();var o=e.queue,f=o.dispatch;return n!==e.memoizedState&&(Ht.flags|=2048,Us(9,_a(),Jh.bind(null,o,n),null)),[s,f,t]}function Jh(t,e){t.action=e}function Ic(t){var e=ge(),n=te;if(n!==null)return Uc(e,n,t);ge(),e=e.memoizedState,n=ge();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function Us(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=Ht.updateQueue,e===null&&(e=eo(),Ht.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function _a(){return{destroy:void 0,resource:void 0}}function Bc(){return ge().memoizedState}function Sa(t,e,n,s){var o=je();s=s===void 0?null:s,Ht.flags|=t,o.memoizedState=Us(1|e,_a(),n,s)}function Ti(t,e,n,s){var o=ge();s=s===void 0?null:s;var f=o.memoizedState.inst;te!==null&&s!==null&&Kr(s,te.memoizedState.deps)?o.memoizedState=Us(e,f,n,s):(Ht.flags|=t,o.memoizedState=Us(1|e,f,n,s))}function Hc(t,e){Sa(8390656,8,t,e)}function zc(t,e){Ti(2048,8,t,e)}function qc(t,e){return Ti(4,2,t,e)}function Gc(t,e){return Ti(4,4,t,e)}function $c(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Vc(t,e,n){n=n!=null?n.concat([t]):null,Ti(4,4,$c.bind(null,e,t),n)}function oo(){}function Xc(t,e){var n=ge();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&Kr(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function Yc(t,e){var n=ge();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&Kr(e,s[1]))return s[0];if(s=t(),us){Kt(!0);try{t()}finally{Kt(!1)}}return n.memoizedState=[s,e],s}function lo(t,e,n){return n===void 0||(jn&1073741824)!==0?t.memoizedState=e:(t.memoizedState=n,t=Qu(),Ht.lanes|=t,Hn|=t,n)}function Wc(t,e,n,s){return Ue(n,e)?n:Ls.current!==null?(t=lo(t,n,s),Ue(t,e)||(be=!0),t):(jn&42)===0?(be=!0,t.memoizedState=n):(t=Qu(),Ht.lanes|=t,Hn|=t,e)}function Kc(t,e,n,s,o){var f=F.p;F.p=f!==0&&8>f?f:8;var j=W.T,$={};W.T=$,ho(t,!1,e,n);try{var tt=o(),ft=W.S;if(ft!==null&&ft($,tt),tt!==null&&typeof tt=="object"&&typeof tt.then=="function"){var vt=Wh(tt,s);Ri(t,e,vt,qe(t))}else Ri(t,e,s,qe(t))}catch(_t){Ri(t,e,{then:function(){},status:"rejected",reason:_t},qe())}finally{F.p=f,W.T=j}}function tf(){}function co(t,e,n,s){if(t.tag!==5)throw Error(i(476));var o=Qc(t).queue;Kc(t,o,e,O,n===null?tf:function(){return Zc(t),n(s)})}function Qc(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bn,lastRenderedState:O},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bn,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function Zc(t){var e=Qc(t).next.queue;Ri(t,e,{},qe())}function uo(){return Ce(Gi)}function Jc(){return ge().memoizedState}function tu(){return ge().memoizedState}function ef(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=qe();t=On(n);var s=kn(e,t,n);s!==null&&(Ge(s,e,n),bi(s,e,n)),e={cache:Br()},t.payload=e;return}e=e.return}}function nf(t,e,n){var s=qe();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Aa(t)?nu(e,n):(n=Dr(t,e,n,s),n!==null&&(Ge(n,t,s),su(n,e,s)))}function eu(t,e,n){var s=qe();Ri(t,e,n,s)}function Ri(t,e,n,s){var o={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Aa(t))nu(e,o);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=e.lastRenderedReducer,f!==null))try{var j=e.lastRenderedState,$=f(j,n);if(o.hasEagerState=!0,o.eagerState=$,Ue($,j))return oa(t,e,o,0),ie===null&&ra(),!1}catch{}finally{}if(n=Dr(t,e,o,s),n!==null)return Ge(n,t,s),su(n,e,s),!0}return!1}function ho(t,e,n,s){if(s={lane:2,revertLane:Go(),action:s,hasEagerState:!1,eagerState:null,next:null},Aa(t)){if(e)throw Error(i(479))}else e=Dr(t,n,s,2),e!==null&&Ge(e,t,2)}function Aa(t){var e=t.alternate;return t===Ht||e!==null&&e===Ht}function nu(t,e){Ns=xa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function su(t,e,n){if((n&4194048)!==0){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Oe(t,n)}}var Ta={readContext:Ce,use:ba,useCallback:de,useContext:de,useEffect:de,useImperativeHandle:de,useLayoutEffect:de,useInsertionEffect:de,useMemo:de,useReducer:de,useRef:de,useState:de,useDebugValue:de,useDeferredValue:de,useTransition:de,useSyncExternalStore:de,useId:de,useHostTransitionStatus:de,useFormState:de,useActionState:de,useOptimistic:de,useMemoCache:de,useCacheRefresh:de},iu={readContext:Ce,use:ba,useCallback:function(t,e){return je().memoizedState=[t,e===void 0?null:e],t},useContext:Ce,useEffect:Hc,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Sa(4194308,4,$c.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sa(4194308,4,t,e)},useInsertionEffect:function(t,e){Sa(4,2,t,e)},useMemo:function(t,e){var n=je();e=e===void 0?null:e;var s=t();if(us){Kt(!0);try{t()}finally{Kt(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=je();if(n!==void 0){var o=n(e);if(us){Kt(!0);try{n(e)}finally{Kt(!1)}}}else o=e;return s.memoizedState=s.baseState=o,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:o},s.queue=t,t=t.dispatch=nf.bind(null,Ht,t),[s.memoizedState,t]},useRef:function(t){var e=je();return t={current:t},e.memoizedState=t},useState:function(t){t=ao(t);var e=t.queue,n=eu.bind(null,Ht,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:oo,useDeferredValue:function(t,e){var n=je();return lo(n,t,e)},useTransition:function(){var t=ao(!1);return t=Kc.bind(null,Ht,t.queue,!0,!1),je().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=Ht,o=je();if(Wt){if(n===void 0)throw Error(i(407));n=n()}else{if(n=e(),ie===null)throw Error(i(349));(Vt&124)!==0||Tc(s,e,n)}o.memoizedState=n;var f={value:n,getSnapshot:e};return o.queue=f,Hc(wc.bind(null,s,f,t),[t]),s.flags|=2048,Us(9,_a(),Rc.bind(null,s,f,n,e),null),n},useId:function(){var t=je(),e=ie.identifierPrefix;if(Wt){var n=yn,s=mn;n=(s&~(1<<32-Bt(s)-1)).toString(32)+n,e=""+e+"R"+n,n=va++,0<n&&(e+="H"+n.toString(32)),e+=""}else n=Kh++,e=""+e+"r"+n.toString(32)+"";return t.memoizedState=e},useHostTransitionStatus:uo,useFormState:Nc,useActionState:Nc,useOptimistic:function(t){var e=je();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=ho.bind(null,Ht,!0,n),n.dispatch=e,[t,e]},useMemoCache:no,useCacheRefresh:function(){return je().memoizedState=ef.bind(null,Ht)}},au={readContext:Ce,use:ba,useCallback:Xc,useContext:Ce,useEffect:zc,useImperativeHandle:Vc,useInsertionEffect:qc,useLayoutEffect:Gc,useMemo:Yc,useReducer:Ea,useRef:Bc,useState:function(){return Ea(bn)},useDebugValue:oo,useDeferredValue:function(t,e){var n=ge();return Wc(n,te.memoizedState,t,e)},useTransition:function(){var t=Ea(bn)[0],e=ge().memoizedState;return[typeof t=="boolean"?t:Ai(t),e]},useSyncExternalStore:Ac,useId:Jc,useHostTransitionStatus:uo,useFormState:Fc,useActionState:Fc,useOptimistic:function(t,e){var n=ge();return Dc(n,te,t,e)},useMemoCache:no,useCacheRefresh:tu},sf={readContext:Ce,use:ba,useCallback:Xc,useContext:Ce,useEffect:zc,useImperativeHandle:Vc,useInsertionEffect:qc,useLayoutEffect:Gc,useMemo:Yc,useReducer:io,useRef:Bc,useState:function(){return io(bn)},useDebugValue:oo,useDeferredValue:function(t,e){var n=ge();return te===null?lo(n,t,e):Wc(n,te.memoizedState,t,e)},useTransition:function(){var t=io(bn)[0],e=ge().memoizedState;return[typeof t=="boolean"?t:Ai(t),e]},useSyncExternalStore:Ac,useId:Jc,useHostTransitionStatus:uo,useFormState:Ic,useActionState:Ic,useOptimistic:function(t,e){var n=ge();return te!==null?Dc(n,te,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:no,useCacheRefresh:tu},Is=null,wi=0;function Ra(t){var e=wi;return wi+=1,Is===null&&(Is=[]),mc(Is,t,e)}function Ci(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function wa(t,e){throw e.$$typeof===c?Error(i(525)):(t=Object.prototype.toString.call(e),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function ru(t){var e=t._init;return e(t._payload)}function ou(t){function e(rt,st){if(t){var ut=rt.deletions;ut===null?(rt.deletions=[st],rt.flags|=16):ut.push(st)}}function n(rt,st){if(!t)return null;for(;st!==null;)e(rt,st),st=st.sibling;return null}function s(rt){for(var st=new Map;rt!==null;)rt.key!==null?st.set(rt.key,rt):st.set(rt.index,rt),rt=rt.sibling;return st}function o(rt,st){return rt=gn(rt,st),rt.index=0,rt.sibling=null,rt}function f(rt,st,ut){return rt.index=ut,t?(ut=rt.alternate,ut!==null?(ut=ut.index,ut<st?(rt.flags|=67108866,st):ut):(rt.flags|=67108866,st)):(rt.flags|=1048576,st)}function j(rt){return t&&rt.alternate===null&&(rt.flags|=67108866),rt}function $(rt,st,ut,bt){return st===null||st.tag!==6?(st=Or(ut,rt.mode,bt),st.return=rt,st):(st=o(st,ut),st.return=rt,st)}function tt(rt,st,ut,bt){var Ct=ut.type;return Ct===p?vt(rt,st,ut.props.children,bt,ut.key):st!==null&&(st.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===Y&&ru(Ct)===st.type)?(st=o(st,ut.props),Ci(st,ut),st.return=rt,st):(st=ca(ut.type,ut.key,ut.props,null,rt.mode,bt),Ci(st,ut),st.return=rt,st)}function ft(rt,st,ut,bt){return st===null||st.tag!==4||st.stateNode.containerInfo!==ut.containerInfo||st.stateNode.implementation!==ut.implementation?(st=kr(ut,rt.mode,bt),st.return=rt,st):(st=o(st,ut.children||[]),st.return=rt,st)}function vt(rt,st,ut,bt,Ct){return st===null||st.tag!==7?(st=ns(ut,rt.mode,bt,Ct),st.return=rt,st):(st=o(st,ut),st.return=rt,st)}function _t(rt,st,ut){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return st=Or(""+st,rt.mode,ut),st.return=rt,st;if(typeof st=="object"&&st!==null){switch(st.$$typeof){case m:return ut=ca(st.type,st.key,st.props,null,rt.mode,ut),Ci(ut,st),ut.return=rt,ut;case x:return st=kr(st,rt.mode,ut),st.return=rt,st;case Y:var bt=st._init;return st=bt(st._payload),_t(rt,st,ut)}if(pt(st)||it(st))return st=ns(st,rt.mode,ut,null),st.return=rt,st;if(typeof st.then=="function")return _t(rt,Ra(st),ut);if(st.$$typeof===N)return _t(rt,fa(rt,st),ut);wa(rt,st)}return null}function gt(rt,st,ut,bt){var Ct=st!==null?st.key:null;if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return Ct!==null?null:$(rt,st,""+ut,bt);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case m:return ut.key===Ct?tt(rt,st,ut,bt):null;case x:return ut.key===Ct?ft(rt,st,ut,bt):null;case Y:return Ct=ut._init,ut=Ct(ut._payload),gt(rt,st,ut,bt)}if(pt(ut)||it(ut))return Ct!==null?null:vt(rt,st,ut,bt,null);if(typeof ut.then=="function")return gt(rt,st,Ra(ut),bt);if(ut.$$typeof===N)return gt(rt,st,fa(rt,ut),bt);wa(rt,ut)}return null}function mt(rt,st,ut,bt,Ct){if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return rt=rt.get(ut)||null,$(st,rt,""+bt,Ct);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case m:return rt=rt.get(bt.key===null?ut:bt.key)||null,tt(st,rt,bt,Ct);case x:return rt=rt.get(bt.key===null?ut:bt.key)||null,ft(st,rt,bt,Ct);case Y:var zt=bt._init;return bt=zt(bt._payload),mt(rt,st,ut,bt,Ct)}if(pt(bt)||it(bt))return rt=rt.get(ut)||null,vt(st,rt,bt,Ct,null);if(typeof bt.then=="function")return mt(rt,st,ut,Ra(bt),Ct);if(bt.$$typeof===N)return mt(rt,st,ut,fa(st,bt),Ct);wa(st,bt)}return null}function Nt(rt,st,ut,bt){for(var Ct=null,zt=null,Pt=st,Lt=st=0,_e=null;Pt!==null&&Lt<ut.length;Lt++){Pt.index>Lt?(_e=Pt,Pt=null):_e=Pt.sibling;var Yt=gt(rt,Pt,ut[Lt],bt);if(Yt===null){Pt===null&&(Pt=_e);break}t&&Pt&&Yt.alternate===null&&e(rt,Pt),st=f(Yt,st,Lt),zt===null?Ct=Yt:zt.sibling=Yt,zt=Yt,Pt=_e}if(Lt===ut.length)return n(rt,Pt),Wt&&is(rt,Lt),Ct;if(Pt===null){for(;Lt<ut.length;Lt++)Pt=_t(rt,ut[Lt],bt),Pt!==null&&(st=f(Pt,st,Lt),zt===null?Ct=Pt:zt.sibling=Pt,zt=Pt);return Wt&&is(rt,Lt),Ct}for(Pt=s(Pt);Lt<ut.length;Lt++)_e=mt(Pt,rt,Lt,ut[Lt],bt),_e!==null&&(t&&_e.alternate!==null&&Pt.delete(_e.key===null?Lt:_e.key),st=f(_e,st,Lt),zt===null?Ct=_e:zt.sibling=_e,zt=_e);return t&&Pt.forEach(function(Kn){return e(rt,Kn)}),Wt&&is(rt,Lt),Ct}function jt(rt,st,ut,bt){if(ut==null)throw Error(i(151));for(var Ct=null,zt=null,Pt=st,Lt=st=0,_e=null,Yt=ut.next();Pt!==null&&!Yt.done;Lt++,Yt=ut.next()){Pt.index>Lt?(_e=Pt,Pt=null):_e=Pt.sibling;var Kn=gt(rt,Pt,Yt.value,bt);if(Kn===null){Pt===null&&(Pt=_e);break}t&&Pt&&Kn.alternate===null&&e(rt,Pt),st=f(Kn,st,Lt),zt===null?Ct=Kn:zt.sibling=Kn,zt=Kn,Pt=_e}if(Yt.done)return n(rt,Pt),Wt&&is(rt,Lt),Ct;if(Pt===null){for(;!Yt.done;Lt++,Yt=ut.next())Yt=_t(rt,Yt.value,bt),Yt!==null&&(st=f(Yt,st,Lt),zt===null?Ct=Yt:zt.sibling=Yt,zt=Yt);return Wt&&is(rt,Lt),Ct}for(Pt=s(Pt);!Yt.done;Lt++,Yt=ut.next())Yt=mt(Pt,rt,Lt,Yt.value,bt),Yt!==null&&(t&&Yt.alternate!==null&&Pt.delete(Yt.key===null?Lt:Yt.key),st=f(Yt,st,Lt),zt===null?Ct=Yt:zt.sibling=Yt,zt=Yt);return t&&Pt.forEach(function(ap){return e(rt,ap)}),Wt&&is(rt,Lt),Ct}function ne(rt,st,ut,bt){if(typeof ut=="object"&&ut!==null&&ut.type===p&&ut.key===null&&(ut=ut.props.children),typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case m:t:{for(var Ct=ut.key;st!==null;){if(st.key===Ct){if(Ct=ut.type,Ct===p){if(st.tag===7){n(rt,st.sibling),bt=o(st,ut.props.children),bt.return=rt,rt=bt;break t}}else if(st.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===Y&&ru(Ct)===st.type){n(rt,st.sibling),bt=o(st,ut.props),Ci(bt,ut),bt.return=rt,rt=bt;break t}n(rt,st);break}else e(rt,st);st=st.sibling}ut.type===p?(bt=ns(ut.props.children,rt.mode,bt,ut.key),bt.return=rt,rt=bt):(bt=ca(ut.type,ut.key,ut.props,null,rt.mode,bt),Ci(bt,ut),bt.return=rt,rt=bt)}return j(rt);case x:t:{for(Ct=ut.key;st!==null;){if(st.key===Ct)if(st.tag===4&&st.stateNode.containerInfo===ut.containerInfo&&st.stateNode.implementation===ut.implementation){n(rt,st.sibling),bt=o(st,ut.children||[]),bt.return=rt,rt=bt;break t}else{n(rt,st);break}else e(rt,st);st=st.sibling}bt=kr(ut,rt.mode,bt),bt.return=rt,rt=bt}return j(rt);case Y:return Ct=ut._init,ut=Ct(ut._payload),ne(rt,st,ut,bt)}if(pt(ut))return Nt(rt,st,ut,bt);if(it(ut)){if(Ct=it(ut),typeof Ct!="function")throw Error(i(150));return ut=Ct.call(ut),jt(rt,st,ut,bt)}if(typeof ut.then=="function")return ne(rt,st,Ra(ut),bt);if(ut.$$typeof===N)return ne(rt,st,fa(rt,ut),bt);wa(rt,ut)}return typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint"?(ut=""+ut,st!==null&&st.tag===6?(n(rt,st.sibling),bt=o(st,ut),bt.return=rt,rt=bt):(n(rt,st),bt=Or(ut,rt.mode,bt),bt.return=rt,rt=bt),j(rt)):n(rt,st)}return function(rt,st,ut,bt){try{wi=0;var Ct=ne(rt,st,ut,bt);return Is=null,Ct}catch(Pt){if(Pt===xi||Pt===ga)throw Pt;var zt=Ie(29,Pt,null,rt.mode);return zt.lanes=bt,zt.return=rt,zt}finally{}}}var Bs=ou(!0),lu=ou(!1),tn=w(null),ln=null;function Ln(t){var e=t.alternate;B(ye,ye.current&1),B(tn,t),ln===null&&(e===null||Ls.current!==null||e.memoizedState!==null)&&(ln=t)}function cu(t){if(t.tag===22){if(B(ye,ye.current),B(tn,t),ln===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(ln=t)}}else Nn()}function Nn(){B(ye,ye.current),B(tn,tn.current)}function En(t){I(tn),ln===t&&(ln=null),I(ye)}var ye=w(0);function Ca(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||nl(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function fo(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:l({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var po={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=qe(),o=On(s);o.payload=e,n!=null&&(o.callback=n),e=kn(t,o,s),e!==null&&(Ge(e,t,s),bi(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=qe(),o=On(s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=kn(t,o,s),e!==null&&(Ge(e,t,s),bi(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qe(),s=On(n);s.tag=2,e!=null&&(s.callback=e),e=kn(t,s,n),e!==null&&(Ge(e,t,n),bi(e,t,n))}};function uu(t,e,n,s,o,f,j){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,f,j):e.prototype&&e.prototype.isPureReactComponent?!ui(n,s)||!ui(o,f):!0}function du(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&po.enqueueReplaceState(e,e.state,null)}function ds(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=l({},n));for(var o in t)n[o]===void 0&&(n[o]=t[o])}return n}var Ma=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function hu(t){Ma(t)}function fu(t){console.error(t)}function pu(t){Ma(t)}function Da(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function gu(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function go(t,e,n){return n=On(n),n.tag=3,n.payload={element:null},n.callback=function(){Da(t,e)},n}function mu(t){return t=On(t),t.tag=3,t}function yu(t,e,n,s){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var f=s.value;t.payload=function(){return o(f)},t.callback=function(){gu(e,n,s)}}var j=n.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(t.callback=function(){gu(e,n,s),typeof o!="function"&&(zn===null?zn=new Set([this]):zn.add(this));var $=s.stack;this.componentDidCatch(s.value,{componentStack:$!==null?$:""})})}function af(t,e,n,s,o){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&gi(e,n,o,!0),n=tn.current,n!==null){switch(n.tag){case 13:return ln===null?Io():n.alternate===null&&ce===0&&(ce=3),n.flags&=-257,n.flags|=65536,n.lanes=o,s===qr?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),Ho(t,s,o)),!1;case 22:return n.flags|=65536,s===qr?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),Ho(t,s,o)),!1}throw Error(i(435,n.tag))}return Ho(t,s,o),Io(),!1}if(Wt)return e=tn.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=o,s!==Nr&&(t=Error(i(422),{cause:s}),pi(Ke(t,n)))):(s!==Nr&&(e=Error(i(423),{cause:s}),pi(Ke(e,n))),t=t.current.alternate,t.flags|=65536,o&=-o,t.lanes|=o,s=Ke(s,n),o=go(t.stateNode,s,o),Vr(t,o),ce!==4&&(ce=2)),!1;var f=Error(i(520),{cause:s});if(f=Ke(f,n),Li===null?Li=[f]:Li.push(f),ce!==4&&(ce=2),e===null)return!0;s=Ke(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=o&-o,n.lanes|=t,t=go(n.stateNode,s,t),Vr(n,t),!1;case 1:if(e=n.type,f=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(zn===null||!zn.has(f))))return n.flags|=65536,o&=-o,n.lanes|=o,o=mu(o),yu(o,t,n,s),Vr(n,o),!1}n=n.return}while(n!==null);return!1}var xu=Error(i(461)),be=!1;function Te(t,e,n,s){e.child=t===null?lu(e,null,n,s):Bs(e,t.child,n,s)}function vu(t,e,n,s,o){n=n.render;var f=e.ref;if("ref"in s){var j={};for(var $ in s)$!=="ref"&&(j[$]=s[$])}else j=s;return ls(e),s=Qr(t,e,n,j,f,o),$=Zr(),t!==null&&!be?(Jr(t,e,o),_n(t,e,o)):(Wt&&$&&jr(e),e.flags|=1,Te(t,e,s,o),e.child)}function bu(t,e,n,s,o){if(t===null){var f=n.type;return typeof f=="function"&&!Pr(f)&&f.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=f,Eu(t,e,f,s,o)):(t=ca(n.type,null,s,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(f=t.child,!So(t,o)){var j=f.memoizedProps;if(n=n.compare,n=n!==null?n:ui,n(j,s)&&t.ref===e.ref)return _n(t,e,o)}return e.flags|=1,t=gn(f,s),t.ref=e.ref,t.return=e,e.child=t}function Eu(t,e,n,s,o){if(t!==null){var f=t.memoizedProps;if(ui(f,s)&&t.ref===e.ref)if(be=!1,e.pendingProps=s=f,So(t,o))(t.flags&131072)!==0&&(be=!0);else return e.lanes=t.lanes,_n(t,e,o)}return mo(t,e,n,s,o)}function _u(t,e,n){var s=e.pendingProps,o=s.children,f=t!==null?t.memoizedState:null;if(s.mode==="hidden"){if((e.flags&128)!==0){if(s=f!==null?f.baseLanes|n:n,t!==null){for(o=e.child=t.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;e.childLanes=f&~s}else e.childLanes=0,e.child=null;return Su(t,e,s,n)}if((n&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&pa(e,f!==null?f.cachePool:null),f!==null?Ec(e,f):Yr(),cu(e);else return e.lanes=e.childLanes=536870912,Su(t,e,f!==null?f.baseLanes|n:n,n)}else f!==null?(pa(e,f.cachePool),Ec(e,f),Nn(),e.memoizedState=null):(t!==null&&pa(e,null),Yr(),Nn());return Te(t,e,o,n),e.child}function Su(t,e,n,s){var o=zr();return o=o===null?null:{parent:me._currentValue,pool:o},e.memoizedState={baseLanes:n,cachePool:o},t!==null&&pa(e,null),Yr(),cu(e),t!==null&&gi(t,e,s,!0),null}function Pa(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(i(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function mo(t,e,n,s,o){return ls(e),n=Qr(t,e,n,s,void 0,o),s=Zr(),t!==null&&!be?(Jr(t,e,o),_n(t,e,o)):(Wt&&s&&jr(e),e.flags|=1,Te(t,e,n,o),e.child)}function Au(t,e,n,s,o,f){return ls(e),e.updateQueue=null,n=Sc(e,s,n,o),_c(t),s=Zr(),t!==null&&!be?(Jr(t,e,f),_n(t,e,f)):(Wt&&s&&jr(e),e.flags|=1,Te(t,e,n,f),e.child)}function Tu(t,e,n,s,o){if(ls(e),e.stateNode===null){var f=Ds,j=n.contextType;typeof j=="object"&&j!==null&&(f=Ce(j)),f=new n(s,f),e.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=po,e.stateNode=f,f._reactInternals=e,f=e.stateNode,f.props=s,f.state=e.memoizedState,f.refs={},Gr(e),j=n.contextType,f.context=typeof j=="object"&&j!==null?Ce(j):Ds,f.state=e.memoizedState,j=n.getDerivedStateFromProps,typeof j=="function"&&(fo(e,n,j,s),f.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(j=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),j!==f.state&&po.enqueueReplaceState(f,f.state,null),_i(e,s,f,o),Ei(),f.state=e.memoizedState),typeof f.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){f=e.stateNode;var $=e.memoizedProps,tt=ds(n,$);f.props=tt;var ft=f.context,vt=n.contextType;j=Ds,typeof vt=="object"&&vt!==null&&(j=Ce(vt));var _t=n.getDerivedStateFromProps;vt=typeof _t=="function"||typeof f.getSnapshotBeforeUpdate=="function",$=e.pendingProps!==$,vt||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||($||ft!==j)&&du(e,f,s,j),Pn=!1;var gt=e.memoizedState;f.state=gt,_i(e,s,f,o),Ei(),ft=e.memoizedState,$||gt!==ft||Pn?(typeof _t=="function"&&(fo(e,n,_t,s),ft=e.memoizedState),(tt=Pn||uu(e,n,tt,s,gt,ft,j))?(vt||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(e.flags|=4194308)):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=ft),f.props=s,f.state=ft,f.context=j,s=tt):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{f=e.stateNode,$r(t,e),j=e.memoizedProps,vt=ds(n,j),f.props=vt,_t=e.pendingProps,gt=f.context,ft=n.contextType,tt=Ds,typeof ft=="object"&&ft!==null&&(tt=Ce(ft)),$=n.getDerivedStateFromProps,(ft=typeof $=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(j!==_t||gt!==tt)&&du(e,f,s,tt),Pn=!1,gt=e.memoizedState,f.state=gt,_i(e,s,f,o),Ei();var mt=e.memoizedState;j!==_t||gt!==mt||Pn||t!==null&&t.dependencies!==null&&ha(t.dependencies)?(typeof $=="function"&&(fo(e,n,$,s),mt=e.memoizedState),(vt=Pn||uu(e,n,vt,s,gt,mt,tt)||t!==null&&t.dependencies!==null&&ha(t.dependencies))?(ft||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(s,mt,tt),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(s,mt,tt)),typeof f.componentDidUpdate=="function"&&(e.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof f.componentDidUpdate!="function"||j===t.memoizedProps&&gt===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&gt===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=mt),f.props=s,f.state=mt,f.context=tt,s=vt):(typeof f.componentDidUpdate!="function"||j===t.memoizedProps&&gt===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&gt===t.memoizedState||(e.flags|=1024),s=!1)}return f=s,Pa(t,e),s=(e.flags&128)!==0,f||s?(f=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:f.render(),e.flags|=1,t!==null&&s?(e.child=Bs(e,t.child,null,o),e.child=Bs(e,null,n,o)):Te(t,e,n,o),e.memoizedState=f.state,t=e.child):t=_n(t,e,o),t}function Ru(t,e,n,s){return fi(),e.flags|=256,Te(t,e,n,s),e.child}var yo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xo(t){return{baseLanes:t,cachePool:fc()}}function vo(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=en),t}function wu(t,e,n){var s=e.pendingProps,o=!1,f=(e.flags&128)!==0,j;if((j=f)||(j=t!==null&&t.memoizedState===null?!1:(ye.current&2)!==0),j&&(o=!0,e.flags&=-129),j=(e.flags&32)!==0,e.flags&=-33,t===null){if(Wt){if(o?Ln(e):Nn(),Wt){var $=le,tt;if(tt=$){t:{for(tt=$,$=on;tt.nodeType!==8;){if(!$){$=null;break t}if(tt=rn(tt.nextSibling),tt===null){$=null;break t}}$=tt}$!==null?(e.memoizedState={dehydrated:$,treeContext:ss!==null?{id:mn,overflow:yn}:null,retryLane:536870912,hydrationErrors:null},tt=Ie(18,null,null,0),tt.stateNode=$,tt.return=e,e.child=tt,Pe=e,le=null,tt=!0):tt=!1}tt||rs(e)}if($=e.memoizedState,$!==null&&($=$.dehydrated,$!==null))return nl($)?e.lanes=32:e.lanes=536870912,null;En(e)}return $=s.children,s=s.fallback,o?(Nn(),o=e.mode,$=Oa({mode:"hidden",children:$},o),s=ns(s,o,n,null),$.return=e,s.return=e,$.sibling=s,e.child=$,o=e.child,o.memoizedState=xo(n),o.childLanes=vo(t,j,n),e.memoizedState=yo,s):(Ln(e),bo(e,$))}if(tt=t.memoizedState,tt!==null&&($=tt.dehydrated,$!==null)){if(f)e.flags&256?(Ln(e),e.flags&=-257,e=Eo(t,e,n)):e.memoizedState!==null?(Nn(),e.child=t.child,e.flags|=128,e=null):(Nn(),o=s.fallback,$=e.mode,s=Oa({mode:"visible",children:s.children},$),o=ns(o,$,n,null),o.flags|=2,s.return=e,o.return=e,s.sibling=o,e.child=s,Bs(e,t.child,null,n),s=e.child,s.memoizedState=xo(n),s.childLanes=vo(t,j,n),e.memoizedState=yo,e=o);else if(Ln(e),nl($)){if(j=$.nextSibling&&$.nextSibling.dataset,j)var ft=j.dgst;j=ft,s=Error(i(419)),s.stack="",s.digest=j,pi({value:s,source:null,stack:null}),e=Eo(t,e,n)}else if(be||gi(t,e,n,!1),j=(n&t.childLanes)!==0,be||j){if(j=ie,j!==null&&(s=n&-n,s=(s&42)!==0?1:Ve(s),s=(s&(j.suspendedLanes|n))!==0?0:s,s!==0&&s!==tt.retryLane))throw tt.retryLane=s,Ms(t,s),Ge(j,t,s),xu;$.data==="$?"||Io(),e=Eo(t,e,n)}else $.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=tt.treeContext,le=rn($.nextSibling),Pe=e,Wt=!0,as=null,on=!1,t!==null&&(Ze[Je++]=mn,Ze[Je++]=yn,Ze[Je++]=ss,mn=t.id,yn=t.overflow,ss=e),e=bo(e,s.children),e.flags|=4096);return e}return o?(Nn(),o=s.fallback,$=e.mode,tt=t.child,ft=tt.sibling,s=gn(tt,{mode:"hidden",children:s.children}),s.subtreeFlags=tt.subtreeFlags&65011712,ft!==null?o=gn(ft,o):(o=ns(o,$,n,null),o.flags|=2),o.return=e,s.return=e,s.sibling=o,e.child=s,s=o,o=e.child,$=t.child.memoizedState,$===null?$=xo(n):(tt=$.cachePool,tt!==null?(ft=me._currentValue,tt=tt.parent!==ft?{parent:ft,pool:ft}:tt):tt=fc(),$={baseLanes:$.baseLanes|n,cachePool:tt}),o.memoizedState=$,o.childLanes=vo(t,j,n),e.memoizedState=yo,s):(Ln(e),n=t.child,t=n.sibling,n=gn(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(j=e.deletions,j===null?(e.deletions=[t],e.flags|=16):j.push(t)),e.child=n,e.memoizedState=null,n)}function bo(t,e){return e=Oa({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Oa(t,e){return t=Ie(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Eo(t,e,n){return Bs(e,t.child,null,n),t=bo(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Cu(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Ur(t.return,e,n)}function _o(t,e,n,s,o){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:o}:(f.isBackwards=e,f.rendering=null,f.renderingStartTime=0,f.last=s,f.tail=n,f.tailMode=o)}function Mu(t,e,n){var s=e.pendingProps,o=s.revealOrder,f=s.tail;if(Te(t,e,s.children,n),s=ye.current,(s&2)!==0)s=s&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cu(t,n,e);else if(t.tag===19)Cu(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}switch(B(ye,s),o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&Ca(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),_o(e,!1,o,n,f);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Ca(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}_o(e,!0,n,null,f);break;case"together":_o(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _n(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hn|=e.lanes,(n&e.childLanes)===0)if(t!==null){if(gi(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(i(153));if(e.child!==null){for(t=e.child,n=gn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function So(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&ha(t)))}function rf(t,e,n){switch(e.tag){case 3:k(e,e.stateNode.containerInfo),Dn(e,me,t.memoizedState.cache),fi();break;case 27:case 5:V(e);break;case 4:k(e,e.stateNode.containerInfo);break;case 10:Dn(e,e.type,e.memoizedProps.value);break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(Ln(e),e.flags|=128,null):(n&e.child.childLanes)!==0?wu(t,e,n):(Ln(e),t=_n(t,e,n),t!==null?t.sibling:null);Ln(e);break;case 19:var o=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(gi(t,e,n,!1),s=(n&e.childLanes)!==0),o){if(s)return Mu(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),B(ye,ye.current),s)break;return null;case 22:case 23:return e.lanes=0,_u(t,e,n);case 24:Dn(e,me,t.memoizedState.cache)}return _n(t,e,n)}function Du(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)be=!0;else{if(!So(t,n)&&(e.flags&128)===0)return be=!1,rf(t,e,n);be=(t.flags&131072)!==0}else be=!1,Wt&&(e.flags&1048576)!==0&&rc(e,da,e.index);switch(e.lanes=0,e.tag){case 16:t:{t=e.pendingProps;var s=e.elementType,o=s._init;if(s=o(s._payload),e.type=s,typeof s=="function")Pr(s)?(t=ds(s,t),e.tag=1,e=Tu(null,e,s,t,n)):(e.tag=0,e=mo(null,e,s,t,n));else{if(s!=null){if(o=s.$$typeof,o===U){e.tag=11,e=vu(null,e,s,t,n);break t}else if(o===z){e.tag=14,e=bu(null,e,s,t,n);break t}}throw e=at(s)||s,Error(i(306,e,""))}}return e;case 0:return mo(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,o=ds(s,e.pendingProps),Tu(t,e,s,o,n);case 3:t:{if(k(e,e.stateNode.containerInfo),t===null)throw Error(i(387));s=e.pendingProps;var f=e.memoizedState;o=f.element,$r(t,e),_i(e,s,null,n);var j=e.memoizedState;if(s=j.cache,Dn(e,me,s),s!==f.cache&&Ir(e,[me],n,!0),Ei(),s=j.element,f.isDehydrated)if(f={element:s,isDehydrated:!1,cache:j.cache},e.updateQueue.baseState=f,e.memoizedState=f,e.flags&256){e=Ru(t,e,s,n);break t}else if(s!==o){o=Ke(Error(i(424)),e),pi(o),e=Ru(t,e,s,n);break t}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(le=rn(t.firstChild),Pe=e,Wt=!0,as=null,on=!0,n=lu(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(fi(),s===o){e=_n(t,e,n);break t}Te(t,e,s,n)}e=e.child}return e;case 26:return Pa(t,e),t===null?(n=jd(e.type,null,e.pendingProps,null))?e.memoizedState=n:Wt||(n=e.type,t=e.pendingProps,s=Va(v.current).createElement(n),s[fe]=e,s[xe]=t,we(s,n,t),ve(s),e.stateNode=s):e.memoizedState=jd(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return V(e),t===null&&Wt&&(s=e.stateNode=Pd(e.type,e.pendingProps,v.current),Pe=e,on=!0,o=le,$n(e.type)?(sl=o,le=rn(s.firstChild)):le=o),Te(t,e,e.pendingProps.children,n),Pa(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Wt&&((o=s=le)&&(s=jf(s,e.type,e.pendingProps,on),s!==null?(e.stateNode=s,Pe=e,le=rn(s.firstChild),on=!1,o=!0):o=!1),o||rs(e)),V(e),o=e.type,f=e.pendingProps,j=t!==null?t.memoizedProps:null,s=f.children,Jo(o,f)?s=null:j!==null&&Jo(o,j)&&(e.flags|=32),e.memoizedState!==null&&(o=Qr(t,e,Qh,null,null,n),Gi._currentValue=o),Pa(t,e),Te(t,e,s,n),e.child;case 6:return t===null&&Wt&&((t=n=le)&&(n=Lf(n,e.pendingProps,on),n!==null?(e.stateNode=n,Pe=e,le=null,t=!0):t=!1),t||rs(e)),null;case 13:return wu(t,e,n);case 4:return k(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Bs(e,null,s,n):Te(t,e,s,n),e.child;case 11:return vu(t,e,e.type,e.pendingProps,n);case 7:return Te(t,e,e.pendingProps,n),e.child;case 8:return Te(t,e,e.pendingProps.children,n),e.child;case 12:return Te(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,Dn(e,e.type,s.value),Te(t,e,s.children,n),e.child;case 9:return o=e.type._context,s=e.pendingProps.children,ls(e),o=Ce(o),s=s(o),e.flags|=1,Te(t,e,s,n),e.child;case 14:return bu(t,e,e.type,e.pendingProps,n);case 15:return Eu(t,e,e.type,e.pendingProps,n);case 19:return Mu(t,e,n);case 31:return s=e.pendingProps,n=e.mode,s={mode:s.mode,children:s.children},t===null?(n=Oa(s,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=gn(t.child,s),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return _u(t,e,n);case 24:return ls(e),s=Ce(me),t===null?(o=zr(),o===null&&(o=ie,f=Br(),o.pooledCache=f,f.refCount++,f!==null&&(o.pooledCacheLanes|=n),o=f),e.memoizedState={parent:s,cache:o},Gr(e),Dn(e,me,o)):((t.lanes&n)!==0&&($r(t,e),_i(e,null,null,n),Ei()),o=t.memoizedState,f=e.memoizedState,o.parent!==s?(o={parent:s,cache:s},e.memoizedState=o,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=o),Dn(e,me,s)):(s=f.cache,Dn(e,me,s),s!==o.cache&&Ir(e,[me],n,!0))),Te(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(i(156,e.tag))}function Sn(t){t.flags|=4}function Pu(t,e){if(e.type!=="stylesheet"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Id(e)){if(e=tn.current,e!==null&&((Vt&4194048)===Vt?ln!==null:(Vt&62914560)!==Vt&&(Vt&536870912)===0||e!==ln))throw vi=qr,pc;t.flags|=8192}}function ka(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?Ot():536870912,t.lanes|=e,Gs|=e)}function Mi(t,e){if(!Wt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function oe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags&65011712,s|=o.flags&65011712,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags,s|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function of(t,e,n){var s=e.pendingProps;switch(Lr(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oe(e),null;case 1:return oe(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),vn(me),G(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(hi(e)?Sn(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,cc())),oe(e),null;case 26:return n=e.memoizedState,t===null?(Sn(e),n!==null?(oe(e),Pu(e,n)):(oe(e),e.flags&=-16777217)):n?n!==t.memoizedState?(Sn(e),oe(e),Pu(e,n)):(oe(e),e.flags&=-16777217):(t.memoizedProps!==s&&Sn(e),oe(e),e.flags&=-16777217),null;case 27:Q(e),n=v.current;var o=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Sn(e);else{if(!s){if(e.stateNode===null)throw Error(i(166));return oe(e),null}t=X.current,hi(e)?oc(e):(t=Pd(o,s,n),e.stateNode=t,Sn(e))}return oe(e),null;case 5:if(Q(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Sn(e);else{if(!s){if(e.stateNode===null)throw Error(i(166));return oe(e),null}if(t=X.current,hi(e))oc(e);else{switch(o=Va(v.current),t){case 1:t=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof s.is=="string"?o.createElement("select",{is:s.is}):o.createElement("select"),s.multiple?t.multiple=!0:s.size&&(t.size=s.size);break;default:t=typeof s.is=="string"?o.createElement(n,{is:s.is}):o.createElement(n)}}t[fe]=e,t[xe]=s;t:for(o=e.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break t;for(;o.sibling===null;){if(o.return===null||o.return===e)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}e.stateNode=t;t:switch(we(t,n,s),n){case"button":case"input":case"select":case"textarea":t=!!s.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&Sn(e)}}return oe(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&Sn(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(i(166));if(t=v.current,hi(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,o=Pe,o!==null)switch(o.tag){case 27:case 5:s=o.memoizedProps}t[fe]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||Ad(t.nodeValue,n)),t||rs(e)}else t=Va(t).createTextNode(s),t[fe]=e,e.stateNode=t}return oe(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(o=hi(e),s!==null&&s.dehydrated!==null){if(t===null){if(!o)throw Error(i(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));o[fe]=e}else fi(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;oe(e),o=!1}else o=cc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),o=!0;if(!o)return e.flags&256?(En(e),e):(En(e),null)}if(En(e),(e.flags&128)!==0)return e.lanes=n,e;if(n=s!==null,t=t!==null&&t.memoizedState!==null,n){s=e.child,o=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(o=s.alternate.memoizedState.cachePool.pool);var f=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==o&&(s.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),ka(e,e.updateQueue),oe(e),null;case 4:return G(),t===null&&Yo(e.stateNode.containerInfo),oe(e),null;case 10:return vn(e.type),oe(e),null;case 19:if(I(ye),o=e.memoizedState,o===null)return oe(e),null;if(s=(e.flags&128)!==0,f=o.rendering,f===null)if(s)Mi(o,!1);else{if(ce!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(f=Ca(t),f!==null){for(e.flags|=128,Mi(o,!1),t=f.updateQueue,e.updateQueue=t,ka(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)ac(n,t),n=n.sibling;return B(ye,ye.current&1|2),e.child}t=t.sibling}o.tail!==null&&ht()>Na&&(e.flags|=128,s=!0,Mi(o,!1),e.lanes=4194304)}else{if(!s)if(t=Ca(f),t!==null){if(e.flags|=128,s=!0,t=t.updateQueue,e.updateQueue=t,ka(e,t),Mi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!Wt)return oe(e),null}else 2*ht()-o.renderingStartTime>Na&&n!==536870912&&(e.flags|=128,s=!0,Mi(o,!1),e.lanes=4194304);o.isBackwards?(f.sibling=e.child,e.child=f):(t=o.last,t!==null?t.sibling=f:e.child=f,o.last=f)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ht(),e.sibling=null,t=ye.current,B(ye,s?t&1|2:t&1),e):(oe(e),null);case 22:case 23:return En(e),Wr(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?(n&536870912)!==0&&(e.flags&128)===0&&(oe(e),e.subtreeFlags&6&&(e.flags|=8192)):oe(e),n=e.updateQueue,n!==null&&ka(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&I(cs),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),vn(me),oe(e),null;case 25:return null;case 30:return null}throw Error(i(156,e.tag))}function lf(t,e){switch(Lr(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vn(me),G(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Q(e),null;case 13:if(En(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(i(340));fi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return I(ye),null;case 4:return G(),null;case 10:return vn(e.type),null;case 22:case 23:return En(e),Wr(),t!==null&&I(cs),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return vn(me),null;case 25:return null;default:return null}}function Ou(t,e){switch(Lr(e),e.tag){case 3:vn(me),G();break;case 26:case 27:case 5:Q(e);break;case 4:G();break;case 13:En(e);break;case 19:I(ye);break;case 10:vn(e.type);break;case 22:case 23:En(e),Wr(),t!==null&&I(cs);break;case 24:vn(me)}}function Di(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var o=s.next;n=o;do{if((n.tag&t)===t){s=void 0;var f=n.create,j=n.inst;s=f(),j.destroy=s}n=n.next}while(n!==o)}}catch($){se(e,e.return,$)}}function Fn(t,e,n){try{var s=e.updateQueue,o=s!==null?s.lastEffect:null;if(o!==null){var f=o.next;s=f;do{if((s.tag&t)===t){var j=s.inst,$=j.destroy;if($!==void 0){j.destroy=void 0,o=e;var tt=n,ft=$;try{ft()}catch(vt){se(o,tt,vt)}}}s=s.next}while(s!==f)}}catch(vt){se(e,e.return,vt)}}function ku(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{bc(e,n)}catch(s){se(t,t.return,s)}}}function ju(t,e,n){n.props=ds(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){se(t,e,s)}}function Pi(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(o){se(t,e,o)}}function cn(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(o){se(t,e,o)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){se(t,e,o)}else n.current=null}function Lu(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break t;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(o){se(t,t.return,o)}}function Ao(t,e,n){try{var s=t.stateNode;Mf(s,t.type,n,e),s[xe]=e}catch(o){se(t,t.return,o)}}function Nu(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&$n(t.type)||t.tag===4}function To(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Nu(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&$n(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ro(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$a));else if(s!==4&&(s===27&&$n(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Ro(t,e,n),t=t.sibling;t!==null;)Ro(t,e,n),t=t.sibling}function ja(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&$n(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(ja(t,e,n),t=t.sibling;t!==null;)ja(t,e,n),t=t.sibling}function Fu(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,o=e.attributes;o.length;)e.removeAttributeNode(o[0]);we(e,s,n),e[fe]=t,e[xe]=n}catch(f){se(t,t.return,f)}}var An=!1,he=!1,wo=!1,Uu=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function cf(t,e){if(t=t.containerInfo,Qo=Za,t=Wl(t),Ar(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var o=s.anchorOffset,f=s.focusNode;s=s.focusOffset;try{n.nodeType,f.nodeType}catch{n=null;break t}var j=0,$=-1,tt=-1,ft=0,vt=0,_t=t,gt=null;e:for(;;){for(var mt;_t!==n||o!==0&&_t.nodeType!==3||($=j+o),_t!==f||s!==0&&_t.nodeType!==3||(tt=j+s),_t.nodeType===3&&(j+=_t.nodeValue.length),(mt=_t.firstChild)!==null;)gt=_t,_t=mt;for(;;){if(_t===t)break e;if(gt===n&&++ft===o&&($=j),gt===f&&++vt===s&&(tt=j),(mt=_t.nextSibling)!==null)break;_t=gt,gt=_t.parentNode}_t=mt}n=$===-1||tt===-1?null:{start:$,end:tt}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zo={focusedElem:t,selectionRange:n},Za=!1,Ee=e;Ee!==null;)if(e=Ee,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,Ee=t;else for(;Ee!==null;){switch(e=Ee,f=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,n=e,o=f.memoizedProps,f=f.memoizedState,s=n.stateNode;try{var Nt=ds(n.type,o,n.elementType===n.type);t=s.getSnapshotBeforeUpdate(Nt,f),s.__reactInternalSnapshotBeforeUpdate=t}catch(jt){se(n,n.return,jt)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)el(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":el(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=e.sibling,t!==null){t.return=e.return,Ee=t;break}Ee=e.return}}function Iu(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:Un(t,n),s&4&&Di(5,n);break;case 1:if(Un(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(j){se(n,n.return,j)}else{var o=ds(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(o,e,t.__reactInternalSnapshotBeforeUpdate)}catch(j){se(n,n.return,j)}}s&64&&ku(n),s&512&&Pi(n,n.return);break;case 3:if(Un(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{bc(t,e)}catch(j){se(n,n.return,j)}}break;case 27:e===null&&s&4&&Fu(n);case 26:case 5:Un(t,n),e===null&&s&4&&Lu(n),s&512&&Pi(n,n.return);break;case 12:Un(t,n);break;case 13:Un(t,n),s&4&&zu(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=xf.bind(null,n),Nf(t,n))));break;case 22:if(s=n.memoizedState!==null||An,!s){e=e!==null&&e.memoizedState!==null||he,o=An;var f=he;An=s,(he=e)&&!f?In(t,n,(n.subtreeFlags&8772)!==0):Un(t,n),An=o,he=f}break;case 30:break;default:Un(t,n)}}function Bu(t){var e=t.alternate;e!==null&&(t.alternate=null,Bu(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&ar(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var re=null,Le=!1;function Tn(t,e,n){for(n=n.child;n!==null;)Hu(t,e,n),n=n.sibling}function Hu(t,e,n){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount($t,n)}catch{}switch(n.tag){case 26:he||cn(n,e),Tn(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:he||cn(n,e);var s=re,o=Le;$n(n.type)&&(re=n.stateNode,Le=!1),Tn(t,e,n),Bi(n.stateNode),re=s,Le=o;break;case 5:he||cn(n,e);case 6:if(s=re,o=Le,re=null,Tn(t,e,n),re=s,Le=o,re!==null)if(Le)try{(re.nodeType===9?re.body:re.nodeName==="HTML"?re.ownerDocument.body:re).removeChild(n.stateNode)}catch(f){se(n,e,f)}else try{re.removeChild(n.stateNode)}catch(f){se(n,e,f)}break;case 18:re!==null&&(Le?(t=re,Md(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Yi(t)):Md(re,n.stateNode));break;case 4:s=re,o=Le,re=n.stateNode.containerInfo,Le=!0,Tn(t,e,n),re=s,Le=o;break;case 0:case 11:case 14:case 15:he||Fn(2,n,e),he||Fn(4,n,e),Tn(t,e,n);break;case 1:he||(cn(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&ju(n,e,s)),Tn(t,e,n);break;case 21:Tn(t,e,n);break;case 22:he=(s=he)||n.memoizedState!==null,Tn(t,e,n),he=s;break;default:Tn(t,e,n)}}function zu(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Yi(t)}catch(n){se(e,e.return,n)}}function uf(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Uu),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Uu),e;default:throw Error(i(435,t.tag))}}function Co(t,e){var n=uf(t);e.forEach(function(s){var o=vf.bind(null,t,s);n.has(s)||(n.add(s),s.then(o,o))})}function Be(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var o=n[s],f=t,j=e,$=j;t:for(;$!==null;){switch($.tag){case 27:if($n($.type)){re=$.stateNode,Le=!1;break t}break;case 5:re=$.stateNode,Le=!1;break t;case 3:case 4:re=$.stateNode.containerInfo,Le=!0;break t}$=$.return}if(re===null)throw Error(i(160));Hu(f,j,o),re=null,Le=!1,f=o.alternate,f!==null&&(f.return=null),o.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)qu(e,t),e=e.sibling}var an=null;function qu(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Be(e,t),He(t),s&4&&(Fn(3,t,t.return),Di(3,t),Fn(5,t,t.return));break;case 1:Be(e,t),He(t),s&512&&(he||n===null||cn(n,n.return)),s&64&&An&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var o=an;if(Be(e,t),He(t),s&512&&(he||n===null||cn(n,n.return)),s&4){var f=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){t:{s=t.type,n=t.memoizedProps,o=o.ownerDocument||o;e:switch(s){case"title":f=o.getElementsByTagName("title")[0],(!f||f[ei]||f[fe]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=o.createElement(s),o.head.insertBefore(f,o.querySelector("head > title"))),we(f,s,n),f[fe]=t,ve(f),s=f;break t;case"link":var j=Fd("link","href",o).get(s+(n.href||""));if(j){for(var $=0;$<j.length;$++)if(f=j[$],f.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&f.getAttribute("rel")===(n.rel==null?null:n.rel)&&f.getAttribute("title")===(n.title==null?null:n.title)&&f.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){j.splice($,1);break e}}f=o.createElement(s),we(f,s,n),o.head.appendChild(f);break;case"meta":if(j=Fd("meta","content",o).get(s+(n.content||""))){for($=0;$<j.length;$++)if(f=j[$],f.getAttribute("content")===(n.content==null?null:""+n.content)&&f.getAttribute("name")===(n.name==null?null:n.name)&&f.getAttribute("property")===(n.property==null?null:n.property)&&f.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&f.getAttribute("charset")===(n.charSet==null?null:n.charSet)){j.splice($,1);break e}}f=o.createElement(s),we(f,s,n),o.head.appendChild(f);break;default:throw Error(i(468,s))}f[fe]=t,ve(f),s=f}t.stateNode=s}else Ud(o,t.type,t.stateNode);else t.stateNode=Nd(o,s,t.memoizedProps);else f!==s?(f===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):f.count--,s===null?Ud(o,t.type,t.stateNode):Nd(o,s,t.memoizedProps)):s===null&&t.stateNode!==null&&Ao(t,t.memoizedProps,n.memoizedProps)}break;case 27:Be(e,t),He(t),s&512&&(he||n===null||cn(n,n.return)),n!==null&&s&4&&Ao(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Be(e,t),He(t),s&512&&(he||n===null||cn(n,n.return)),t.flags&32){o=t.stateNode;try{_s(o,"")}catch(mt){se(t,t.return,mt)}}s&4&&t.stateNode!=null&&(o=t.memoizedProps,Ao(t,o,n!==null?n.memoizedProps:o)),s&1024&&(wo=!0);break;case 6:if(Be(e,t),He(t),s&4){if(t.stateNode===null)throw Error(i(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(mt){se(t,t.return,mt)}}break;case 3:if(Wa=null,o=an,an=Xa(e.containerInfo),Be(e,t),an=o,He(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Yi(e.containerInfo)}catch(mt){se(t,t.return,mt)}wo&&(wo=!1,Gu(t));break;case 4:s=an,an=Xa(t.stateNode.containerInfo),Be(e,t),He(t),an=s;break;case 12:Be(e,t),He(t);break;case 13:Be(e,t),He(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(jo=ht()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Co(t,s)));break;case 22:o=t.memoizedState!==null;var tt=n!==null&&n.memoizedState!==null,ft=An,vt=he;if(An=ft||o,he=vt||tt,Be(e,t),he=vt,An=ft,He(t),s&8192)t:for(e=t.stateNode,e._visibility=o?e._visibility&-2:e._visibility|1,o&&(n===null||tt||An||he||hs(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){tt=n=e;try{if(f=tt.stateNode,o)j=f.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{$=tt.stateNode;var _t=tt.memoizedProps.style,gt=_t!=null&&_t.hasOwnProperty("display")?_t.display:null;$.style.display=gt==null||typeof gt=="boolean"?"":(""+gt).trim()}}catch(mt){se(tt,tt.return,mt)}}}else if(e.tag===6){if(n===null){tt=e;try{tt.stateNode.nodeValue=o?"":tt.memoizedProps}catch(mt){se(tt,tt.return,mt)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,Co(t,n))));break;case 19:Be(e,t),He(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Co(t,s)));break;case 30:break;case 21:break;default:Be(e,t),He(t)}}function He(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(Nu(s)){n=s;break}s=s.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var o=n.stateNode,f=To(t);ja(t,f,o);break;case 5:var j=n.stateNode;n.flags&32&&(_s(j,""),n.flags&=-33);var $=To(t);ja(t,$,j);break;case 3:case 4:var tt=n.stateNode.containerInfo,ft=To(t);Ro(t,ft,tt);break;default:throw Error(i(161))}}catch(vt){se(t,t.return,vt)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Gu(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Gu(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Un(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Iu(t,e.alternate,e),e=e.sibling}function hs(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Fn(4,e,e.return),hs(e);break;case 1:cn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&ju(e,e.return,n),hs(e);break;case 27:Bi(e.stateNode);case 26:case 5:cn(e,e.return),hs(e);break;case 22:e.memoizedState===null&&hs(e);break;case 30:hs(e);break;default:hs(e)}t=t.sibling}}function In(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,o=t,f=e,j=f.flags;switch(f.tag){case 0:case 11:case 15:In(o,f,n),Di(4,f);break;case 1:if(In(o,f,n),s=f,o=s.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(ft){se(s,s.return,ft)}if(s=f,o=s.updateQueue,o!==null){var $=s.stateNode;try{var tt=o.shared.hiddenCallbacks;if(tt!==null)for(o.shared.hiddenCallbacks=null,o=0;o<tt.length;o++)vc(tt[o],$)}catch(ft){se(s,s.return,ft)}}n&&j&64&&ku(f),Pi(f,f.return);break;case 27:Fu(f);case 26:case 5:In(o,f,n),n&&s===null&&j&4&&Lu(f),Pi(f,f.return);break;case 12:In(o,f,n);break;case 13:In(o,f,n),n&&j&4&&zu(o,f);break;case 22:f.memoizedState===null&&In(o,f,n),Pi(f,f.return);break;case 30:break;default:In(o,f,n)}e=e.sibling}}function Mo(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&mi(n))}function Do(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&mi(t))}function un(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)$u(t,e,n,s),e=e.sibling}function $u(t,e,n,s){var o=e.flags;switch(e.tag){case 0:case 11:case 15:un(t,e,n,s),o&2048&&Di(9,e);break;case 1:un(t,e,n,s);break;case 3:un(t,e,n,s),o&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&mi(t)));break;case 12:if(o&2048){un(t,e,n,s),t=e.stateNode;try{var f=e.memoizedProps,j=f.id,$=f.onPostCommit;typeof $=="function"&&$(j,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(tt){se(e,e.return,tt)}}else un(t,e,n,s);break;case 13:un(t,e,n,s);break;case 23:break;case 22:f=e.stateNode,j=e.alternate,e.memoizedState!==null?f._visibility&2?un(t,e,n,s):Oi(t,e):f._visibility&2?un(t,e,n,s):(f._visibility|=2,Hs(t,e,n,s,(e.subtreeFlags&10256)!==0)),o&2048&&Mo(j,e);break;case 24:un(t,e,n,s),o&2048&&Do(e.alternate,e);break;default:un(t,e,n,s)}}function Hs(t,e,n,s,o){for(o=o&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var f=t,j=e,$=n,tt=s,ft=j.flags;switch(j.tag){case 0:case 11:case 15:Hs(f,j,$,tt,o),Di(8,j);break;case 23:break;case 22:var vt=j.stateNode;j.memoizedState!==null?vt._visibility&2?Hs(f,j,$,tt,o):Oi(f,j):(vt._visibility|=2,Hs(f,j,$,tt,o)),o&&ft&2048&&Mo(j.alternate,j);break;case 24:Hs(f,j,$,tt,o),o&&ft&2048&&Do(j.alternate,j);break;default:Hs(f,j,$,tt,o)}e=e.sibling}}function Oi(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,o=s.flags;switch(s.tag){case 22:Oi(n,s),o&2048&&Mo(s.alternate,s);break;case 24:Oi(n,s),o&2048&&Do(s.alternate,s);break;default:Oi(n,s)}e=e.sibling}}var ki=8192;function zs(t){if(t.subtreeFlags&ki)for(t=t.child;t!==null;)Vu(t),t=t.sibling}function Vu(t){switch(t.tag){case 26:zs(t),t.flags&ki&&t.memoizedState!==null&&Wf(an,t.memoizedState,t.memoizedProps);break;case 5:zs(t);break;case 3:case 4:var e=an;an=Xa(t.stateNode.containerInfo),zs(t),an=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=ki,ki=16777216,zs(t),ki=e):zs(t));break;default:zs(t)}}function Xu(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function ji(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Ee=s,Wu(s,t)}Xu(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Yu(t),t=t.sibling}function Yu(t){switch(t.tag){case 0:case 11:case 15:ji(t),t.flags&2048&&Fn(9,t,t.return);break;case 3:ji(t);break;case 12:ji(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,La(t)):ji(t);break;default:ji(t)}}function La(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Ee=s,Wu(s,t)}Xu(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Fn(8,e,e.return),La(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,La(e));break;default:La(e)}t=t.sibling}}function Wu(t,e){for(;Ee!==null;){var n=Ee;switch(n.tag){case 0:case 11:case 15:Fn(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:mi(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Ee=s;else t:for(n=t;Ee!==null;){s=Ee;var o=s.sibling,f=s.return;if(Bu(s),s===n){Ee=null;break t}if(o!==null){o.return=f,Ee=o;break t}Ee=f}}}var df={getCacheForType:function(t){var e=Ce(me),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},hf=typeof WeakMap=="function"?WeakMap:Map,Qt=0,ie=null,qt=null,Vt=0,Zt=0,ze=null,Bn=!1,qs=!1,Po=!1,Rn=0,ce=0,Hn=0,fs=0,Oo=0,en=0,Gs=0,Li=null,Ne=null,ko=!1,jo=0,Na=1/0,Fa=null,zn=null,Re=0,qn=null,$s=null,Vs=0,Lo=0,No=null,Ku=null,Ni=0,Fo=null;function qe(){if((Qt&2)!==0&&Vt!==0)return Vt&-Vt;if(W.T!==null){var t=ks;return t!==0?t:Go()}return ue()}function Qu(){en===0&&(en=(Vt&536870912)===0||Wt?It():536870912);var t=tn.current;return t!==null&&(t.flags|=32),en}function Ge(t,e,n){(t===ie&&(Zt===2||Zt===9)||t.cancelPendingCommit!==null)&&(Xs(t,0),Gn(t,Vt,en,!1)),Xt(t,n),((Qt&2)===0||t!==ie)&&(t===ie&&((Qt&2)===0&&(fs|=n),ce===4&&Gn(t,Vt,en,!1)),dn(t))}function Zu(t,e,n){if((Qt&6)!==0)throw Error(i(327));var s=!n&&(e&124)===0&&(e&t.expiredLanes)===0||xt(t,e),o=s?gf(t,e):Bo(t,e,!0),f=s;do{if(o===0){qs&&!s&&Gn(t,e,0,!1);break}else{if(n=t.current.alternate,f&&!ff(n)){o=Bo(t,e,!1),f=!1;continue}if(o===2){if(f=e,t.errorRecoveryDisabledLanes&f)var j=0;else j=t.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){e=j;t:{var $=t;o=Li;var tt=$.current.memoizedState.isDehydrated;if(tt&&(Xs($,j).flags|=256),j=Bo($,j,!1),j!==2){if(Po&&!tt){$.errorRecoveryDisabledLanes|=f,fs|=f,o=4;break t}f=Ne,Ne=o,f!==null&&(Ne===null?Ne=f:Ne.push.apply(Ne,f))}o=j}if(f=!1,o!==2)continue}}if(o===1){Xs(t,0),Gn(t,e,0,!0);break}t:{switch(s=t,f=o,f){case 0:case 1:throw Error(i(345));case 4:if((e&4194048)!==e)break;case 6:Gn(s,e,en,!Bn);break t;case 2:Ne=null;break;case 3:case 5:break;default:throw Error(i(329))}if((e&62914560)===e&&(o=jo+300-ht(),10<o)){if(Gn(s,e,en,!Bn),J(s,0,!0)!==0)break t;s.timeoutHandle=wd(Ju.bind(null,s,n,Ne,Fa,ko,e,en,fs,Gs,Bn,f,2,-0,0),o);break t}Ju(s,n,Ne,Fa,ko,e,en,fs,Gs,Bn,f,0,-0,0)}}break}while(!0);dn(t)}function Ju(t,e,n,s,o,f,j,$,tt,ft,vt,_t,gt,mt){if(t.timeoutHandle=-1,_t=e.subtreeFlags,(_t&8192||(_t&16785408)===16785408)&&(qi={stylesheets:null,count:0,unsuspend:Yf},Vu(e),_t=Kf(),_t!==null)){t.cancelPendingCommit=_t(rd.bind(null,t,e,f,n,s,o,j,$,tt,vt,1,gt,mt)),Gn(t,f,j,!ft);return}rd(t,e,f,n,s,o,j,$,tt)}function ff(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var o=n[s],f=o.getSnapshot;o=o.value;try{if(!Ue(f(),o))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gn(t,e,n,s){e&=~Oo,e&=~fs,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var o=e;0<o;){var f=31-Bt(o),j=1<<f;s[f]=-1,o&=~j}n!==0&&ae(t,n,e)}function Ua(){return(Qt&6)===0?(Fi(0),!1):!0}function Uo(){if(qt!==null){if(Zt===0)var t=qt.return;else t=qt,xn=os=null,to(t),Is=null,wi=0,t=qt;for(;t!==null;)Ou(t.alternate,t),t=t.return;qt=null}}function Xs(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,Pf(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Uo(),ie=t,qt=n=gn(t.current,null),Vt=e,Zt=0,ze=null,Bn=!1,qs=xt(t,e),Po=!1,Gs=en=Oo=fs=Hn=ce=0,Ne=Li=null,ko=!1,(e&8)!==0&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var o=31-Bt(s),f=1<<o;e|=t[o],s&=~f}return Rn=e,ra(),n}function td(t,e){Ht=null,W.H=Ta,e===xi||e===ga?(e=yc(),Zt=3):e===pc?(e=yc(),Zt=4):Zt=e===xu?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,ze=e,qt===null&&(ce=1,Da(t,Ke(e,t.current)))}function ed(){var t=W.H;return W.H=Ta,t===null?Ta:t}function nd(){var t=W.A;return W.A=df,t}function Io(){ce=4,Bn||(Vt&4194048)!==Vt&&tn.current!==null||(qs=!0),(Hn&134217727)===0&&(fs&134217727)===0||ie===null||Gn(ie,Vt,en,!1)}function Bo(t,e,n){var s=Qt;Qt|=2;var o=ed(),f=nd();(ie!==t||Vt!==e)&&(Fa=null,Xs(t,e)),e=!1;var j=ce;t:do try{if(Zt!==0&&qt!==null){var $=qt,tt=ze;switch(Zt){case 8:Uo(),j=6;break t;case 3:case 2:case 9:case 6:tn.current===null&&(e=!0);var ft=Zt;if(Zt=0,ze=null,Ys(t,$,tt,ft),n&&qs){j=0;break t}break;default:ft=Zt,Zt=0,ze=null,Ys(t,$,tt,ft)}}pf(),j=ce;break}catch(vt){td(t,vt)}while(!0);return e&&t.shellSuspendCounter++,xn=os=null,Qt=s,W.H=o,W.A=f,qt===null&&(ie=null,Vt=0,ra()),j}function pf(){for(;qt!==null;)sd(qt)}function gf(t,e){var n=Qt;Qt|=2;var s=ed(),o=nd();ie!==t||Vt!==e?(Fa=null,Na=ht()+500,Xs(t,e)):qs=xt(t,e);t:do try{if(Zt!==0&&qt!==null){e=qt;var f=ze;e:switch(Zt){case 1:Zt=0,ze=null,Ys(t,e,f,1);break;case 2:case 9:if(gc(f)){Zt=0,ze=null,id(e);break}e=function(){Zt!==2&&Zt!==9||ie!==t||(Zt=7),dn(t)},f.then(e,e);break t;case 3:Zt=7;break t;case 4:Zt=5;break t;case 7:gc(f)?(Zt=0,ze=null,id(e)):(Zt=0,ze=null,Ys(t,e,f,7));break;case 5:var j=null;switch(qt.tag){case 26:j=qt.memoizedState;case 5:case 27:var $=qt;if(!j||Id(j)){Zt=0,ze=null;var tt=$.sibling;if(tt!==null)qt=tt;else{var ft=$.return;ft!==null?(qt=ft,Ia(ft)):qt=null}break e}}Zt=0,ze=null,Ys(t,e,f,5);break;case 6:Zt=0,ze=null,Ys(t,e,f,6);break;case 8:Uo(),ce=6;break t;default:throw Error(i(462))}}mf();break}catch(vt){td(t,vt)}while(!0);return xn=os=null,W.H=s,W.A=o,Qt=n,qt!==null?0:(ie=null,Vt=0,ra(),ce)}function mf(){for(;qt!==null&&!ct();)sd(qt)}function sd(t){var e=Du(t.alternate,t,Rn);t.memoizedProps=t.pendingProps,e===null?Ia(t):qt=e}function id(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=Au(n,e,e.pendingProps,e.type,void 0,Vt);break;case 11:e=Au(n,e,e.pendingProps,e.type.render,e.ref,Vt);break;case 5:to(e);default:Ou(n,e),e=qt=ac(e,Rn),e=Du(n,e,Rn)}t.memoizedProps=t.pendingProps,e===null?Ia(t):qt=e}function Ys(t,e,n,s){xn=os=null,to(e),Is=null,wi=0;var o=e.return;try{if(af(t,o,e,n,Vt)){ce=1,Da(t,Ke(n,t.current)),qt=null;return}}catch(f){if(o!==null)throw qt=o,f;ce=1,Da(t,Ke(n,t.current)),qt=null;return}e.flags&32768?(Wt||s===1?t=!0:qs||(Vt&536870912)!==0?t=!1:(Bn=t=!0,(s===2||s===9||s===3||s===6)&&(s=tn.current,s!==null&&s.tag===13&&(s.flags|=16384))),ad(e,t)):Ia(e)}function Ia(t){var e=t;do{if((e.flags&32768)!==0){ad(e,Bn);return}t=e.return;var n=of(e.alternate,e,Rn);if(n!==null){qt=n;return}if(e=e.sibling,e!==null){qt=e;return}qt=e=t}while(e!==null);ce===0&&(ce=5)}function ad(t,e){do{var n=lf(t.alternate,t);if(n!==null){n.flags&=32767,qt=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){qt=t;return}qt=t=n}while(t!==null);ce=6,qt=null}function rd(t,e,n,s,o,f,j,$,tt){t.cancelPendingCommit=null;do Ba();while(Re!==0);if((Qt&6)!==0)throw Error(i(327));if(e!==null){if(e===t.current)throw Error(i(177));if(f=e.lanes|e.childLanes,f|=Mr,Se(t,n,f,j,$,tt),t===ie&&(qt=ie=null,Vt=0),$s=e,qn=t,Vs=n,Lo=f,No=o,Ku=s,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,bf(wt,function(){return dd(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||s){s=W.T,W.T=null,o=F.p,F.p=2,j=Qt,Qt|=4;try{cf(t,e,n)}finally{Qt=j,F.p=o,W.T=s}}Re=1,od(),ld(),cd()}}function od(){if(Re===1){Re=0;var t=qn,e=$s,n=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||n){n=W.T,W.T=null;var s=F.p;F.p=2;var o=Qt;Qt|=4;try{qu(e,t);var f=Zo,j=Wl(t.containerInfo),$=f.focusedElem,tt=f.selectionRange;if(j!==$&&$&&$.ownerDocument&&Yl($.ownerDocument.documentElement,$)){if(tt!==null&&Ar($)){var ft=tt.start,vt=tt.end;if(vt===void 0&&(vt=ft),"selectionStart"in $)$.selectionStart=ft,$.selectionEnd=Math.min(vt,$.value.length);else{var _t=$.ownerDocument||document,gt=_t&&_t.defaultView||window;if(gt.getSelection){var mt=gt.getSelection(),Nt=$.textContent.length,jt=Math.min(tt.start,Nt),ne=tt.end===void 0?jt:Math.min(tt.end,Nt);!mt.extend&&jt>ne&&(j=ne,ne=jt,jt=j);var rt=Xl($,jt),st=Xl($,ne);if(rt&&st&&(mt.rangeCount!==1||mt.anchorNode!==rt.node||mt.anchorOffset!==rt.offset||mt.focusNode!==st.node||mt.focusOffset!==st.offset)){var ut=_t.createRange();ut.setStart(rt.node,rt.offset),mt.removeAllRanges(),jt>ne?(mt.addRange(ut),mt.extend(st.node,st.offset)):(ut.setEnd(st.node,st.offset),mt.addRange(ut))}}}}for(_t=[],mt=$;mt=mt.parentNode;)mt.nodeType===1&&_t.push({element:mt,left:mt.scrollLeft,top:mt.scrollTop});for(typeof $.focus=="function"&&$.focus(),$=0;$<_t.length;$++){var bt=_t[$];bt.element.scrollLeft=bt.left,bt.element.scrollTop=bt.top}}Za=!!Qo,Zo=Qo=null}finally{Qt=o,F.p=s,W.T=n}}t.current=e,Re=2}}function ld(){if(Re===2){Re=0;var t=qn,e=$s,n=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||n){n=W.T,W.T=null;var s=F.p;F.p=2;var o=Qt;Qt|=4;try{Iu(t,e.alternate,e)}finally{Qt=o,F.p=s,W.T=n}}Re=3}}function cd(){if(Re===4||Re===3){Re=0,dt();var t=qn,e=$s,n=Vs,s=Ku;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?Re=5:(Re=0,$s=qn=null,ud(t,t.pendingLanes));var o=t.pendingLanes;if(o===0&&(zn=null),Cn(n),e=e.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot($t,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=W.T,o=F.p,F.p=2,W.T=null;try{for(var f=t.onRecoverableError,j=0;j<s.length;j++){var $=s[j];f($.value,{componentStack:$.stack})}}finally{W.T=e,F.p=o}}(Vs&3)!==0&&Ba(),dn(t),o=t.pendingLanes,(n&4194090)!==0&&(o&42)!==0?t===Fo?Ni++:(Ni=0,Fo=t):Ni=0,Fi(0)}}function ud(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,mi(e)))}function Ba(t){return od(),ld(),cd(),dd()}function dd(){if(Re!==5)return!1;var t=qn,e=Lo;Lo=0;var n=Cn(Vs),s=W.T,o=F.p;try{F.p=32>n?32:n,W.T=null,n=No,No=null;var f=qn,j=Vs;if(Re=0,$s=qn=null,Vs=0,(Qt&6)!==0)throw Error(i(331));var $=Qt;if(Qt|=4,Yu(f.current),$u(f,f.current,j,n),Qt=$,Fi(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot($t,f)}catch{}return!0}finally{F.p=o,W.T=s,ud(t,e)}}function hd(t,e,n){e=Ke(n,e),e=go(t.stateNode,e,2),t=kn(t,e,2),t!==null&&(Xt(t,2),dn(t))}function se(t,e,n){if(t.tag===3)hd(t,t,n);else for(;e!==null;){if(e.tag===3){hd(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(zn===null||!zn.has(s))){t=Ke(n,t),n=mu(2),s=kn(e,n,2),s!==null&&(yu(n,s,e,t),Xt(s,2),dn(s));break}}e=e.return}}function Ho(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new hf;var o=new Set;s.set(e,o)}else o=s.get(e),o===void 0&&(o=new Set,s.set(e,o));o.has(n)||(Po=!0,o.add(n),t=yf.bind(null,t,e,n),e.then(t,t))}function yf(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,ie===t&&(Vt&n)===n&&(ce===4||ce===3&&(Vt&62914560)===Vt&&300>ht()-jo?(Qt&2)===0&&Xs(t,0):Oo|=n,Gs===Vt&&(Gs=0)),dn(t)}function fd(t,e){e===0&&(e=Ot()),t=Ms(t,e),t!==null&&(Xt(t,e),dn(t))}function xf(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fd(t,n)}function vf(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(i(314))}s!==null&&s.delete(e),fd(t,n)}function bf(t,e){return ot(t,e)}var Ha=null,Ws=null,zo=!1,za=!1,qo=!1,ps=0;function dn(t){t!==Ws&&t.next===null&&(Ws===null?Ha=Ws=t:Ws=Ws.next=t),za=!0,zo||(zo=!0,_f())}function Fi(t,e){if(!qo&&za){qo=!0;do for(var n=!1,s=Ha;s!==null;){if(t!==0){var o=s.pendingLanes;if(o===0)var f=0;else{var j=s.suspendedLanes,$=s.pingedLanes;f=(1<<31-Bt(42|t)+1)-1,f&=o&~(j&~$),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(n=!0,yd(s,f))}else f=Vt,f=J(s,s===ie?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(f&3)===0||xt(s,f)||(n=!0,yd(s,f));s=s.next}while(n);qo=!1}}function Ef(){pd()}function pd(){za=zo=!1;var t=0;ps!==0&&(Df()&&(t=ps),ps=0);for(var e=ht(),n=null,s=Ha;s!==null;){var o=s.next,f=gd(s,e);f===0?(s.next=null,n===null?Ha=o:n.next=o,o===null&&(Ws=n)):(n=s,(t!==0||(f&3)!==0)&&(za=!0)),s=o}Fi(t)}function gd(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,o=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var j=31-Bt(f),$=1<<j,tt=o[j];tt===-1?(($&n)===0||($&s)!==0)&&(o[j]=Tt($,e)):tt<=e&&(t.expiredLanes|=$),f&=~$}if(e=ie,n=Vt,n=J(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(Zt===2||Zt===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&At(s),t.callbackNode=null,t.callbackPriority=0;if((n&3)===0||xt(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&At(s),Cn(n)){case 2:case 8:n=Rt;break;case 32:n=wt;break;case 268435456:n=kt;break;default:n=wt}return s=md.bind(null,t),n=ot(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&At(s),t.callbackPriority=2,t.callbackNode=null,2}function md(t,e){if(Re!==0&&Re!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Ba()&&t.callbackNode!==n)return null;var s=Vt;return s=J(t,t===ie?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(Zu(t,s,e),gd(t,ht()),t.callbackNode!=null&&t.callbackNode===n?md.bind(null,t):null)}function yd(t,e){if(Ba())return null;Zu(t,e,!0)}function _f(){Of(function(){(Qt&6)!==0?ot(Et,Ef):pd()})}function Go(){return ps===0&&(ps=It()),ps}function xd(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ji(""+t)}function vd(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function Sf(t,e,n,s,o){if(e==="submit"&&n&&n.stateNode===o){var f=xd((o[xe]||null).action),j=s.submitter;j&&(e=(e=j[xe]||null)?xd(e.formAction):j.getAttribute("formAction"),e!==null&&(f=e,j=null));var $=new sa("action","action",null,s,o);t.push({event:$,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(ps!==0){var tt=j?vd(o,j):new FormData(o);co(n,{pending:!0,data:tt,method:o.method,action:f},null,tt)}}else typeof f=="function"&&($.preventDefault(),tt=j?vd(o,j):new FormData(o),co(n,{pending:!0,data:tt,method:o.method,action:f},f,tt))},currentTarget:o}]})}}for(var $o=0;$o<Cr.length;$o++){var Vo=Cr[$o],Af=Vo.toLowerCase(),Tf=Vo[0].toUpperCase()+Vo.slice(1);sn(Af,"on"+Tf)}sn(Zl,"onAnimationEnd"),sn(Jl,"onAnimationIteration"),sn(tc,"onAnimationStart"),sn("dblclick","onDoubleClick"),sn("focusin","onFocus"),sn("focusout","onBlur"),sn(Hh,"onTransitionRun"),sn(zh,"onTransitionStart"),sn(qh,"onTransitionCancel"),sn(ec,"onTransitionEnd"),vs("onMouseEnter",["mouseout","mouseover"]),vs("onMouseLeave",["mouseout","mouseover"]),vs("onPointerEnter",["pointerout","pointerover"]),vs("onPointerLeave",["pointerout","pointerover"]),Zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ui="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rf=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ui));function bd(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],o=s.event;s=s.listeners;t:{var f=void 0;if(e)for(var j=s.length-1;0<=j;j--){var $=s[j],tt=$.instance,ft=$.currentTarget;if($=$.listener,tt!==f&&o.isPropagationStopped())break t;f=$,o.currentTarget=ft;try{f(o)}catch(vt){Ma(vt)}o.currentTarget=null,f=tt}else for(j=0;j<s.length;j++){if($=s[j],tt=$.instance,ft=$.currentTarget,$=$.listener,tt!==f&&o.isPropagationStopped())break t;f=$,o.currentTarget=ft;try{f(o)}catch(vt){Ma(vt)}o.currentTarget=null,f=tt}}}}function Gt(t,e){var n=e[Ae];n===void 0&&(n=e[Ae]=new Set);var s=t+"__bubble";n.has(s)||(Ed(e,t,2,!1),n.add(s))}function Xo(t,e,n){var s=0;e&&(s|=4),Ed(n,t,s,e)}var qa="_reactListening"+Math.random().toString(36).slice(2);function Yo(t){if(!t[qa]){t[qa]=!0,pl.forEach(function(n){n!=="selectionchange"&&(Rf.has(n)||Xo(n,!1,t),Xo(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qa]||(e[qa]=!0,Xo("selectionchange",!1,e))}}function Ed(t,e,n,s){switch($d(e)){case 2:var o=Jf;break;case 8:o=tp;break;default:o=ll}n=o.bind(null,e,n,t),o=void 0,!gr||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),s?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Wo(t,e,n,s,o){var f=s;if((e&1)===0&&(e&2)===0&&s!==null)t:for(;;){if(s===null)return;var j=s.tag;if(j===3||j===4){var $=s.stateNode.containerInfo;if($===o)break;if(j===4)for(j=s.return;j!==null;){var tt=j.tag;if((tt===3||tt===4)&&j.stateNode.containerInfo===o)return;j=j.return}for(;$!==null;){if(j=ms($),j===null)return;if(tt=j.tag,tt===5||tt===6||tt===26||tt===27){s=f=j;continue t}$=$.parentNode}}s=s.return}Cl(function(){var ft=f,vt=fr(n),_t=[];t:{var gt=nc.get(t);if(gt!==void 0){var mt=sa,Nt=t;switch(t){case"keypress":if(ea(n)===0)break t;case"keydown":case"keyup":mt=vh;break;case"focusin":Nt="focus",mt=vr;break;case"focusout":Nt="blur",mt=vr;break;case"beforeblur":case"afterblur":mt=vr;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=Pl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=oh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=_h;break;case Zl:case Jl:case tc:mt=uh;break;case ec:mt=Ah;break;case"scroll":case"scrollend":mt=ah;break;case"wheel":mt=Rh;break;case"copy":case"cut":case"paste":mt=hh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=kl;break;case"toggle":case"beforetoggle":mt=Ch}var jt=(e&4)!==0,ne=!jt&&(t==="scroll"||t==="scrollend"),rt=jt?gt!==null?gt+"Capture":null:gt;jt=[];for(var st=ft,ut;st!==null;){var bt=st;if(ut=bt.stateNode,bt=bt.tag,bt!==5&&bt!==26&&bt!==27||ut===null||rt===null||(bt=si(st,rt),bt!=null&&jt.push(Ii(st,bt,ut))),ne)break;st=st.return}0<jt.length&&(gt=new mt(gt,Nt,null,n,vt),_t.push({event:gt,listeners:jt}))}}if((e&7)===0){t:{if(gt=t==="mouseover"||t==="pointerover",mt=t==="mouseout"||t==="pointerout",gt&&n!==hr&&(Nt=n.relatedTarget||n.fromElement)&&(ms(Nt)||Nt[Xe]))break t;if((mt||gt)&&(gt=vt.window===vt?vt:(gt=vt.ownerDocument)?gt.defaultView||gt.parentWindow:window,mt?(Nt=n.relatedTarget||n.toElement,mt=ft,Nt=Nt?ms(Nt):null,Nt!==null&&(ne=E(Nt),jt=Nt.tag,Nt!==ne||jt!==5&&jt!==27&&jt!==6)&&(Nt=null)):(mt=null,Nt=ft),mt!==Nt)){if(jt=Pl,bt="onMouseLeave",rt="onMouseEnter",st="mouse",(t==="pointerout"||t==="pointerover")&&(jt=kl,bt="onPointerLeave",rt="onPointerEnter",st="pointer"),ne=mt==null?gt:ni(mt),ut=Nt==null?gt:ni(Nt),gt=new jt(bt,st+"leave",mt,n,vt),gt.target=ne,gt.relatedTarget=ut,bt=null,ms(vt)===ft&&(jt=new jt(rt,st+"enter",Nt,n,vt),jt.target=ut,jt.relatedTarget=ne,bt=jt),ne=bt,mt&&Nt)e:{for(jt=mt,rt=Nt,st=0,ut=jt;ut;ut=Ks(ut))st++;for(ut=0,bt=rt;bt;bt=Ks(bt))ut++;for(;0<st-ut;)jt=Ks(jt),st--;for(;0<ut-st;)rt=Ks(rt),ut--;for(;st--;){if(jt===rt||rt!==null&&jt===rt.alternate)break e;jt=Ks(jt),rt=Ks(rt)}jt=null}else jt=null;mt!==null&&_d(_t,gt,mt,jt,!1),Nt!==null&&ne!==null&&_d(_t,ne,Nt,jt,!0)}}t:{if(gt=ft?ni(ft):window,mt=gt.nodeName&&gt.nodeName.toLowerCase(),mt==="select"||mt==="input"&&gt.type==="file")var Ct=Hl;else if(Il(gt))if(zl)Ct=Uh;else{Ct=Nh;var zt=Lh}else mt=gt.nodeName,!mt||mt.toLowerCase()!=="input"||gt.type!=="checkbox"&&gt.type!=="radio"?ft&&dr(ft.elementType)&&(Ct=Hl):Ct=Fh;if(Ct&&(Ct=Ct(t,ft))){Bl(_t,Ct,n,vt);break t}zt&&zt(t,gt,ft),t==="focusout"&&ft&&gt.type==="number"&&ft.memoizedProps.value!=null&&ur(gt,"number",gt.value)}switch(zt=ft?ni(ft):window,t){case"focusin":(Il(zt)||zt.contentEditable==="true")&&(Rs=zt,Tr=ft,di=null);break;case"focusout":di=Tr=Rs=null;break;case"mousedown":Rr=!0;break;case"contextmenu":case"mouseup":case"dragend":Rr=!1,Kl(_t,n,vt);break;case"selectionchange":if(Bh)break;case"keydown":case"keyup":Kl(_t,n,vt)}var Pt;if(Er)t:{switch(t){case"compositionstart":var Lt="onCompositionStart";break t;case"compositionend":Lt="onCompositionEnd";break t;case"compositionupdate":Lt="onCompositionUpdate";break t}Lt=void 0}else Ts?Fl(t,n)&&(Lt="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(Lt="onCompositionStart");Lt&&(jl&&n.locale!=="ko"&&(Ts||Lt!=="onCompositionStart"?Lt==="onCompositionEnd"&&Ts&&(Pt=Ml()):(Mn=vt,mr="value"in Mn?Mn.value:Mn.textContent,Ts=!0)),zt=Ga(ft,Lt),0<zt.length&&(Lt=new Ol(Lt,t,null,n,vt),_t.push({event:Lt,listeners:zt}),Pt?Lt.data=Pt:(Pt=Ul(n),Pt!==null&&(Lt.data=Pt)))),(Pt=Dh?Ph(t,n):Oh(t,n))&&(Lt=Ga(ft,"onBeforeInput"),0<Lt.length&&(zt=new Ol("onBeforeInput","beforeinput",null,n,vt),_t.push({event:zt,listeners:Lt}),zt.data=Pt)),Sf(_t,t,ft,n,vt)}bd(_t,e)})}function Ii(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ga(t,e){for(var n=e+"Capture",s=[];t!==null;){var o=t,f=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||f===null||(o=si(t,n),o!=null&&s.unshift(Ii(t,o,f)),o=si(t,e),o!=null&&s.push(Ii(t,o,f))),t.tag===3)return s;t=t.return}return[]}function Ks(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function _d(t,e,n,s,o){for(var f=e._reactName,j=[];n!==null&&n!==s;){var $=n,tt=$.alternate,ft=$.stateNode;if($=$.tag,tt!==null&&tt===s)break;$!==5&&$!==26&&$!==27||ft===null||(tt=ft,o?(ft=si(n,f),ft!=null&&j.unshift(Ii(n,ft,tt))):o||(ft=si(n,f),ft!=null&&j.push(Ii(n,ft,tt)))),n=n.return}j.length!==0&&t.push({event:e,listeners:j})}var wf=/\r\n?/g,Cf=/\u0000|\uFFFD/g;function Sd(t){return(typeof t=="string"?t:""+t).replace(wf,`
`).replace(Cf,"")}function Ad(t,e){return e=Sd(e),Sd(t)===e}function $a(){}function ee(t,e,n,s,o,f){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||_s(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&_s(t,""+s);break;case"className":Ki(t,"class",s);break;case"tabIndex":Ki(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Ki(t,n,s);break;case"style":Rl(t,s,f);break;case"data":if(e!=="object"){Ki(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=Ji(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(n==="formAction"?(e!=="input"&&ee(t,e,"name",o.name,o,null),ee(t,e,"formEncType",o.formEncType,o,null),ee(t,e,"formMethod",o.formMethod,o,null),ee(t,e,"formTarget",o.formTarget,o,null)):(ee(t,e,"encType",o.encType,o,null),ee(t,e,"method",o.method,o,null),ee(t,e,"target",o.target,o,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=Ji(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=$a);break;case"onScroll":s!=null&&Gt("scroll",t);break;case"onScrollEnd":s!=null&&Gt("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(n=s.__html,n!=null){if(o.children!=null)throw Error(i(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=Ji(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":Gt("beforetoggle",t),Gt("toggle",t),Wi(t,"popover",s);break;case"xlinkActuate":fn(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":fn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":fn(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":fn(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":fn(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":fn(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":fn(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":fn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":fn(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Wi(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=sh.get(n)||n,Wi(t,n,s))}}function Ko(t,e,n,s,o,f){switch(n){case"style":Rl(t,s,f);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(n=s.__html,n!=null){if(o.children!=null)throw Error(i(60));t.innerHTML=n}}break;case"children":typeof s=="string"?_s(t,s):(typeof s=="number"||typeof s=="bigint")&&_s(t,""+s);break;case"onScroll":s!=null&&Gt("scroll",t);break;case"onScrollEnd":s!=null&&Gt("scrollend",t);break;case"onClick":s!=null&&(t.onclick=$a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gl.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),e=n.slice(2,o?n.length-7:void 0),f=t[xe]||null,f=f!=null?f[n]:null,typeof f=="function"&&t.removeEventListener(e,f,o),typeof s=="function")){typeof f!="function"&&f!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,o);break t}n in t?t[n]=s:s===!0?t.setAttribute(n,""):Wi(t,n,s)}}}function we(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",t),Gt("load",t);var s=!1,o=!1,f;for(f in n)if(n.hasOwnProperty(f)){var j=n[f];if(j!=null)switch(f){case"src":s=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,e));default:ee(t,e,f,j,n,null)}}o&&ee(t,e,"srcSet",n.srcSet,n,null),s&&ee(t,e,"src",n.src,n,null);return;case"input":Gt("invalid",t);var $=f=j=o=null,tt=null,ft=null;for(s in n)if(n.hasOwnProperty(s)){var vt=n[s];if(vt!=null)switch(s){case"name":o=vt;break;case"type":j=vt;break;case"checked":tt=vt;break;case"defaultChecked":ft=vt;break;case"value":f=vt;break;case"defaultValue":$=vt;break;case"children":case"dangerouslySetInnerHTML":if(vt!=null)throw Error(i(137,e));break;default:ee(t,e,s,vt,n,null)}}_l(t,f,$,tt,ft,j,o,!1),Qi(t);return;case"select":Gt("invalid",t),s=j=f=null;for(o in n)if(n.hasOwnProperty(o)&&($=n[o],$!=null))switch(o){case"value":f=$;break;case"defaultValue":j=$;break;case"multiple":s=$;default:ee(t,e,o,$,n,null)}e=f,n=j,t.multiple=!!s,e!=null?Es(t,!!s,e,!1):n!=null&&Es(t,!!s,n,!0);return;case"textarea":Gt("invalid",t),f=o=s=null;for(j in n)if(n.hasOwnProperty(j)&&($=n[j],$!=null))switch(j){case"value":s=$;break;case"defaultValue":o=$;break;case"children":f=$;break;case"dangerouslySetInnerHTML":if($!=null)throw Error(i(91));break;default:ee(t,e,j,$,n,null)}Al(t,s,o,f),Qi(t);return;case"option":for(tt in n)if(n.hasOwnProperty(tt)&&(s=n[tt],s!=null))switch(tt){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:ee(t,e,tt,s,n,null)}return;case"dialog":Gt("beforetoggle",t),Gt("toggle",t),Gt("cancel",t),Gt("close",t);break;case"iframe":case"object":Gt("load",t);break;case"video":case"audio":for(s=0;s<Ui.length;s++)Gt(Ui[s],t);break;case"image":Gt("error",t),Gt("load",t);break;case"details":Gt("toggle",t);break;case"embed":case"source":case"link":Gt("error",t),Gt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ft in n)if(n.hasOwnProperty(ft)&&(s=n[ft],s!=null))switch(ft){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,e));default:ee(t,e,ft,s,n,null)}return;default:if(dr(e)){for(vt in n)n.hasOwnProperty(vt)&&(s=n[vt],s!==void 0&&Ko(t,e,vt,s,n,void 0));return}}for($ in n)n.hasOwnProperty($)&&(s=n[$],s!=null&&ee(t,e,$,s,n,null))}function Mf(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,f=null,j=null,$=null,tt=null,ft=null,vt=null;for(mt in n){var _t=n[mt];if(n.hasOwnProperty(mt)&&_t!=null)switch(mt){case"checked":break;case"value":break;case"defaultValue":tt=_t;default:s.hasOwnProperty(mt)||ee(t,e,mt,null,s,_t)}}for(var gt in s){var mt=s[gt];if(_t=n[gt],s.hasOwnProperty(gt)&&(mt!=null||_t!=null))switch(gt){case"type":f=mt;break;case"name":o=mt;break;case"checked":ft=mt;break;case"defaultChecked":vt=mt;break;case"value":j=mt;break;case"defaultValue":$=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(i(137,e));break;default:mt!==_t&&ee(t,e,gt,mt,s,_t)}}cr(t,j,$,tt,ft,vt,f,o);return;case"select":mt=j=$=gt=null;for(f in n)if(tt=n[f],n.hasOwnProperty(f)&&tt!=null)switch(f){case"value":break;case"multiple":mt=tt;default:s.hasOwnProperty(f)||ee(t,e,f,null,s,tt)}for(o in s)if(f=s[o],tt=n[o],s.hasOwnProperty(o)&&(f!=null||tt!=null))switch(o){case"value":gt=f;break;case"defaultValue":$=f;break;case"multiple":j=f;default:f!==tt&&ee(t,e,o,f,s,tt)}e=$,n=j,s=mt,gt!=null?Es(t,!!n,gt,!1):!!s!=!!n&&(e!=null?Es(t,!!n,e,!0):Es(t,!!n,n?[]:"",!1));return;case"textarea":mt=gt=null;for($ in n)if(o=n[$],n.hasOwnProperty($)&&o!=null&&!s.hasOwnProperty($))switch($){case"value":break;case"children":break;default:ee(t,e,$,null,s,o)}for(j in s)if(o=s[j],f=n[j],s.hasOwnProperty(j)&&(o!=null||f!=null))switch(j){case"value":gt=o;break;case"defaultValue":mt=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(i(91));break;default:o!==f&&ee(t,e,j,o,s,f)}Sl(t,gt,mt);return;case"option":for(var Nt in n)if(gt=n[Nt],n.hasOwnProperty(Nt)&&gt!=null&&!s.hasOwnProperty(Nt))switch(Nt){case"selected":t.selected=!1;break;default:ee(t,e,Nt,null,s,gt)}for(tt in s)if(gt=s[tt],mt=n[tt],s.hasOwnProperty(tt)&&gt!==mt&&(gt!=null||mt!=null))switch(tt){case"selected":t.selected=gt&&typeof gt!="function"&&typeof gt!="symbol";break;default:ee(t,e,tt,gt,s,mt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var jt in n)gt=n[jt],n.hasOwnProperty(jt)&&gt!=null&&!s.hasOwnProperty(jt)&&ee(t,e,jt,null,s,gt);for(ft in s)if(gt=s[ft],mt=n[ft],s.hasOwnProperty(ft)&&gt!==mt&&(gt!=null||mt!=null))switch(ft){case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(i(137,e));break;default:ee(t,e,ft,gt,s,mt)}return;default:if(dr(e)){for(var ne in n)gt=n[ne],n.hasOwnProperty(ne)&&gt!==void 0&&!s.hasOwnProperty(ne)&&Ko(t,e,ne,void 0,s,gt);for(vt in s)gt=s[vt],mt=n[vt],!s.hasOwnProperty(vt)||gt===mt||gt===void 0&&mt===void 0||Ko(t,e,vt,gt,s,mt);return}}for(var rt in n)gt=n[rt],n.hasOwnProperty(rt)&&gt!=null&&!s.hasOwnProperty(rt)&&ee(t,e,rt,null,s,gt);for(_t in s)gt=s[_t],mt=n[_t],!s.hasOwnProperty(_t)||gt===mt||gt==null&&mt==null||ee(t,e,_t,gt,s,mt)}var Qo=null,Zo=null;function Va(t){return t.nodeType===9?t:t.ownerDocument}function Td(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Rd(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Jo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tl=null;function Df(){var t=window.event;return t&&t.type==="popstate"?t===tl?!1:(tl=t,!0):(tl=null,!1)}var wd=typeof setTimeout=="function"?setTimeout:void 0,Pf=typeof clearTimeout=="function"?clearTimeout:void 0,Cd=typeof Promise=="function"?Promise:void 0,Of=typeof queueMicrotask=="function"?queueMicrotask:typeof Cd<"u"?function(t){return Cd.resolve(null).then(t).catch(kf)}:wd;function kf(t){setTimeout(function(){throw t})}function $n(t){return t==="head"}function Md(t,e){var n=e,s=0,o=0;do{var f=n.nextSibling;if(t.removeChild(n),f&&f.nodeType===8)if(n=f.data,n==="/$"){if(0<s&&8>s){n=s;var j=t.ownerDocument;if(n&1&&Bi(j.documentElement),n&2&&Bi(j.body),n&4)for(n=j.head,Bi(n),j=n.firstChild;j;){var $=j.nextSibling,tt=j.nodeName;j[ei]||tt==="SCRIPT"||tt==="STYLE"||tt==="LINK"&&j.rel.toLowerCase()==="stylesheet"||n.removeChild(j),j=$}}if(o===0){t.removeChild(f),Yi(e);return}o--}else n==="$"||n==="$?"||n==="$!"?o++:s=n.charCodeAt(0)-48;else s=0;n=f}while(n);Yi(e)}function el(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":el(n),ar(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function jf(t,e,n,s){for(;t.nodeType===1;){var o=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[ei])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==o.rel||t.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||t.getAttribute("title")!==(o.title==null?null:o.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(o.src==null?null:o.src)||t.getAttribute("type")!==(o.type==null?null:o.type)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var f=o.name==null?null:""+o.name;if(o.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=rn(t.nextSibling),t===null)break}return null}function Lf(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=rn(t.nextSibling),t===null))return null;return t}function nl(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Nf(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function rn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var sl=null;function Dd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function Pd(t,e,n){switch(e=Va(n),t){case"html":if(t=e.documentElement,!t)throw Error(i(452));return t;case"head":if(t=e.head,!t)throw Error(i(453));return t;case"body":if(t=e.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Bi(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);ar(t)}var nn=new Map,Od=new Set;function Xa(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var wn=F.d;F.d={f:Ff,r:Uf,D:If,C:Bf,L:Hf,m:zf,X:Gf,S:qf,M:$f};function Ff(){var t=wn.f(),e=Ua();return t||e}function Uf(t){var e=ys(t);e!==null&&e.tag===5&&e.type==="form"?Zc(e):wn.r(t)}var Qs=typeof document>"u"?null:document;function kd(t,e,n){var s=Qs;if(s&&typeof e=="string"&&e){var o=We(e);o='link[rel="'+t+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),Od.has(o)||(Od.add(o),t={rel:t,crossOrigin:n,href:e},s.querySelector(o)===null&&(e=s.createElement("link"),we(e,"link",t),ve(e),s.head.appendChild(e)))}}function If(t){wn.D(t),kd("dns-prefetch",t,null)}function Bf(t,e){wn.C(t,e),kd("preconnect",t,e)}function Hf(t,e,n){wn.L(t,e,n);var s=Qs;if(s&&t&&e){var o='link[rel="preload"][as="'+We(e)+'"]';e==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+We(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+We(n.imageSizes)+'"]')):o+='[href="'+We(t)+'"]';var f=o;switch(e){case"style":f=Zs(t);break;case"script":f=Js(t)}nn.has(f)||(t=l({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),nn.set(f,t),s.querySelector(o)!==null||e==="style"&&s.querySelector(Hi(f))||e==="script"&&s.querySelector(zi(f))||(e=s.createElement("link"),we(e,"link",t),ve(e),s.head.appendChild(e)))}}function zf(t,e){wn.m(t,e);var n=Qs;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",o='link[rel="modulepreload"][as="'+We(s)+'"][href="'+We(t)+'"]',f=o;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Js(t)}if(!nn.has(f)&&(t=l({rel:"modulepreload",href:t},e),nn.set(f,t),n.querySelector(o)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(zi(f)))return}s=n.createElement("link"),we(s,"link",t),ve(s),n.head.appendChild(s)}}}function qf(t,e,n){wn.S(t,e,n);var s=Qs;if(s&&t){var o=xs(s).hoistableStyles,f=Zs(t);e=e||"default";var j=o.get(f);if(!j){var $={loading:0,preload:null};if(j=s.querySelector(Hi(f)))$.loading=5;else{t=l({rel:"stylesheet",href:t,"data-precedence":e},n),(n=nn.get(f))&&il(t,n);var tt=j=s.createElement("link");ve(tt),we(tt,"link",t),tt._p=new Promise(function(ft,vt){tt.onload=ft,tt.onerror=vt}),tt.addEventListener("load",function(){$.loading|=1}),tt.addEventListener("error",function(){$.loading|=2}),$.loading|=4,Ya(j,e,s)}j={type:"stylesheet",instance:j,count:1,state:$},o.set(f,j)}}}function Gf(t,e){wn.X(t,e);var n=Qs;if(n&&t){var s=xs(n).hoistableScripts,o=Js(t),f=s.get(o);f||(f=n.querySelector(zi(o)),f||(t=l({src:t,async:!0},e),(e=nn.get(o))&&al(t,e),f=n.createElement("script"),ve(f),we(f,"link",t),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},s.set(o,f))}}function $f(t,e){wn.M(t,e);var n=Qs;if(n&&t){var s=xs(n).hoistableScripts,o=Js(t),f=s.get(o);f||(f=n.querySelector(zi(o)),f||(t=l({src:t,async:!0,type:"module"},e),(e=nn.get(o))&&al(t,e),f=n.createElement("script"),ve(f),we(f,"link",t),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},s.set(o,f))}}function jd(t,e,n,s){var o=(o=v.current)?Xa(o):null;if(!o)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Zs(n.href),n=xs(o).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Zs(n.href);var f=xs(o).hoistableStyles,j=f.get(t);if(j||(o=o.ownerDocument||o,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,j),(f=o.querySelector(Hi(t)))&&!f._p&&(j.instance=f,j.state.loading=5),nn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},nn.set(t,n),f||Vf(o,t,n,j.state))),e&&s===null)throw Error(i(528,""));return j}if(e&&s!==null)throw Error(i(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Js(n),n=xs(o).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Zs(t){return'href="'+We(t)+'"'}function Hi(t){return'link[rel="stylesheet"]['+t+"]"}function Ld(t){return l({},t,{"data-precedence":t.precedence,precedence:null})}function Vf(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),we(e,"link",n),ve(e),t.head.appendChild(e))}function Js(t){return'[src="'+We(t)+'"]'}function zi(t){return"script[async]"+t}function Nd(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+We(n.href)+'"]');if(s)return e.instance=s,ve(s),s;var o=l({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),ve(s),we(s,"style",o),Ya(s,n.precedence,t),e.instance=s;case"stylesheet":o=Zs(n.href);var f=t.querySelector(Hi(o));if(f)return e.state.loading|=4,e.instance=f,ve(f),f;s=Ld(n),(o=nn.get(o))&&il(s,o),f=(t.ownerDocument||t).createElement("link"),ve(f);var j=f;return j._p=new Promise(function($,tt){j.onload=$,j.onerror=tt}),we(f,"link",s),e.state.loading|=4,Ya(f,n.precedence,t),e.instance=f;case"script":return f=Js(n.src),(o=t.querySelector(zi(f)))?(e.instance=o,ve(o),o):(s=n,(o=nn.get(f))&&(s=l({},n),al(s,o)),t=t.ownerDocument||t,o=t.createElement("script"),ve(o),we(o,"link",s),t.head.appendChild(o),e.instance=o);case"void":return null;default:throw Error(i(443,e.type))}else e.type==="stylesheet"&&(e.state.loading&4)===0&&(s=e.instance,e.state.loading|=4,Ya(s,n.precedence,t));return e.instance}function Ya(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=s.length?s[s.length-1]:null,f=o,j=0;j<s.length;j++){var $=s[j];if($.dataset.precedence===e)f=$;else if(f!==o)break}f?f.parentNode.insertBefore(t,f.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function il(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function al(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Wa=null;function Fd(t,e,n){if(Wa===null){var s=new Map,o=Wa=new Map;o.set(n,s)}else o=Wa,s=o.get(n),s||(s=new Map,o.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),o=0;o<n.length;o++){var f=n[o];if(!(f[ei]||f[fe]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var j=f.getAttribute(e)||"";j=t+j;var $=s.get(j);$?$.push(f):s.set(j,[f])}}return s}function Ud(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function Xf(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Id(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var qi=null;function Yf(){}function Wf(t,e,n){if(qi===null)throw Error(i(475));var s=qi;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(e.state.loading&4)===0){if(e.instance===null){var o=Zs(n.href),f=t.querySelector(Hi(o));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(s.count++,s=Ka.bind(s),t.then(s,s)),e.state.loading|=4,e.instance=f,ve(f);return}f=t.ownerDocument||t,n=Ld(n),(o=nn.get(o))&&il(n,o),f=f.createElement("link"),ve(f);var j=f;j._p=new Promise(function($,tt){j.onload=$,j.onerror=tt}),we(f,"link",n),e.instance=f}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(e,t),(t=e.state.preload)&&(e.state.loading&3)===0&&(s.count++,e=Ka.bind(s),t.addEventListener("load",e),t.addEventListener("error",e))}}function Kf(){if(qi===null)throw Error(i(475));var t=qi;return t.stylesheets&&t.count===0&&rl(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&rl(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function Ka(){if(this.count--,this.count===0){if(this.stylesheets)rl(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Qa=null;function rl(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Qa=new Map,e.forEach(Qf,t),Qa=null,Ka.call(t))}function Qf(t,e){if(!(e.state.loading&4)){var n=Qa.get(t);if(n)var s=n.get(null);else{n=new Map,Qa.set(t,n);for(var o=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<o.length;f++){var j=o[f];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(n.set(j.dataset.precedence,j),s=j)}s&&n.set(null,s)}o=e.instance,j=o.getAttribute("data-precedence"),f=n.get(j)||s,f===s&&n.set(null,o),n.set(j,o),this.count++,s=Ka.bind(this),o.addEventListener("load",s),o.addEventListener("error",s),f?f.parentNode.insertBefore(o,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(o,t.firstChild)),e.state.loading|=4}}var Gi={$$typeof:N,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function Zf(t,e,n,s,o,f,j,$){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jt(0),this.hiddenUpdates=Jt(null),this.identifierPrefix=s,this.onUncaughtError=o,this.onCaughtError=f,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function Bd(t,e,n,s,o,f,j,$,tt,ft,vt,_t){return t=new Zf(t,e,n,j,$,tt,ft,_t),e=1,f===!0&&(e|=24),f=Ie(3,null,null,e),t.current=f,f.stateNode=t,e=Br(),e.refCount++,t.pooledCache=e,e.refCount++,f.memoizedState={element:s,isDehydrated:n,cache:e},Gr(f),t}function Hd(t){return t?(t=Ds,t):Ds}function zd(t,e,n,s,o,f){o=Hd(o),s.context===null?s.context=o:s.pendingContext=o,s=On(e),s.payload={element:n},f=f===void 0?null:f,f!==null&&(s.callback=f),n=kn(t,s,e),n!==null&&(Ge(n,t,e),bi(n,t,e))}function qd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ol(t,e){qd(t,e),(t=t.alternate)&&qd(t,e)}function Gd(t){if(t.tag===13){var e=Ms(t,67108864);e!==null&&Ge(e,t,67108864),ol(t,67108864)}}var Za=!0;function Jf(t,e,n,s){var o=W.T;W.T=null;var f=F.p;try{F.p=2,ll(t,e,n,s)}finally{F.p=f,W.T=o}}function tp(t,e,n,s){var o=W.T;W.T=null;var f=F.p;try{F.p=8,ll(t,e,n,s)}finally{F.p=f,W.T=o}}function ll(t,e,n,s){if(Za){var o=cl(s);if(o===null)Wo(t,e,s,Ja,n),Vd(t,s);else if(np(o,t,e,n,s))s.stopPropagation();else if(Vd(t,s),e&4&&-1<ep.indexOf(t)){for(;o!==null;){var f=ys(o);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var j=lt(f.pendingLanes);if(j!==0){var $=f;for($.pendingLanes|=2,$.entangledLanes|=2;j;){var tt=1<<31-Bt(j);$.entanglements[1]|=tt,j&=~tt}dn(f),(Qt&6)===0&&(Na=ht()+500,Fi(0))}}break;case 13:$=Ms(f,2),$!==null&&Ge($,f,2),Ua(),ol(f,2)}if(f=cl(s),f===null&&Wo(t,e,s,Ja,n),f===o)break;o=f}o!==null&&s.stopPropagation()}else Wo(t,e,s,null,n)}}function cl(t){return t=fr(t),ul(t)}var Ja=null;function ul(t){if(Ja=null,t=ms(t),t!==null){var e=E(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=R(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Ja=t,null}function $d(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yt()){case Et:return 2;case Rt:return 8;case wt:case Mt:return 32;case kt:return 268435456;default:return 32}default:return 32}}var dl=!1,Vn=null,Xn=null,Yn=null,$i=new Map,Vi=new Map,Wn=[],ep="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vd(t,e){switch(t){case"focusin":case"focusout":Vn=null;break;case"dragenter":case"dragleave":Xn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":$i.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vi.delete(e.pointerId)}}function Xi(t,e,n,s,o,f){return t===null||t.nativeEvent!==f?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:f,targetContainers:[o]},e!==null&&(e=ys(e),e!==null&&Gd(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function np(t,e,n,s,o){switch(e){case"focusin":return Vn=Xi(Vn,t,e,n,s,o),!0;case"dragenter":return Xn=Xi(Xn,t,e,n,s,o),!0;case"mouseover":return Yn=Xi(Yn,t,e,n,s,o),!0;case"pointerover":var f=o.pointerId;return $i.set(f,Xi($i.get(f)||null,t,e,n,s,o)),!0;case"gotpointercapture":return f=o.pointerId,Vi.set(f,Xi(Vi.get(f)||null,t,e,n,s,o)),!0}return!1}function Xd(t){var e=ms(t.target);if(e!==null){var n=E(e);if(n!==null){if(e=n.tag,e===13){if(e=R(n),e!==null){t.blockedOn=e,gs(t.priority,function(){if(n.tag===13){var s=qe();s=Ve(s);var o=Ms(n,s);o!==null&&Ge(o,n,s),ol(n,s)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tr(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=cl(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);hr=s,n.target.dispatchEvent(s),hr=null}else return e=ys(n),e!==null&&Gd(e),t.blockedOn=n,!1;e.shift()}return!0}function Yd(t,e,n){tr(t)&&n.delete(e)}function sp(){dl=!1,Vn!==null&&tr(Vn)&&(Vn=null),Xn!==null&&tr(Xn)&&(Xn=null),Yn!==null&&tr(Yn)&&(Yn=null),$i.forEach(Yd),Vi.forEach(Yd)}function er(t,e){t.blockedOn===e&&(t.blockedOn=null,dl||(dl=!0,y.unstable_scheduleCallback(y.unstable_NormalPriority,sp)))}var nr=null;function Wd(t){nr!==t&&(nr=t,y.unstable_scheduleCallback(y.unstable_NormalPriority,function(){nr===t&&(nr=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],o=t[e+2];if(typeof s!="function"){if(ul(s||n)===null)continue;break}var f=ys(n);f!==null&&(t.splice(e,3),e-=3,co(f,{pending:!0,data:o,method:n.method,action:s},s,o))}}))}function Yi(t){function e(tt){return er(tt,t)}Vn!==null&&er(Vn,t),Xn!==null&&er(Xn,t),Yn!==null&&er(Yn,t),$i.forEach(e),Vi.forEach(e);for(var n=0;n<Wn.length;n++){var s=Wn[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<Wn.length&&(n=Wn[0],n.blockedOn===null);)Xd(n),n.blockedOn===null&&Wn.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var o=n[s],f=n[s+1],j=o[xe]||null;if(typeof f=="function")j||Wd(n);else if(j){var $=null;if(f&&f.hasAttribute("formAction")){if(o=f,j=f[xe]||null)$=j.formAction;else if(ul(o)!==null)continue}else $=j.action;typeof $=="function"?n[s+1]=$:(n.splice(s,3),s-=3),Wd(n)}}}function hl(t){this._internalRoot=t}sr.prototype.render=hl.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(i(409));var n=e.current,s=qe();zd(n,s,t,e,null,null)},sr.prototype.unmount=hl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zd(t.current,2,null,t,null,null),Ua(),e[Xe]=null}};function sr(t){this._internalRoot=t}sr.prototype.unstable_scheduleHydration=function(t){if(t){var e=ue();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Wn.length&&e!==0&&e<Wn[n].priority;n++);Wn.splice(n,0,t),n===0&&Xd(t)}};var Kd=a.version;if(Kd!=="19.1.1")throw Error(i(527,Kd,"19.1.1"));F.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=C(e),t=t!==null?u(t):null,t=t===null?null:t.stateNode,t};var ip={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ir=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ir.isDisabled&&ir.supportsFiber)try{$t=ir.inject(ip),Ut=ir}catch{}}return reactDomClient_production.createRoot=function(t,e){if(!h(t))throw Error(i(299));var n=!1,s="",o=hu,f=fu,j=pu,$=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(o=e.onUncaughtError),e.onCaughtError!==void 0&&(f=e.onCaughtError),e.onRecoverableError!==void 0&&(j=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&($=e.unstable_transitionCallbacks)),e=Bd(t,1,!1,null,null,n,s,o,f,j,$,null),t[Xe]=e.current,Yo(t),new hl(e)},reactDomClient_production.hydrateRoot=function(t,e,n){if(!h(t))throw Error(i(299));var s=!1,o="",f=hu,j=fu,$=pu,tt=null,ft=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(j=n.onCaughtError),n.onRecoverableError!==void 0&&($=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(tt=n.unstable_transitionCallbacks),n.formState!==void 0&&(ft=n.formState)),e=Bd(t,1,!0,e,n??null,s,o,f,j,$,tt,ft),e.context=Hd(null),n=e.current,s=qe(),s=Ve(s),o=On(s),o.callback=null,kn(n,o,s),n=s,e.current.lanes=n,Xt(e,n),dn(e),t[Xe]=e.current,Yo(t),new sr(e)},reactDomClient_production.version="19.1.1",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function y(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(y)}catch(a){console.error(a)}}return y(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const scriptRel="modulepreload",assetsURL=function(y){return"/kakuti/"+y},seen={},__vitePreload=function(a,d,i){let h=Promise.resolve();if(d&&d.length>0){let C=function(u){return Promise.all(u.map(l=>Promise.resolve(l).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};document.getElementsByTagName("link");const R=document.querySelector("meta[property=csp-nonce]"),M=R?.nonce||R?.getAttribute("nonce");h=C(d.map(u=>{if(u=assetsURL(u),u in seen)return;seen[u]=!0;const l=u.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${c}`))return;const m=document.createElement("link");if(m.rel=l?"stylesheet":scriptRel,l||(m.as="script"),m.crossOrigin="",m.href=u,M&&m.setAttribute("nonce",M),document.head.appendChild(m),l)return new Promise((x,p)=>{m.addEventListener("load",x),m.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}function E(R){const M=new Event("vite:preloadError",{cancelable:!0});if(M.payload=R,window.dispatchEvent(M),!M.defaultPrevented)throw R}return h.then(R=>{for(const M of R||[])M.status==="rejected"&&E(M.reason);return a().catch(E)})};var propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var y="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=y,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var y=requireReactPropTypesSecret();function a(){}function d(){}return d.resetWarningCache=a,factoryWithThrowingShims=function(){function i(R,M,C,u,l,c){if(c!==y){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}i.isRequired=i;function h(){return i}var E={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:h,element:i,elementType:i,instanceOf:h,node:i,objectOf:h,oneOf:h,oneOfType:h,shape:h,exact:h,checkPropTypes:d,resetWarningCache:a};return E.PropTypes=E,E},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}var propTypesExports=requirePropTypes();const PropTypes=getDefaultExportFromCjs(propTypesExports),PDF_ACTIONS={SET_SCALE:"SET_SCALE",SET_NUM_PAGES:"SET_NUM_PAGES",SET_CURRENT_PAGE:"SET_CURRENT_PAGE",SET_TOOL_MODE:"SET_TOOL_MODE",TOGGLE_OUTLINE:"TOGGLE_OUTLINE",SET_SHOW_OUTLINE:"SET_SHOW_OUTLINE",TOGGLE_SEARCH_PANEL:"TOGGLE_SEARCH_PANEL",SET_SHOW_SEARCH_PANEL:"SET_SHOW_SEARCH_PANEL",SET_ERROR:"SET_ERROR",SET_LOADING:"SET_LOADING",RESET_STATE:"RESET_STATE"},initialState={scale:1.2,numPages:null,currentPage:1,toolMode:null,showOutline:!1,showSearchPanel:!1,error:null,isLoading:!0};function pdfViewerReducer(y,a){switch(a.type){case PDF_ACTIONS.SET_SCALE:return{...y,scale:a.payload};case PDF_ACTIONS.SET_NUM_PAGES:return{...y,numPages:a.payload,isLoading:!1};case PDF_ACTIONS.SET_CURRENT_PAGE:return{...y,currentPage:a.payload};case PDF_ACTIONS.SET_TOOL_MODE:return{...y,toolMode:a.payload};case PDF_ACTIONS.TOGGLE_OUTLINE:return{...y,showOutline:!y.showOutline};case PDF_ACTIONS.SET_SHOW_OUTLINE:return{...y,showOutline:a.payload};case PDF_ACTIONS.TOGGLE_SEARCH_PANEL:return{...y,showSearchPanel:!y.showSearchPanel};case PDF_ACTIONS.SET_SHOW_SEARCH_PANEL:return{...y,showSearchPanel:a.payload};case PDF_ACTIONS.SET_ERROR:return{...y,error:a.payload,isLoading:!1};case PDF_ACTIONS.SET_LOADING:return{...y,isLoading:a.payload};case PDF_ACTIONS.RESET_STATE:return{...initialState};default:return y}}const PdfViewerStateContext=reactExports.createContext(),PdfViewerDispatchContext=reactExports.createContext(),PdfViewerRefsContext=reactExports.createContext();function PdfViewerProvider({children:y,viewerRef:a,pdfDocRef:d}){const[i,h]=reactExports.useReducer(pdfViewerReducer,initialState),E={viewerRef:a,pdfDocRef:d};return jsxRuntimeExports.jsx(PdfViewerStateContext.Provider,{value:i,children:jsxRuntimeExports.jsx(PdfViewerDispatchContext.Provider,{value:h,children:jsxRuntimeExports.jsx(PdfViewerRefsContext.Provider,{value:E,children:y})})})}PdfViewerProvider.propTypes={children:PropTypes.node.isRequired,viewerRef:PropTypes.object.isRequired,pdfDocRef:PropTypes.object.isRequired};function usePdfViewerState(){const y=reactExports.useContext(PdfViewerStateContext);if(y===void 0)throw new Error("usePdfViewerState must be used within a PdfViewerProvider");return y}function usePdfViewerDispatch(){const y=reactExports.useContext(PdfViewerDispatchContext);if(y===void 0)throw new Error("usePdfViewerDispatch must be used within a PdfViewerProvider");return y}function usePdfViewerRefs(){const y=reactExports.useContext(PdfViewerRefsContext);if(y===void 0)throw new Error("usePdfViewerRefs must be used within a PdfViewerProvider");return y}function usePdfViewer(){const y=usePdfViewerState(),a=usePdfViewerDispatch(),d=usePdfViewerRefs();return{...y,dispatch:a,...d}}const SearchPanel=({searchTerm:y,onSearchTermChange:a,onDebouncedSearch:d,searchResults:i,currentSearchIndex:h,onNextResult:E,onPrevResult:R,onClose:M})=>{const{showSearchPanel:C,dispatch:u}=usePdfViewer(),l=reactExports.useRef(null),c=reactExports.useRef(null),[m,x]=reactExports.useState([]),[p,_]=reactExports.useState(!1),[D,b]=reactExports.useState(!1),[L,N]=reactExports.useState({x:0,y:0}),U=reactExports.useRef({dx:0,dy:0});reactExports.useEffect(()=>{if(C&&l.current){c.current&&c.current.focus();const z=l.current.querySelectorAll('input, button, [tabindex]:not([tabindex="-1"])');x(Array.from(z))}},[C]),reactExports.useEffect(()=>{C||(_(!1),b(!1))},[C]),reactExports.useEffect(()=>{const z=q=>{C&&l.current&&!l.current.contains(q.target)&&!q.target.closest(".toolbar-btn")&&!q.target.closest(".search-panel")&&M()},Y=q=>{if(!C)return;const K=l.current&&(l.current.contains(document.activeElement)||document.activeElement===document.body);if(q.key==="Escape"){q.preventDefault(),M();return}if(K){if(q.key==="Tab"&&m.length>0){const Z=m[0],it=m[m.length-1];q.shiftKey?document.activeElement===Z&&(q.preventDefault(),it.focus()):document.activeElement===it&&(q.preventDefault(),Z.focus())}i.length>0&&document.activeElement===c.current&&(q.key==="ArrowDown"||q.ctrlKey&&q.key==="g"?(q.preventDefault(),E()):(q.key==="ArrowUp"||q.ctrlKey&&q.shiftKey&&q.key==="G")&&(q.preventDefault(),R())),i.length>0&&(q.ctrlKey&&q.key==="g"&&!q.shiftKey?(q.preventDefault(),E()):q.ctrlKey&&q.shiftKey&&q.key==="G"&&(q.preventDefault(),R()))}};if(C)return document.addEventListener("mousedown",z),document.addEventListener("keydown",Y),()=>{document.removeEventListener("mousedown",z),document.removeEventListener("keydown",Y)}},[C,u,m,i,E,R,M]),reactExports.useEffect(()=>{const z=q=>{if(!p)return;const K=q.clientX-U.current.dx,Z=q.clientY-U.current.dy,it=8,nt=l.current,at=nt?nt.offsetWidth:200,pt=nt?nt.offsetHeight:120,W=window.innerWidth-at-it,F=window.innerHeight-pt-it,O=Math.max(it,Math.min(K,W)),T=Math.max(it,Math.min(Z,F));N({x:O,y:T}),b(!0)},Y=()=>_(!1);if(p)return document.addEventListener("mousemove",z),document.addEventListener("mouseup",Y),()=>{document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",Y)}},[p]);const S=z=>{if(!l.current)return;const Y=l.current.getBoundingClientRect();U.current={dx:z.clientX-Y.left,dy:z.clientY-Y.top},N({x:Y.left,y:Y.top}),_(!0),z.preventDefault(),z.stopPropagation()};if(!C)return null;const P=D?{left:`${L.x}px`,top:`${L.y}px`,right:"auto",transform:"none",position:"fixed",zIndex:10050}:{zIndex:10050};return jsxRuntimeExports.jsxs("div",{className:"search-panel",ref:l,role:"dialog","aria-modal":"true","aria-label":"Search PDF content","aria-describedby":"search-instructions",style:P,children:[jsxRuntimeExports.jsx("div",{className:"search-panel-header",onMouseDown:S,role:"button",tabIndex:0,"aria-label":"Drag search panel",title:"Drag to move",children:"Search"}),jsxRuntimeExports.jsxs("div",{className:"search-input-container",children:[jsxRuntimeExports.jsx("label",{htmlFor:"search-input",className:"sr-only",children:"Search PDF content"}),jsxRuntimeExports.jsx("input",{id:"search-input",ref:c,type:"text",placeholder:"Search text...",value:y,onChange:z=>{const Y=z.target.value;a(Y),d(Y)},onKeyDown:z=>{z.key==="Enter"&&z.preventDefault()},className:"search-input","aria-describedby":"search-instructions search-results-info"}),jsxRuntimeExports.jsx("div",{id:"search-instructions",className:"sr-only",children:"Use arrow keys or Ctrl+G to navigate results. Press Escape to close."})]}),i.length>0&&jsxRuntimeExports.jsxs("div",{className:"search-results",role:"region","aria-label":"Search results",children:[jsxRuntimeExports.jsx("div",{className:"search-info",id:"search-results-info","aria-live":"polite",children:i.length>0?jsxRuntimeExports.jsxs("span",{children:["Found ",i.length," results - Viewing ",h+1,"/",i.length]}):y&&jsxRuntimeExports.jsx("span",{children:"No results found"})}),jsxRuntimeExports.jsxs("div",{className:"search-navigation",role:"group","aria-label":"Navigate search results",children:[jsxRuntimeExports.jsx("button",{onClick:R,disabled:i.length===0,"aria-label":"Previous result",title:"Previous result ( or Ctrl+Shift+G)",children:""}),jsxRuntimeExports.jsx("button",{onClick:E,disabled:i.length===0,"aria-label":"Next result",title:"Next result ( or Ctrl+G)",children:""})]})]})]})};SearchPanel.propTypes={searchTerm:PropTypes.string.isRequired,onSearchTermChange:PropTypes.func.isRequired,onDebouncedSearch:PropTypes.func.isRequired,searchResults:PropTypes.arrayOf(PropTypes.object).isRequired,currentSearchIndex:PropTypes.number.isRequired,onNextResult:PropTypes.func.isRequired,onPrevResult:PropTypes.func.isRequired,onClose:PropTypes.func.isRequired};const HighlightLayer=({overlays:y,onOverlayClick:a})=>!y||y.length===0?null:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:y.map(d=>jsxRuntimeExports.jsx("div",{className:"highlight-overlay",style:{position:"absolute",left:`${d.rect.left}px`,top:`${d.rect.top}px`,width:`${d.rect.width}px`,height:`${d.rect.height}px`,backgroundColor:d.color||"rgba(34, 197, 94, 0.3)",pointerEvents:"auto",zIndex:100},onClick:i=>{i.stopPropagation(),a&&a(d)}},d.key))});HighlightLayer.propTypes={overlays:PropTypes.arrayOf(PropTypes.shape({key:PropTypes.string.isRequired,rect:PropTypes.shape({left:PropTypes.number.isRequired,top:PropTypes.number.isRequired,width:PropTypes.number.isRequired,height:PropTypes.number.isRequired}).isRequired,color:PropTypes.string,id:PropTypes.string})),onOverlayClick:PropTypes.func.isRequired};const HighlightPopover=({highlight:y,position:a,onDelete:d,onChangeColor:i,onChangeComment:h})=>{const[E,R]=reactExports.useState(!1),M=reactExports.useRef(null),[C,u]=reactExports.useState(!1);reactExports.useEffect(()=>()=>{M.current&&clearTimeout(M.current)},[]);const l=async()=>{try{await navigator.clipboard.writeText(y.text),M.current&&clearTimeout(M.current),R(!0),M.current=setTimeout(()=>R(!1),1e3)}catch(m){console.error("Failed to copy text: ",m)}},c=[{name:"green",color:"rgba(34, 197, 94, 0.3)"},{name:"yellow",color:"rgba(234, 179, 8, 0.35)"},{name:"blue",color:"rgba(59, 130, 246, 0.3)"},{name:"pink",color:"rgba(236, 72, 153, 0.35)"}];return y?jsxRuntimeExports.jsxs("div",{className:"highlight-popover",role:"dialog","aria-label":"Highlight actions",style:{position:"absolute",left:`${a.left}px`,top:`${a.top}px`,width:"280px",background:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 8px 24px rgba(0,0,0,0.12)",zIndex:1e3,display:"flex",flexDirection:"column",gap:"10px",padding:"12px"},onMouseDown:m=>m.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"#374151",marginBottom:"4px"},children:"Comment"}),jsxRuntimeExports.jsx("textarea",{rows:4,value:y.comment||"",onChange:m=>h&&h(y.id,m.target.value),placeholder:"Add a note... (auto-saved)",style:{width:"100%",fontSize:"13px",border:"1px solid #d1d5db",borderRadius:"6px",padding:"8px",outline:"none",boxSizing:"border-box",resize:"vertical"}})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",position:"relative"},children:[E&&jsxRuntimeExports.jsx("div",{className:"copy-feedback","aria-live":"polite",children:"Copied"}),jsxRuntimeExports.jsx("button",{onClick:l,style:{background:"#eff6ff",color:"#2563eb",border:"1px solid #bfdbfe",borderRadius:"6px",padding:"6px",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center"},title:"Copy text","aria-label":"Copy text",children:jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),jsxRuntimeExports.jsx("path",{d:"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"})]})}),jsxRuntimeExports.jsx("button",{onClick:()=>{d&&d(y.id)},style:{background:"#fee2e2",color:"#b91c1c",border:"1px solid #fecaca",borderRadius:"6px",padding:"6px",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center"},title:"Delete highlight","aria-label":"Delete highlight",children:jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("polyline",{points:"3 6 5 6 21 6"}),jsxRuntimeExports.jsx("path",{d:"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"}),jsxRuntimeExports.jsx("path",{d:"M10 11v6"}),jsxRuntimeExports.jsx("path",{d:"M14 11v6"}),jsxRuntimeExports.jsx("path",{d:"M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"})]})}),jsxRuntimeExports.jsxs("div",{style:{marginLeft:"6px",position:"relative",display:"inline-flex"},children:[jsxRuntimeExports.jsxs("button",{className:"highlight-color-trigger",onClick:m=>{m.stopPropagation(),u(x=>!x)},title:"Change highlight color","aria-label":"Change highlight color",style:{display:"inline-flex",alignItems:"center",gap:"6px",border:"1px solid #e5e7eb",borderRadius:"6px",padding:"4px 6px",background:"#fff",cursor:"pointer"},children:[jsxRuntimeExports.jsx("span",{"aria-hidden":!0,style:{width:"16px",height:"16px",borderRadius:"4px",background:y.color||"rgba(34, 197, 94, 0.3)",border:"1px solid rgba(0,0,0,0.08)"}}),jsxRuntimeExports.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:jsxRuntimeExports.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),C&&jsxRuntimeExports.jsx("div",{className:"highlight-color-menu",onMouseDown:m=>m.stopPropagation(),style:{position:"absolute",top:"32px",left:0,background:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 8px 24px rgba(0,0,0,0.12)",padding:"6px",display:"grid",gridTemplateColumns:"repeat(4, 18px)",gap:"6px",zIndex:1100},children:c.map(m=>jsxRuntimeExports.jsx("button",{className:"highlight-color-swatch",title:m.name,"aria-label":`Select ${m.name}`,onClick:()=>{i&&i(y.id,m.color),u(!1)},style:{width:"18px",height:"18px",borderRadius:"4px",background:m.color,border:"1px solid rgba(0,0,0,0.08)",padding:0,boxSizing:"border-box",cursor:"pointer",boxShadow:y.color===m.color?"0 0 0 2px rgba(59,130,246,0.6) inset":"none"}},m.name))})]})]})]}):null};HighlightPopover.propTypes={highlight:PropTypes.shape({id:PropTypes.string.isRequired,text:PropTypes.string.isRequired,color:PropTypes.string.isRequired,comment:PropTypes.string}).isRequired,position:PropTypes.shape({left:PropTypes.number.isRequired,top:PropTypes.number.isRequired}).isRequired,onDelete:PropTypes.func.isRequired,onChangeColor:PropTypes.func.isRequired,onChangeComment:PropTypes.func.isRequired};const PdfToolbar=({onToggleSearchPanel:y})=>{const{toolMode:a,showSearchPanel:d,currentPage:i,numPages:h,dispatch:E}=usePdfViewer(),R=C=>{E({type:PDF_ACTIONS.SET_TOOL_MODE,payload:C})},M=()=>{y?y():E({type:PDF_ACTIONS.TOGGLE_SEARCH_PANEL})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"vertical-toolbar",children:[jsxRuntimeExports.jsx("button",{className:`toolbar-btn ${a==="screenshot"?"active":""}`,onClick:()=>R(a==="screenshot"?"normal":"screenshot"),title:"Screenshot","aria-label":"Toggle screenshot mode",children:jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("line",{x1:"0",y1:"6",x2:"20",y2:"6"}),jsxRuntimeExports.jsx("line",{x1:"4",y1:"18",x2:"24",y2:"18"}),jsxRuntimeExports.jsx("line",{x1:"4",y1:"2",x2:"4",y2:"18"}),jsxRuntimeExports.jsx("line",{x1:"20",y1:"6",x2:"20",y2:"22"})]})}),jsxRuntimeExports.jsx("button",{className:`toolbar-btn ${d?"active":""}`,onClick:M,title:"Search","aria-label":"Toggle search panel",children:jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"11",cy:"11",r:"8"}),jsxRuntimeExports.jsx("path",{d:"m21 21-4.35-4.35"})]})}),jsxRuntimeExports.jsx("button",{className:`toolbar-btn ${a==="highlight"?"active":""}`,onClick:()=>R(a==="highlight"?"normal":"highlight"),title:"Highlight Text","aria-label":"Toggle highlight mode",children:jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("path",{d:"M14 3l7 7-8.5 8.5-7-7L14 3z"}),jsxRuntimeExports.jsx("path",{d:"M21 10l-2.5 2.5"}),jsxRuntimeExports.jsx("path",{d:"M5 14l5 5-4 1-2-2 1-4z"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"floating-zoom-controls",children:[jsxRuntimeExports.jsx("button",{className:"icon-btn",type:"button",title:"Contents","aria-label":"Open contents",onClick:()=>E({type:PDF_ACTIONS.TOGGLE_OUTLINE}),children:jsxRuntimeExports.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20","aria-hidden":"true",children:[jsxRuntimeExports.jsx("circle",{cx:"4",cy:"5",r:"1.5",fill:"#059669"}),jsxRuntimeExports.jsx("rect",{x:"8",y:"4",width:"10",height:"2",rx:"1",fill:"#059669"}),jsxRuntimeExports.jsx("circle",{cx:"4",cy:"10",r:"1.5",fill:"#059669"}),jsxRuntimeExports.jsx("rect",{x:"8",y:"9",width:"10",height:"2",rx:"1",fill:"#059669"}),jsxRuntimeExports.jsx("circle",{cx:"4",cy:"15",r:"1.5",fill:"#059669"}),jsxRuntimeExports.jsx("rect",{x:"8",y:"14",width:"10",height:"2",rx:"1",fill:"#059669"})]})}),jsxRuntimeExports.jsxs("span",{className:"page-indicator",children:[i,"/",h||0]})]})]})};PdfToolbar.propTypes={onToggleSearchPanel:PropTypes.func};const PdfOutlineDrawer=({outline:y})=>{const{showOutline:a,dispatch:d,pdfDocRef:i,viewerRef:h}=usePdfViewer(),E=reactExports.useRef(null);reactExports.useEffect(()=>()=>{E.current&&clearTimeout(E.current)},[]);const R=async l=>{try{if(!i.current)return;let c=null;if(typeof l.dest=="string"?c=await i.current.getDestination(l.dest):Array.isArray(l.dest)&&(c=l.dest),c&&c[0]){const m=await i.current.getPageIndex(c[0]),x=h.current,p=x?.querySelectorAll(".page-container");x&&p&&p[m]&&(x.scrollTo({top:p[m].offsetTop,behavior:"smooth"}),d({type:PDF_ACTIONS.SET_SHOW_OUTLINE,payload:!1}))}}catch(c){console.error("Error navigating to outline item:",c)}},M=()=>{E.current&&(clearTimeout(E.current),E.current=null)},C=()=>{E.current&&clearTimeout(E.current),E.current=setTimeout(()=>d({type:PDF_ACTIONS.SET_SHOW_OUTLINE,payload:!1}),500)},u=l=>jsxRuntimeExports.jsx("ul",{className:"outline-list",children:l.map((c,m)=>jsxRuntimeExports.jsxs("li",{className:"outline-item",children:[jsxRuntimeExports.jsx("button",{className:"outline-link",onClick:()=>R(c),children:c.title}),c.items&&c.items.length>0&&jsxRuntimeExports.jsx("div",{className:"outline-sublist",children:u(c.items)})]},m))});return a?jsxRuntimeExports.jsx("div",{className:"outline-overlay",onClick:()=>d({type:PDF_ACTIONS.SET_SHOW_OUTLINE,payload:!1}),children:jsxRuntimeExports.jsx("div",{className:"outline-sheet",onClick:l=>l.stopPropagation(),onMouseEnter:M,onMouseLeave:C,children:jsxRuntimeExports.jsx("div",{className:"outline-sheet-body",children:!y||y.length===0?jsxRuntimeExports.jsx("div",{className:"loading",children:"No contents found"}):u(y)})})}):null};PdfOutlineDrawer.propTypes={outline:PropTypes.array.isRequired};function commonjsRequire(y){throw new Error('Could not dynamically require "'+y+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports){(function(a,d){module.exports=a.pdfjsLib=d()})(globalThis,()=>(()=>{var __webpack_modules__=[,((y,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.VerbosityLevel=a.Util=a.UnknownErrorException=a.UnexpectedResponseException=a.TextRenderingMode=a.RenderingIntentFlag=a.PromiseCapability=a.PermissionFlag=a.PasswordResponses=a.PasswordException=a.PageActionEventType=a.OPS=a.MissingPDFException=a.MAX_IMAGE_SIZE_TO_CACHE=a.LINE_FACTOR=a.LINE_DESCENT_FACTOR=a.InvalidPDFException=a.ImageKind=a.IDENTITY_MATRIX=a.FormatError=a.FeatureTest=a.FONT_IDENTITY_MATRIX=a.DocumentActionEventType=a.CMapCompressionType=a.BaseException=a.BASELINE_FACTOR=a.AnnotationType=a.AnnotationReplyType=a.AnnotationPrefix=a.AnnotationMode=a.AnnotationFlag=a.AnnotationFieldFlag=a.AnnotationEditorType=a.AnnotationEditorPrefix=a.AnnotationEditorParamsType=a.AnnotationBorderStyleType=a.AnnotationActionEventType=a.AbortException=void 0,a.assert=T,a.bytesToString=Q,a.createValidAbsoluteUrl=w,a.getModificationDate=Ut,a.getUuid=$e,a.getVerbosityLevel=pt,a.info=W,a.isArrayBuffer=Ft,a.isArrayEqual=$t,a.isNodeJS=void 0,a.normalizeUnicode=hn,a.objectFromMap=ct,a.objectSize=At,a.setVerbosityLevel=at,a.shadow=I,a.string32=ot,a.stringToBytes=et,a.stringToPDFString=Mt,a.stringToUTF8String=kt,a.unreachable=O,a.utf8StringToString=Dt,a.warn=F;const d=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");a.isNodeJS=d;const i=[1,0,0,1,0,0];a.IDENTITY_MATRIX=i;const h=[.001,0,0,.001,0,0];a.FONT_IDENTITY_MATRIX=h;const E=1e7;a.MAX_IMAGE_SIZE_TO_CACHE=E;const R=1.35;a.LINE_FACTOR=R;const M=.35;a.LINE_DESCENT_FACTOR=M;const C=M/R;a.BASELINE_FACTOR=C;const u={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};a.RenderingIntentFlag=u;const l={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};a.AnnotationMode=l;const c="pdfjs_internal_editor_";a.AnnotationEditorPrefix=c;const m={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};a.AnnotationEditorType=m;const x={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};a.AnnotationEditorParamsType=x;const p={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};a.PermissionFlag=p;const _={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};a.TextRenderingMode=_;const D={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};a.ImageKind=D;const b={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};a.AnnotationType=b;const L={GROUP:"Group",REPLY:"R"};a.AnnotationReplyType=L;const N={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};a.AnnotationFlag=N;const U={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};a.AnnotationFieldFlag=U;const S={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};a.AnnotationBorderStyleType=S;const P={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};a.AnnotationActionEventType=P;const z={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};a.DocumentActionEventType=z;const Y={O:"PageOpen",C:"PageClose"};a.PageActionEventType=Y;const q={ERRORS:0,WARNINGS:1,INFOS:5};a.VerbosityLevel=q;const K={NONE:0,BINARY:1};a.CMapCompressionType=K;const Z={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};a.OPS=Z;const it={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};a.PasswordResponses=it;let nt=q.WARNINGS;function at(St){Number.isInteger(St)&&(nt=St)}function pt(){return nt}function W(St){nt>=q.INFOS&&console.log(`Info: ${St}`)}function F(St){nt>=q.WARNINGS&&console.log(`Warning: ${St}`)}function O(St){throw new Error(St)}function T(St,lt){St||O(lt)}function g(St){switch(St?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function w(St,lt=null,J=null){if(!St)return null;try{if(J&&typeof St=="string"&&(J.addDefaultProtocol&&St.startsWith("www.")&&St.match(/\./g)?.length>=2&&(St=`http://${St}`),J.tryConvertEncoding))try{St=kt(St)}catch{}const xt=lt?new URL(St,lt):new URL(St);if(g(xt))return xt}catch{}return null}function I(St,lt,J,xt=!1){return Object.defineProperty(St,lt,{value:J,enumerable:!xt,configurable:!0,writable:!1}),J}const B=(function(){function lt(J,xt){this.constructor===lt&&O("Cannot initialize BaseException."),this.message=J,this.name=xt}return lt.prototype=new Error,lt.constructor=lt,lt})();a.BaseException=B;class X extends B{constructor(lt,J){super(lt,"PasswordException"),this.code=J}}a.PasswordException=X;class H extends B{constructor(lt,J){super(lt,"UnknownErrorException"),this.details=J}}a.UnknownErrorException=H;class v extends B{constructor(lt){super(lt,"InvalidPDFException")}}a.InvalidPDFException=v;class A extends B{constructor(lt){super(lt,"MissingPDFException")}}a.MissingPDFException=A;class k extends B{constructor(lt,J){super(lt,"UnexpectedResponseException"),this.status=J}}a.UnexpectedResponseException=k;class G extends B{constructor(lt){super(lt,"FormatError")}}a.FormatError=G;class V extends B{constructor(lt){super(lt,"AbortException")}}a.AbortException=V;function Q(St){(typeof St!="object"||St?.length===void 0)&&O("Invalid argument for bytesToString");const lt=St.length,J=8192;if(lt<J)return String.fromCharCode.apply(null,St);const xt=[];for(let Tt=0;Tt<lt;Tt+=J){const It=Math.min(Tt+J,lt),Ot=St.subarray(Tt,It);xt.push(String.fromCharCode.apply(null,Ot))}return xt.join("")}function et(St){typeof St!="string"&&O("Invalid argument for stringToBytes");const lt=St.length,J=new Uint8Array(lt);for(let xt=0;xt<lt;++xt)J[xt]=St.charCodeAt(xt)&255;return J}function ot(St){return String.fromCharCode(St>>24&255,St>>16&255,St>>8&255,St&255)}function At(St){return Object.keys(St).length}function ct(St){const lt=Object.create(null);for(const[J,xt]of St)lt[J]=xt;return lt}function dt(){const St=new Uint8Array(4);return St[0]=1,new Uint32Array(St.buffer,0,1)[0]===1}function ht(){try{return new Function(""),!0}catch{return!1}}class yt{static get isLittleEndian(){return I(this,"isLittleEndian",dt())}static get isEvalSupported(){return I(this,"isEvalSupported",ht())}static get isOffscreenCanvasSupported(){return I(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?I(this,"platform",{isWin:!1,isMac:!1}):I(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return I(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}a.FeatureTest=yt;const Et=[...Array(256).keys()].map(St=>St.toString(16).padStart(2,"0"));class Rt{static makeHexColor(lt,J,xt){return`#${Et[lt]}${Et[J]}${Et[xt]}`}static scaleMinMax(lt,J){let xt;lt[0]?(lt[0]<0&&(xt=J[0],J[0]=J[1],J[1]=xt),J[0]*=lt[0],J[1]*=lt[0],lt[3]<0&&(xt=J[2],J[2]=J[3],J[3]=xt),J[2]*=lt[3],J[3]*=lt[3]):(xt=J[0],J[0]=J[2],J[2]=xt,xt=J[1],J[1]=J[3],J[3]=xt,lt[1]<0&&(xt=J[2],J[2]=J[3],J[3]=xt),J[2]*=lt[1],J[3]*=lt[1],lt[2]<0&&(xt=J[0],J[0]=J[1],J[1]=xt),J[0]*=lt[2],J[1]*=lt[2]),J[0]+=lt[4],J[1]+=lt[4],J[2]+=lt[5],J[3]+=lt[5]}static transform(lt,J){return[lt[0]*J[0]+lt[2]*J[1],lt[1]*J[0]+lt[3]*J[1],lt[0]*J[2]+lt[2]*J[3],lt[1]*J[2]+lt[3]*J[3],lt[0]*J[4]+lt[2]*J[5]+lt[4],lt[1]*J[4]+lt[3]*J[5]+lt[5]]}static applyTransform(lt,J){const xt=lt[0]*J[0]+lt[1]*J[2]+J[4],Tt=lt[0]*J[1]+lt[1]*J[3]+J[5];return[xt,Tt]}static applyInverseTransform(lt,J){const xt=J[0]*J[3]-J[1]*J[2],Tt=(lt[0]*J[3]-lt[1]*J[2]+J[2]*J[5]-J[4]*J[3])/xt,It=(-lt[0]*J[1]+lt[1]*J[0]+J[4]*J[1]-J[5]*J[0])/xt;return[Tt,It]}static getAxialAlignedBoundingBox(lt,J){const xt=this.applyTransform(lt,J),Tt=this.applyTransform(lt.slice(2,4),J),It=this.applyTransform([lt[0],lt[3]],J),Ot=this.applyTransform([lt[2],lt[1]],J);return[Math.min(xt[0],Tt[0],It[0],Ot[0]),Math.min(xt[1],Tt[1],It[1],Ot[1]),Math.max(xt[0],Tt[0],It[0],Ot[0]),Math.max(xt[1],Tt[1],It[1],Ot[1])]}static inverseTransform(lt){const J=lt[0]*lt[3]-lt[1]*lt[2];return[lt[3]/J,-lt[1]/J,-lt[2]/J,lt[0]/J,(lt[2]*lt[5]-lt[4]*lt[3])/J,(lt[4]*lt[1]-lt[5]*lt[0])/J]}static singularValueDecompose2dScale(lt){const J=[lt[0],lt[2],lt[1],lt[3]],xt=lt[0]*J[0]+lt[1]*J[2],Tt=lt[0]*J[1]+lt[1]*J[3],It=lt[2]*J[0]+lt[3]*J[2],Ot=lt[2]*J[1]+lt[3]*J[3],Jt=(xt+Ot)/2,Xt=Math.sqrt((xt+Ot)**2-4*(xt*Ot-It*Tt))/2,Se=Jt+Xt||1,ae=Jt-Xt||1;return[Math.sqrt(Se),Math.sqrt(ae)]}static normalizeRect(lt){const J=lt.slice(0);return lt[0]>lt[2]&&(J[0]=lt[2],J[2]=lt[0]),lt[1]>lt[3]&&(J[1]=lt[3],J[3]=lt[1]),J}static intersect(lt,J){const xt=Math.max(Math.min(lt[0],lt[2]),Math.min(J[0],J[2])),Tt=Math.min(Math.max(lt[0],lt[2]),Math.max(J[0],J[2]));if(xt>Tt)return null;const It=Math.max(Math.min(lt[1],lt[3]),Math.min(J[1],J[3])),Ot=Math.min(Math.max(lt[1],lt[3]),Math.max(J[1],J[3]));return It>Ot?null:[xt,It,Tt,Ot]}static bezierBoundingBox(lt,J,xt,Tt,It,Ot,Jt,Xt){const Se=[],ae=[[],[]];let Oe,Ve,Cn,ue,gs,Fe,fe,xe;for(let ti=0;ti<2;++ti){if(ti===0?(Ve=6*lt-12*xt+6*It,Oe=-3*lt+9*xt-9*It+3*Jt,Cn=3*xt-3*lt):(Ve=6*J-12*Tt+6*Ot,Oe=-3*J+9*Tt-9*Ot+3*Xt,Cn=3*Tt-3*J),Math.abs(Oe)<1e-12){if(Math.abs(Ve)<1e-12)continue;ue=-Cn/Ve,0<ue&&ue<1&&Se.push(ue);continue}fe=Ve*Ve-4*Cn*Oe,xe=Math.sqrt(fe),!(fe<0)&&(gs=(-Ve+xe)/(2*Oe),0<gs&&gs<1&&Se.push(gs),Fe=(-Ve-xe)/(2*Oe),0<Fe&&Fe<1&&Se.push(Fe))}let Xe=Se.length,Ae;const Qn=Xe;for(;Xe--;)ue=Se[Xe],Ae=1-ue,ae[0][Xe]=Ae*Ae*Ae*lt+3*Ae*Ae*ue*xt+3*Ae*ue*ue*It+ue*ue*ue*Jt,ae[1][Xe]=Ae*Ae*Ae*J+3*Ae*Ae*ue*Tt+3*Ae*ue*ue*Ot+ue*ue*ue*Xt;return ae[0][Qn]=lt,ae[1][Qn]=J,ae[0][Qn+1]=Jt,ae[1][Qn+1]=Xt,ae[0].length=ae[1].length=Qn+2,[Math.min(...ae[0]),Math.min(...ae[1]),Math.max(...ae[0]),Math.max(...ae[1])]}}a.Util=Rt;const wt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Mt(St){if(St[0]>=""){let J;if(St[0]===""&&St[1]===""?J="utf-16be":St[0]===""&&St[1]===""?J="utf-16le":St[0]===""&&St[1]===""&&St[2]===""&&(J="utf-8"),J)try{const xt=new TextDecoder(J,{fatal:!0}),Tt=et(St);return xt.decode(Tt)}catch(xt){F(`stringToPDFString: "${xt}".`)}}const lt=[];for(let J=0,xt=St.length;J<xt;J++){const Tt=wt[St.charCodeAt(J)];lt.push(Tt?String.fromCharCode(Tt):St.charAt(J))}return lt.join("")}function kt(St){return decodeURIComponent(escape(St))}function Dt(St){return unescape(encodeURIComponent(St))}function Ft(St){return typeof St=="object"&&St?.byteLength!==void 0}function $t(St,lt){if(St.length!==lt.length)return!1;for(let J=0,xt=St.length;J<xt;J++)if(St[J]!==lt[J])return!1;return!0}function Ut(St=new Date){return[St.getUTCFullYear().toString(),(St.getUTCMonth()+1).toString().padStart(2,"0"),St.getUTCDate().toString().padStart(2,"0"),St.getUTCHours().toString().padStart(2,"0"),St.getUTCMinutes().toString().padStart(2,"0"),St.getUTCSeconds().toString().padStart(2,"0")].join("")}class Kt{#t=!1;constructor(){this.promise=new Promise((lt,J)=>{this.resolve=xt=>{this.#t=!0,lt(xt)},this.reject=xt=>{this.#t=!0,J(xt)}})}get settled(){return this.#t}}a.PromiseCapability=Kt;let Bt=null,Me=null;function hn(St){return Bt||(Bt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Me=new Map([["","t"]])),St.replaceAll(Bt,(lt,J,xt)=>J?J.normalize("NFKC"):Me.get(xt))}function $e(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const St=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(St);else for(let lt=0;lt<32;lt++)St[lt]=Math.floor(Math.random()*255);return Q(St)}const De="pdfjs_internal_id_";a.AnnotationPrefix=De}),((__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(y){if(typeof y=="string"||y instanceof URL?y={url:y}:(0,_util.isArrayBuffer)(y)&&(y={data:y}),typeof y!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!y.url&&!y.data&&!y.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const a=new PDFDocumentLoadingTask,{docId:d}=a,i=y.url?getUrlProp(y.url):null,h=y.data?getDataProp(y.data):null,E=y.httpHeaders||null,R=y.withCredentials===!0,M=y.password??null,C=y.range instanceof PDFDataRangeTransport?y.range:null,u=Number.isInteger(y.rangeChunkSize)&&y.rangeChunkSize>0?y.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let l=y.worker instanceof PDFWorker?y.worker:null;const c=y.verbosity,m=typeof y.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(y.docBaseUrl)?y.docBaseUrl:null,x=typeof y.cMapUrl=="string"?y.cMapUrl:null,p=y.cMapPacked!==!1,_=y.CMapReaderFactory||DefaultCMapReaderFactory,D=typeof y.standardFontDataUrl=="string"?y.standardFontDataUrl:null,b=y.StandardFontDataFactory||DefaultStandardFontDataFactory,L=y.stopAtErrors!==!0,N=Number.isInteger(y.maxImageSize)&&y.maxImageSize>-1?y.maxImageSize:-1,U=y.isEvalSupported!==!1,S=typeof y.isOffscreenCanvasSupported=="boolean"?y.isOffscreenCanvasSupported:!_util.isNodeJS,P=Number.isInteger(y.canvasMaxAreaInBytes)?y.canvasMaxAreaInBytes:-1,z=typeof y.disableFontFace=="boolean"?y.disableFontFace:_util.isNodeJS,Y=y.fontExtraProperties===!0,q=y.enableXfa===!0,K=y.ownerDocument||globalThis.document,Z=y.disableRange===!0,it=y.disableStream===!0,nt=y.disableAutoFetch===!0,at=y.pdfBug===!0,pt=C?C.length:y.length??NaN,W=typeof y.useSystemFonts=="boolean"?y.useSystemFonts:!_util.isNodeJS&&!z,F=typeof y.useWorkerFetch=="boolean"?y.useWorkerFetch:_===_display_utils.DOMCMapReaderFactory&&b===_display_utils.DOMStandardFontDataFactory&&x&&D&&(0,_display_utils.isValidFetchUrl)(x,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(D,document.baseURI),O=y.canvasFactory||new DefaultCanvasFactory({ownerDocument:K}),T=y.filterFactory||new DefaultFilterFactory({docId:d,ownerDocument:K}),g=null;(0,_util.setVerbosityLevel)(c);const w={canvasFactory:O,filterFactory:T};if(F||(w.cMapReaderFactory=new _({baseUrl:x,isCompressed:p}),w.standardFontDataFactory=new b({baseUrl:D})),!l){const X={verbosity:c,port:_worker_options.GlobalWorkerOptions.workerPort};l=X.port?PDFWorker.fromPort(X):new PDFWorker(X),a._worker=l}const I={docId:d,apiVersion:"3.11.174",data:h,password:M,disableAutoFetch:nt,rangeChunkSize:u,length:pt,docBaseUrl:m,enableXfa:q,evaluatorOptions:{maxImageSize:N,disableFontFace:z,ignoreErrors:L,isEvalSupported:U,isOffscreenCanvasSupported:S,canvasMaxAreaInBytes:P,fontExtraProperties:Y,useSystemFonts:W,cMapUrl:F?x:null,standardFontDataUrl:F?D:null}},B={ignoreErrors:L,isEvalSupported:U,disableFontFace:z,fontExtraProperties:Y,enableXfa:q,ownerDocument:K,disableAutoFetch:nt,pdfBug:at,styleElement:g};return l.promise.then(function(){if(a.destroyed)throw new Error("Loading aborted");const X=_fetchDocument(l,I),H=new Promise(function(v){let A;C?A=new _transport_stream.PDFDataTransportStream({length:pt,initialData:C.initialData,progressiveDone:C.progressiveDone,contentDispositionFilename:C.contentDispositionFilename,disableRange:Z,disableStream:it},C):h||(A=(G=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(G):(0,_display_utils.isValidFetchUrl)(G.url)?new _displayFetch_stream.PDFFetchStream(G):new _displayNetwork.PDFNetworkStream(G))({url:i,length:pt,httpHeaders:E,withCredentials:R,rangeChunkSize:u,disableRange:Z,disableStream:it})),v(A)});return Promise.all([X,H]).then(function([v,A]){if(a.destroyed)throw new Error("Loading aborted");const k=new _message_handler.MessageHandler(d,v,l.port),G=new WorkerTransport(k,a,A,B,w);a._transport=G,k.send("Ready",null)})}).catch(a._capability.reject),a}async function _fetchDocument(y,a){if(y.destroyed)throw new Error("Worker was destroyed");const d=await y.messageHandler.sendWithPromise("GetDocRequest",a,a.data?[a.data.buffer]:null);if(y.destroyed)throw new Error("Worker was destroyed");return d}function getUrlProp(y){if(y instanceof URL)return y.href;try{return new URL(y,window.location).href}catch{if(_util.isNodeJS&&typeof y=="string")return y}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(y){if(_util.isNodeJS&&typeof Buffer<"u"&&y instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(y instanceof Uint8Array&&y.byteLength===y.buffer.byteLength)return y;if(typeof y=="string")return(0,_util.stringToBytes)(y);if(typeof y=="object"&&!isNaN(y?.length)||(0,_util.isArrayBuffer)(y))return new Uint8Array(y);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(a){throw this._worker?.port&&delete this._worker._pendingDestroy,a}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(a,d,i=!1,h=null){this.length=a,this.initialData=d,this.progressiveDone=i,this.contentDispositionFilename=h,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(a){this._rangeListeners.push(a)}addProgressListener(a){this._progressListeners.push(a)}addProgressiveReadListener(a){this._progressiveReadListeners.push(a)}addProgressiveDoneListener(a){this._progressiveDoneListeners.push(a)}onDataRange(a,d){for(const i of this._rangeListeners)i(a,d)}onDataProgress(a,d){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(a,d)})}onDataProgressiveRead(a){this._readyCapability.promise.then(()=>{for(const d of this._progressiveReadListeners)d(a)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const a of this._progressiveDoneListeners)a()})}transportReady(){this._readyCapability.resolve()}requestDataRange(a,d){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(a,d){this._pdfInfo=a,this._transport=d,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(i=>{if(!i)return i;const h=[];for(const E in i)h.push(...i[E]);return h}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(a){return this._transport.getPage(a)}getPageIndex(a){return this._transport.getPageIndex(a)}getDestinations(){return this._transport.getDestinations()}getDestination(a){return this._transport.getDestination(a)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(a=!1){return this._transport.startCleanup(a||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#t=null;#e=!1;constructor(a,d,i,h=!1){this._pageIndex=a,this._pageInfo=d,this._transport=i,this._stats=h?new _display_utils.StatTimer:null,this._pdfBug=h,this.commonObjs=i.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:a,rotation:d=this.rotate,offsetX:i=0,offsetY:h=0,dontFlip:E=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:a,rotation:d,offsetX:i,offsetY:h,dontFlip:E})}getAnnotations({intent:a="display"}={}){const d=this._transport.getRenderingIntent(a);return this._transport.getAnnotations(this._pageIndex,d.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:a,viewport:d,intent:i="display",annotationMode:h=_util.AnnotationMode.ENABLE,transform:E=null,background:R=null,optionalContentConfigPromise:M=null,annotationCanvasMap:C=null,pageColors:u=null,printAnnotationStorage:l=null}){this._stats?.time("Overall");const c=this._transport.getRenderingIntent(i,h,l);this.#e=!1,this.#s(),M||(M=this._transport.getOptionalContentConfig());let m=this._intentStates.get(c.cacheKey);m||(m=Object.create(null),this._intentStates.set(c.cacheKey,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const x=!!(c.renderingIntent&_util.RenderingIntentFlag.PRINT);m.displayReadyCapability||(m.displayReadyCapability=new _util.PromiseCapability,m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c));const p=b=>{m.renderTasks.delete(_),(this._maybeCleanupAfterRender||x)&&(this.#e=!0),this.#n(!x),b?(_.capability.reject(b),this._abortOperatorList({intentState:m,reason:b instanceof Error?b:new Error(b)})):_.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},_=new InternalRenderTask({callback:p,params:{canvasContext:a,viewport:d,transform:E,background:R},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:C,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:u});(m.renderTasks||=new Set).add(_);const D=_.task;return Promise.all([m.displayReadyCapability.promise,M]).then(([b,L])=>{if(this.destroyed){p();return}this._stats?.time("Rendering"),_.initializeGraphics({transparency:b,optionalContentConfig:L}),_.operatorListChanged()}).catch(p),D}getOperatorList({intent:a="display",annotationMode:d=_util.AnnotationMode.ENABLE,printAnnotationStorage:i=null}={}){function h(){R.operatorList.lastChunk&&(R.opListReadCapability.resolve(R.operatorList),R.renderTasks.delete(M))}const E=this._transport.getRenderingIntent(a,d,i,!0);let R=this._intentStates.get(E.cacheKey);R||(R=Object.create(null),this._intentStates.set(E.cacheKey,R));let M;return R.opListReadCapability||(M=Object.create(null),M.operatorListChanged=h,R.opListReadCapability=new _util.PromiseCapability,(R.renderTasks||=new Set).add(M),R.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(E)),R.opListReadCapability.promise}streamTextContent({includeMarkedContent:a=!1,disableNormalization:d=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:a===!0,disableNormalization:d===!0},{highWaterMark:100,size(h){return h.items.length}})}getTextContent(a={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>_xfa_text.XfaText.textContent(i));const d=this.streamTextContent(a);return new Promise(function(i,h){function E(){R.read().then(function({value:C,done:u}){if(u){i(M);return}Object.assign(M.styles,C.styles),M.items.push(...C.items),E()},h)}const R=d.getReader(),M={items:[],styles:Object.create(null)};E()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const a=[];for(const d of this._intentStates.values())if(this._abortOperatorList({intentState:d,reason:new Error("Page was destroyed."),force:!0}),!d.opListReadCapability)for(const i of d.renderTasks)a.push(i.completed),i.cancel();return this.objs.clear(),this.#e=!1,this.#s(),Promise.all(a)}cleanup(a=!1){this.#e=!0;const d=this.#n(!1);return a&&d&&(this._stats&&=new _display_utils.StatTimer),d}#n(a=!1){if(this.#s(),!this.#e||this.destroyed)return!1;if(a)return this.#t=setTimeout(()=>{this.#t=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:d,operatorList:i}of this._intentStates.values())if(d.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#s(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(a,d){const i=this._intentStates.get(d);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(a))}_renderPageChunk(a,d){for(let i=0,h=a.length;i<h;i++)d.operatorList.fnArray.push(a.fnArray[i]),d.operatorList.argsArray.push(a.argsArray[i]);d.operatorList.lastChunk=a.lastChunk,d.operatorList.separateAnnots=a.separateAnnots;for(const i of d.renderTasks)i.operatorListChanged();a.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:a,cacheKey:d,annotationStorageSerializable:i}){const{map:h,transfers:E}=i,M=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:a,cacheKey:d,annotationStorage:h},E).getReader(),C=this._intentStates.get(d);C.streamReader=M;const u=()=>{M.read().then(({value:l,done:c})=>{if(c){C.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(l,C),u())},l=>{if(C.streamReader=null,!this._transport.destroyed){if(C.operatorList){C.operatorList.lastChunk=!0;for(const c of C.renderTasks)c.operatorListChanged();this.#n(!0)}if(C.displayReadyCapability)C.displayReadyCapability.reject(l);else if(C.opListReadCapability)C.opListReadCapability.reject(l);else throw l}})};u()}_abortOperatorList({intentState:a,reason:d,force:i=!1}){if(a.streamReader){if(a.streamReaderCancelTimeout&&(clearTimeout(a.streamReaderCancelTimeout),a.streamReaderCancelTimeout=null),!i){if(a.renderTasks.size>0)return;if(d instanceof _display_utils.RenderingCancelledException){let h=RENDERING_CANCELLED_TIMEOUT;d.extraDelay>0&&d.extraDelay<1e3&&(h+=d.extraDelay),a.streamReaderCancelTimeout=setTimeout(()=>{a.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:a,reason:d,force:!0})},h);return}}if(a.streamReader.cancel(new _util.AbortException(d.message)).catch(()=>{}),a.streamReader=null,!this._transport.destroyed){for(const[h,E]of this._intentStates)if(E===a){this._intentStates.delete(h);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#t=new Set;#e=Promise.resolve();postMessage(a,d){const i={data:structuredClone(a,d?{transfer:d}:null)};this.#e.then(()=>{for(const h of this.#t)h.call(this,i)})}addEventListener(a,d){this.#t.add(d)}removeEventListener(a,d){this.#t.delete(d)}terminate(){this.#t.clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const y=document?.currentScript?.src;y&&(PDFWorkerUtil.fallbackWorkerSrc=y.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(y,a){let d;try{if(d=new URL(y),!d.origin||d.origin==="null")return!1}catch{return!1}const i=new URL(a,d);return d.origin===i.origin},PDFWorkerUtil.createCDNWrapper=function(y){const a=`importScripts("${y}");`;return URL.createObjectURL(new Blob([a]))}}class PDFWorker{static#workerPorts;constructor({name:y=null,port:a=null,verbosity:d=(0,_util.getVerbosityLevel)()}={}){if(this.name=y,this.destroyed=!1,this.verbosity=d,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,a){if(PDFWorker.#workerPorts?.has(a))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(a,this),this._initializeFromPort(a);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(y){this._port=y,this._messageHandler=new _message_handler.MessageHandler("main","worker",y),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:y}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,y)||(y=PDFWorkerUtil.createCDNWrapper(new URL(y,window.location).href));const a=new Worker(y),d=new _message_handler.MessageHandler("main","worker",a),i=()=>{a.removeEventListener("error",h),d.destroy(),a.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},h=()=>{this._webWorker||i()};a.addEventListener("error",h),d.on("test",R=>{if(a.removeEventListener("error",h),this.destroyed){i();return}R?(this._messageHandler=d,this._port=a,this._webWorker=a,this._readyCapability.resolve(),d.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),d.destroy(),a.terminate())}),d.on("ready",R=>{if(a.removeEventListener("error",h),this.destroyed){i();return}try{E()}catch{this._setupFakeWorker()}});const E=()=>{const R=new Uint8Array;d.send("test",R,[R.buffer])};E();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(y=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const a=new LoopbackPort;this._port=a;const d=`fake${PDFWorkerUtil.fakeWorkerId++}`,i=new _message_handler.MessageHandler(d+"_worker",d,a);y.setup(i,a);const h=new _message_handler.MessageHandler(d,d+"_worker",a);this._messageHandler=h,this._readyCapability.resolve(),h.send("configure",{verbosity:this.verbosity})}).catch(y=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${y.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(y){if(!y?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const a=this.#workerPorts?.get(y.port);if(a){if(a._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return a}return new PDFWorker(y)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#t=new Map;#e=new Map;#n=new Map;#s=null;constructor(a,d,i,h,E){this.messageHandler=a,this.loadingTask=d,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:h.ownerDocument,styleElement:h.styleElement}),this._params=h,this.canvasFactory=E.canvasFactory,this.filterFactory=E.filterFactory,this.cMapReaderFactory=E.cMapReaderFactory,this.standardFontDataFactory=E.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#o(a,d=null){const i=this.#t.get(a);if(i)return i;const h=this.messageHandler.sendWithPromise(a,d);return this.#t.set(a,h),h}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(a,d=_util.AnnotationMode.ENABLE,i=null,h=!1){let E=_util.RenderingIntentFlag.DISPLAY,R=_annotation_storage.SerializableEmpty;switch(a){case"any":E=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":E=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${a}`)}switch(d){case _util.AnnotationMode.DISABLE:E+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:E+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:E+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,R=(E&_util.RenderingIntentFlag.PRINT&&i instanceof _annotation_storage.PrintAnnotationStorage?i:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${d}`)}return h&&(E+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:E,cacheKey:`${E}_${R.hash}`,annotationStorageSerializable:R}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const a=[];for(const i of this.#e.values())a.push(i._destroy());this.#e.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const d=this.messageHandler.sendWithPromise("Terminate",null);return a.push(d),Promise.all(a).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:a,loadingTask:d}=this;a.on("GetReader",(i,h)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=E=>{this._lastProgress={loaded:E.loaded,total:E.total}},h.onPull=()=>{this._fullReader.read().then(function({value:E,done:R}){if(R){h.close();return}(0,_util.assert)(E instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),h.enqueue(new Uint8Array(E),1,[E])}).catch(E=>{h.error(E)})},h.onCancel=E=>{this._fullReader.cancel(E),h.ready.catch(R=>{if(!this.destroyed)throw R})}}),a.on("ReaderHeadersReady",i=>{const h=new _util.PromiseCapability,E=this._fullReader;return E.headersReady.then(()=>{(!E.isStreamingSupported||!E.isRangeSupported)&&(this._lastProgress&&d.onProgress?.(this._lastProgress),E.onProgress=R=>{d.onProgress?.({loaded:R.loaded,total:R.total})}),h.resolve({isStreamingSupported:E.isStreamingSupported,isRangeSupported:E.isRangeSupported,contentLength:E.contentLength})},h.reject),h.promise}),a.on("GetRangeReader",(i,h)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const E=this._networkStream.getRangeReader(i.begin,i.end);if(!E){h.close();return}h.onPull=()=>{E.read().then(function({value:R,done:M}){if(M){h.close();return}(0,_util.assert)(R instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),h.enqueue(new Uint8Array(R),1,[R])}).catch(R=>{h.error(R)})},h.onCancel=R=>{E.cancel(R),h.ready.catch(M=>{if(!this.destroyed)throw M})}}),a.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,d._capability.resolve(new PDFDocumentProxy(i,this))}),a.on("DocException",function(i){let h;switch(i.name){case"PasswordException":h=new _util.PasswordException(i.message,i.code);break;case"InvalidPDFException":h=new _util.InvalidPDFException(i.message);break;case"MissingPDFException":h=new _util.MissingPDFException(i.message);break;case"UnexpectedResponseException":h=new _util.UnexpectedResponseException(i.message,i.status);break;case"UnknownErrorException":h=new _util.UnknownErrorException(i.message,i.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}d._capability.reject(h)}),a.on("PasswordRequest",i=>{if(this.#s=new _util.PromiseCapability,d.onPassword){const h=E=>{E instanceof Error?this.#s.reject(E):this.#s.resolve({password:E})};try{d.onPassword(h,i.code)}catch(E){this.#s.reject(E)}}else this.#s.reject(new _util.PasswordException(i.message,i.code));return this.#s.promise}),a.on("DataLoaded",i=>{d.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),a.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),a.on("commonobj",([i,h,E])=>{if(!this.destroyed&&!this.commonObjs.has(i))switch(h){case"Font":const R=this._params;if("error"in E){const u=E.error;(0,_util.warn)(`Error during font loading: ${u}`),this.commonObjs.resolve(i,u);break}const M=R.pdfBug&&globalThis.FontInspector?.enabled?(u,l)=>globalThis.FontInspector.fontAdded(u,l):null,C=new _font_loader.FontFaceObject(E,{isEvalSupported:R.isEvalSupported,disableFontFace:R.disableFontFace,ignoreErrors:R.ignoreErrors,inspectFont:M});this.fontLoader.bind(C).catch(u=>a.sendWithPromise("FontFallback",{id:i})).finally(()=>{!R.fontExtraProperties&&C.data&&(C.data=null),this.commonObjs.resolve(i,C)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,E);break;default:throw new Error(`Got unknown common object type ${h}`)}}),a.on("obj",([i,h,E,R])=>{if(this.destroyed)return;const M=this.#e.get(h);if(!M.objs.has(i))switch(E){case"Image":if(M.objs.resolve(i,R),R){let C;if(R.bitmap){const{width:u,height:l}=R;C=u*l*4}else C=R.data?.length||0;C>_util.MAX_IMAGE_SIZE_TO_CACHE&&(M._maybeCleanupAfterRender=!0)}break;case"Pattern":M.objs.resolve(i,R);break;default:throw new Error(`Got unknown object type ${E}`)}}),a.on("DocProgress",i=>{this.destroyed||d.onProgress?.({loaded:i.loaded,total:i.total})}),a.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),a.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:a,transfers:d}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:a,filename:this._fullReader?.filename??null},d).finally(()=>{this.annotationStorage.resetModified()})}getPage(a){if(!Number.isInteger(a)||a<=0||a>this._numPages)return Promise.reject(new Error("Invalid page request."));const d=a-1,i=this.#n.get(d);if(i)return i;const h=this.messageHandler.sendWithPromise("GetPage",{pageIndex:d}).then(E=>{if(this.destroyed)throw new Error("Transport destroyed");const R=new PDFPageProxy(d,E,this,this._params.pdfBug);return this.#e.set(d,R),R});return this.#n.set(d,h),h}getPageIndex(a){return typeof a!="object"||a===null||!Number.isInteger(a.num)||a.num<0||!Number.isInteger(a.gen)||a.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:a.num,gen:a.gen})}getAnnotations(a,d){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:a,intent:d})}getFieldObjects(){return this.#o("GetFieldObjects")}hasJSActions(){return this.#o("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(a){return typeof a!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:a})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#o("GetDocJSActions")}getPageJSActions(a){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:a})}getStructTree(a){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:a})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(a=>new _optional_content_config.OptionalContentConfig(a))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const a="GetMetadata",d=this.#t.get(a);if(d)return d;const i=this.messageHandler.sendWithPromise(a,null).then(h=>({info:h[0],metadata:h[1]?new _metadata.Metadata(h[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(a,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(a=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const d of this.#e.values())if(!d.cleanup())throw new Error(`startCleanup: Page ${d.pageNumber} is currently rendering.`);this.commonObjs.clear(),a||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:a,enableXfa:d}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:a,enableXfa:d})}}class PDFObjects{#t=Object.create(null);#e(a){return this.#t[a]||={capability:new _util.PromiseCapability,data:null}}get(a,d=null){if(d){const h=this.#e(a);return h.capability.promise.then(()=>d(h.data)),null}const i=this.#t[a];if(!i?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${a}.`);return i.data}has(a){return this.#t[a]?.capability.settled||!1}resolve(a,d=null){const i=this.#e(a);i.data=d,i.capability.resolve()}clear(){for(const a in this.#t){const{data:d}=this.#t[a];d?.bitmap?.close()}this.#t=Object.create(null)}}class RenderTask{#t=null;constructor(a){this.#t=a,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(a=0){this.#t.cancel(null,a)}get separateAnnots(){const{separateAnnots:a}=this.#t.operatorList;if(!a)return!1;const{annotationCanvasMap:d}=this.#t;return a.form||a.canvas&&d?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#t=new WeakSet;constructor({callback:a,params:d,objs:i,commonObjs:h,annotationCanvasMap:E,operatorList:R,pageIndex:M,canvasFactory:C,filterFactory:u,useRequestAnimationFrame:l=!1,pdfBug:c=!1,pageColors:m=null}){this.callback=a,this.params=d,this.objs=i,this.commonObjs=h,this.annotationCanvasMap=E,this.operatorListIdx=null,this.operatorList=R,this._pageIndex=M,this.canvasFactory=C,this.filterFactory=u,this._pdfBug=c,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=l===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=d.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:a=!1,optionalContentConfig:d}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:h,transform:E,background:R}=this.params;this.gfx=new _canvas.CanvasGraphics(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:d},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:E,viewport:h,transparency:a,background:R}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(a=null,d=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback(a||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,d))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback())))}}const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SerializableEmpty=a.PrintAnnotationStorage=a.AnnotationStorage=void 0;var i=d(1),h=d(4),E=d(8);const R=Object.freeze({map:null,hash:"",transfers:void 0});a.SerializableEmpty=R;class M{#t=!1;#e=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(l,c){const m=this.#e.get(l);return m===void 0?c:Object.assign(c,m)}getRawValue(l){return this.#e.get(l)}remove(l){if(this.#e.delete(l),this.#e.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const c of this.#e.values())if(c instanceof h.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(l,c){const m=this.#e.get(l);let x=!1;if(m!==void 0)for(const[p,_]of Object.entries(c))m[p]!==_&&(x=!0,m[p]=_);else x=!0,this.#e.set(l,c);x&&this.#n(),c instanceof h.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(c.constructor._type)}has(l){return this.#e.has(l)}getAll(){return this.#e.size>0?(0,i.objectFromMap)(this.#e):null}setAll(l){for(const[c,m]of Object.entries(l))this.setValue(c,m)}get size(){return this.#e.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new C(this)}get serializable(){if(this.#e.size===0)return R;const l=new Map,c=new E.MurmurHash3_64,m=[],x=Object.create(null);let p=!1;for(const[_,D]of this.#e){const b=D instanceof h.AnnotationEditor?D.serialize(!1,x):D;b&&(l.set(_,b),c.update(`${_}:${JSON.stringify(b)}`),p||=!!b.bitmap)}if(p)for(const _ of l.values())_.bitmap&&m.push(_.bitmap);return l.size>0?{map:l,hash:c.hexdigest(),transfers:m}:R}}a.AnnotationStorage=M;class C extends M{#t;constructor(l){super();const{map:c,hash:m,transfers:x}=l.serializable,p=structuredClone(c,x?{transfer:x}:null);this.#t={map:p,hash:m,transfers:x}}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}}a.PrintAnnotationStorage=C}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationEditor=void 0;var i=d(5),h=d(1),E=d(6);class R{#t="";#e=!1;#n=null;#s=null;#o=null;#r=!1;#a=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#i=!1;#f=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#h=!1;#p=R._zIndex++;static _borderLineWidth=-1;static _colorManager=new i.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(u){this.constructor===R&&(0,h.unreachable)("Cannot initialize AnnotationEditor."),this.parent=u.parent,this.id=u.id,this.width=this.height=null,this.pageIndex=u.parent.pageIndex,this.name=u.name,this.div=null,this._uiManager=u.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=u.isCentered,this._structTreeParentId=null;const{rotation:l,rawDims:{pageWidth:c,pageHeight:m,pageX:x,pageY:p}}=this.parent.viewport;this.rotation=l,this.pageRotation=(360+l-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[c,m],this.pageTranslation=[x,p];const[_,D]=this.parentDimensions;this.x=u.x/_,this.y=u.y/D,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,h.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(u){const l=new M({id:u.parent.getNextId(),parent:u.parent,uiManager:u._uiManager});l.annotationElementId=u.annotationElementId,l.deleted=!0,l._uiManager.addToAnnotationStorage(l)}static initialize(u,l=null){if(R._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(m=>[m,u.get(m)])),l?.strings)for(const m of l.strings)R._l10nPromise.set(m,u.get(m));if(R._borderLineWidth!==-1)return;const c=getComputedStyle(document.documentElement);R._borderLineWidth=parseFloat(c.getPropertyValue("--outline-width"))||0}static updateDefaultParams(u,l){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(u){return!1}static paste(u,l){(0,h.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#h}set _isDraggable(u){this.#h=u,this.div?.classList.toggle("draggable",u)}center(){const[u,l]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*l/(u*2),this.y+=this.width*u/(l*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*l/(u*2),this.y-=this.width*u/(l*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(u){this._uiManager.addCommands(u)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(u){u!==null&&(this.pageIndex=u.pageIndex,this.pageDimensions=u.pageDimensions),this.parent=u}focusin(u){this._focusEventsAllowed&&(this.#i?this.#i=!1:this.parent.setSelected(this))}focusout(u){!this._focusEventsAllowed||!this.isAttachedToDOM||u.relatedTarget?.closest(`#${this.id}`)||(u.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(u,l,c,m){const[x,p]=this.parentDimensions;[c,m]=this.screenToPageTranslation(c,m),this.x=(u+c)/x,this.y=(l+m)/p,this.fixAndSetPosition()}#y([u,l],c,m){[c,m]=this.screenToPageTranslation(c,m),this.x+=c/u,this.y+=m/l,this.fixAndSetPosition()}translate(u,l){this.#y(this.parentDimensions,u,l)}translateInPage(u,l){this.#y(this.pageDimensions,u,l),this.div.scrollIntoView({block:"nearest"})}drag(u,l){const[c,m]=this.parentDimensions;if(this.x+=u/c,this.y+=l/m,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:b,y:L}=this.div.getBoundingClientRect();this.parent.findNewParent(this,b,L)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x,y:p}=this;const[_,D]=this.#m();x+=_,p+=D,this.div.style.left=`${(100*x).toFixed(2)}%`,this.div.style.top=`${(100*p).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#m(){const[u,l]=this.parentDimensions,{_borderLineWidth:c}=R,m=c/u,x=c/l;switch(this.rotation){case 90:return[-m,x];case 180:return[m,x];case 270:return[m,-x];default:return[-m,-x]}}fixAndSetPosition(){const[u,l]=this.pageDimensions;let{x:c,y:m,width:x,height:p}=this;switch(x*=u,p*=l,c*=u,m*=l,this.rotation){case 0:c=Math.max(0,Math.min(u-x,c)),m=Math.max(0,Math.min(l-p,m));break;case 90:c=Math.max(0,Math.min(u-p,c)),m=Math.min(l,Math.max(x,m));break;case 180:c=Math.min(u,Math.max(x,c)),m=Math.min(l,Math.max(p,m));break;case 270:c=Math.min(u,Math.max(p,c)),m=Math.max(0,Math.min(l-x,m));break}this.x=c/=u,this.y=m/=l;const[_,D]=this.#m();c+=_,m+=D;const{style:b}=this.div;b.left=`${(100*c).toFixed(2)}%`,b.top=`${(100*m).toFixed(2)}%`,this.moveInDOM()}static#g(u,l,c){switch(c){case 90:return[l,-u];case 180:return[-u,-l];case 270:return[-l,u];default:return[u,l]}}screenToPageTranslation(u,l){return R.#g(u,l,this.parentRotation)}pageTranslationToScreen(u,l){return R.#g(u,l,360-this.parentRotation)}#u(u){switch(u){case 90:{const[l,c]=this.pageDimensions;return[0,-l/c,c/l,0]}case 180:return[-1,0,0,-1];case 270:{const[l,c]=this.pageDimensions;return[0,l/c,-c/l,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:u,pageDimensions:[l,c]}=this,m=l*u,x=c*u;return h.FeatureTest.isCSSRoundSupported?[Math.round(m),Math.round(x)]:[m,x]}setDims(u,l){const[c,m]=this.parentDimensions;this.div.style.width=`${(100*u/c).toFixed(2)}%`,this.#r||(this.div.style.height=`${(100*l/m).toFixed(2)}%`),this.#n?.classList.toggle("small",u<R.SMALL_EDITOR_SIZE||l<R.SMALL_EDITOR_SIZE)}fixDims(){const{style:u}=this.div,{height:l,width:c}=u,m=c.endsWith("%"),x=!this.#r&&l.endsWith("%");if(m&&x)return;const[p,_]=this.parentDimensions;m||(u.width=`${(100*parseFloat(c)/p).toFixed(2)}%`),!this.#r&&!x&&(u.height=`${(100*parseFloat(l)/_).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#x(){if(this.#a)return;this.#a=document.createElement("div"),this.#a.classList.add("resizers");const u=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||u.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const l of u){const c=document.createElement("div");this.#a.append(c),c.classList.add("resizer",l),c.addEventListener("pointerdown",this.#S.bind(this,l)),c.addEventListener("contextmenu",E.noContextMenu)}this.div.prepend(this.#a)}#S(u,l){l.preventDefault();const{isMac:c}=h.FeatureTest.platform;if(l.button!==0||l.ctrlKey&&c)return;const m=this.#_.bind(this,u),x=this._isDraggable;this._isDraggable=!1;const p={passive:!0,capture:!0};window.addEventListener("pointermove",m,p);const _=this.x,D=this.y,b=this.width,L=this.height,N=this.parent.div.style.cursor,U=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(l.target).cursor;const S=()=>{this._isDraggable=x,window.removeEventListener("pointerup",S),window.removeEventListener("blur",S),window.removeEventListener("pointermove",m,p),this.parent.div.style.cursor=N,this.div.style.cursor=U;const P=this.x,z=this.y,Y=this.width,q=this.height;P===_&&z===D&&Y===b&&q===L||this.addCommands({cmd:()=>{this.width=Y,this.height=q,this.x=P,this.y=z;const[K,Z]=this.parentDimensions;this.setDims(K*Y,Z*q),this.fixAndSetPosition()},undo:()=>{this.width=b,this.height=L,this.x=_,this.y=D;const[K,Z]=this.parentDimensions;this.setDims(K*b,Z*L),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",S),window.addEventListener("blur",S)}#_(u,l){const[c,m]=this.parentDimensions,x=this.x,p=this.y,_=this.width,D=this.height,b=R.MIN_SIZE/c,L=R.MIN_SIZE/m,N=H=>Math.round(H*1e4)/1e4,U=this.#u(this.rotation),S=(H,v)=>[U[0]*H+U[2]*v,U[1]*H+U[3]*v],P=this.#u(360-this.rotation),z=(H,v)=>[P[0]*H+P[2]*v,P[1]*H+P[3]*v];let Y,q,K=!1,Z=!1;switch(u){case"topLeft":K=!0,Y=(H,v)=>[0,0],q=(H,v)=>[H,v];break;case"topMiddle":Y=(H,v)=>[H/2,0],q=(H,v)=>[H/2,v];break;case"topRight":K=!0,Y=(H,v)=>[H,0],q=(H,v)=>[0,v];break;case"middleRight":Z=!0,Y=(H,v)=>[H,v/2],q=(H,v)=>[0,v/2];break;case"bottomRight":K=!0,Y=(H,v)=>[H,v],q=(H,v)=>[0,0];break;case"bottomMiddle":Y=(H,v)=>[H/2,v],q=(H,v)=>[H/2,0];break;case"bottomLeft":K=!0,Y=(H,v)=>[0,v],q=(H,v)=>[H,0];break;case"middleLeft":Z=!0,Y=(H,v)=>[0,v/2],q=(H,v)=>[H,v/2];break}const it=Y(_,D),nt=q(_,D);let at=S(...nt);const pt=N(x+at[0]),W=N(p+at[1]);let F=1,O=1,[T,g]=this.screenToPageTranslation(l.movementX,l.movementY);if([T,g]=z(T/c,g/m),K){const H=Math.hypot(_,D);F=O=Math.max(Math.min(Math.hypot(nt[0]-it[0]-T,nt[1]-it[1]-g)/H,1/_,1/D),b/_,L/D)}else Z?F=Math.max(b,Math.min(1,Math.abs(nt[0]-it[0]-T)))/_:O=Math.max(L,Math.min(1,Math.abs(nt[1]-it[1]-g)))/D;const w=N(_*F),I=N(D*O);at=S(...q(w,I));const B=pt-at[0],X=W-at[1];this.width=w,this.height=I,this.x=B,this.y=X,this.setDims(c*w,m*I),this.fixAndSetPosition()}async addAltTextButton(){if(this.#n)return;const u=this.#n=document.createElement("button");u.className="altText";const l=await R._l10nPromise.get("editor_alt_text_button_label");u.textContent=l,u.setAttribute("aria-label",l),u.tabIndex="0",u.addEventListener("contextmenu",E.noContextMenu),u.addEventListener("pointerdown",c=>c.stopPropagation()),u.addEventListener("click",c=>{c.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),u.addEventListener("keydown",c=>{c.target===u&&c.key==="Enter"&&(c.preventDefault(),this._uiManager.editAltText(this))}),this.#R(),this.div.append(u),R.SMALL_EDITOR_SIZE||(R.SMALL_EDITOR_SIZE=Math.min(128,Math.round(u.getBoundingClientRect().width*1.4)))}async#R(){const u=this.#n;if(!u)return;if(!this.#t&&!this.#e){u.classList.remove("done"),this.#s?.remove();return}R._l10nPromise.get("editor_alt_text_edit_button_label").then(c=>{u.setAttribute("aria-label",c)});let l=this.#s;if(!l){this.#s=l=document.createElement("span"),l.className="tooltip",l.setAttribute("role","tooltip");const c=l.id=`alt-text-tooltip-${this.id}`;u.setAttribute("aria-describedby",c);const m=100;u.addEventListener("mouseenter",()=>{this.#o=setTimeout(()=>{this.#o=null,this.#s.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},m)}),u.addEventListener("mouseleave",()=>{clearTimeout(this.#o),this.#o=null,this.#s?.classList.remove("show")})}u.classList.add("done"),l.innerText=this.#e?await R._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#t,l.parentNode||u.append(l)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#t,decorative:this.#e}}set altTextData({altText:u,decorative:l}){this.#t===u&&this.#e===l||(this.#t=u,this.#e=l,this.#R())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);const[u,l]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*l/u).toFixed(2)}%`,this.div.style.maxHeight=`${(100*u/l).toFixed(2)}%`);const[c,m]=this.getInitialTranslation();return this.translate(c,m),(0,i.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(u){const{isMac:l}=h.FeatureTest.platform;if(u.button!==0||u.ctrlKey&&l){u.preventDefault();return}this.#i=!0,this.#C(u)}#C(u){if(!this._isDraggable)return;const l=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let c,m;l&&(c={passive:!0,capture:!0},m=p=>{const[_,D]=this.screenToPageTranslation(p.movementX,p.movementY);this._uiManager.dragSelectedEditors(_,D)},window.addEventListener("pointermove",m,c));const x=()=>{if(window.removeEventListener("pointerup",x),window.removeEventListener("blur",x),l&&window.removeEventListener("pointermove",m,c),this.#i=!1,!this._uiManager.endDragSession()){const{isMac:p}=h.FeatureTest.platform;u.ctrlKey&&!p||u.shiftKey||u.metaKey&&p?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",x),window.addEventListener("blur",x)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(u,l,c){u.changeParent(this),this.x=l,this.y=c,this.fixAndSetPosition()}getRect(u,l){const c=this.parentScale,[m,x]=this.pageDimensions,[p,_]=this.pageTranslation,D=u/c,b=l/c,L=this.x*m,N=this.y*x,U=this.width*m,S=this.height*x;switch(this.rotation){case 0:return[L+D+p,x-N-b-S+_,L+D+U+p,x-N-b+_];case 90:return[L+b+p,x-N+D+_,L+b+S+p,x-N+D+U+_];case 180:return[L-D-U+p,x-N+b+_,L-D+p,x-N+b+S+_];case 270:return[L-b-S+p,x-N-D-U+_,L-b+p,x-N-D+_];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(u,l){const[c,m,x,p]=u,_=x-c,D=p-m;switch(this.rotation){case 0:return[c,l-p,_,D];case 90:return[c,l-m,D,_];case 180:return[x,l-m,_,D];case 270:return[x,l-p,D,_];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(u=!1,l=null){(0,h.unreachable)("An editor must be serializable")}static deserialize(u,l,c){const m=new this.prototype.constructor({parent:l,id:l.getNextId(),uiManager:c});m.rotation=u.rotation;const[x,p]=m.pageDimensions,[_,D,b,L]=m.getRectInCurrentCoords(u.rect,p);return m.x=_/x,m.y=D/p,m.width=b/x,m.height=L/p,m}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#s=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#x(),this.#a.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#a?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(u,l){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(u){this.#f=u,this.parent&&(u?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(u,l){this.#r=!0;const c=u/l,{style:m}=this.div;m.aspectRatio=c,m.height="auto"}static get MIN_SIZE(){return 16}}a.AnnotationEditor=R;class M extends R{constructor(u){super(u),this.annotationElementId=u.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.KeyboardManager=a.CommandManager=a.ColorManager=a.AnnotationEditorUIManager=void 0,a.bindEvents=E,a.opacityToHex=R;var i=d(1),h=d(6);function E(x,p,_){for(const D of _)p.addEventListener(D,x[D].bind(x))}function R(x){return Math.round(Math.min(255,Math.max(1,255*x))).toString(16).padStart(2,"0")}class M{#t=0;getId(){return`${i.AnnotationEditorPrefix}${this.#t++}`}}class C{#t=(0,i.getUuid)();#e=0;#n=null;static get _isSVGFittingCanvas(){const p='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',D=new OffscreenCanvas(1,3).getContext("2d"),b=new Image;b.src=p;const L=b.decode().then(()=>(D.drawImage(b,0,0,1,1,0,0,1,3),new Uint32Array(D.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,i.shadow)(this,"_isSVGFittingCanvas",L)}async#s(p,_){this.#n||=new Map;let D=this.#n.get(p);if(D===null)return null;if(D?.bitmap)return D.refCounter+=1,D;try{D||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let b;if(typeof _=="string"){D.url=_;const L=await fetch(_);if(!L.ok)throw new Error(L.statusText);b=await L.blob()}else b=D.file=_;if(b.type==="image/svg+xml"){const L=C._isSVGFittingCanvas,N=new FileReader,U=new Image,S=new Promise((P,z)=>{U.onload=()=>{D.bitmap=U,D.isSvg=!0,P()},N.onload=async()=>{const Y=D.svgUrl=N.result;U.src=await L?`${Y}#svgView(preserveAspectRatio(none))`:Y},U.onerror=N.onerror=z});N.readAsDataURL(b),await S}else D.bitmap=await createImageBitmap(b);D.refCounter=1}catch(b){console.error(b),D=null}return this.#n.set(p,D),D&&this.#n.set(D.id,D),D}async getFromFile(p){const{lastModified:_,name:D,size:b,type:L}=p;return this.#s(`${_}_${D}_${b}_${L}`,p)}async getFromUrl(p){return this.#s(p,p)}async getFromId(p){this.#n||=new Map;const _=this.#n.get(p);return _?_.bitmap?(_.refCounter+=1,_):_.file?this.getFromFile(_.file):this.getFromUrl(_.url):null}getSvgUrl(p){const _=this.#n.get(p);return _?.isSvg?_.svgUrl:null}deleteId(p){this.#n||=new Map;const _=this.#n.get(p);_&&(_.refCounter-=1,_.refCounter===0&&(_.bitmap=null))}isValidId(p){return p.startsWith(`image_${this.#t}_`)}}class u{#t=[];#e=!1;#n;#s=-1;constructor(p=128){this.#n=p}add({cmd:p,undo:_,mustExec:D,type:b=NaN,overwriteIfSameType:L=!1,keepUndo:N=!1}){if(D&&p(),this.#e)return;const U={cmd:p,undo:_,type:b};if(this.#s===-1){this.#t.length>0&&(this.#t.length=0),this.#s=0,this.#t.push(U);return}if(L&&this.#t[this.#s].type===b){N&&(U.undo=this.#t[this.#s].undo),this.#t[this.#s]=U;return}const S=this.#s+1;S===this.#n?this.#t.splice(0,1):(this.#s=S,S<this.#t.length&&this.#t.splice(S)),this.#t.push(U)}undo(){this.#s!==-1&&(this.#e=!0,this.#t[this.#s].undo(),this.#e=!1,this.#s-=1)}redo(){this.#s<this.#t.length-1&&(this.#s+=1,this.#e=!0,this.#t[this.#s].cmd(),this.#e=!1)}hasSomethingToUndo(){return this.#s!==-1}hasSomethingToRedo(){return this.#s<this.#t.length-1}destroy(){this.#t=null}}a.CommandManager=u;class l{constructor(p){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:_}=i.FeatureTest.platform;for(const[D,b,L={}]of p)for(const N of D){const U=N.startsWith("mac+");_&&U?(this.callbacks.set(N.slice(4),{callback:b,options:L}),this.allKeys.add(N.split("+").at(-1))):!_&&!U&&(this.callbacks.set(N,{callback:b,options:L}),this.allKeys.add(N.split("+").at(-1)))}}#t(p){p.altKey&&this.buffer.push("alt"),p.ctrlKey&&this.buffer.push("ctrl"),p.metaKey&&this.buffer.push("meta"),p.shiftKey&&this.buffer.push("shift"),this.buffer.push(p.key);const _=this.buffer.join("+");return this.buffer.length=0,_}exec(p,_){if(!this.allKeys.has(_.key))return;const D=this.callbacks.get(this.#t(_));if(!D)return;const{callback:b,options:{bubbles:L=!1,args:N=[],checker:U=null}}=D;U&&!U(p,_)||(b.bind(p,...N)(),L||(_.stopPropagation(),_.preventDefault()))}}a.KeyboardManager=l;class c{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const p=new Map([["CanvasText",null],["Canvas",null]]);return(0,h.getColorValues)(p),(0,i.shadow)(this,"_colors",p)}convert(p){const _=(0,h.getRGB)(p);if(!window.matchMedia("(forced-colors: active)").matches)return _;for(const[D,b]of this._colors)if(b.every((L,N)=>L===_[N]))return c._colorsMapping.get(D);return _}getHexCode(p){const _=this._colors.get(p);return _?i.Util.makeHexColor(..._):p}}a.ColorManager=c;class m{#t=null;#e=new Map;#n=new Map;#s=null;#o=null;#r=new u;#a=0;#l=new Set;#c=null;#i=null;#f=new Set;#d=null;#h=new M;#p=!1;#y=!1;#m=null;#g=i.AnnotationEditorType.NONE;#u=new Set;#x=null;#S=this.blur.bind(this);#_=this.focus.bind(this);#R=this.copy.bind(this);#C=this.cut.bind(this);#j=this.paste.bind(this);#L=this.keydown.bind(this);#N=this.onEditingAction.bind(this);#v=this.onPageChanging.bind(this);#k=this.onScaleChanging.bind(this);#M=this.onRotationChanging.bind(this);#D={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#b=[0,0];#w=null;#A=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const p=m.prototype,_=L=>{const{activeElement:N}=document;return N&&L.#A.contains(N)&&L.hasSomethingToControl()},D=this.TRANSLATE_SMALL,b=this.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new l([[["ctrl+a","mac+meta+a"],p.selectAll],[["ctrl+z","mac+meta+z"],p.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],p.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],p.delete],[["Escape","mac+Escape"],p.unselectAll],[["ArrowLeft","mac+ArrowLeft"],p.translateSelectedEditors,{args:[-D,0],checker:_}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],p.translateSelectedEditors,{args:[-b,0],checker:_}],[["ArrowRight","mac+ArrowRight"],p.translateSelectedEditors,{args:[D,0],checker:_}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],p.translateSelectedEditors,{args:[b,0],checker:_}],[["ArrowUp","mac+ArrowUp"],p.translateSelectedEditors,{args:[0,-D],checker:_}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],p.translateSelectedEditors,{args:[0,-b],checker:_}],[["ArrowDown","mac+ArrowDown"],p.translateSelectedEditors,{args:[0,D],checker:_}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],p.translateSelectedEditors,{args:[0,b],checker:_}]]))}constructor(p,_,D,b,L,N){this.#A=p,this.#F=_,this.#s=D,this._eventBus=b,this._eventBus._on("editingaction",this.#N),this._eventBus._on("pagechanging",this.#v),this._eventBus._on("scalechanging",this.#k),this._eventBus._on("rotationchanging",this.#M),this.#o=L.annotationStorage,this.#d=L.filterFactory,this.#x=N,this.viewParameters={realScale:h.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#P(),this.#I(),this._eventBus._off("editingaction",this.#N),this._eventBus._off("pagechanging",this.#v),this._eventBus._off("scalechanging",this.#k),this._eventBus._off("rotationchanging",this.#M);for(const p of this.#n.values())p.destroy();this.#n.clear(),this.#e.clear(),this.#f.clear(),this.#t=null,this.#u.clear(),this.#r.destroy(),this.#s.destroy()}get hcmFilter(){return(0,i.shadow)(this,"hcmFilter",this.#x?this.#d.addHCMFilter(this.#x.foreground,this.#x.background):"none")}get direction(){return(0,i.shadow)(this,"direction",getComputedStyle(this.#A).direction)}editAltText(p){this.#s?.editAltText(this,p)}onPageChanging({pageNumber:p}){this.#a=p-1}focusMainContainer(){this.#A.focus()}findParent(p,_){for(const D of this.#n.values()){const{x:b,y:L,width:N,height:U}=D.div.getBoundingClientRect();if(p>=b&&p<=b+N&&_>=L&&_<=L+U)return D}return null}disableUserSelect(p=!1){this.#F.classList.toggle("noUserSelect",p)}addShouldRescale(p){this.#f.add(p)}removeShouldRescale(p){this.#f.delete(p)}onScaleChanging({scale:p}){this.commitOrRemove(),this.viewParameters.realScale=p*h.PixelsPerInch.PDF_TO_CSS_UNITS;for(const _ of this.#f)_.onScaleChanging()}onRotationChanging({pagesRotation:p}){this.commitOrRemove(),this.viewParameters.rotation=p}addToAnnotationStorage(p){!p.isEmpty()&&this.#o&&!this.#o.has(p.id)&&this.#o.setValue(p.id,p)}#U(){window.addEventListener("focus",this.#_),window.addEventListener("blur",this.#S)}#I(){window.removeEventListener("focus",this.#_),window.removeEventListener("blur",this.#S)}blur(){if(!this.hasSelection)return;const{activeElement:p}=document;for(const _ of this.#u)if(_.div.contains(p)){this.#m=[_,p],_._focusEventsAllowed=!1;break}}focus(){if(!this.#m)return;const[p,_]=this.#m;this.#m=null,_.addEventListener("focusin",()=>{p._focusEventsAllowed=!0},{once:!0}),_.focus()}#B(){window.addEventListener("keydown",this.#L,{capture:!0})}#P(){window.removeEventListener("keydown",this.#L,{capture:!0})}#O(){document.addEventListener("copy",this.#R),document.addEventListener("cut",this.#C),document.addEventListener("paste",this.#j)}#T(){document.removeEventListener("copy",this.#R),document.removeEventListener("cut",this.#C),document.removeEventListener("paste",this.#j)}addEditListeners(){this.#B(),this.#O()}removeEditListeners(){this.#P(),this.#T()}copy(p){if(p.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const _=[];for(const D of this.#u){const b=D.serialize(!0);b&&_.push(b)}_.length!==0&&p.clipboardData.setData("application/pdfjs",JSON.stringify(_))}cut(p){this.copy(p),this.delete()}paste(p){p.preventDefault();const{clipboardData:_}=p;for(const L of _.items)for(const N of this.#i)if(N.isHandlingMimeForPasting(L.type)){N.paste(L,this.currentLayer);return}let D=_.getData("application/pdfjs");if(!D)return;try{D=JSON.parse(D)}catch(L){(0,i.warn)(`paste: "${L.message}".`);return}if(!Array.isArray(D))return;this.unselectAll();const b=this.currentLayer;try{const L=[];for(const S of D){const P=b.deserialize(S);if(!P)return;L.push(P)}const N=()=>{for(const S of L)this.#q(S);this.#G(L)},U=()=>{for(const S of L)S.remove()};this.addCommands({cmd:N,undo:U,mustExec:!0})}catch(L){(0,i.warn)(`paste: "${L.message}".`)}}keydown(p){this.getActive()?.shouldGetKeyboardEvents()||m._keyboardManager.exec(this,p)}onEditingAction(p){["undo","redo","delete","selectAll"].includes(p.name)&&this[p.name]()}#E(p){Object.entries(p).some(([D,b])=>this.#D[D]!==b)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#D,p)})}#H(p){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:p})}setEditingState(p){p?(this.#U(),this.#B(),this.#O(),this.#E({isEditing:this.#g!==i.AnnotationEditorType.NONE,isEmpty:this.#z(),hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:this.#r.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#I(),this.#P(),this.#T(),this.#E({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(p){if(!this.#i){this.#i=p;for(const _ of this.#i)this.#H(_.defaultPropertiesToUpdate)}}getId(){return this.#h.getId()}get currentLayer(){return this.#n.get(this.#a)}getLayer(p){return this.#n.get(p)}get currentPageIndex(){return this.#a}addLayer(p){this.#n.set(p.pageIndex,p),this.#p?p.enable():p.disable()}removeLayer(p){this.#n.delete(p.pageIndex)}updateMode(p,_=null){if(this.#g!==p){if(this.#g=p,p===i.AnnotationEditorType.NONE){this.setEditingState(!1),this.#V();return}this.setEditingState(!0),this.#$(),this.unselectAll();for(const D of this.#n.values())D.updateMode(p);if(_){for(const D of this.#e.values())if(D.annotationElementId===_){this.setSelected(D),D.enterInEditMode();break}}}}updateToolbar(p){p!==this.#g&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:p})}updateParams(p,_){if(this.#i){if(p===i.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(p);return}for(const D of this.#u)D.updateParams(p,_);for(const D of this.#i)D.updateDefaultParams(p,_)}}enableWaiting(p=!1){if(this.#y!==p){this.#y=p;for(const _ of this.#n.values())p?_.disableClick():_.enableClick(),_.div.classList.toggle("waiting",p)}}#$(){if(!this.#p){this.#p=!0;for(const p of this.#n.values())p.enable()}}#V(){if(this.unselectAll(),this.#p){this.#p=!1;for(const p of this.#n.values())p.disable()}}getEditors(p){const _=[];for(const D of this.#e.values())D.pageIndex===p&&_.push(D);return _}getEditor(p){return this.#e.get(p)}addEditor(p){this.#e.set(p.id,p)}removeEditor(p){this.#e.delete(p.id),this.unselect(p),(!p.annotationElementId||!this.#l.has(p.annotationElementId))&&this.#o?.remove(p.id)}addDeletedAnnotationElement(p){this.#l.add(p.annotationElementId),p.deleted=!0}isDeletedAnnotationElement(p){return this.#l.has(p)}removeDeletedAnnotationElement(p){this.#l.delete(p.annotationElementId),p.deleted=!1}#q(p){const _=this.#n.get(p.pageIndex);_?_.addOrRebuild(p):this.addEditor(p)}setActiveEditor(p){this.#t!==p&&(this.#t=p,p&&this.#H(p.propertiesToUpdate))}toggleSelected(p){if(this.#u.has(p)){this.#u.delete(p),p.unselect(),this.#E({hasSelectedEditor:this.hasSelection});return}this.#u.add(p),p.select(),this.#H(p.propertiesToUpdate),this.#E({hasSelectedEditor:!0})}setSelected(p){for(const _ of this.#u)_!==p&&_.unselect();this.#u.clear(),this.#u.add(p),p.select(),this.#H(p.propertiesToUpdate),this.#E({hasSelectedEditor:!0})}isSelected(p){return this.#u.has(p)}unselect(p){p.unselect(),this.#u.delete(p),this.#E({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#u.size!==0}undo(){this.#r.undo(),this.#E({hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#z()})}redo(){this.#r.redo(),this.#E({hasSomethingToUndo:!0,hasSomethingToRedo:this.#r.hasSomethingToRedo(),isEmpty:this.#z()})}addCommands(p){this.#r.add(p),this.#E({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#z()})}#z(){if(this.#e.size===0)return!0;if(this.#e.size===1)for(const p of this.#e.values())return p.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const p=[...this.#u],_=()=>{for(const b of p)b.remove()},D=()=>{for(const b of p)this.#q(b)};this.addCommands({cmd:_,undo:D,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#G(p){this.#u.clear();for(const _ of p)_.isEmpty()||(this.#u.add(_),_.select());this.#E({hasSelectedEditor:!0})}selectAll(){for(const p of this.#u)p.commit();this.#G(this.#e.values())}unselectAll(){if(this.#t){this.#t.commitOrRemove();return}if(this.hasSelection){for(const p of this.#u)p.unselect();this.#u.clear(),this.#E({hasSelectedEditor:!1})}}translateSelectedEditors(p,_,D=!1){if(D||this.commitOrRemove(),!this.hasSelection)return;this.#b[0]+=p,this.#b[1]+=_;const[b,L]=this.#b,N=[...this.#u],U=1e3;this.#w&&clearTimeout(this.#w),this.#w=setTimeout(()=>{this.#w=null,this.#b[0]=this.#b[1]=0,this.addCommands({cmd:()=>{for(const S of N)this.#e.has(S.id)&&S.translateInPage(b,L)},undo:()=>{for(const S of N)this.#e.has(S.id)&&S.translateInPage(-b,-L)},mustExec:!1})},U);for(const S of N)S.translateInPage(p,_)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const p of this.#u)this.#c.set(p,{savedX:p.x,savedY:p.y,savedPageIndex:p.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const p=this.#c;this.#c=null;let _=!1;for(const[{x:b,y:L,pageIndex:N},U]of p)U.newX=b,U.newY=L,U.newPageIndex=N,_||=b!==U.savedX||L!==U.savedY||N!==U.savedPageIndex;if(!_)return!1;const D=(b,L,N,U)=>{if(this.#e.has(b.id)){const S=this.#n.get(U);S?b._setParentAndPosition(S,L,N):(b.pageIndex=U,b.x=L,b.y=N)}};return this.addCommands({cmd:()=>{for(const[b,{newX:L,newY:N,newPageIndex:U}]of p)D(b,L,N,U)},undo:()=>{for(const[b,{savedX:L,savedY:N,savedPageIndex:U}]of p)D(b,L,N,U)},mustExec:!0}),!0}dragSelectedEditors(p,_){if(this.#c)for(const D of this.#c.keys())D.drag(p,_)}rebuild(p){if(p.parent===null){const _=this.getLayer(p.pageIndex);_?(_.changeParent(p),_.addOrRebuild(p)):(this.addEditor(p),this.addToAnnotationStorage(p),p.rebuild())}else p.parent.addOrRebuild(p)}isActive(p){return this.#t===p}getActive(){return this.#t}getMode(){return this.#g}get imageManager(){return(0,i.shadow)(this,"imageManager",new C)}}a.AnnotationEditorUIManager=m}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.StatTimer=a.RenderingCancelledException=a.PixelsPerInch=a.PageViewport=a.PDFDateString=a.DOMStandardFontDataFactory=a.DOMSVGFactory=a.DOMFilterFactory=a.DOMCanvasFactory=a.DOMCMapReaderFactory=void 0,a.deprecated=z,a.getColorValues=it,a.getCurrentTransform=nt,a.getCurrentTransformInverse=at,a.getFilenameFromUrl=b,a.getPdfFilenameFromUrl=L,a.getRGB=Z,a.getXfaPageViewport=K,a.isDataScheme=_,a.isPdfFile=D,a.isValidFetchUrl=U,a.loadScript=P,a.noContextMenu=S,a.setLayerDimensions=pt;var i=d(7),h=d(1);const E="http://www.w3.org/2000/svg";class R{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}a.PixelsPerInch=R;class M extends i.BaseFilterFactory{#t;#e;#n;#s;#o;#r;#a;#l;#c;#i;#f=0;constructor({docId:F,ownerDocument:O=globalThis.document}={}){super(),this.#n=F,this.#s=O}get#d(){return this.#t||=new Map}get#h(){if(!this.#e){const F=this.#s.createElement("div"),{style:O}=F;O.visibility="hidden",O.contain="strict",O.width=O.height=0,O.position="absolute",O.top=O.left=0,O.zIndex=-1;const T=this.#s.createElementNS(E,"svg");T.setAttribute("width",0),T.setAttribute("height",0),this.#e=this.#s.createElementNS(E,"defs"),F.append(T),T.append(this.#e),this.#s.body.append(F)}return this.#e}addFilter(F){if(!F)return"none";let O=this.#d.get(F);if(O)return O;let T,g,w,I;if(F.length===1){const v=F[0],A=new Array(256);for(let k=0;k<256;k++)A[k]=v[k]/255;I=T=g=w=A.join(",")}else{const[v,A,k]=F,G=new Array(256),V=new Array(256),Q=new Array(256);for(let et=0;et<256;et++)G[et]=v[et]/255,V[et]=A[et]/255,Q[et]=k[et]/255;T=G.join(","),g=V.join(","),w=Q.join(","),I=`${T}${g}${w}`}if(O=this.#d.get(I),O)return this.#d.set(F,O),O;const B=`g_${this.#n}_transfer_map_${this.#f++}`,X=`url(#${B})`;this.#d.set(F,X),this.#d.set(I,X);const H=this.#y(B);return this.#g(T,g,w,H),X}addHCMFilter(F,O){const T=`${F}-${O}`;if(this.#r===T)return this.#a;if(this.#r=T,this.#a="none",this.#o?.remove(),!F||!O)return this.#a;const g=this.#u(F);F=h.Util.makeHexColor(...g);const w=this.#u(O);if(O=h.Util.makeHexColor(...w),this.#h.style.color="",F==="#000000"&&O==="#ffffff"||F===O)return this.#a;const I=new Array(256);for(let A=0;A<=255;A++){const k=A/255;I[A]=k<=.03928?k/12.92:((k+.055)/1.055)**2.4}const B=I.join(","),X=`g_${this.#n}_hcm_filter`,H=this.#l=this.#y(X);this.#g(B,B,B,H),this.#p(H);const v=(A,k)=>{const G=g[A]/255,V=w[A]/255,Q=new Array(k+1);for(let et=0;et<=k;et++)Q[et]=G+et/k*(V-G);return Q.join(",")};return this.#g(v(0,5),v(1,5),v(2,5),H),this.#a=`url(#${X})`,this.#a}addHighlightHCMFilter(F,O,T,g){const w=`${F}-${O}-${T}-${g}`;if(this.#c===w)return this.#i;if(this.#c=w,this.#i="none",this.#l?.remove(),!F||!O)return this.#i;const[I,B]=[F,O].map(this.#u.bind(this));let X=Math.round(.2126*I[0]+.7152*I[1]+.0722*I[2]),H=Math.round(.2126*B[0]+.7152*B[1]+.0722*B[2]),[v,A]=[T,g].map(this.#u.bind(this));H<X&&([X,H,v,A]=[H,X,A,v]),this.#h.style.color="";const k=(Q,et,ot)=>{const At=new Array(256),ct=(H-X)/ot,dt=Q/255,ht=(et-Q)/(255*ot);let yt=0;for(let Et=0;Et<=ot;Et++){const Rt=Math.round(X+Et*ct),wt=dt+Et*ht;for(let Mt=yt;Mt<=Rt;Mt++)At[Mt]=wt;yt=Rt+1}for(let Et=yt;Et<256;Et++)At[Et]=At[yt-1];return At.join(",")},G=`g_${this.#n}_hcm_highlight_filter`,V=this.#l=this.#y(G);return this.#p(V),this.#g(k(v[0],A[0],5),k(v[1],A[1],5),k(v[2],A[2],5),V),this.#i=`url(#${G})`,this.#i}destroy(F=!1){F&&(this.#a||this.#i)||(this.#e&&(this.#e.parentNode.parentNode.remove(),this.#e=null),this.#t&&(this.#t.clear(),this.#t=null),this.#f=0)}#p(F){const O=this.#s.createElementNS(E,"feColorMatrix");O.setAttribute("type","matrix"),O.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),F.append(O)}#y(F){const O=this.#s.createElementNS(E,"filter");return O.setAttribute("color-interpolation-filters","sRGB"),O.setAttribute("id",F),this.#h.append(O),O}#m(F,O,T){const g=this.#s.createElementNS(E,O);g.setAttribute("type","discrete"),g.setAttribute("tableValues",T),F.append(g)}#g(F,O,T,g){const w=this.#s.createElementNS(E,"feComponentTransfer");g.append(w),this.#m(w,"feFuncR",F),this.#m(w,"feFuncG",O),this.#m(w,"feFuncB",T)}#u(F){return this.#h.style.color=F,Z(getComputedStyle(this.#h).getPropertyValue("color"))}}a.DOMFilterFactory=M;class C extends i.BaseCanvasFactory{constructor({ownerDocument:F=globalThis.document}={}){super(),this._document=F}_createCanvas(F,O){const T=this._document.createElement("canvas");return T.width=F,T.height=O,T}}a.DOMCanvasFactory=C;async function u(W,F=!1){if(U(W,document.baseURI)){const O=await fetch(W);if(!O.ok)throw new Error(O.statusText);return F?new Uint8Array(await O.arrayBuffer()):(0,h.stringToBytes)(await O.text())}return new Promise((O,T)=>{const g=new XMLHttpRequest;g.open("GET",W,!0),F&&(g.responseType="arraybuffer"),g.onreadystatechange=()=>{if(g.readyState===XMLHttpRequest.DONE){if(g.status===200||g.status===0){let w;if(F&&g.response?w=new Uint8Array(g.response):!F&&g.responseText&&(w=(0,h.stringToBytes)(g.responseText)),w){O(w);return}}T(new Error(g.statusText))}},g.send(null)})}class l extends i.BaseCMapReaderFactory{_fetchData(F,O){return u(F,this.isCompressed).then(T=>({cMapData:T,compressionType:O}))}}a.DOMCMapReaderFactory=l;class c extends i.BaseStandardFontDataFactory{_fetchData(F){return u(F,!0)}}a.DOMStandardFontDataFactory=c;class m extends i.BaseSVGFactory{_createSVG(F){return document.createElementNS(E,F)}}a.DOMSVGFactory=m;class x{constructor({viewBox:F,scale:O,rotation:T,offsetX:g=0,offsetY:w=0,dontFlip:I=!1}){this.viewBox=F,this.scale=O,this.rotation=T,this.offsetX=g,this.offsetY=w;const B=(F[2]+F[0])/2,X=(F[3]+F[1])/2;let H,v,A,k;switch(T%=360,T<0&&(T+=360),T){case 180:H=-1,v=0,A=0,k=1;break;case 90:H=0,v=1,A=1,k=0;break;case 270:H=0,v=-1,A=-1,k=0;break;case 0:H=1,v=0,A=0,k=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}I&&(A=-A,k=-k);let G,V,Q,et;H===0?(G=Math.abs(X-F[1])*O+g,V=Math.abs(B-F[0])*O+w,Q=(F[3]-F[1])*O,et=(F[2]-F[0])*O):(G=Math.abs(B-F[0])*O+g,V=Math.abs(X-F[1])*O+w,Q=(F[2]-F[0])*O,et=(F[3]-F[1])*O),this.transform=[H*O,v*O,A*O,k*O,G-H*O*B-A*O*X,V-v*O*B-k*O*X],this.width=Q,this.height=et}get rawDims(){const{viewBox:F}=this;return(0,h.shadow)(this,"rawDims",{pageWidth:F[2]-F[0],pageHeight:F[3]-F[1],pageX:F[0],pageY:F[1]})}clone({scale:F=this.scale,rotation:O=this.rotation,offsetX:T=this.offsetX,offsetY:g=this.offsetY,dontFlip:w=!1}={}){return new x({viewBox:this.viewBox.slice(),scale:F,rotation:O,offsetX:T,offsetY:g,dontFlip:w})}convertToViewportPoint(F,O){return h.Util.applyTransform([F,O],this.transform)}convertToViewportRectangle(F){const O=h.Util.applyTransform([F[0],F[1]],this.transform),T=h.Util.applyTransform([F[2],F[3]],this.transform);return[O[0],O[1],T[0],T[1]]}convertToPdfPoint(F,O){return h.Util.applyInverseTransform([F,O],this.transform)}}a.PageViewport=x;class p extends h.BaseException{constructor(F,O=0){super(F,"RenderingCancelledException"),this.extraDelay=O}}a.RenderingCancelledException=p;function _(W){const F=W.length;let O=0;for(;O<F&&W[O].trim()==="";)O++;return W.substring(O,O+5).toLowerCase()==="data:"}function D(W){return typeof W=="string"&&/\.pdf$/i.test(W)}function b(W,F=!1){return F||([W]=W.split(/[#?]/,1)),W.substring(W.lastIndexOf("/")+1)}function L(W,F="document.pdf"){if(typeof W!="string")return F;if(_(W))return(0,h.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),F;const O=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,T=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,g=O.exec(W);let w=T.exec(g[1])||T.exec(g[2])||T.exec(g[3]);if(w&&(w=w[0],w.includes("%")))try{w=T.exec(decodeURIComponent(w))[0]}catch{}return w||F}class N{started=Object.create(null);times=[];time(F){F in this.started&&(0,h.warn)(`Timer is already running for ${F}`),this.started[F]=Date.now()}timeEnd(F){F in this.started||(0,h.warn)(`Timer has not been started for ${F}`),this.times.push({name:F,start:this.started[F],end:Date.now()}),delete this.started[F]}toString(){const F=[];let O=0;for(const{name:T}of this.times)O=Math.max(T.length,O);for(const{name:T,start:g,end:w}of this.times)F.push(`${T.padEnd(O)} ${w-g}ms
`);return F.join("")}}a.StatTimer=N;function U(W,F){try{const{protocol:O}=F?new URL(W,F):new URL(W);return O==="http:"||O==="https:"}catch{return!1}}function S(W){W.preventDefault()}function P(W,F=!1){return new Promise((O,T)=>{const g=document.createElement("script");g.src=W,g.onload=function(w){F&&g.remove(),O(w)},g.onerror=function(){T(new Error(`Cannot load script at: ${g.src}`))},(document.head||document.documentElement).append(g)})}function z(W){console.log("Deprecated API usage: "+W)}let Y;class q{static toDateObject(F){if(!F||typeof F!="string")return null;Y||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const O=Y.exec(F);if(!O)return null;const T=parseInt(O[1],10);let g=parseInt(O[2],10);g=g>=1&&g<=12?g-1:0;let w=parseInt(O[3],10);w=w>=1&&w<=31?w:1;let I=parseInt(O[4],10);I=I>=0&&I<=23?I:0;let B=parseInt(O[5],10);B=B>=0&&B<=59?B:0;let X=parseInt(O[6],10);X=X>=0&&X<=59?X:0;const H=O[7]||"Z";let v=parseInt(O[8],10);v=v>=0&&v<=23?v:0;let A=parseInt(O[9],10)||0;return A=A>=0&&A<=59?A:0,H==="-"?(I+=v,B+=A):H==="+"&&(I-=v,B-=A),new Date(Date.UTC(T,g,w,I,B,X))}}a.PDFDateString=q;function K(W,{scale:F=1,rotation:O=0}){const{width:T,height:g}=W.attributes.style,w=[0,0,parseInt(T),parseInt(g)];return new x({viewBox:w,scale:F,rotation:O})}function Z(W){if(W.startsWith("#")){const F=parseInt(W.slice(1),16);return[(F&16711680)>>16,(F&65280)>>8,F&255]}return W.startsWith("rgb(")?W.slice(4,-1).split(",").map(F=>parseInt(F)):W.startsWith("rgba(")?W.slice(5,-1).split(",").map(F=>parseInt(F)).slice(0,3):((0,h.warn)(`Not a valid color format: "${W}"`),[0,0,0])}function it(W){const F=document.createElement("span");F.style.visibility="hidden",document.body.append(F);for(const O of W.keys()){F.style.color=O;const T=window.getComputedStyle(F).color;W.set(O,Z(T))}F.remove()}function nt(W){const{a:F,b:O,c:T,d:g,e:w,f:I}=W.getTransform();return[F,O,T,g,w,I]}function at(W){const{a:F,b:O,c:T,d:g,e:w,f:I}=W.getTransform().invertSelf();return[F,O,T,g,w,I]}function pt(W,F,O=!1,T=!0){if(F instanceof x){const{pageWidth:g,pageHeight:w}=F.rawDims,{style:I}=W,B=h.FeatureTest.isCSSRoundSupported,X=`var(--scale-factor) * ${g}px`,H=`var(--scale-factor) * ${w}px`,v=B?`round(${X}, 1px)`:`calc(${X})`,A=B?`round(${H}, 1px)`:`calc(${H})`;!O||F.rotation%180===0?(I.width=v,I.height=A):(I.width=A,I.height=v)}T&&W.setAttribute("data-main-rotation",F.rotation)}}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BaseStandardFontDataFactory=a.BaseSVGFactory=a.BaseFilterFactory=a.BaseCanvasFactory=a.BaseCMapReaderFactory=void 0;var i=d(1);class h{constructor(){this.constructor===h&&(0,i.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(l){return"none"}addHCMFilter(l,c){return"none"}addHighlightHCMFilter(l,c,m,x){return"none"}destroy(l=!1){}}a.BaseFilterFactory=h;class E{constructor(){this.constructor===E&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(l,c){if(l<=0||c<=0)throw new Error("Invalid canvas size");const m=this._createCanvas(l,c);return{canvas:m,context:m.getContext("2d")}}reset(l,c,m){if(!l.canvas)throw new Error("Canvas is not specified");if(c<=0||m<=0)throw new Error("Invalid canvas size");l.canvas.width=c,l.canvas.height=m}destroy(l){if(!l.canvas)throw new Error("Canvas is not specified");l.canvas.width=0,l.canvas.height=0,l.canvas=null,l.context=null}_createCanvas(l,c){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}a.BaseCanvasFactory=E;class R{constructor({baseUrl:l=null,isCompressed:c=!0}){this.constructor===R&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=l,this.isCompressed=c}async fetch({name:l}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!l)throw new Error("CMap name must be specified.");const c=this.baseUrl+l+(this.isCompressed?".bcmap":""),m=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(c,m).catch(x=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${c}`)})}_fetchData(l,c){(0,i.unreachable)("Abstract method `_fetchData` called.")}}a.BaseCMapReaderFactory=R;class M{constructor({baseUrl:l=null}){this.constructor===M&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=l}async fetch({filename:l}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!l)throw new Error("Font filename must be specified.");const c=`${this.baseUrl}${l}`;return this._fetchData(c).catch(m=>{throw new Error(`Unable to load font data at: ${c}`)})}_fetchData(l){(0,i.unreachable)("Abstract method `_fetchData` called.")}}a.BaseStandardFontDataFactory=M;class C{constructor(){this.constructor===C&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(l,c,m=!1){if(l<=0||c<=0)throw new Error("Invalid SVG dimensions");const x=this._createSVG("svg:svg");return x.setAttribute("version","1.1"),m||(x.setAttribute("width",`${l}px`),x.setAttribute("height",`${c}px`)),x.setAttribute("preserveAspectRatio","none"),x.setAttribute("viewBox",`0 0 ${l} ${c}`),x}createElement(l){if(typeof l!="string")throw new Error("Invalid SVG element type");return this._createSVG(l)}_createSVG(l){(0,i.unreachable)("Abstract method `_createSVG` called.")}}a.BaseSVGFactory=C}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.MurmurHash3_64=void 0;var i=d(1);const h=3285377520,E=4294901760,R=65535;class M{constructor(u){this.h1=u?u&4294967295:h,this.h2=u?u&4294967295:h}update(u){let l,c;if(typeof u=="string"){l=new Uint8Array(u.length*2),c=0;for(let z=0,Y=u.length;z<Y;z++){const q=u.charCodeAt(z);q<=255?l[c++]=q:(l[c++]=q>>>8,l[c++]=q&255)}}else if((0,i.isArrayBuffer)(u))l=u.slice(),c=l.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const m=c>>2,x=c-m*4,p=new Uint32Array(l.buffer,0,m);let _=0,D=0,b=this.h1,L=this.h2;const N=3432918353,U=461845907,S=N&R,P=U&R;for(let z=0;z<m;z++)z&1?(_=p[z],_=_*N&E|_*S&R,_=_<<15|_>>>17,_=_*U&E|_*P&R,b^=_,b=b<<13|b>>>19,b=b*5+3864292196):(D=p[z],D=D*N&E|D*S&R,D=D<<15|D>>>17,D=D*U&E|D*P&R,L^=D,L=L<<13|L>>>19,L=L*5+3864292196);switch(_=0,x){case 3:_^=l[m*4+2]<<16;case 2:_^=l[m*4+1]<<8;case 1:_^=l[m*4],_=_*N&E|_*S&R,_=_<<15|_>>>17,_=_*U&E|_*P&R,m&1?b^=_:L^=_}this.h1=b,this.h2=L}hexdigest(){let u=this.h1,l=this.h2;return u^=l>>>1,u=u*3981806797&E|u*36045&R,l=l*4283543511&E|((l<<16|u>>>16)*2950163797&E)>>>16,u^=l>>>1,u=u*444984403&E|u*60499&R,l=l*3301882366&E|((l<<16|u>>>16)*3120437893&E)>>>16,u^=l>>>1,(u>>>0).toString(16).padStart(8,"0")+(l>>>0).toString(16).padStart(8,"0")}}a.MurmurHash3_64=M}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FontLoader=a.FontFaceObject=void 0;var i=d(1);class h{#t=new Set;constructor({ownerDocument:M=globalThis.document,styleElement:C=null}){this._document=M,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(M){this.nativeFontFaces.add(M),this._document.fonts.add(M)}removeNativeFontFace(M){this.nativeFontFaces.delete(M),this._document.fonts.delete(M)}insertRule(M){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const C=this.styleElement.sheet;C.insertRule(M,C.cssRules.length)}clear(){for(const M of this.nativeFontFaces)this._document.fonts.delete(M);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(M){if(!(!M||this.#t.has(M.loadedName))){if((0,i.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:C,src:u,style:l}=M,c=new FontFace(C,u,l);this.addNativeFontFace(c);try{await c.load(),this.#t.add(C)}catch{(0,i.warn)(`Cannot load system font: ${M.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}(0,i.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(M){if(M.attached||M.missingFile&&!M.systemFontInfo)return;if(M.attached=!0,M.systemFontInfo){await this.loadSystemFont(M.systemFontInfo);return}if(this.isFontLoadingAPISupported){const u=M.createNativeFontFace();if(u){this.addNativeFontFace(u);try{await u.loaded}catch(l){throw(0,i.warn)(`Failed to load font '${u.family}': '${l}'.`),M.disableFontFace=!0,l}}return}const C=M.createFontFaceRule();if(C){if(this.insertRule(C),this.isSyncFontLoadingSupported)return;await new Promise(u=>{const l=this._queueLoadingCallback(u);this._prepareFontLoadEvent(M,l)})}}get isFontLoadingAPISupported(){const M=!!this._document?.fonts;return(0,i.shadow)(this,"isFontLoadingAPISupported",M)}get isSyncFontLoadingSupported(){let M=!1;return(i.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(M=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",M)}_queueLoadingCallback(M){function C(){for((0,i.assert)(!l.done,"completeRequest() cannot be called twice."),l.done=!0;u.length>0&&u[0].done;){const c=u.shift();setTimeout(c.callback,0)}}const{loadingRequests:u}=this,l={done:!1,complete:C,callback:M};return u.push(l),l}get _loadTestFont(){const M=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,i.shadow)(this,"_loadTestFont",M)}_prepareFontLoadEvent(M,C){function u(K,Z){return K.charCodeAt(Z)<<24|K.charCodeAt(Z+1)<<16|K.charCodeAt(Z+2)<<8|K.charCodeAt(Z+3)&255}function l(K,Z,it,nt){const at=K.substring(0,Z),pt=K.substring(Z+it);return at+nt+pt}let c,m;const x=this._document.createElement("canvas");x.width=1,x.height=1;const p=x.getContext("2d");let _=0;function D(K,Z){if(++_>30){(0,i.warn)("Load test font never loaded."),Z();return}if(p.font="30px "+K,p.fillText(".",0,20),p.getImageData(0,0,1,1).data[3]>0){Z();return}setTimeout(D.bind(null,K,Z))}const b=`lt${Date.now()}${this.loadTestFontId++}`;let L=this._loadTestFont;L=l(L,976,b.length,b);const U=16,S=1482184792;let P=u(L,U);for(c=0,m=b.length-3;c<m;c+=4)P=P-S+u(b,c)|0;c<b.length&&(P=P-S+u(b+"XXX",c)|0),L=l(L,U,4,(0,i.string32)(P));const z=`url(data:font/opentype;base64,${btoa(L)});`,Y=`@font-face {font-family:"${b}";src:${z}}`;this.insertRule(Y);const q=this._document.createElement("div");q.style.visibility="hidden",q.style.width=q.style.height="10px",q.style.position="absolute",q.style.top=q.style.left="0px";for(const K of[M.loadedName,b]){const Z=this._document.createElement("span");Z.textContent="Hi",Z.style.fontFamily=K,q.append(Z)}this._document.body.append(q),D(b,()=>{q.remove(),C.complete()})}}a.FontLoader=h;class E{constructor(M,{isEvalSupported:C=!0,disableFontFace:u=!1,ignoreErrors:l=!1,inspectFont:c=null}){this.compiledGlyphs=Object.create(null);for(const m in M)this[m]=M[m];this.isEvalSupported=C!==!1,this.disableFontFace=u===!0,this.ignoreErrors=l===!0,this._inspectFont=c}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let M;if(!this.cssFontInfo)M=new FontFace(this.loadedName,this.data,{});else{const C={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(C.style=`oblique ${this.cssFontInfo.italicAngle}deg`),M=new FontFace(this.cssFontInfo.fontFamily,this.data,C)}return this._inspectFont?.(this),M}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const M=(0,i.bytesToString)(this.data),C=`url(data:${this.mimetype};base64,${btoa(M)});`;let u;if(!this.cssFontInfo)u=`@font-face {font-family:"${this.loadedName}";src:${C}}`;else{let l=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(l+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),u=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${l}src:${C}}`}return this._inspectFont?.(this,C),u}getPathGenerator(M,C){if(this.compiledGlyphs[C]!==void 0)return this.compiledGlyphs[C];let u;try{u=M.get(this.loadedName+"_path_"+C)}catch(l){if(!this.ignoreErrors)throw l;return(0,i.warn)(`getPathGenerator - ignoring character: "${l}".`),this.compiledGlyphs[C]=function(c,m){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const l=[];for(const c of u){const m=c.args!==void 0?c.args.join(","):"";l.push("c.",c.cmd,"(",m,`);
`)}return this.compiledGlyphs[C]=new Function("c","size",l.join(""))}return this.compiledGlyphs[C]=function(l,c){for(const m of u)m.cmd==="scale"&&(m.args=[c,-c]),l[m.cmd].apply(l,m.args)}}}a.FontFaceObject=E}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NodeStandardFontDataFactory=a.NodeFilterFactory=a.NodeCanvasFactory=a.NodeCMapReaderFactory=void 0;var i=d(7);d(1);const h=function(u){return new Promise((l,c)=>{require$$5.readFile(u,(x,p)=>{if(x||!p){c(new Error(x));return}l(new Uint8Array(p))})})};class E extends i.BaseFilterFactory{}a.NodeFilterFactory=E;class R extends i.BaseCanvasFactory{_createCanvas(l,c){return require$$5.createCanvas(l,c)}}a.NodeCanvasFactory=R;class M extends i.BaseCMapReaderFactory{_fetchData(l,c){return h(l).then(m=>({cMapData:m,compressionType:c}))}}a.NodeCMapReaderFactory=M;class C extends i.BaseStandardFontDataFactory{_fetchData(l){return h(l)}}a.NodeStandardFontDataFactory=C}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CanvasGraphics=void 0;var i=d(1),h=d(6),E=d(12),R=d(13);const M=16,C=100,u=4096,l=15,c=10,m=1e3,x=16;function p(O,T){if(O._removeMirroring)throw new Error("Context is already forwarding operations.");O.__originalSave=O.save,O.__originalRestore=O.restore,O.__originalRotate=O.rotate,O.__originalScale=O.scale,O.__originalTranslate=O.translate,O.__originalTransform=O.transform,O.__originalSetTransform=O.setTransform,O.__originalResetTransform=O.resetTransform,O.__originalClip=O.clip,O.__originalMoveTo=O.moveTo,O.__originalLineTo=O.lineTo,O.__originalBezierCurveTo=O.bezierCurveTo,O.__originalRect=O.rect,O.__originalClosePath=O.closePath,O.__originalBeginPath=O.beginPath,O._removeMirroring=()=>{O.save=O.__originalSave,O.restore=O.__originalRestore,O.rotate=O.__originalRotate,O.scale=O.__originalScale,O.translate=O.__originalTranslate,O.transform=O.__originalTransform,O.setTransform=O.__originalSetTransform,O.resetTransform=O.__originalResetTransform,O.clip=O.__originalClip,O.moveTo=O.__originalMoveTo,O.lineTo=O.__originalLineTo,O.bezierCurveTo=O.__originalBezierCurveTo,O.rect=O.__originalRect,O.closePath=O.__originalClosePath,O.beginPath=O.__originalBeginPath,delete O._removeMirroring},O.save=function(){T.save(),this.__originalSave()},O.restore=function(){T.restore(),this.__originalRestore()},O.translate=function(w,I){T.translate(w,I),this.__originalTranslate(w,I)},O.scale=function(w,I){T.scale(w,I),this.__originalScale(w,I)},O.transform=function(w,I,B,X,H,v){T.transform(w,I,B,X,H,v),this.__originalTransform(w,I,B,X,H,v)},O.setTransform=function(w,I,B,X,H,v){T.setTransform(w,I,B,X,H,v),this.__originalSetTransform(w,I,B,X,H,v)},O.resetTransform=function(){T.resetTransform(),this.__originalResetTransform()},O.rotate=function(w){T.rotate(w),this.__originalRotate(w)},O.clip=function(w){T.clip(w),this.__originalClip(w)},O.moveTo=function(g,w){T.moveTo(g,w),this.__originalMoveTo(g,w)},O.lineTo=function(g,w){T.lineTo(g,w),this.__originalLineTo(g,w)},O.bezierCurveTo=function(g,w,I,B,X,H){T.bezierCurveTo(g,w,I,B,X,H),this.__originalBezierCurveTo(g,w,I,B,X,H)},O.rect=function(g,w,I,B){T.rect(g,w,I,B),this.__originalRect(g,w,I,B)},O.closePath=function(){T.closePath(),this.__originalClosePath()},O.beginPath=function(){T.beginPath(),this.__originalBeginPath()}}class _{constructor(T){this.canvasFactory=T,this.cache=Object.create(null)}getCanvas(T,g,w){let I;return this.cache[T]!==void 0?(I=this.cache[T],this.canvasFactory.reset(I,g,w)):(I=this.canvasFactory.create(g,w),this.cache[T]=I),I}delete(T){delete this.cache[T]}clear(){for(const T in this.cache){const g=this.cache[T];this.canvasFactory.destroy(g),delete this.cache[T]}}}function D(O,T,g,w,I,B,X,H,v,A){const[k,G,V,Q,et,ot]=(0,h.getCurrentTransform)(O);if(G===0&&V===0){const dt=X*k+et,ht=Math.round(dt),yt=H*Q+ot,Et=Math.round(yt),Rt=(X+v)*k+et,wt=Math.abs(Math.round(Rt)-ht)||1,Mt=(H+A)*Q+ot,kt=Math.abs(Math.round(Mt)-Et)||1;return O.setTransform(Math.sign(k),0,0,Math.sign(Q),ht,Et),O.drawImage(T,g,w,I,B,0,0,wt,kt),O.setTransform(k,G,V,Q,et,ot),[wt,kt]}if(k===0&&Q===0){const dt=H*V+et,ht=Math.round(dt),yt=X*G+ot,Et=Math.round(yt),Rt=(H+A)*V+et,wt=Math.abs(Math.round(Rt)-ht)||1,Mt=(X+v)*G+ot,kt=Math.abs(Math.round(Mt)-Et)||1;return O.setTransform(0,Math.sign(G),Math.sign(V),0,ht,Et),O.drawImage(T,g,w,I,B,0,0,kt,wt),O.setTransform(k,G,V,Q,et,ot),[kt,wt]}O.drawImage(T,g,w,I,B,X,H,v,A);const At=Math.hypot(k,G),ct=Math.hypot(V,Q);return[At*v,ct*A]}function b(O){const{width:T,height:g}=O;if(T>m||g>m)return null;const w=1e3,I=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),B=T+1;let X=new Uint8Array(B*(g+1)),H,v,A;const k=T+7&-8;let G=new Uint8Array(k*g),V=0;for(const ct of O.data){let dt=128;for(;dt>0;)G[V++]=ct&dt?0:255,dt>>=1}let Q=0;for(V=0,G[V]!==0&&(X[0]=1,++Q),v=1;v<T;v++)G[V]!==G[V+1]&&(X[v]=G[V]?2:1,++Q),V++;for(G[V]!==0&&(X[v]=2,++Q),H=1;H<g;H++){V=H*k,A=H*B,G[V-k]!==G[V]&&(X[A]=G[V]?1:8,++Q);let ct=(G[V]?4:0)+(G[V-k]?8:0);for(v=1;v<T;v++)ct=(ct>>2)+(G[V+1]?4:0)+(G[V-k+1]?8:0),I[ct]&&(X[A+v]=I[ct],++Q),V++;if(G[V-k]!==G[V]&&(X[A+v]=G[V]?2:4,++Q),Q>w)return null}for(V=k*(g-1),A=H*B,G[V]!==0&&(X[A]=8,++Q),v=1;v<T;v++)G[V]!==G[V+1]&&(X[A+v]=G[V]?4:8,++Q),V++;if(G[V]!==0&&(X[A+v]=4,++Q),Q>w)return null;const et=new Int32Array([0,B,-1,0,-B,0,0,0,1]),ot=new Path2D;for(H=0;Q&&H<=g;H++){let ct=H*B;const dt=ct+T;for(;ct<dt&&!X[ct];)ct++;if(ct===dt)continue;ot.moveTo(ct%B,H);const ht=ct;let yt=X[ct];do{const Et=et[yt];do ct+=Et;while(!X[ct]);const Rt=X[ct];Rt!==5&&Rt!==10?(yt=Rt,X[ct]=0):(yt=Rt&51*yt>>4,X[ct]&=yt>>2|yt<<2),ot.lineTo(ct%B,ct/B|0),X[ct]||--Q}while(ht!==ct);--H}return G=null,X=null,function(ct){ct.save(),ct.scale(1/T,-1/g),ct.translate(0,-g),ct.fill(ot),ct.beginPath(),ct.restore()}}class L{constructor(T,g){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,T,g])}clone(){const T=Object.create(this);return T.clipBox=this.clipBox.slice(),T}setCurrentPoint(T,g){this.x=T,this.y=g}updatePathMinMax(T,g,w){[g,w]=i.Util.applyTransform([g,w],T),this.minX=Math.min(this.minX,g),this.minY=Math.min(this.minY,w),this.maxX=Math.max(this.maxX,g),this.maxY=Math.max(this.maxY,w)}updateRectMinMax(T,g){const w=i.Util.applyTransform(g,T),I=i.Util.applyTransform(g.slice(2),T);this.minX=Math.min(this.minX,w[0],I[0]),this.minY=Math.min(this.minY,w[1],I[1]),this.maxX=Math.max(this.maxX,w[0],I[0]),this.maxY=Math.max(this.maxY,w[1],I[1])}updateScalingPathMinMax(T,g){i.Util.scaleMinMax(T,g),this.minX=Math.min(this.minX,g[0]),this.maxX=Math.max(this.maxX,g[1]),this.minY=Math.min(this.minY,g[2]),this.maxY=Math.max(this.maxY,g[3])}updateCurvePathMinMax(T,g,w,I,B,X,H,v,A,k){const G=i.Util.bezierBoundingBox(g,w,I,B,X,H,v,A);if(k){k[0]=Math.min(k[0],G[0],G[2]),k[1]=Math.max(k[1],G[0],G[2]),k[2]=Math.min(k[2],G[1],G[3]),k[3]=Math.max(k[3],G[1],G[3]);return}this.updateRectMinMax(T,G)}getPathBoundingBox(T=E.PathType.FILL,g=null){const w=[this.minX,this.minY,this.maxX,this.maxY];if(T===E.PathType.STROKE){g||(0,i.unreachable)("Stroke bounding box must include transform.");const I=i.Util.singularValueDecompose2dScale(g),B=I[0]*this.lineWidth/2,X=I[1]*this.lineWidth/2;w[0]-=B,w[1]-=X,w[2]+=B,w[3]+=X}return w}updateClipFromPath(){const T=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(T||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(T){this.clipBox=T,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(T=E.PathType.FILL,g=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(T,g))}}function N(O,T){if(typeof ImageData<"u"&&T instanceof ImageData){O.putImageData(T,0,0);return}const g=T.height,w=T.width,I=g%x,B=(g-I)/x,X=I===0?B:B+1,H=O.createImageData(w,x);let v=0,A;const k=T.data,G=H.data;let V,Q,et,ot;if(T.kind===i.ImageKind.GRAYSCALE_1BPP){const At=k.byteLength,ct=new Uint32Array(G.buffer,0,G.byteLength>>2),dt=ct.length,ht=w+7>>3,yt=4294967295,Et=i.FeatureTest.isLittleEndian?4278190080:255;for(V=0;V<X;V++){for(et=V<B?x:I,A=0,Q=0;Q<et;Q++){const Rt=At-v;let wt=0;const Mt=Rt>ht?w:Rt*8-7,kt=Mt&-8;let Dt=0,Ft=0;for(;wt<kt;wt+=8)Ft=k[v++],ct[A++]=Ft&128?yt:Et,ct[A++]=Ft&64?yt:Et,ct[A++]=Ft&32?yt:Et,ct[A++]=Ft&16?yt:Et,ct[A++]=Ft&8?yt:Et,ct[A++]=Ft&4?yt:Et,ct[A++]=Ft&2?yt:Et,ct[A++]=Ft&1?yt:Et;for(;wt<Mt;wt++)Dt===0&&(Ft=k[v++],Dt=128),ct[A++]=Ft&Dt?yt:Et,Dt>>=1}for(;A<dt;)ct[A++]=0;O.putImageData(H,0,V*x)}}else if(T.kind===i.ImageKind.RGBA_32BPP){for(Q=0,ot=w*x*4,V=0;V<B;V++)G.set(k.subarray(v,v+ot)),v+=ot,O.putImageData(H,0,Q),Q+=x;V<X&&(ot=w*I*4,G.set(k.subarray(v,v+ot)),O.putImageData(H,0,Q))}else if(T.kind===i.ImageKind.RGB_24BPP)for(et=x,ot=w*et,V=0;V<X;V++){for(V>=B&&(et=I,ot=w*et),A=0,Q=ot;Q--;)G[A++]=k[v++],G[A++]=k[v++],G[A++]=k[v++],G[A++]=255;O.putImageData(H,0,V*x)}else throw new Error(`bad image kind: ${T.kind}`)}function U(O,T){if(T.bitmap){O.drawImage(T.bitmap,0,0);return}const g=T.height,w=T.width,I=g%x,B=(g-I)/x,X=I===0?B:B+1,H=O.createImageData(w,x);let v=0;const A=T.data,k=H.data;for(let G=0;G<X;G++){const V=G<B?x:I;({srcPos:v}=(0,R.convertBlackAndWhiteToRGBA)({src:A,srcPos:v,dest:k,width:w,height:V,nonBlackColor:0})),O.putImageData(H,0,G*x)}}function S(O,T){const g=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const w of g)O[w]!==void 0&&(T[w]=O[w]);O.setLineDash!==void 0&&(T.setLineDash(O.getLineDash()),T.lineDashOffset=O.lineDashOffset)}function P(O){if(O.strokeStyle=O.fillStyle="#000000",O.fillRule="nonzero",O.globalAlpha=1,O.lineWidth=1,O.lineCap="butt",O.lineJoin="miter",O.miterLimit=10,O.globalCompositeOperation="source-over",O.font="10px sans-serif",O.setLineDash!==void 0&&(O.setLineDash([]),O.lineDashOffset=0),!i.isNodeJS){const{filter:T}=O;T!=="none"&&T!==""&&(O.filter="none")}}function z(O,T,g,w){const I=O.length;for(let B=3;B<I;B+=4){const X=O[B];if(X===0)O[B-3]=T,O[B-2]=g,O[B-1]=w;else if(X<255){const H=255-X;O[B-3]=O[B-3]*X+T*H>>8,O[B-2]=O[B-2]*X+g*H>>8,O[B-1]=O[B-1]*X+w*H>>8}}}function Y(O,T,g){const w=O.length,I=1/255;for(let B=3;B<w;B+=4){const X=g?g[O[B]]:O[B];T[B]=T[B]*X*I|0}}function q(O,T,g){const w=O.length;for(let I=3;I<w;I+=4){const B=O[I-3]*77+O[I-2]*152+O[I-1]*28;T[I]=g?T[I]*g[B>>8]>>8:T[I]*B>>16}}function K(O,T,g,w,I,B,X,H,v,A,k){const G=!!B,V=G?B[0]:0,Q=G?B[1]:0,et=G?B[2]:0,ot=I==="Luminosity"?q:Y,ct=Math.min(w,Math.ceil(1048576/g));for(let dt=0;dt<w;dt+=ct){const ht=Math.min(ct,w-dt),yt=O.getImageData(H-A,dt+(v-k),g,ht),Et=T.getImageData(H,dt+v,g,ht);G&&z(yt.data,V,Q,et),ot(yt.data,Et.data,X),T.putImageData(Et,H,dt+v)}}function Z(O,T,g,w){const I=w[0],B=w[1],X=w[2]-I,H=w[3]-B;X===0||H===0||(K(T.context,g,X,H,T.subtype,T.backdrop,T.transferMap,I,B,T.offsetX,T.offsetY),O.save(),O.globalAlpha=1,O.globalCompositeOperation="source-over",O.setTransform(1,0,0,1,0,0),O.drawImage(g.canvas,0,0),O.restore())}function it(O,T){const g=i.Util.singularValueDecompose2dScale(O);g[0]=Math.fround(g[0]),g[1]=Math.fround(g[1]);const w=Math.fround((globalThis.devicePixelRatio||1)*h.PixelsPerInch.PDF_TO_CSS_UNITS);return T!==void 0?T:g[0]<=w||g[1]<=w}const nt=["butt","round","square"],at=["miter","round","bevel"],pt={},W={};class F{constructor(T,g,w,I,B,{optionalContentConfig:X,markedContentStack:H=null},v,A){this.ctx=T,this.current=new L(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=g,this.objs=w,this.canvasFactory=I,this.filterFactory=B,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=H||[],this.optionalContentConfig=X,this.cachedCanvases=new _(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=v,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=A,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(T,g=null){return typeof T=="string"?T.startsWith("g_")?this.commonObjs.get(T):this.objs.get(T):g}beginDrawing({transform:T,viewport:g,transparency:w=!1,background:I=null}){const B=this.ctx.canvas.width,X=this.ctx.canvas.height,H=this.ctx.fillStyle;if(this.ctx.fillStyle=I||"#ffffff",this.ctx.fillRect(0,0,B,X),this.ctx.fillStyle=H,w){const v=this.cachedCanvases.getCanvas("transparent",B,X);this.compositeCtx=this.ctx,this.transparentCanvas=v.canvas,this.ctx=v.context,this.ctx.save(),this.ctx.transform(...(0,h.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),P(this.ctx),T&&(this.ctx.transform(...T),this.outputScaleX=T[0],this.outputScaleY=T[0]),this.ctx.transform(...g.transform),this.viewportScale=g.scale,this.baseTransform=(0,h.getCurrentTransform)(this.ctx)}executeOperatorList(T,g,w,I){const B=T.argsArray,X=T.fnArray;let H=g||0;const v=B.length;if(v===H)return H;const A=v-H>c&&typeof w=="function",k=A?Date.now()+l:0;let G=0;const V=this.commonObjs,Q=this.objs;let et;for(;;){if(I!==void 0&&H===I.nextBreakPoint)return I.breakIt(H,w),H;if(et=X[H],et!==i.OPS.dependency)this[et].apply(this,B[H]);else for(const ot of B[H]){const At=ot.startsWith("g_")?V:Q;if(!At.has(ot))return At.get(ot,w),H}if(H++,H===v)return H;if(A&&++G>c){if(Date.now()>k)return w(),H;G=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const T of this._cachedBitmapsMap.values()){for(const g of T.values())typeof HTMLCanvasElement<"u"&&g instanceof HTMLCanvasElement&&(g.width=g.height=0);T.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const T=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(T!=="none"){const g=this.ctx.filter;this.ctx.filter=T,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=g}}}_scaleImage(T,g){const w=T.width,I=T.height;let B=Math.max(Math.hypot(g[0],g[1]),1),X=Math.max(Math.hypot(g[2],g[3]),1),H=w,v=I,A="prescale1",k,G;for(;B>2&&H>1||X>2&&v>1;){let V=H,Q=v;B>2&&H>1&&(V=H>=16384?Math.floor(H/2)-1||1:Math.ceil(H/2),B/=H/V),X>2&&v>1&&(Q=v>=16384?Math.floor(v/2)-1||1:Math.ceil(v)/2,X/=v/Q),k=this.cachedCanvases.getCanvas(A,V,Q),G=k.context,G.clearRect(0,0,V,Q),G.drawImage(T,0,0,H,v,0,0,V,Q),T=k.canvas,H=V,v=Q,A=A==="prescale1"?"prescale2":"prescale1"}return{img:T,paintWidth:H,paintHeight:v}}_createMaskCanvas(T){const g=this.ctx,{width:w,height:I}=T,B=this.current.fillColor,X=this.current.patternFill,H=(0,h.getCurrentTransform)(g);let v,A,k,G;if((T.bitmap||T.data)&&T.count>1){const wt=T.bitmap||T.data.buffer;A=JSON.stringify(X?H:[H.slice(0,4),B]),v=this._cachedBitmapsMap.get(wt),v||(v=new Map,this._cachedBitmapsMap.set(wt,v));const Mt=v.get(A);if(Mt&&!X){const kt=Math.round(Math.min(H[0],H[2])+H[4]),Dt=Math.round(Math.min(H[1],H[3])+H[5]);return{canvas:Mt,offsetX:kt,offsetY:Dt}}k=Mt}k||(G=this.cachedCanvases.getCanvas("maskCanvas",w,I),U(G.context,T));let V=i.Util.transform(H,[1/w,0,0,-1/I,0,0]);V=i.Util.transform(V,[1,0,0,1,0,-I]);const Q=i.Util.applyTransform([0,0],V),et=i.Util.applyTransform([w,I],V),ot=i.Util.normalizeRect([Q[0],Q[1],et[0],et[1]]),At=Math.round(ot[2]-ot[0])||1,ct=Math.round(ot[3]-ot[1])||1,dt=this.cachedCanvases.getCanvas("fillCanvas",At,ct),ht=dt.context,yt=Math.min(Q[0],et[0]),Et=Math.min(Q[1],et[1]);ht.translate(-yt,-Et),ht.transform(...V),k||(k=this._scaleImage(G.canvas,(0,h.getCurrentTransformInverse)(ht)),k=k.img,v&&X&&v.set(A,k)),ht.imageSmoothingEnabled=it((0,h.getCurrentTransform)(ht),T.interpolate),D(ht,k,0,0,k.width,k.height,0,0,w,I),ht.globalCompositeOperation="source-in";const Rt=i.Util.transform((0,h.getCurrentTransformInverse)(ht),[1,0,0,1,-yt,-Et]);return ht.fillStyle=X?B.getPattern(g,this,Rt,E.PathType.FILL):B,ht.fillRect(0,0,w,I),v&&!X&&(this.cachedCanvases.delete("fillCanvas"),v.set(A,dt.canvas)),{canvas:dt.canvas,offsetX:Math.round(yt),offsetY:Math.round(Et)}}setLineWidth(T){T!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=T,this.ctx.lineWidth=T}setLineCap(T){this.ctx.lineCap=nt[T]}setLineJoin(T){this.ctx.lineJoin=at[T]}setMiterLimit(T){this.ctx.miterLimit=T}setDash(T,g){const w=this.ctx;w.setLineDash!==void 0&&(w.setLineDash(T),w.lineDashOffset=g)}setRenderingIntent(T){}setFlatness(T){}setGState(T){for(const[g,w]of T)switch(g){case"LW":this.setLineWidth(w);break;case"LC":this.setLineCap(w);break;case"LJ":this.setLineJoin(w);break;case"ML":this.setMiterLimit(w);break;case"D":this.setDash(w[0],w[1]);break;case"RI":this.setRenderingIntent(w);break;case"FL":this.setFlatness(w);break;case"Font":this.setFont(w[0],w[1]);break;case"CA":this.current.strokeAlpha=w;break;case"ca":this.current.fillAlpha=w,this.ctx.globalAlpha=w;break;case"BM":this.ctx.globalCompositeOperation=w;break;case"SMask":this.current.activeSMask=w?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(w);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const T=this.inSMaskMode;this.current.activeSMask&&!T?this.beginSMaskMode():!this.current.activeSMask&&T&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const T=this.ctx.canvas.width,g=this.ctx.canvas.height,w="smaskGroupAt"+this.groupLevel,I=this.cachedCanvases.getCanvas(w,T,g);this.suspendedCtx=this.ctx,this.ctx=I.context;const B=this.ctx;B.setTransform(...(0,h.getCurrentTransform)(this.suspendedCtx)),S(this.suspendedCtx,B),p(B,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),S(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(T){if(!this.current.activeSMask)return;T?(T[0]=Math.floor(T[0]),T[1]=Math.floor(T[1]),T[2]=Math.ceil(T[2]),T[3]=Math.ceil(T[3])):T=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const g=this.current.activeSMask,w=this.suspendedCtx;Z(w,g,this.ctx,T),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(S(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const T=this.current;this.stateStack.push(T),this.current=T.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),S(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(T,g,w,I,B,X){this.ctx.transform(T,g,w,I,B,X),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(T,g,w){const I=this.ctx,B=this.current;let X=B.x,H=B.y,v,A;const k=(0,h.getCurrentTransform)(I),G=k[0]===0&&k[3]===0||k[1]===0&&k[2]===0,V=G?w.slice(0):null;for(let Q=0,et=0,ot=T.length;Q<ot;Q++)switch(T[Q]|0){case i.OPS.rectangle:X=g[et++],H=g[et++];const At=g[et++],ct=g[et++],dt=X+At,ht=H+ct;I.moveTo(X,H),At===0||ct===0?I.lineTo(dt,ht):(I.lineTo(dt,H),I.lineTo(dt,ht),I.lineTo(X,ht)),G||B.updateRectMinMax(k,[X,H,dt,ht]),I.closePath();break;case i.OPS.moveTo:X=g[et++],H=g[et++],I.moveTo(X,H),G||B.updatePathMinMax(k,X,H);break;case i.OPS.lineTo:X=g[et++],H=g[et++],I.lineTo(X,H),G||B.updatePathMinMax(k,X,H);break;case i.OPS.curveTo:v=X,A=H,X=g[et+4],H=g[et+5],I.bezierCurveTo(g[et],g[et+1],g[et+2],g[et+3],X,H),B.updateCurvePathMinMax(k,v,A,g[et],g[et+1],g[et+2],g[et+3],X,H,V),et+=6;break;case i.OPS.curveTo2:v=X,A=H,I.bezierCurveTo(X,H,g[et],g[et+1],g[et+2],g[et+3]),B.updateCurvePathMinMax(k,v,A,X,H,g[et],g[et+1],g[et+2],g[et+3],V),X=g[et+2],H=g[et+3],et+=4;break;case i.OPS.curveTo3:v=X,A=H,X=g[et+2],H=g[et+3],I.bezierCurveTo(g[et],g[et+1],X,H,X,H),B.updateCurvePathMinMax(k,v,A,g[et],g[et+1],X,H,X,H,V),et+=4;break;case i.OPS.closePath:I.closePath();break}G&&B.updateScalingPathMinMax(k,V),B.setCurrentPoint(X,H)}closePath(){this.ctx.closePath()}stroke(T=!0){const g=this.ctx,w=this.current.strokeColor;g.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof w=="object"&&w?.getPattern?(g.save(),g.strokeStyle=w.getPattern(g,this,(0,h.getCurrentTransformInverse)(g),E.PathType.STROKE),this.rescaleAndStroke(!1),g.restore()):this.rescaleAndStroke(!0)),T&&this.consumePath(this.current.getClippedPathBoundingBox()),g.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(T=!0){const g=this.ctx,w=this.current.fillColor,I=this.current.patternFill;let B=!1;I&&(g.save(),g.fillStyle=w.getPattern(g,this,(0,h.getCurrentTransformInverse)(g),E.PathType.FILL),B=!0);const X=this.current.getClippedPathBoundingBox();this.contentVisible&&X!==null&&(this.pendingEOFill?(g.fill("evenodd"),this.pendingEOFill=!1):g.fill()),B&&g.restore(),T&&this.consumePath(X)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=pt}eoClip(){this.pendingClip=W}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const T=this.pendingTextPaths,g=this.ctx;if(T===void 0){g.beginPath();return}g.save(),g.beginPath();for(const w of T)g.setTransform(...w.transform),g.translate(w.x,w.y),w.addToPath(g,w.fontSize);g.restore(),g.clip(),g.beginPath(),delete this.pendingTextPaths}setCharSpacing(T){this.current.charSpacing=T}setWordSpacing(T){this.current.wordSpacing=T}setHScale(T){this.current.textHScale=T/100}setLeading(T){this.current.leading=-T}setFont(T,g){const w=this.commonObjs.get(T),I=this.current;if(!w)throw new Error(`Can't find font for ${T}`);if(I.fontMatrix=w.fontMatrix||i.FONT_IDENTITY_MATRIX,(I.fontMatrix[0]===0||I.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+T),g<0?(g=-g,I.fontDirection=-1):I.fontDirection=1,this.current.font=w,this.current.fontSize=g,w.isType3Font)return;const B=w.loadedName||"sans-serif",X=w.systemFontInfo?.css||`"${B}", ${w.fallbackName}`;let H="normal";w.black?H="900":w.bold&&(H="bold");const v=w.italic?"italic":"normal";let A=g;g<M?A=M:g>C&&(A=C),this.current.fontSizeScale=g/A,this.ctx.font=`${v} ${H} ${A}px ${X}`}setTextRenderingMode(T){this.current.textRenderingMode=T}setTextRise(T){this.current.textRise=T}moveText(T,g){this.current.x=this.current.lineX+=T,this.current.y=this.current.lineY+=g}setLeadingMoveText(T,g){this.setLeading(-g),this.moveText(T,g)}setTextMatrix(T,g,w,I,B,X){this.current.textMatrix=[T,g,w,I,B,X],this.current.textMatrixScale=Math.hypot(T,g),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(T,g,w,I){const B=this.ctx,X=this.current,H=X.font,v=X.textRenderingMode,A=X.fontSize/X.fontSizeScale,k=v&i.TextRenderingMode.FILL_STROKE_MASK,G=!!(v&i.TextRenderingMode.ADD_TO_PATH_FLAG),V=X.patternFill&&!H.missingFile;let Q;(H.disableFontFace||G||V)&&(Q=H.getPathGenerator(this.commonObjs,T)),H.disableFontFace||V?(B.save(),B.translate(g,w),B.beginPath(),Q(B,A),I&&B.setTransform(...I),(k===i.TextRenderingMode.FILL||k===i.TextRenderingMode.FILL_STROKE)&&B.fill(),(k===i.TextRenderingMode.STROKE||k===i.TextRenderingMode.FILL_STROKE)&&B.stroke(),B.restore()):((k===i.TextRenderingMode.FILL||k===i.TextRenderingMode.FILL_STROKE)&&B.fillText(T,g,w),(k===i.TextRenderingMode.STROKE||k===i.TextRenderingMode.FILL_STROKE)&&B.strokeText(T,g,w)),G&&(this.pendingTextPaths||=[]).push({transform:(0,h.getCurrentTransform)(B),x:g,y:w,fontSize:A,addToPath:Q})}get isFontSubpixelAAEnabled(){const{context:T}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);T.scale(1.5,1),T.fillText("I",0,10);const g=T.getImageData(0,0,10,10).data;let w=!1;for(let I=3;I<g.length;I+=4)if(g[I]>0&&g[I]<255){w=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",w)}showText(T){const g=this.current,w=g.font;if(w.isType3Font)return this.showType3Text(T);const I=g.fontSize;if(I===0)return;const B=this.ctx,X=g.fontSizeScale,H=g.charSpacing,v=g.wordSpacing,A=g.fontDirection,k=g.textHScale*A,G=T.length,V=w.vertical,Q=V?1:-1,et=w.defaultVMetrics,ot=I*g.fontMatrix[0],At=g.textRenderingMode===i.TextRenderingMode.FILL&&!w.disableFontFace&&!g.patternFill;B.save(),B.transform(...g.textMatrix),B.translate(g.x,g.y+g.textRise),A>0?B.scale(k,-1):B.scale(k,1);let ct;if(g.patternFill){B.save();const Rt=g.fillColor.getPattern(B,this,(0,h.getCurrentTransformInverse)(B),E.PathType.FILL);ct=(0,h.getCurrentTransform)(B),B.restore(),B.fillStyle=Rt}let dt=g.lineWidth;const ht=g.textMatrixScale;if(ht===0||dt===0){const Rt=g.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(Rt===i.TextRenderingMode.STROKE||Rt===i.TextRenderingMode.FILL_STROKE)&&(dt=this.getSinglePixelWidth())}else dt/=ht;if(X!==1&&(B.scale(X,X),dt/=X),B.lineWidth=dt,w.isInvalidPDFjsFont){const Rt=[];let wt=0;for(const Mt of T)Rt.push(Mt.unicode),wt+=Mt.width;B.fillText(Rt.join(""),0,0),g.x+=wt*ot*k,B.restore(),this.compose();return}let yt=0,Et;for(Et=0;Et<G;++Et){const Rt=T[Et];if(typeof Rt=="number"){yt+=Q*Rt*I/1e3;continue}let wt=!1;const Mt=(Rt.isSpace?v:0)+H,kt=Rt.fontChar,Dt=Rt.accent;let Ft,$t,Ut=Rt.width;if(V){const Bt=Rt.vmetric||et,Me=-(Rt.vmetric?Bt[1]:Ut*.5)*ot,hn=Bt[2]*ot;Ut=Bt?-Bt[0]:Ut,Ft=Me/X,$t=(yt+hn)/X}else Ft=yt/X,$t=0;if(w.remeasure&&Ut>0){const Bt=B.measureText(kt).width*1e3/I*X;if(Ut<Bt&&this.isFontSubpixelAAEnabled){const Me=Ut/Bt;wt=!0,B.save(),B.scale(Me,1),Ft/=Me}else Ut!==Bt&&(Ft+=(Ut-Bt)/2e3*I/X)}if(this.contentVisible&&(Rt.isInFont||w.missingFile)){if(At&&!Dt)B.fillText(kt,Ft,$t);else if(this.paintChar(kt,Ft,$t,ct),Dt){const Bt=Ft+I*Dt.offset.x/X,Me=$t-I*Dt.offset.y/X;this.paintChar(Dt.fontChar,Bt,Me,ct)}}const Kt=V?Ut*ot-Mt*A:Ut*ot+Mt*A;yt+=Kt,wt&&B.restore()}V?g.y-=yt:g.x+=yt*k,B.restore(),this.compose()}showType3Text(T){const g=this.ctx,w=this.current,I=w.font,B=w.fontSize,X=w.fontDirection,H=I.vertical?1:-1,v=w.charSpacing,A=w.wordSpacing,k=w.textHScale*X,G=w.fontMatrix||i.FONT_IDENTITY_MATRIX,V=T.length,Q=w.textRenderingMode===i.TextRenderingMode.INVISIBLE;let et,ot,At,ct;if(!(Q||B===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,g.save(),g.transform(...w.textMatrix),g.translate(w.x,w.y),g.scale(k,X),et=0;et<V;++et){if(ot=T[et],typeof ot=="number"){ct=H*ot*B/1e3,this.ctx.translate(ct,0),w.x+=ct*k;continue}const dt=(ot.isSpace?A:0)+v,ht=I.charProcOperatorList[ot.operatorListId];if(!ht){(0,i.warn)(`Type3 character "${ot.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ot,this.save(),g.scale(B,B),g.transform(...G),this.executeOperatorList(ht),this.restore()),At=i.Util.applyTransform([ot.width,0],G)[0]*B+dt,g.translate(At,0),w.x+=At*k}g.restore(),this.processingType3=null}}setCharWidth(T,g){}setCharWidthAndBounds(T,g,w,I,B,X){this.ctx.rect(w,I,B-w,X-I),this.ctx.clip(),this.endPath()}getColorN_Pattern(T){let g;if(T[0]==="TilingPattern"){const w=T[1],I=this.baseTransform||(0,h.getCurrentTransform)(this.ctx),B={createCanvasGraphics:X=>new F(X,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};g=new E.TilingPattern(T,w,this.ctx,B,I)}else g=this._getPattern(T[1],T[2]);return g}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(T,g,w){const I=i.Util.makeHexColor(T,g,w);this.ctx.strokeStyle=I,this.current.strokeColor=I}setFillRGBColor(T,g,w){const I=i.Util.makeHexColor(T,g,w);this.ctx.fillStyle=I,this.current.fillColor=I,this.current.patternFill=!1}_getPattern(T,g=null){let w;return this.cachedPatterns.has(T)?w=this.cachedPatterns.get(T):(w=(0,E.getShadingPattern)(this.getObject(T)),this.cachedPatterns.set(T,w)),g&&(w.matrix=g),w}shadingFill(T){if(!this.contentVisible)return;const g=this.ctx;this.save();const w=this._getPattern(T);g.fillStyle=w.getPattern(g,this,(0,h.getCurrentTransformInverse)(g),E.PathType.SHADING);const I=(0,h.getCurrentTransformInverse)(g);if(I){const{width:B,height:X}=g.canvas,[H,v,A,k]=i.Util.getAxialAlignedBoundingBox([0,0,B,X],I);this.ctx.fillRect(H,v,A-H,k-v)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(T,g){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(T)&&T.length===6&&this.transform(...T),this.baseTransform=(0,h.getCurrentTransform)(this.ctx),g)){const w=g[2]-g[0],I=g[3]-g[1];this.ctx.rect(g[0],g[1],w,I),this.current.updateRectMinMax((0,h.getCurrentTransform)(this.ctx),g),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(T){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const g=this.ctx;T.isolated||(0,i.info)("TODO: Support non-isolated groups."),T.knockout&&(0,i.warn)("Knockout groups not supported.");const w=(0,h.getCurrentTransform)(g);if(T.matrix&&g.transform(...T.matrix),!T.bbox)throw new Error("Bounding box is required.");let I=i.Util.getAxialAlignedBoundingBox(T.bbox,(0,h.getCurrentTransform)(g));const B=[0,0,g.canvas.width,g.canvas.height];I=i.Util.intersect(I,B)||[0,0,0,0];const X=Math.floor(I[0]),H=Math.floor(I[1]);let v=Math.max(Math.ceil(I[2])-X,1),A=Math.max(Math.ceil(I[3])-H,1),k=1,G=1;v>u&&(k=v/u,v=u),A>u&&(G=A/u,A=u),this.current.startNewPathAndClipBox([0,0,v,A]);let V="groupAt"+this.groupLevel;T.smask&&(V+="_smask_"+this.smaskCounter++%2);const Q=this.cachedCanvases.getCanvas(V,v,A),et=Q.context;et.scale(1/k,1/G),et.translate(-X,-H),et.transform(...w),T.smask?this.smaskStack.push({canvas:Q.canvas,context:et,offsetX:X,offsetY:H,scaleX:k,scaleY:G,subtype:T.smask.subtype,backdrop:T.smask.backdrop,transferMap:T.smask.transferMap||null,startTransformInverse:null}):(g.setTransform(1,0,0,1,0,0),g.translate(X,H),g.scale(k,G),g.save()),S(g,et),this.ctx=et,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(g),this.groupLevel++}endGroup(T){if(!this.contentVisible)return;this.groupLevel--;const g=this.ctx,w=this.groupStack.pop();if(this.ctx=w,this.ctx.imageSmoothingEnabled=!1,T.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const I=(0,h.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...I);const B=i.Util.getAxialAlignedBoundingBox([0,0,g.canvas.width,g.canvas.height],I);this.ctx.drawImage(g.canvas,0,0),this.ctx.restore(),this.compose(B)}}beginAnnotation(T,g,w,I,B){if(this.#t(),P(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(g)&&g.length===4){const X=g[2]-g[0],H=g[3]-g[1];if(B&&this.annotationCanvasMap){w=w.slice(),w[4]-=g[0],w[5]-=g[1],g=g.slice(),g[0]=g[1]=0,g[2]=X,g[3]=H;const[v,A]=i.Util.singularValueDecompose2dScale((0,h.getCurrentTransform)(this.ctx)),{viewportScale:k}=this,G=Math.ceil(X*this.outputScaleX*k),V=Math.ceil(H*this.outputScaleY*k);this.annotationCanvas=this.canvasFactory.create(G,V);const{canvas:Q,context:et}=this.annotationCanvas;this.annotationCanvasMap.set(T,Q),this.annotationCanvas.savedCtx=this.ctx,this.ctx=et,this.ctx.save(),this.ctx.setTransform(v,0,0,-A,0,H*A),P(this.ctx)}else P(this.ctx),this.ctx.rect(g[0],g[1],X,H),this.ctx.clip(),this.endPath()}this.current=new L(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...w),this.transform(...I)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(T){if(!this.contentVisible)return;const g=T.count;T=this.getObject(T.data,T),T.count=g;const w=this.ctx,I=this.processingType3;if(I&&(I.compiled===void 0&&(I.compiled=b(T)),I.compiled)){I.compiled(w);return}const B=this._createMaskCanvas(T),X=B.canvas;w.save(),w.setTransform(1,0,0,1,0,0),w.drawImage(X,B.offsetX,B.offsetY),w.restore(),this.compose()}paintImageMaskXObjectRepeat(T,g,w=0,I=0,B,X){if(!this.contentVisible)return;T=this.getObject(T.data,T);const H=this.ctx;H.save();const v=(0,h.getCurrentTransform)(H);H.transform(g,w,I,B,0,0);const A=this._createMaskCanvas(T);H.setTransform(1,0,0,1,A.offsetX-v[4],A.offsetY-v[5]);for(let k=0,G=X.length;k<G;k+=2){const V=i.Util.transform(v,[g,w,I,B,X[k],X[k+1]]),[Q,et]=i.Util.applyTransform([0,0],V);H.drawImage(A.canvas,Q,et)}H.restore(),this.compose()}paintImageMaskXObjectGroup(T){if(!this.contentVisible)return;const g=this.ctx,w=this.current.fillColor,I=this.current.patternFill;for(const B of T){const{data:X,width:H,height:v,transform:A}=B,k=this.cachedCanvases.getCanvas("maskCanvas",H,v),G=k.context;G.save();const V=this.getObject(X,B);U(G,V),G.globalCompositeOperation="source-in",G.fillStyle=I?w.getPattern(G,this,(0,h.getCurrentTransformInverse)(g),E.PathType.FILL):w,G.fillRect(0,0,H,v),G.restore(),g.save(),g.transform(...A),g.scale(1,-1),D(g,k.canvas,0,0,H,v,0,-1,1,1),g.restore()}this.compose()}paintImageXObject(T){if(!this.contentVisible)return;const g=this.getObject(T);if(!g){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(g)}paintImageXObjectRepeat(T,g,w,I){if(!this.contentVisible)return;const B=this.getObject(T);if(!B){(0,i.warn)("Dependent image isn't ready yet");return}const X=B.width,H=B.height,v=[];for(let A=0,k=I.length;A<k;A+=2)v.push({transform:[g,0,0,w,I[A],I[A+1]],x:0,y:0,w:X,h:H});this.paintInlineImageXObjectGroup(B,v)}applyTransferMapsToCanvas(T){return this.current.transferMaps!=="none"&&(T.filter=this.current.transferMaps,T.drawImage(T.canvas,0,0),T.filter="none"),T.canvas}applyTransferMapsToBitmap(T){if(this.current.transferMaps==="none")return T.bitmap;const{bitmap:g,width:w,height:I}=T,B=this.cachedCanvases.getCanvas("inlineImage",w,I),X=B.context;return X.filter=this.current.transferMaps,X.drawImage(g,0,0),X.filter="none",B.canvas}paintInlineImageXObject(T){if(!this.contentVisible)return;const g=T.width,w=T.height,I=this.ctx;if(this.save(),!i.isNodeJS){const{filter:H}=I;H!=="none"&&H!==""&&(I.filter="none")}I.scale(1/g,-1/w);let B;if(T.bitmap)B=this.applyTransferMapsToBitmap(T);else if(typeof HTMLElement=="function"&&T instanceof HTMLElement||!T.data)B=T;else{const v=this.cachedCanvases.getCanvas("inlineImage",g,w).context;N(v,T),B=this.applyTransferMapsToCanvas(v)}const X=this._scaleImage(B,(0,h.getCurrentTransformInverse)(I));I.imageSmoothingEnabled=it((0,h.getCurrentTransform)(I),T.interpolate),D(I,X.img,0,0,X.paintWidth,X.paintHeight,0,-w,g,w),this.compose(),this.restore()}paintInlineImageXObjectGroup(T,g){if(!this.contentVisible)return;const w=this.ctx;let I;if(T.bitmap)I=T.bitmap;else{const B=T.width,X=T.height,v=this.cachedCanvases.getCanvas("inlineImage",B,X).context;N(v,T),I=this.applyTransferMapsToCanvas(v)}for(const B of g)w.save(),w.transform(...B.transform),w.scale(1,-1),D(w,I,B.x,B.y,B.w,B.h,0,-1,1,1),w.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(T){}markPointProps(T,g){}beginMarkedContent(T){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(T,g){T==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(g)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(T){const g=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(T);const w=this.ctx;this.pendingClip&&(g||(this.pendingClip===W?w.clip("evenodd"):w.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),w.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const T=(0,h.getCurrentTransform)(this.ctx);if(T[1]===0&&T[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(T[0]),Math.abs(T[3]));else{const g=Math.abs(T[0]*T[3]-T[2]*T[1]),w=Math.hypot(T[0],T[2]),I=Math.hypot(T[1],T[3]);this._cachedGetSinglePixelWidth=Math.max(w,I)/g}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:T}=this.current,{a:g,b:w,c:I,d:B}=this.ctx.getTransform();let X,H;if(w===0&&I===0){const v=Math.abs(g),A=Math.abs(B);if(v===A)if(T===0)X=H=1/v;else{const k=v*T;X=H=k<1?1/k:1}else if(T===0)X=1/v,H=1/A;else{const k=v*T,G=A*T;X=k<1?1/k:1,H=G<1?1/G:1}}else{const v=Math.abs(g*B-w*I),A=Math.hypot(g,w),k=Math.hypot(I,B);if(T===0)X=k/v,H=A/v;else{const G=T*v;X=k>G?k/G:1,H=A>G?A/G:1}}this._cachedScaleForStroking[0]=X,this._cachedScaleForStroking[1]=H}return this._cachedScaleForStroking}rescaleAndStroke(T){const{ctx:g}=this,{lineWidth:w}=this.current,[I,B]=this.getScaleForStroking();if(g.lineWidth=w||1,I===1&&B===1){g.stroke();return}const X=g.getLineDash();if(T&&g.save(),g.scale(I,B),X.length>0){const H=Math.max(I,B);g.setLineDash(X.map(v=>v/H)),g.lineDashOffset/=H}g.stroke(),T&&g.restore()}isContentVisible(){for(let T=this.markedContentStack.length-1;T>=0;T--)if(!this.markedContentStack[T].visible)return!1;return!0}}a.CanvasGraphics=F;for(const O in i.OPS)F.prototype[O]!==void 0&&(F.prototype[i.OPS[O]]=F.prototype[O])}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TilingPattern=a.PathType=void 0,a.getShadingPattern=x;var i=d(1),h=d(6);const E={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};a.PathType=E;function R(D,b){if(!b)return;const L=b[2]-b[0],N=b[3]-b[1],U=new Path2D;U.rect(b[0],b[1],L,N),D.clip(U)}class M{constructor(){this.constructor===M&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class C extends M{constructor(b){super(),this._type=b[1],this._bbox=b[2],this._colorStops=b[3],this._p0=b[4],this._p1=b[5],this._r0=b[6],this._r1=b[7],this.matrix=null}_createGradient(b){let L;this._type==="axial"?L=b.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(L=b.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const N of this._colorStops)L.addColorStop(N[0],N[1]);return L}getPattern(b,L,N,U){let S;if(U===E.STROKE||U===E.FILL){const P=L.current.getClippedPathBoundingBox(U,(0,h.getCurrentTransform)(b))||[0,0,0,0],z=Math.ceil(P[2]-P[0])||1,Y=Math.ceil(P[3]-P[1])||1,q=L.cachedCanvases.getCanvas("pattern",z,Y,!0),K=q.context;K.clearRect(0,0,K.canvas.width,K.canvas.height),K.beginPath(),K.rect(0,0,K.canvas.width,K.canvas.height),K.translate(-P[0],-P[1]),N=i.Util.transform(N,[1,0,0,1,P[0],P[1]]),K.transform(...L.baseTransform),this.matrix&&K.transform(...this.matrix),R(K,this._bbox),K.fillStyle=this._createGradient(K),K.fill(),S=b.createPattern(q.canvas,"no-repeat");const Z=new DOMMatrix(N);S.setTransform(Z)}else R(b,this._bbox),S=this._createGradient(b);return S}}function u(D,b,L,N,U,S,P,z){const Y=b.coords,q=b.colors,K=D.data,Z=D.width*4;let it;Y[L+1]>Y[N+1]&&(it=L,L=N,N=it,it=S,S=P,P=it),Y[N+1]>Y[U+1]&&(it=N,N=U,U=it,it=P,P=z,z=it),Y[L+1]>Y[N+1]&&(it=L,L=N,N=it,it=S,S=P,P=it);const nt=(Y[L]+b.offsetX)*b.scaleX,at=(Y[L+1]+b.offsetY)*b.scaleY,pt=(Y[N]+b.offsetX)*b.scaleX,W=(Y[N+1]+b.offsetY)*b.scaleY,F=(Y[U]+b.offsetX)*b.scaleX,O=(Y[U+1]+b.offsetY)*b.scaleY;if(at>=O)return;const T=q[S],g=q[S+1],w=q[S+2],I=q[P],B=q[P+1],X=q[P+2],H=q[z],v=q[z+1],A=q[z+2],k=Math.round(at),G=Math.round(O);let V,Q,et,ot,At,ct,dt,ht;for(let yt=k;yt<=G;yt++){if(yt<W){const kt=yt<at?0:(at-yt)/(at-W);V=nt-(nt-pt)*kt,Q=T-(T-I)*kt,et=g-(g-B)*kt,ot=w-(w-X)*kt}else{let kt;yt>O?kt=1:W===O?kt=0:kt=(W-yt)/(W-O),V=pt-(pt-F)*kt,Q=I-(I-H)*kt,et=B-(B-v)*kt,ot=X-(X-A)*kt}let Et;yt<at?Et=0:yt>O?Et=1:Et=(at-yt)/(at-O),At=nt-(nt-F)*Et,ct=T-(T-H)*Et,dt=g-(g-v)*Et,ht=w-(w-A)*Et;const Rt=Math.round(Math.min(V,At)),wt=Math.round(Math.max(V,At));let Mt=Z*yt+Rt*4;for(let kt=Rt;kt<=wt;kt++)Et=(V-kt)/(V-At),Et<0?Et=0:Et>1&&(Et=1),K[Mt++]=Q-(Q-ct)*Et|0,K[Mt++]=et-(et-dt)*Et|0,K[Mt++]=ot-(ot-ht)*Et|0,K[Mt++]=255}}function l(D,b,L){const N=b.coords,U=b.colors;let S,P;switch(b.type){case"lattice":const z=b.verticesPerRow,Y=Math.floor(N.length/z)-1,q=z-1;for(S=0;S<Y;S++){let K=S*z;for(let Z=0;Z<q;Z++,K++)u(D,L,N[K],N[K+1],N[K+z],U[K],U[K+1],U[K+z]),u(D,L,N[K+z+1],N[K+1],N[K+z],U[K+z+1],U[K+1],U[K+z])}break;case"triangles":for(S=0,P=N.length;S<P;S+=3)u(D,L,N[S],N[S+1],N[S+2],U[S],U[S+1],U[S+2]);break;default:throw new Error("illegal figure")}}class c extends M{constructor(b){super(),this._coords=b[2],this._colors=b[3],this._figures=b[4],this._bounds=b[5],this._bbox=b[7],this._background=b[8],this.matrix=null}_createMeshCanvas(b,L,N){const z=Math.floor(this._bounds[0]),Y=Math.floor(this._bounds[1]),q=Math.ceil(this._bounds[2])-z,K=Math.ceil(this._bounds[3])-Y,Z=Math.min(Math.ceil(Math.abs(q*b[0]*1.1)),3e3),it=Math.min(Math.ceil(Math.abs(K*b[1]*1.1)),3e3),nt=q/Z,at=K/it,pt={coords:this._coords,colors:this._colors,offsetX:-z,offsetY:-Y,scaleX:1/nt,scaleY:1/at},W=Z+4,F=it+4,O=N.getCanvas("mesh",W,F,!1),T=O.context,g=T.createImageData(Z,it);if(L){const I=g.data;for(let B=0,X=I.length;B<X;B+=4)I[B]=L[0],I[B+1]=L[1],I[B+2]=L[2],I[B+3]=255}for(const I of this._figures)l(g,I,pt);return T.putImageData(g,2,2),{canvas:O.canvas,offsetX:z-2*nt,offsetY:Y-2*at,scaleX:nt,scaleY:at}}getPattern(b,L,N,U){R(b,this._bbox);let S;if(U===E.SHADING)S=i.Util.singularValueDecompose2dScale((0,h.getCurrentTransform)(b));else if(S=i.Util.singularValueDecompose2dScale(L.baseTransform),this.matrix){const z=i.Util.singularValueDecompose2dScale(this.matrix);S=[S[0]*z[0],S[1]*z[1]]}const P=this._createMeshCanvas(S,U===E.SHADING?null:this._background,L.cachedCanvases);return U!==E.SHADING&&(b.setTransform(...L.baseTransform),this.matrix&&b.transform(...this.matrix)),b.translate(P.offsetX,P.offsetY),b.scale(P.scaleX,P.scaleY),b.createPattern(P.canvas,"no-repeat")}}class m extends M{getPattern(){return"hotpink"}}function x(D){switch(D[0]){case"RadialAxial":return new C(D);case"Mesh":return new c(D);case"Dummy":return new m}throw new Error(`Unknown IR type: ${D[0]}`)}const p={COLORED:1,UNCOLORED:2};class _{static MAX_PATTERN_SIZE=3e3;constructor(b,L,N,U,S){this.operatorList=b[2],this.matrix=b[3]||[1,0,0,1,0,0],this.bbox=b[4],this.xstep=b[5],this.ystep=b[6],this.paintType=b[7],this.tilingType=b[8],this.color=L,this.ctx=N,this.canvasGraphicsFactory=U,this.baseTransform=S}createPatternCanvas(b){const L=this.operatorList,N=this.bbox,U=this.xstep,S=this.ystep,P=this.paintType,z=this.tilingType,Y=this.color,q=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+z);const K=N[0],Z=N[1],it=N[2],nt=N[3],at=i.Util.singularValueDecompose2dScale(this.matrix),pt=i.Util.singularValueDecompose2dScale(this.baseTransform),W=[at[0]*pt[0],at[1]*pt[1]],F=this.getSizeAndScale(U,this.ctx.canvas.width,W[0]),O=this.getSizeAndScale(S,this.ctx.canvas.height,W[1]),T=b.cachedCanvases.getCanvas("pattern",F.size,O.size,!0),g=T.context,w=q.createCanvasGraphics(g);w.groupLevel=b.groupLevel,this.setFillAndStrokeStyleToContext(w,P,Y);let I=K,B=Z,X=it,H=nt;return K<0&&(I=0,X+=Math.abs(K)),Z<0&&(B=0,H+=Math.abs(Z)),g.translate(-(F.scale*I),-(O.scale*B)),w.transform(F.scale,0,0,O.scale,0,0),g.save(),this.clipBbox(w,I,B,X,H),w.baseTransform=(0,h.getCurrentTransform)(w.ctx),w.executeOperatorList(L),w.endDrawing(),{canvas:T.canvas,scaleX:F.scale,scaleY:O.scale,offsetX:I,offsetY:B}}getSizeAndScale(b,L,N){b=Math.abs(b);const U=Math.max(_.MAX_PATTERN_SIZE,L);let S=Math.ceil(b*N);return S>=U?S=U:N=S/b,{scale:N,size:S}}clipBbox(b,L,N,U,S){const P=U-L,z=S-N;b.ctx.rect(L,N,P,z),b.current.updateRectMinMax((0,h.getCurrentTransform)(b.ctx),[L,N,U,S]),b.clip(),b.endPath()}setFillAndStrokeStyleToContext(b,L,N){const U=b.ctx,S=b.current;switch(L){case p.COLORED:const P=this.ctx;U.fillStyle=P.fillStyle,U.strokeStyle=P.strokeStyle,S.fillColor=P.fillStyle,S.strokeColor=P.strokeStyle;break;case p.UNCOLORED:const z=i.Util.makeHexColor(N[0],N[1],N[2]);U.fillStyle=z,U.strokeStyle=z,S.fillColor=z,S.strokeColor=z;break;default:throw new i.FormatError(`Unsupported paint type: ${L}`)}}getPattern(b,L,N,U){let S=N;U!==E.SHADING&&(S=i.Util.transform(S,L.baseTransform),this.matrix&&(S=i.Util.transform(S,this.matrix)));const P=this.createPatternCanvas(L);let z=new DOMMatrix(S);z=z.translate(P.offsetX,P.offsetY),z=z.scale(1/P.scaleX,1/P.scaleY);const Y=b.createPattern(P.canvas,"repeat");return Y.setTransform(z),Y}}a.TilingPattern=_}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.convertBlackAndWhiteToRGBA=E,a.convertToRGBA=h,a.grayToRGBA=M;var i=d(1);function h(C){switch(C.kind){case i.ImageKind.GRAYSCALE_1BPP:return E(C);case i.ImageKind.RGB_24BPP:return R(C)}return null}function E({src:C,srcPos:u=0,dest:l,width:c,height:m,nonBlackColor:x=4294967295,inverseDecode:p=!1}){const _=i.FeatureTest.isLittleEndian?4278190080:255,[D,b]=p?[x,_]:[_,x],L=c>>3,N=c&7,U=C.length;l=new Uint32Array(l.buffer);let S=0;for(let P=0;P<m;P++){for(const Y=u+L;u<Y;u++){const q=u<U?C[u]:255;l[S++]=q&128?b:D,l[S++]=q&64?b:D,l[S++]=q&32?b:D,l[S++]=q&16?b:D,l[S++]=q&8?b:D,l[S++]=q&4?b:D,l[S++]=q&2?b:D,l[S++]=q&1?b:D}if(N===0)continue;const z=u<U?C[u++]:255;for(let Y=0;Y<N;Y++)l[S++]=z&1<<7-Y?b:D}return{srcPos:u,destPos:S}}function R({src:C,srcPos:u=0,dest:l,destPos:c=0,width:m,height:x}){let p=0;const _=C.length>>2,D=new Uint32Array(C.buffer,u,_);if(i.FeatureTest.isLittleEndian){for(;p<_-2;p+=3,c+=4){const b=D[p],L=D[p+1],N=D[p+2];l[c]=b|4278190080,l[c+1]=b>>>24|L<<8|4278190080,l[c+2]=L>>>16|N<<16|4278190080,l[c+3]=N>>>8|4278190080}for(let b=p*4,L=C.length;b<L;b+=3)l[c++]=C[b]|C[b+1]<<8|C[b+2]<<16|4278190080}else{for(;p<_-2;p+=3,c+=4){const b=D[p],L=D[p+1],N=D[p+2];l[c]=b|255,l[c+1]=b<<24|L>>>8|255,l[c+2]=L<<16|N>>>16|255,l[c+3]=N<<8|255}for(let b=p*4,L=C.length;b<L;b+=3)l[c++]=C[b]<<24|C[b+1]<<16|C[b+2]<<8|255}return{srcPos:u,destPos:c}}function M(C,u){if(i.FeatureTest.isLittleEndian)for(let l=0,c=C.length;l<c;l++)u[l]=C[l]*65793|4278190080;else for(let l=0,c=C.length;l<c;l++)u[l]=C[l]*16843008|255}}),((y,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.GlobalWorkerOptions=void 0;const d=Object.create(null);a.GlobalWorkerOptions=d,d.workerPort=null,d.workerSrc=""}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.MessageHandler=void 0;var i=d(1);const h={DATA:1,ERROR:2},E={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function R(C){switch(C instanceof Error||typeof C=="object"&&C!==null||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),C.name){case"AbortException":return new i.AbortException(C.message);case"MissingPDFException":return new i.MissingPDFException(C.message);case"PasswordException":return new i.PasswordException(C.message,C.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(C.message,C.status);case"UnknownErrorException":return new i.UnknownErrorException(C.message,C.details);default:return new i.UnknownErrorException(C.message,C.toString())}}class M{constructor(u,l,c){this.sourceName=u,this.targetName=l,this.comObj=c,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=m=>{const x=m.data;if(x.targetName!==this.sourceName)return;if(x.stream){this.#e(x);return}if(x.callback){const _=x.callbackId,D=this.callbackCapabilities[_];if(!D)throw new Error(`Cannot resolve callback ${_}`);if(delete this.callbackCapabilities[_],x.callback===h.DATA)D.resolve(x.data);else if(x.callback===h.ERROR)D.reject(R(x.reason));else throw new Error("Unexpected callback case");return}const p=this.actionHandler[x.action];if(!p)throw new Error(`Unknown action from worker: ${x.action}`);if(x.callbackId){const _=this.sourceName,D=x.sourceName;new Promise(function(b){b(p(x.data))}).then(function(b){c.postMessage({sourceName:_,targetName:D,callback:h.DATA,callbackId:x.callbackId,data:b})},function(b){c.postMessage({sourceName:_,targetName:D,callback:h.ERROR,callbackId:x.callbackId,reason:R(b)})});return}if(x.streamId){this.#t(x);return}p(x.data)},c.addEventListener("message",this._onComObjOnMessage)}on(u,l){const c=this.actionHandler;if(c[u])throw new Error(`There is already an actionName called "${u}"`);c[u]=l}send(u,l,c){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,data:l},c)}sendWithPromise(u,l,c){const m=this.callbackId++,x=new i.PromiseCapability;this.callbackCapabilities[m]=x;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,callbackId:m,data:l},c)}catch(p){x.reject(p)}return x.promise}sendWithStream(u,l,c,m){const x=this.streamId++,p=this.sourceName,_=this.targetName,D=this.comObj;return new ReadableStream({start:b=>{const L=new i.PromiseCapability;return this.streamControllers[x]={controller:b,startCall:L,pullCall:null,cancelCall:null,isClosed:!1},D.postMessage({sourceName:p,targetName:_,action:u,streamId:x,data:l,desiredSize:b.desiredSize},m),L.promise},pull:b=>{const L=new i.PromiseCapability;return this.streamControllers[x].pullCall=L,D.postMessage({sourceName:p,targetName:_,stream:E.PULL,streamId:x,desiredSize:b.desiredSize}),L.promise},cancel:b=>{(0,i.assert)(b instanceof Error,"cancel must have a valid reason");const L=new i.PromiseCapability;return this.streamControllers[x].cancelCall=L,this.streamControllers[x].isClosed=!0,D.postMessage({sourceName:p,targetName:_,stream:E.CANCEL,streamId:x,reason:R(b)}),L.promise}},c)}#t(u){const l=u.streamId,c=this.sourceName,m=u.sourceName,x=this.comObj,p=this,_=this.actionHandler[u.action],D={enqueue(b,L=1,N){if(this.isCancelled)return;const U=this.desiredSize;this.desiredSize-=L,U>0&&this.desiredSize<=0&&(this.sinkCapability=new i.PromiseCapability,this.ready=this.sinkCapability.promise),x.postMessage({sourceName:c,targetName:m,stream:E.ENQUEUE,streamId:l,chunk:b},N)},close(){this.isCancelled||(this.isCancelled=!0,x.postMessage({sourceName:c,targetName:m,stream:E.CLOSE,streamId:l}),delete p.streamSinks[l])},error(b){(0,i.assert)(b instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,x.postMessage({sourceName:c,targetName:m,stream:E.ERROR,streamId:l,reason:R(b)}))},sinkCapability:new i.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:u.desiredSize,ready:null};D.sinkCapability.resolve(),D.ready=D.sinkCapability.promise,this.streamSinks[l]=D,new Promise(function(b){b(_(u.data,D))}).then(function(){x.postMessage({sourceName:c,targetName:m,stream:E.START_COMPLETE,streamId:l,success:!0})},function(b){x.postMessage({sourceName:c,targetName:m,stream:E.START_COMPLETE,streamId:l,reason:R(b)})})}#e(u){const l=u.streamId,c=this.sourceName,m=u.sourceName,x=this.comObj,p=this.streamControllers[l],_=this.streamSinks[l];switch(u.stream){case E.START_COMPLETE:u.success?p.startCall.resolve():p.startCall.reject(R(u.reason));break;case E.PULL_COMPLETE:u.success?p.pullCall.resolve():p.pullCall.reject(R(u.reason));break;case E.PULL:if(!_){x.postMessage({sourceName:c,targetName:m,stream:E.PULL_COMPLETE,streamId:l,success:!0});break}_.desiredSize<=0&&u.desiredSize>0&&_.sinkCapability.resolve(),_.desiredSize=u.desiredSize,new Promise(function(D){D(_.onPull?.())}).then(function(){x.postMessage({sourceName:c,targetName:m,stream:E.PULL_COMPLETE,streamId:l,success:!0})},function(D){x.postMessage({sourceName:c,targetName:m,stream:E.PULL_COMPLETE,streamId:l,reason:R(D)})});break;case E.ENQUEUE:if((0,i.assert)(p,"enqueue should have stream controller"),p.isClosed)break;p.controller.enqueue(u.chunk);break;case E.CLOSE:if((0,i.assert)(p,"close should have stream controller"),p.isClosed)break;p.isClosed=!0,p.controller.close(),this.#n(p,l);break;case E.ERROR:(0,i.assert)(p,"error should have stream controller"),p.controller.error(R(u.reason)),this.#n(p,l);break;case E.CANCEL_COMPLETE:u.success?p.cancelCall.resolve():p.cancelCall.reject(R(u.reason)),this.#n(p,l);break;case E.CANCEL:if(!_)break;new Promise(function(D){D(_.onCancel?.(R(u.reason)))}).then(function(){x.postMessage({sourceName:c,targetName:m,stream:E.CANCEL_COMPLETE,streamId:l,success:!0})},function(D){x.postMessage({sourceName:c,targetName:m,stream:E.CANCEL_COMPLETE,streamId:l,reason:R(D)})}),_.sinkCapability.reject(R(u.reason)),_.isCancelled=!0,delete this.streamSinks[l];break;default:throw new Error("Unexpected stream case")}}async#n(u,l){await Promise.allSettled([u.startCall?.promise,u.pullCall?.promise,u.cancelCall?.promise]),delete this.streamControllers[l]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}a.MessageHandler=M}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Metadata=void 0;var i=d(1);class h{#t;#e;constructor({parsedData:R,rawData:M}){this.#t=R,this.#e=M}getRaw(){return this.#e}get(R){return this.#t.get(R)??null}getAll(){return(0,i.objectFromMap)(this.#t)}has(R){return this.#t.has(R)}}a.Metadata=h}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionalContentConfig=void 0;var i=d(1),h=d(8);const E=Symbol("INTERNAL");class R{#t=!0;constructor(u,l){this.name=u,this.intent=l}get visible(){return this.#t}_setVisible(u,l){u!==E&&(0,i.unreachable)("Internal method `_setVisible` called."),this.#t=l}}class M{#t=null;#e=new Map;#n=null;#s=null;constructor(u){if(this.name=null,this.creator=null,u!==null){this.name=u.name,this.creator=u.creator,this.#s=u.order;for(const l of u.groups)this.#e.set(l.id,new R(l.name,l.intent));if(u.baseState==="OFF")for(const l of this.#e.values())l._setVisible(E,!1);for(const l of u.on)this.#e.get(l)._setVisible(E,!0);for(const l of u.off)this.#e.get(l)._setVisible(E,!1);this.#n=this.getHash()}}#o(u){const l=u.length;if(l<2)return!0;const c=u[0];for(let m=1;m<l;m++){const x=u[m];let p;if(Array.isArray(x))p=this.#o(x);else if(this.#e.has(x))p=this.#e.get(x).visible;else return(0,i.warn)(`Optional content group not found: ${x}`),!0;switch(c){case"And":if(!p)return!1;break;case"Or":if(p)return!0;break;case"Not":return!p;default:return!0}}return c==="And"}isVisible(u){if(this.#e.size===0)return!0;if(!u)return(0,i.warn)("Optional content group not defined."),!0;if(u.type==="OCG")return this.#e.has(u.id)?this.#e.get(u.id).visible:((0,i.warn)(`Optional content group not found: ${u.id}`),!0);if(u.type==="OCMD"){if(u.expression)return this.#o(u.expression);if(!u.policy||u.policy==="AnyOn"){for(const l of u.ids){if(!this.#e.has(l))return(0,i.warn)(`Optional content group not found: ${l}`),!0;if(this.#e.get(l).visible)return!0}return!1}else if(u.policy==="AllOn"){for(const l of u.ids){if(!this.#e.has(l))return(0,i.warn)(`Optional content group not found: ${l}`),!0;if(!this.#e.get(l).visible)return!1}return!0}else if(u.policy==="AnyOff"){for(const l of u.ids){if(!this.#e.has(l))return(0,i.warn)(`Optional content group not found: ${l}`),!0;if(!this.#e.get(l).visible)return!0}return!1}else if(u.policy==="AllOff"){for(const l of u.ids){if(!this.#e.has(l))return(0,i.warn)(`Optional content group not found: ${l}`),!0;if(this.#e.get(l).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${u.policy}.`),!0}return(0,i.warn)(`Unknown group type ${u.type}.`),!0}setVisibility(u,l=!0){if(!this.#e.has(u)){(0,i.warn)(`Optional content group not found: ${u}`);return}this.#e.get(u)._setVisible(E,!!l),this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#s?this.#s.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?(0,i.objectFromMap)(this.#e):null}getGroup(u){return this.#e.get(u)||null}getHash(){if(this.#t!==null)return this.#t;const u=new h.MurmurHash3_64;for(const[l,c]of this.#e)u.update(`${l}:${c.visible}`);return this.#t=u.hexdigest()}}a.OptionalContentConfig=M}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFDataTransportStream=void 0;var i=d(1),h=d(6);class E{constructor({length:u,initialData:l,progressiveDone:c=!1,contentDispositionFilename:m=null,disableRange:x=!1,disableStream:p=!1},_){if((0,i.assert)(_,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=m,l?.length>0){const D=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(D)}this._pdfDataRangeTransport=_,this._isStreamingSupported=!p,this._isRangeSupported=!x,this._contentLength=u,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((D,b)=>{this._onReceiveData({begin:D,chunk:b})}),this._pdfDataRangeTransport.addProgressListener((D,b)=>{this._onProgress({loaded:D,total:b})}),this._pdfDataRangeTransport.addProgressiveReadListener(D=>{this._onReceiveData({chunk:D})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:u,chunk:l}){const c=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;if(u===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(c):this._queuedChunks.push(c);else{const m=this._rangeReaders.some(function(x){return x._begin!==u?!1:(x._enqueue(c),!0)});(0,i.assert)(m,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(u){u.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:u.loaded}):this._fullRequestReader?.onProgress?.({loaded:u.loaded,total:u.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(u){const l=this._rangeReaders.indexOf(u);l>=0&&this._rangeReaders.splice(l,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const u=this._queuedChunks;return this._queuedChunks=null,new R(this,u,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(u,l){if(l<=this._progressiveDataLength)return null;const c=new M(this,u,l);return this._pdfDataRangeTransport.requestDataRange(u,l),this._rangeReaders.push(c),c}cancelAllRequests(u){this._fullRequestReader?.cancel(u);for(const l of this._rangeReaders.slice(0))l.cancel(u);this._pdfDataRangeTransport.abort()}}a.PDFDataTransportStream=E;class R{constructor(u,l,c=!1,m=null){this._stream=u,this._done=c||!1,this._filename=(0,h.isPdfFile)(m)?m:null,this._queuedChunks=l||[],this._loaded=0;for(const x of this._queuedChunks)this._loaded+=x.byteLength;this._requests=[],this._headersReady=Promise.resolve(),u._fullRequestReader=this,this.onProgress=null}_enqueue(u){this._done||(this._requests.length>0?this._requests.shift().resolve({value:u,done:!1}):this._queuedChunks.push(u),this._loaded+=u.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const u=new i.PromiseCapability;return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class M{constructor(u,l,c){this._stream=u,this._begin=l,this._end=c,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(u){if(!this._done){if(this._requests.length===0)this._queuedChunk=u;else{this._requests.shift().resolve({value:u,done:!1});for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const l=this._queuedChunk;return this._queuedChunk=null,{value:l,done:!1}}if(this._done)return{value:void 0,done:!0};const u=new i.PromiseCapability;return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFFetchStream=void 0;var i=d(1),h=d(20);function E(c,m,x){return{method:"GET",headers:c,signal:x.signal,mode:"cors",credentials:m?"include":"same-origin",redirect:"follow"}}function R(c){const m=new Headers;for(const x in c){const p=c[x];p!==void 0&&m.append(x,p)}return m}function M(c){return c instanceof Uint8Array?c.buffer:c instanceof ArrayBuffer?c:((0,i.warn)(`getArrayBuffer - unexpected data format: ${c}`),new Uint8Array(c).buffer)}class C{constructor(m){this.source=m,this.isHttp=/^https?:/i.test(m.url),this.httpHeaders=this.isHttp&&m.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new u(this),this._fullRequestReader}getRangeReader(m,x){if(x<=this._progressiveDataLength)return null;const p=new l(this,m,x);return this._rangeRequestReaders.push(p),p}cancelAllRequests(m){this._fullRequestReader?.cancel(m);for(const x of this._rangeRequestReaders.slice(0))x.cancel(m)}}a.PDFFetchStream=C;class u{constructor(m){this._stream=m,this._reader=null,this._loaded=0,this._filename=null;const x=m.source;this._withCredentials=x.withCredentials||!1,this._contentLength=x.length,this._headersCapability=new i.PromiseCapability,this._disableRange=x.disableRange||!1,this._rangeChunkSize=x.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!x.disableStream,this._isRangeSupported=!x.disableRange,this._headers=R(this._stream.httpHeaders);const p=x.url;fetch(p,E(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,h.validateResponseStatus)(_.status))throw(0,h.createResponseStatusError)(_.status,p);this._reader=_.body.getReader(),this._headersCapability.resolve();const D=N=>_.headers.get(N),{allowRangeRequests:b,suggestedLength:L}=(0,h.validateRangeRequestCapabilities)({getResponseHeader:D,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=b,this._contentLength=L||this._contentLength,this._filename=(0,h.extractFilenameFromHeader)(D),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:m,done:x}=await this._reader.read();return x?{value:m,done:x}:(this._loaded+=m.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:M(m),done:!1})}cancel(m){this._reader?.cancel(m),this._abortController.abort()}}class l{constructor(m,x,p){this._stream=m,this._reader=null,this._loaded=0;const _=m.source;this._withCredentials=_.withCredentials||!1,this._readCapability=new i.PromiseCapability,this._isStreamingSupported=!_.disableStream,this._abortController=new AbortController,this._headers=R(this._stream.httpHeaders),this._headers.append("Range",`bytes=${x}-${p-1}`);const D=_.url;fetch(D,E(this._headers,this._withCredentials,this._abortController)).then(b=>{if(!(0,h.validateResponseStatus)(b.status))throw(0,h.createResponseStatusError)(b.status,D);this._readCapability.resolve(),this._reader=b.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:m,done:x}=await this._reader.read();return x?{value:m,done:x}:(this._loaded+=m.byteLength,this.onProgress?.({loaded:this._loaded}),{value:M(m),done:!1})}cancel(m){this._reader?.cancel(m),this._abortController.abort()}}}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createResponseStatusError=C,a.extractFilenameFromHeader=M,a.validateRangeRequestCapabilities=R,a.validateResponseStatus=u;var i=d(1),h=d(21),E=d(6);function R({getResponseHeader:l,isHttp:c,rangeChunkSize:m,disableRange:x}){const p={allowRangeRequests:!1,suggestedLength:void 0},_=parseInt(l("Content-Length"),10);return!Number.isInteger(_)||(p.suggestedLength=_,_<=2*m)||x||!c||l("Accept-Ranges")!=="bytes"||(l("Content-Encoding")||"identity")!=="identity"||(p.allowRangeRequests=!0),p}function M(l){const c=l("Content-Disposition");if(c){let m=(0,h.getFilenameFromContentDispositionHeader)(c);if(m.includes("%"))try{m=decodeURIComponent(m)}catch{}if((0,E.isPdfFile)(m))return m}return null}function C(l,c){return l===404||l===0&&c.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+c+'".'):new i.UnexpectedResponseException(`Unexpected server response (${l}) while retrieving PDF "${c}".`,l)}function u(l){return l===200||l===206}}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getFilenameFromContentDispositionHeader=h;var i=d(1);function h(E){let R=!0,M=C("filename\\*","i").exec(E);if(M){M=M[1];let _=m(M);return _=unescape(_),_=x(_),_=p(_),l(_)}if(M=c(E),M){const _=p(M);return l(_)}if(M=C("filename","i").exec(E),M){M=M[1];let _=m(M);return _=p(_),l(_)}function C(_,D){return new RegExp("(?:^|;)\\s*"+_+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',D)}function u(_,D){if(_){if(!/^[\x00-\xFF]+$/.test(D))return D;try{const b=new TextDecoder(_,{fatal:!0}),L=(0,i.stringToBytes)(D);D=b.decode(L),R=!1}catch{}}return D}function l(_){return R&&/[\x80-\xff]/.test(_)&&(_=u("utf-8",_),R&&(_=u("iso-8859-1",_))),_}function c(_){const D=[];let b;const L=C("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=L.exec(_))!==null;){let[,U,S,P]=b;if(U=parseInt(U,10),U in D){if(U===0)break;continue}D[U]=[S,P]}const N=[];for(let U=0;U<D.length&&U in D;++U){let[S,P]=D[U];P=m(P),S&&(P=unescape(P),U===0&&(P=x(P))),N.push(P)}return N.join("")}function m(_){if(_.startsWith('"')){const D=_.slice(1).split('\\"');for(let b=0;b<D.length;++b){const L=D[b].indexOf('"');L!==-1&&(D[b]=D[b].slice(0,L),D.length=b+1),D[b]=D[b].replaceAll(/\\(.)/g,"$1")}_=D.join('"')}return _}function x(_){const D=_.indexOf("'");if(D===-1)return _;const b=_.slice(0,D),N=_.slice(D+1).replace(/^[^']*'/,"");return u(b,N)}function p(_){return!_.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(_)?_:_.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(D,b,L,N){if(L==="q"||L==="Q")return N=N.replaceAll("_"," "),N=N.replaceAll(/=([0-9a-fA-F]{2})/g,function(U,S){return String.fromCharCode(parseInt(S,16))}),u(b,N);try{N=atob(N)}catch{}return u(b,N)})}return""}}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFNetworkStream=void 0;var i=d(1),h=d(20);const E=200,R=206;function M(m){const x=m.response;return typeof x!="string"?x:(0,i.stringToBytes)(x).buffer}class C{constructor(x,p={}){this.url=x,this.isHttp=/^https?:/i.test(x),this.httpHeaders=this.isHttp&&p.httpHeaders||Object.create(null),this.withCredentials=p.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(x,p,_){const D={begin:x,end:p};for(const b in _)D[b]=_[b];return this.request(D)}requestFull(x){return this.request(x)}request(x){const p=new XMLHttpRequest,_=this.currXhrId++,D=this.pendingRequests[_]={xhr:p};p.open("GET",this.url),p.withCredentials=this.withCredentials;for(const b in this.httpHeaders){const L=this.httpHeaders[b];L!==void 0&&p.setRequestHeader(b,L)}return this.isHttp&&"begin"in x&&"end"in x?(p.setRequestHeader("Range",`bytes=${x.begin}-${x.end-1}`),D.expectedStatus=R):D.expectedStatus=E,p.responseType="arraybuffer",x.onError&&(p.onerror=function(b){x.onError(p.status)}),p.onreadystatechange=this.onStateChange.bind(this,_),p.onprogress=this.onProgress.bind(this,_),D.onHeadersReceived=x.onHeadersReceived,D.onDone=x.onDone,D.onError=x.onError,D.onProgress=x.onProgress,p.send(null),_}onProgress(x,p){const _=this.pendingRequests[x];_&&_.onProgress?.(p)}onStateChange(x,p){const _=this.pendingRequests[x];if(!_)return;const D=_.xhr;if(D.readyState>=2&&_.onHeadersReceived&&(_.onHeadersReceived(),delete _.onHeadersReceived),D.readyState!==4||!(x in this.pendingRequests))return;if(delete this.pendingRequests[x],D.status===0&&this.isHttp){_.onError?.(D.status);return}const b=D.status||E;if(!(b===E&&_.expectedStatus===R)&&b!==_.expectedStatus){_.onError?.(D.status);return}const N=M(D);if(b===R){const U=D.getResponseHeader("Content-Range"),S=/bytes (\d+)-(\d+)\/(\d+)/.exec(U);_.onDone({begin:parseInt(S[1],10),chunk:N})}else N?_.onDone({begin:0,chunk:N}):_.onError?.(D.status)}getRequestXhr(x){return this.pendingRequests[x].xhr}isPendingRequest(x){return x in this.pendingRequests}abortRequest(x){const p=this.pendingRequests[x].xhr;delete this.pendingRequests[x],p.abort()}}class u{constructor(x){this._source=x,this._manager=new C(x.url,{httpHeaders:x.httpHeaders,withCredentials:x.withCredentials}),this._rangeChunkSize=x.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(x){const p=this._rangeRequestReaders.indexOf(x);p>=0&&this._rangeRequestReaders.splice(p,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new l(this._manager,this._source),this._fullRequestReader}getRangeReader(x,p){const _=new c(this._manager,x,p);return _.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(_),_}cancelAllRequests(x){this._fullRequestReader?.cancel(x);for(const p of this._rangeRequestReaders.slice(0))p.cancel(x)}}a.PDFNetworkStream=u;class l{constructor(x,p){this._manager=x;const _={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=p.url,this._fullRequestId=x.requestFull(_),this._headersReceivedCapability=new i.PromiseCapability,this._disableRange=p.disableRange||!1,this._contentLength=p.length,this._rangeChunkSize=p.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const x=this._fullRequestId,p=this._manager.getRequestXhr(x),_=L=>p.getResponseHeader(L),{allowRangeRequests:D,suggestedLength:b}=(0,h.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});D&&(this._isRangeSupported=!0),this._contentLength=b||this._contentLength,this._filename=(0,h.extractFilenameFromHeader)(_),this._isRangeSupported&&this._manager.abortRequest(x),this._headersReceivedCapability.resolve()}_onDone(x){if(x&&(this._requests.length>0?this._requests.shift().resolve({value:x.chunk,done:!1}):this._cachedChunks.push(x.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(x){this._storedError=(0,h.createResponseStatusError)(x,this._url),this._headersReceivedCapability.reject(this._storedError);for(const p of this._requests)p.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(x){this.onProgress?.({loaded:x.loaded,total:x.lengthComputable?x.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const x=new i.PromiseCapability;return this._requests.push(x),x.promise}cancel(x){this._done=!0,this._headersReceivedCapability.reject(x);for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class c{constructor(x,p,_){this._manager=x;const D={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=x.url,this._requestId=x.requestRange(p,_,D),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(x){const p=x.chunk;this._requests.length>0?this._requests.shift().resolve({value:p,done:!1}):this._queuedChunk=p,this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(x){this._storedError=(0,h.createResponseStatusError)(x,this._url);for(const p of this._requests)p.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(x){this.isStreamingSupported||this.onProgress?.({loaded:x.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const p=this._queuedChunk;return this._queuedChunk=null,{value:p,done:!1}}if(this._done)return{value:void 0,done:!0};const x=new i.PromiseCapability;return this._requests.push(x),x.promise}cancel(x){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFNodeStream=void 0;var i=d(1),h=d(20);const E=/^file:\/\/\/[a-zA-Z]:\//;function R(_){const D=require$$5,b=D.parse(_);return b.protocol==="file:"||b.host?b:/^[a-z]:[/\\]/i.test(_)?D.parse(`file:///${_}`):(b.host||(b.protocol="file:"),b)}class M{constructor(D){this.source=D,this.url=R(D.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&D.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new x(this):new c(this),this._fullRequestReader}getRangeReader(D,b){if(b<=this._progressiveDataLength)return null;const L=this.isFsUrl?new p(this,D,b):new m(this,D,b);return this._rangeRequestReaders.push(L),L}cancelAllRequests(D){this._fullRequestReader?.cancel(D);for(const b of this._rangeRequestReaders.slice(0))b.cancel(D)}}a.PDFNodeStream=M;class C{constructor(D){this._url=D.url,this._done=!1,this._storedError=null,this.onProgress=null;const b=D.source;this._contentLength=b.length,this._loaded=0,this._filename=null,this._disableRange=b.disableRange||!1,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!b.disableStream,this._isRangeSupported=!b.disableRange,this._readableStream=null,this._readCapability=new i.PromiseCapability,this._headersCapability=new i.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const D=this._readableStream.read();return D===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=D.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(D).buffer,done:!1})}cancel(D){if(!this._readableStream){this._error(D);return}this._readableStream.destroy(D)}_error(D){this._storedError=D,this._readCapability.resolve()}_setReadableStream(D){this._readableStream=D,D.on("readable",()=>{this._readCapability.resolve()}),D.on("end",()=>{D.destroy(),this._done=!0,this._readCapability.resolve()}),D.on("error",b=>{this._error(b)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class u{constructor(D){this._url=D.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new i.PromiseCapability;const b=D.source;this._isStreamingSupported=!b.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const D=this._readableStream.read();return D===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=D.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(D).buffer,done:!1})}cancel(D){if(!this._readableStream){this._error(D);return}this._readableStream.destroy(D)}_error(D){this._storedError=D,this._readCapability.resolve()}_setReadableStream(D){this._readableStream=D,D.on("readable",()=>{this._readCapability.resolve()}),D.on("end",()=>{D.destroy(),this._done=!0,this._readCapability.resolve()}),D.on("error",b=>{this._error(b)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function l(_,D){return{protocol:_.protocol,auth:_.auth,host:_.hostname,port:_.port,path:_.path,method:"GET",headers:D}}class c extends C{constructor(D){super(D);const b=L=>{if(L.statusCode===404){const P=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=P,this._headersCapability.reject(P);return}this._headersCapability.resolve(),this._setReadableStream(L);const N=P=>this._readableStream.headers[P.toLowerCase()],{allowRangeRequests:U,suggestedLength:S}=(0,h.validateRangeRequestCapabilities)({getResponseHeader:N,isHttp:D.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=U,this._contentLength=S||this._contentLength,this._filename=(0,h.extractFilenameFromHeader)(N)};if(this._request=null,this._url.protocol==="http:"){const L=require$$5;this._request=L.request(l(this._url,D.httpHeaders),b)}else{const L=require$$5;this._request=L.request(l(this._url,D.httpHeaders),b)}this._request.on("error",L=>{this._storedError=L,this._headersCapability.reject(L)}),this._request.end()}}class m extends u{constructor(D,b,L){super(D),this._httpHeaders={};for(const U in D.httpHeaders){const S=D.httpHeaders[U];S!==void 0&&(this._httpHeaders[U]=S)}this._httpHeaders.Range=`bytes=${b}-${L-1}`;const N=U=>{if(U.statusCode===404){const S=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=S;return}this._setReadableStream(U)};if(this._request=null,this._url.protocol==="http:"){const U=require$$5;this._request=U.request(l(this._url,this._httpHeaders),N)}else{const U=require$$5;this._request=U.request(l(this._url,this._httpHeaders),N)}this._request.on("error",U=>{this._storedError=U}),this._request.end()}}class x extends C{constructor(D){super(D);let b=decodeURIComponent(this._url.path);E.test(this._url.href)&&(b=b.replace(/^\//,""));const L=require$$5;L.lstat(b,(N,U)=>{if(N){N.code==="ENOENT"&&(N=new i.MissingPDFException(`Missing PDF "${b}".`)),this._storedError=N,this._headersCapability.reject(N);return}this._contentLength=U.size,this._setReadableStream(L.createReadStream(b)),this._headersCapability.resolve()})}}class p extends u{constructor(D,b,L){super(D);let N=decodeURIComponent(this._url.path);E.test(this._url.href)&&(N=N.replace(/^\//,""));const U=require$$5;this._setReadableStream(U.createReadStream(N,{start:b,end:L-1}))}}}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SVGGraphics=void 0;var i=d(6),h=d(1);const E={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},R="http://www.w3.org/XML/1998/namespace",M="http://www.w3.org/1999/xlink",C=["butt","round","square"],u=["miter","round","bevel"],l=function(U,S="",P=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!P)return URL.createObjectURL(new Blob([U],{type:S}));const z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let Y=`data:${S};base64,`;for(let q=0,K=U.length;q<K;q+=3){const Z=U[q]&255,it=U[q+1]&255,nt=U[q+2]&255,at=Z>>2,pt=(Z&3)<<4|it>>4,W=q+1<K?(it&15)<<2|nt>>6:64,F=q+2<K?nt&63:64;Y+=z[at]+z[pt]+z[W]+z[F]}return Y},c=(function(){const U=new Uint8Array([137,80,78,71,13,10,26,10]),S=12,P=new Int32Array(256);for(let nt=0;nt<256;nt++){let at=nt;for(let pt=0;pt<8;pt++)at=at&1?3988292384^at>>1&2147483647:at>>1&2147483647;P[nt]=at}function z(nt,at,pt){let W=-1;for(let F=at;F<pt;F++){const O=(W^nt[F])&255,T=P[O];W=W>>>8^T}return W^-1}function Y(nt,at,pt,W){let F=W;const O=at.length;pt[F]=O>>24&255,pt[F+1]=O>>16&255,pt[F+2]=O>>8&255,pt[F+3]=O&255,F+=4,pt[F]=nt.charCodeAt(0)&255,pt[F+1]=nt.charCodeAt(1)&255,pt[F+2]=nt.charCodeAt(2)&255,pt[F+3]=nt.charCodeAt(3)&255,F+=4,pt.set(at,F),F+=at.length;const T=z(pt,W+4,F);pt[F]=T>>24&255,pt[F+1]=T>>16&255,pt[F+2]=T>>8&255,pt[F+3]=T&255}function q(nt,at,pt){let W=1,F=0;for(let O=at;O<pt;++O)W=(W+(nt[O]&255))%65521,F=(F+W)%65521;return F<<16|W}function K(nt){if(!h.isNodeJS)return Z(nt);try{const at=parseInt(process.versions.node)>=8?nt:Buffer.from(nt),pt=require$$5.deflateSync(at,{level:9});return pt instanceof Uint8Array?pt:new Uint8Array(pt)}catch(at){(0,h.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+at)}return Z(nt)}function Z(nt){let at=nt.length;const pt=65535,W=Math.ceil(at/pt),F=new Uint8Array(2+at+W*5+4);let O=0;F[O++]=120,F[O++]=156;let T=0;for(;at>pt;)F[O++]=0,F[O++]=255,F[O++]=255,F[O++]=0,F[O++]=0,F.set(nt.subarray(T,T+pt),O),O+=pt,T+=pt,at-=pt;F[O++]=1,F[O++]=at&255,F[O++]=at>>8&255,F[O++]=~at&65535&255,F[O++]=(~at&65535)>>8&255,F.set(nt.subarray(T),O),O+=nt.length-T;const g=q(nt,0,nt.length);return F[O++]=g>>24&255,F[O++]=g>>16&255,F[O++]=g>>8&255,F[O++]=g&255,F}function it(nt,at,pt,W){const F=nt.width,O=nt.height;let T,g,w;const I=nt.data;switch(at){case h.ImageKind.GRAYSCALE_1BPP:g=0,T=1,w=F+7>>3;break;case h.ImageKind.RGB_24BPP:g=2,T=8,w=F*3;break;case h.ImageKind.RGBA_32BPP:g=6,T=8,w=F*4;break;default:throw new Error("invalid format")}const B=new Uint8Array((1+w)*O);let X=0,H=0;for(let Q=0;Q<O;++Q)B[X++]=0,B.set(I.subarray(H,H+w),X),H+=w,X+=w;if(at===h.ImageKind.GRAYSCALE_1BPP&&W){X=0;for(let Q=0;Q<O;Q++){X++;for(let et=0;et<w;et++)B[X++]^=255}}const v=new Uint8Array([F>>24&255,F>>16&255,F>>8&255,F&255,O>>24&255,O>>16&255,O>>8&255,O&255,T,g,0,0,0]),A=K(B),k=U.length+S*3+v.length+A.length,G=new Uint8Array(k);let V=0;return G.set(U,V),V+=U.length,Y("IHDR",v,G,V),V+=S+v.length,Y("IDATA",A,G,V),V+=S+A.length,Y("IEND",new Uint8Array(0),G,V),l(G,"image/png",pt)}return function(at,pt,W){const F=at.kind===void 0?h.ImageKind.GRAYSCALE_1BPP:at.kind;return it(at,F,pt,W)}})();class m{constructor(){this.fontSizeScale=1,this.fontWeight=E.fontWeight,this.fontSize=0,this.textMatrix=h.IDENTITY_MATRIX,this.fontMatrix=h.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=h.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=E.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(S,P){this.x=S,this.y=P}}function x(U){let S=[];const P=[];for(const z of U){if(z.fn==="save"){S.push({fnId:92,fn:"group",items:[]}),P.push(S),S=S.at(-1).items;continue}z.fn==="restore"?S=P.pop():S.push(z)}return S}function p(U){if(Number.isInteger(U))return U.toString();const S=U.toFixed(10);let P=S.length-1;if(S[P]!=="0")return S;do P--;while(S[P]==="0");return S.substring(0,S[P]==="."?P:P+1)}function _(U){if(U[4]===0&&U[5]===0){if(U[1]===0&&U[2]===0)return U[0]===1&&U[3]===1?"":`scale(${p(U[0])} ${p(U[3])})`;if(U[0]===U[3]&&U[1]===-U[2]){const S=Math.acos(U[0])*180/Math.PI;return`rotate(${p(S)})`}}else if(U[0]===1&&U[1]===0&&U[2]===0&&U[3]===1)return`translate(${p(U[4])} ${p(U[5])})`;return`matrix(${p(U[0])} ${p(U[1])} ${p(U[2])} ${p(U[3])} ${p(U[4])} ${p(U[5])})`}let D=0,b=0,L=0;class N{constructor(S,P,z=!1){(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new i.DOMSVGFactory,this.current=new m,this.transformMatrix=h.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=S,this.objs=P,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!z,this._operatorIdMapping=[];for(const Y in h.OPS)this._operatorIdMapping[h.OPS[Y]]=Y}getObject(S,P=null){return typeof S=="string"?S.startsWith("g_")?this.commonObjs.get(S):this.objs.get(S):P}save(){this.transformStack.push(this.transformMatrix);const S=this.current;this.extraStack.push(S),this.current=S.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(S){this.save(),this.executeOpTree(S),this.restore()}loadDependencies(S){const P=S.fnArray,z=S.argsArray;for(let Y=0,q=P.length;Y<q;Y++)if(P[Y]===h.OPS.dependency)for(const K of z[Y]){const Z=K.startsWith("g_")?this.commonObjs:this.objs,it=new Promise(nt=>{Z.get(K,nt)});this.current.dependencies.push(it)}return Promise.all(this.current.dependencies)}transform(S,P,z,Y,q,K){const Z=[S,P,z,Y,q,K];this.transformMatrix=h.Util.transform(this.transformMatrix,Z),this.tgrp=null}getSVG(S,P){this.viewport=P;const z=this._initialize(P);return this.loadDependencies(S).then(()=>(this.transformMatrix=h.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(S)),z))}convertOpList(S){const P=this._operatorIdMapping,z=S.argsArray,Y=S.fnArray,q=[];for(let K=0,Z=Y.length;K<Z;K++){const it=Y[K];q.push({fnId:it,fn:P[it],args:z[K]})}return x(q)}executeOpTree(S){for(const P of S){const z=P.fn,Y=P.fnId,q=P.args;switch(Y|0){case h.OPS.beginText:this.beginText();break;case h.OPS.dependency:break;case h.OPS.setLeading:this.setLeading(q);break;case h.OPS.setLeadingMoveText:this.setLeadingMoveText(q[0],q[1]);break;case h.OPS.setFont:this.setFont(q);break;case h.OPS.showText:this.showText(q[0]);break;case h.OPS.showSpacedText:this.showText(q[0]);break;case h.OPS.endText:this.endText();break;case h.OPS.moveText:this.moveText(q[0],q[1]);break;case h.OPS.setCharSpacing:this.setCharSpacing(q[0]);break;case h.OPS.setWordSpacing:this.setWordSpacing(q[0]);break;case h.OPS.setHScale:this.setHScale(q[0]);break;case h.OPS.setTextMatrix:this.setTextMatrix(q[0],q[1],q[2],q[3],q[4],q[5]);break;case h.OPS.setTextRise:this.setTextRise(q[0]);break;case h.OPS.setTextRenderingMode:this.setTextRenderingMode(q[0]);break;case h.OPS.setLineWidth:this.setLineWidth(q[0]);break;case h.OPS.setLineJoin:this.setLineJoin(q[0]);break;case h.OPS.setLineCap:this.setLineCap(q[0]);break;case h.OPS.setMiterLimit:this.setMiterLimit(q[0]);break;case h.OPS.setFillRGBColor:this.setFillRGBColor(q[0],q[1],q[2]);break;case h.OPS.setStrokeRGBColor:this.setStrokeRGBColor(q[0],q[1],q[2]);break;case h.OPS.setStrokeColorN:this.setStrokeColorN(q);break;case h.OPS.setFillColorN:this.setFillColorN(q);break;case h.OPS.shadingFill:this.shadingFill(q[0]);break;case h.OPS.setDash:this.setDash(q[0],q[1]);break;case h.OPS.setRenderingIntent:this.setRenderingIntent(q[0]);break;case h.OPS.setFlatness:this.setFlatness(q[0]);break;case h.OPS.setGState:this.setGState(q[0]);break;case h.OPS.fill:this.fill();break;case h.OPS.eoFill:this.eoFill();break;case h.OPS.stroke:this.stroke();break;case h.OPS.fillStroke:this.fillStroke();break;case h.OPS.eoFillStroke:this.eoFillStroke();break;case h.OPS.clip:this.clip("nonzero");break;case h.OPS.eoClip:this.clip("evenodd");break;case h.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case h.OPS.paintImageXObject:this.paintImageXObject(q[0]);break;case h.OPS.paintInlineImageXObject:this.paintInlineImageXObject(q[0]);break;case h.OPS.paintImageMaskXObject:this.paintImageMaskXObject(q[0]);break;case h.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(q[0],q[1]);break;case h.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case h.OPS.closePath:this.closePath();break;case h.OPS.closeStroke:this.closeStroke();break;case h.OPS.closeFillStroke:this.closeFillStroke();break;case h.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case h.OPS.nextLine:this.nextLine();break;case h.OPS.transform:this.transform(q[0],q[1],q[2],q[3],q[4],q[5]);break;case h.OPS.constructPath:this.constructPath(q[0],q[1]);break;case h.OPS.endPath:this.endPath();break;case 92:this.group(P.items);break;default:(0,h.warn)(`Unimplemented operator ${z}`);break}}}setWordSpacing(S){this.current.wordSpacing=S}setCharSpacing(S){this.current.charSpacing=S}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(S,P,z,Y,q,K){const Z=this.current;Z.textMatrix=Z.lineMatrix=[S,P,z,Y,q,K],Z.textMatrixScale=Math.hypot(S,P),Z.x=Z.lineX=0,Z.y=Z.lineY=0,Z.xcoords=[],Z.ycoords=[],Z.tspan=this.svgFactory.createElement("svg:tspan"),Z.tspan.setAttributeNS(null,"font-family",Z.fontFamily),Z.tspan.setAttributeNS(null,"font-size",`${p(Z.fontSize)}px`),Z.tspan.setAttributeNS(null,"y",p(-Z.y)),Z.txtElement=this.svgFactory.createElement("svg:text"),Z.txtElement.append(Z.tspan)}beginText(){const S=this.current;S.x=S.lineX=0,S.y=S.lineY=0,S.textMatrix=h.IDENTITY_MATRIX,S.lineMatrix=h.IDENTITY_MATRIX,S.textMatrixScale=1,S.tspan=this.svgFactory.createElement("svg:tspan"),S.txtElement=this.svgFactory.createElement("svg:text"),S.txtgrp=this.svgFactory.createElement("svg:g"),S.xcoords=[],S.ycoords=[]}moveText(S,P){const z=this.current;z.x=z.lineX+=S,z.y=z.lineY+=P,z.xcoords=[],z.ycoords=[],z.tspan=this.svgFactory.createElement("svg:tspan"),z.tspan.setAttributeNS(null,"font-family",z.fontFamily),z.tspan.setAttributeNS(null,"font-size",`${p(z.fontSize)}px`),z.tspan.setAttributeNS(null,"y",p(-z.y))}showText(S){const P=this.current,z=P.font,Y=P.fontSize;if(Y===0)return;const q=P.fontSizeScale,K=P.charSpacing,Z=P.wordSpacing,it=P.fontDirection,nt=P.textHScale*it,at=z.vertical,pt=at?1:-1,W=z.defaultVMetrics,F=Y*P.fontMatrix[0];let O=0;for(const w of S){if(w===null){O+=it*Z;continue}else if(typeof w=="number"){O+=pt*w*Y/1e3;continue}const I=(w.isSpace?Z:0)+K,B=w.fontChar;let X,H,v=w.width;if(at){let k;const G=w.vmetric||W;k=w.vmetric?G[1]:v*.5,k=-k*F;const V=G[2]*F;v=G?-G[0]:v,X=k/q,H=(O+V)/q}else X=O/q,H=0;(w.isInFont||z.missingFile)&&(P.xcoords.push(P.x+X),at&&P.ycoords.push(-P.y+H),P.tspan.textContent+=B);const A=at?v*F-I*it:v*F+I*it;O+=A}P.tspan.setAttributeNS(null,"x",P.xcoords.map(p).join(" ")),at?P.tspan.setAttributeNS(null,"y",P.ycoords.map(p).join(" ")):P.tspan.setAttributeNS(null,"y",p(-P.y)),at?P.y-=O:P.x+=O*nt,P.tspan.setAttributeNS(null,"font-family",P.fontFamily),P.tspan.setAttributeNS(null,"font-size",`${p(P.fontSize)}px`),P.fontStyle!==E.fontStyle&&P.tspan.setAttributeNS(null,"font-style",P.fontStyle),P.fontWeight!==E.fontWeight&&P.tspan.setAttributeNS(null,"font-weight",P.fontWeight);const T=P.textRenderingMode&h.TextRenderingMode.FILL_STROKE_MASK;if(T===h.TextRenderingMode.FILL||T===h.TextRenderingMode.FILL_STROKE?(P.fillColor!==E.fillColor&&P.tspan.setAttributeNS(null,"fill",P.fillColor),P.fillAlpha<1&&P.tspan.setAttributeNS(null,"fill-opacity",P.fillAlpha)):P.textRenderingMode===h.TextRenderingMode.ADD_TO_PATH?P.tspan.setAttributeNS(null,"fill","transparent"):P.tspan.setAttributeNS(null,"fill","none"),T===h.TextRenderingMode.STROKE||T===h.TextRenderingMode.FILL_STROKE){const w=1/(P.textMatrixScale||1);this._setStrokeAttributes(P.tspan,w)}let g=P.textMatrix;P.textRise!==0&&(g=g.slice(),g[5]+=P.textRise),P.txtElement.setAttributeNS(null,"transform",`${_(g)} scale(${p(nt)}, -1)`),P.txtElement.setAttributeNS(R,"xml:space","preserve"),P.txtElement.append(P.tspan),P.txtgrp.append(P.txtElement),this._ensureTransformGroup().append(P.txtElement)}setLeadingMoveText(S,P){this.setLeading(-P),this.moveText(S,P)}addFontStyle(S){if(!S.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const P=l(S.data,S.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${S.loadedName}"; src: url(${P}); }
`}setFont(S){const P=this.current,z=this.commonObjs.get(S[0]);let Y=S[1];P.font=z,this.embedFonts&&!z.missingFile&&!this.embeddedFonts[z.loadedName]&&(this.addFontStyle(z),this.embeddedFonts[z.loadedName]=z),P.fontMatrix=z.fontMatrix||h.FONT_IDENTITY_MATRIX;let q="normal";z.black?q="900":z.bold&&(q="bold");const K=z.italic?"italic":"normal";Y<0?(Y=-Y,P.fontDirection=-1):P.fontDirection=1,P.fontSize=Y,P.fontFamily=z.loadedName,P.fontWeight=q,P.fontStyle=K,P.tspan=this.svgFactory.createElement("svg:tspan"),P.tspan.setAttributeNS(null,"y",p(-P.y)),P.xcoords=[],P.ycoords=[]}endText(){const S=this.current;S.textRenderingMode&h.TextRenderingMode.ADD_TO_PATH_FLAG&&S.txtElement?.hasChildNodes()&&(S.element=S.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(S){S>0&&(this.current.lineWidth=S)}setLineCap(S){this.current.lineCap=C[S]}setLineJoin(S){this.current.lineJoin=u[S]}setMiterLimit(S){this.current.miterLimit=S}setStrokeAlpha(S){this.current.strokeAlpha=S}setStrokeRGBColor(S,P,z){this.current.strokeColor=h.Util.makeHexColor(S,P,z)}setFillAlpha(S){this.current.fillAlpha=S}setFillRGBColor(S,P,z){this.current.fillColor=h.Util.makeHexColor(S,P,z),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(S){this.current.strokeColor=this._makeColorN_Pattern(S)}setFillColorN(S){this.current.fillColor=this._makeColorN_Pattern(S)}shadingFill(S){const{width:P,height:z}=this.viewport,Y=h.Util.inverseTransform(this.transformMatrix),[q,K,Z,it]=h.Util.getAxialAlignedBoundingBox([0,0,P,z],Y),nt=this.svgFactory.createElement("svg:rect");nt.setAttributeNS(null,"x",q),nt.setAttributeNS(null,"y",K),nt.setAttributeNS(null,"width",Z-q),nt.setAttributeNS(null,"height",it-K),nt.setAttributeNS(null,"fill",this._makeShadingPattern(S)),this.current.fillAlpha<1&&nt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(nt)}_makeColorN_Pattern(S){return S[0]==="TilingPattern"?this._makeTilingPattern(S):this._makeShadingPattern(S)}_makeTilingPattern(S){const P=S[1],z=S[2],Y=S[3]||h.IDENTITY_MATRIX,[q,K,Z,it]=S[4],nt=S[5],at=S[6],pt=S[7],W=`shading${L++}`,[F,O,T,g]=h.Util.normalizeRect([...h.Util.applyTransform([q,K],Y),...h.Util.applyTransform([Z,it],Y)]),[w,I]=h.Util.singularValueDecompose2dScale(Y),B=nt*w,X=at*I,H=this.svgFactory.createElement("svg:pattern");H.setAttributeNS(null,"id",W),H.setAttributeNS(null,"patternUnits","userSpaceOnUse"),H.setAttributeNS(null,"width",B),H.setAttributeNS(null,"height",X),H.setAttributeNS(null,"x",`${F}`),H.setAttributeNS(null,"y",`${O}`);const v=this.svg,A=this.transformMatrix,k=this.current.fillColor,G=this.current.strokeColor,V=this.svgFactory.create(T-F,g-O);if(this.svg=V,this.transformMatrix=Y,pt===2){const Q=h.Util.makeHexColor(...P);this.current.fillColor=Q,this.current.strokeColor=Q}return this.executeOpTree(this.convertOpList(z)),this.svg=v,this.transformMatrix=A,this.current.fillColor=k,this.current.strokeColor=G,H.append(V.childNodes[0]),this.defs.append(H),`url(#${W})`}_makeShadingPattern(S){switch(typeof S=="string"&&(S=this.objs.get(S)),S[0]){case"RadialAxial":const P=`shading${L++}`,z=S[3];let Y;switch(S[1]){case"axial":const q=S[4],K=S[5];Y=this.svgFactory.createElement("svg:linearGradient"),Y.setAttributeNS(null,"id",P),Y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Y.setAttributeNS(null,"x1",q[0]),Y.setAttributeNS(null,"y1",q[1]),Y.setAttributeNS(null,"x2",K[0]),Y.setAttributeNS(null,"y2",K[1]);break;case"radial":const Z=S[4],it=S[5],nt=S[6],at=S[7];Y=this.svgFactory.createElement("svg:radialGradient"),Y.setAttributeNS(null,"id",P),Y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Y.setAttributeNS(null,"cx",it[0]),Y.setAttributeNS(null,"cy",it[1]),Y.setAttributeNS(null,"r",at),Y.setAttributeNS(null,"fx",Z[0]),Y.setAttributeNS(null,"fy",Z[1]),Y.setAttributeNS(null,"fr",nt);break;default:throw new Error(`Unknown RadialAxial type: ${S[1]}`)}for(const q of z){const K=this.svgFactory.createElement("svg:stop");K.setAttributeNS(null,"offset",q[0]),K.setAttributeNS(null,"stop-color",q[1]),Y.append(K)}return this.defs.append(Y),`url(#${P})`;case"Mesh":return(0,h.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${S[0]}`)}}setDash(S,P){this.current.dashArray=S,this.current.dashPhase=P}constructPath(S,P){const z=this.current;let Y=z.x,q=z.y,K=[],Z=0;for(const it of S)switch(it|0){case h.OPS.rectangle:Y=P[Z++],q=P[Z++];const nt=P[Z++],at=P[Z++],pt=Y+nt,W=q+at;K.push("M",p(Y),p(q),"L",p(pt),p(q),"L",p(pt),p(W),"L",p(Y),p(W),"Z");break;case h.OPS.moveTo:Y=P[Z++],q=P[Z++],K.push("M",p(Y),p(q));break;case h.OPS.lineTo:Y=P[Z++],q=P[Z++],K.push("L",p(Y),p(q));break;case h.OPS.curveTo:Y=P[Z+4],q=P[Z+5],K.push("C",p(P[Z]),p(P[Z+1]),p(P[Z+2]),p(P[Z+3]),p(Y),p(q)),Z+=6;break;case h.OPS.curveTo2:K.push("C",p(Y),p(q),p(P[Z]),p(P[Z+1]),p(P[Z+2]),p(P[Z+3])),Y=P[Z+2],q=P[Z+3],Z+=4;break;case h.OPS.curveTo3:Y=P[Z+2],q=P[Z+3],K.push("C",p(P[Z]),p(P[Z+1]),p(Y),p(q),p(Y),p(q)),Z+=4;break;case h.OPS.closePath:K.push("Z");break}K=K.join(" "),z.path&&S.length>0&&S[0]!==h.OPS.rectangle&&S[0]!==h.OPS.moveTo?K=z.path.getAttributeNS(null,"d")+K:(z.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(z.path)),z.path.setAttributeNS(null,"d",K),z.path.setAttributeNS(null,"fill","none"),z.element=z.path,z.setCurrentPoint(Y,q)}endPath(){const S=this.current;if(S.path=null,!this.pendingClip)return;if(!S.element){this.pendingClip=null;return}const P=`clippath${D++}`,z=this.svgFactory.createElement("svg:clipPath");z.setAttributeNS(null,"id",P),z.setAttributeNS(null,"transform",_(this.transformMatrix));const Y=S.element.cloneNode(!0);if(this.pendingClip==="evenodd"?Y.setAttributeNS(null,"clip-rule","evenodd"):Y.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,z.append(Y),this.defs.append(z),S.activeClipUrl){S.clipGroup=null;for(const q of this.extraStack)q.clipGroup=null;z.setAttributeNS(null,"clip-path",S.activeClipUrl)}S.activeClipUrl=`url(#${P})`,this.tgrp=null}clip(S){this.pendingClip=S}closePath(){const S=this.current;if(S.path){const P=`${S.path.getAttributeNS(null,"d")}Z`;S.path.setAttributeNS(null,"d",P)}}setLeading(S){this.current.leading=-S}setTextRise(S){this.current.textRise=S}setTextRenderingMode(S){this.current.textRenderingMode=S}setHScale(S){this.current.textHScale=S/100}setRenderingIntent(S){}setFlatness(S){}setGState(S){for(const[P,z]of S)switch(P){case"LW":this.setLineWidth(z);break;case"LC":this.setLineCap(z);break;case"LJ":this.setLineJoin(z);break;case"ML":this.setMiterLimit(z);break;case"D":this.setDash(z[0],z[1]);break;case"RI":this.setRenderingIntent(z);break;case"FL":this.setFlatness(z);break;case"Font":this.setFont(z);break;case"CA":this.setStrokeAlpha(z);break;case"ca":this.setFillAlpha(z);break;default:(0,h.warn)(`Unimplemented graphic state operator ${P}`);break}}fill(){const S=this.current;S.element&&(S.element.setAttributeNS(null,"fill",S.fillColor),S.element.setAttributeNS(null,"fill-opacity",S.fillAlpha),this.endPath())}stroke(){const S=this.current;S.element&&(this._setStrokeAttributes(S.element),S.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(S,P=1){const z=this.current;let Y=z.dashArray;P!==1&&Y.length>0&&(Y=Y.map(function(q){return P*q})),S.setAttributeNS(null,"stroke",z.strokeColor),S.setAttributeNS(null,"stroke-opacity",z.strokeAlpha),S.setAttributeNS(null,"stroke-miterlimit",p(z.miterLimit)),S.setAttributeNS(null,"stroke-linecap",z.lineCap),S.setAttributeNS(null,"stroke-linejoin",z.lineJoin),S.setAttributeNS(null,"stroke-width",p(P*z.lineWidth)+"px"),S.setAttributeNS(null,"stroke-dasharray",Y.map(p).join(" ")),S.setAttributeNS(null,"stroke-dashoffset",p(P*z.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const S=this.svgFactory.createElement("svg:rect");S.setAttributeNS(null,"x","0"),S.setAttributeNS(null,"y","0"),S.setAttributeNS(null,"width","1px"),S.setAttributeNS(null,"height","1px"),S.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(S)}paintImageXObject(S){const P=this.getObject(S);if(!P){(0,h.warn)(`Dependent image with object ID ${S} is not ready yet`);return}this.paintInlineImageXObject(P)}paintInlineImageXObject(S,P){const z=S.width,Y=S.height,q=c(S,this.forceDataSchema,!!P),K=this.svgFactory.createElement("svg:rect");K.setAttributeNS(null,"x","0"),K.setAttributeNS(null,"y","0"),K.setAttributeNS(null,"width",p(z)),K.setAttributeNS(null,"height",p(Y)),this.current.element=K,this.clip("nonzero");const Z=this.svgFactory.createElement("svg:image");Z.setAttributeNS(M,"xlink:href",q),Z.setAttributeNS(null,"x","0"),Z.setAttributeNS(null,"y",p(-Y)),Z.setAttributeNS(null,"width",p(z)+"px"),Z.setAttributeNS(null,"height",p(Y)+"px"),Z.setAttributeNS(null,"transform",`scale(${p(1/z)} ${p(-1/Y)})`),P?P.append(Z):this._ensureTransformGroup().append(Z)}paintImageMaskXObject(S){const P=this.getObject(S.data,S);if(P.bitmap){(0,h.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const z=this.current,Y=P.width,q=P.height,K=z.fillColor;z.maskId=`mask${b++}`;const Z=this.svgFactory.createElement("svg:mask");Z.setAttributeNS(null,"id",z.maskId);const it=this.svgFactory.createElement("svg:rect");it.setAttributeNS(null,"x","0"),it.setAttributeNS(null,"y","0"),it.setAttributeNS(null,"width",p(Y)),it.setAttributeNS(null,"height",p(q)),it.setAttributeNS(null,"fill",K),it.setAttributeNS(null,"mask",`url(#${z.maskId})`),this.defs.append(Z),this._ensureTransformGroup().append(it),this.paintInlineImageXObject(P,Z)}paintFormXObjectBegin(S,P){if(Array.isArray(S)&&S.length===6&&this.transform(S[0],S[1],S[2],S[3],S[4],S[5]),P){const z=P[2]-P[0],Y=P[3]-P[1],q=this.svgFactory.createElement("svg:rect");q.setAttributeNS(null,"x",P[0]),q.setAttributeNS(null,"y",P[1]),q.setAttributeNS(null,"width",p(z)),q.setAttributeNS(null,"height",p(Y)),this.current.element=q,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(S){const P=this.svgFactory.create(S.width,S.height),z=this.svgFactory.createElement("svg:defs");P.append(z),this.defs=z;const Y=this.svgFactory.createElement("svg:g");return Y.setAttributeNS(null,"transform",_(S.transform)),P.append(Y),this.svg=Y,P}_ensureClipGroup(){if(!this.current.clipGroup){const S=this.svgFactory.createElement("svg:g");S.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(S),this.current.clipGroup=S}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",_(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}a.SVGGraphics=N}),((y,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.XfaText=void 0;class d{static textContent(h){const E=[],R={items:E,styles:Object.create(null)};function M(C){if(!C)return;let u=null;const l=C.name;if(l==="#text")u=C.value;else if(d.shouldBuildText(l))C?.attributes?.textContent?u=C.attributes.textContent:C.value&&(u=C.value);else return;if(u!==null&&E.push({str:u}),!!C.children)for(const c of C.children)M(c)}return M(h),R}static shouldBuildText(h){return!(h==="textarea"||h==="input"||h==="option"||h==="select")}}a.XfaText=d}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TextLayerRenderTask=void 0,a.renderTextLayer=_,a.updateTextLayer=D;var i=d(1),h=d(6);const E=1e5,R=30,M=.8,C=new Map;function u(b,L){let N;if(L&&i.FeatureTest.isOffscreenCanvasSupported)N=new OffscreenCanvas(b,b).getContext("2d",{alpha:!1});else{const U=document.createElement("canvas");U.width=U.height=b,N=U.getContext("2d",{alpha:!1})}return N}function l(b,L){const N=C.get(b);if(N)return N;const U=u(R,L);U.font=`${R}px ${b}`;const S=U.measureText("");let P=S.fontBoundingBoxAscent,z=Math.abs(S.fontBoundingBoxDescent);if(P){const q=P/(P+z);return C.set(b,q),U.canvas.width=U.canvas.height=0,q}U.strokeStyle="red",U.clearRect(0,0,R,R),U.strokeText("g",0,0);let Y=U.getImageData(0,0,R,R).data;z=0;for(let q=Y.length-1-3;q>=0;q-=4)if(Y[q]>0){z=Math.ceil(q/4/R);break}U.clearRect(0,0,R,R),U.strokeText("A",0,R),Y=U.getImageData(0,0,R,R).data,P=0;for(let q=0,K=Y.length;q<K;q+=4)if(Y[q]>0){P=R-Math.floor(q/4/R);break}if(U.canvas.width=U.canvas.height=0,P){const q=P/(P+z);return C.set(b,q),q}return C.set(b,M),M}function c(b,L,N){const U=document.createElement("span"),S={angle:0,canvasWidth:0,hasText:L.str!=="",hasEOL:L.hasEOL,fontSize:0};b._textDivs.push(U);const P=i.Util.transform(b._transform,L.transform);let z=Math.atan2(P[1],P[0]);const Y=N[L.fontName];Y.vertical&&(z+=Math.PI/2);const q=Math.hypot(P[2],P[3]),K=q*l(Y.fontFamily,b._isOffscreenCanvasSupported);let Z,it;z===0?(Z=P[4],it=P[5]-K):(Z=P[4]+K*Math.sin(z),it=P[5]-K*Math.cos(z));const nt="calc(var(--scale-factor)*",at=U.style;b._container===b._rootContainer?(at.left=`${(100*Z/b._pageWidth).toFixed(2)}%`,at.top=`${(100*it/b._pageHeight).toFixed(2)}%`):(at.left=`${nt}${Z.toFixed(2)}px)`,at.top=`${nt}${it.toFixed(2)}px)`),at.fontSize=`${nt}${q.toFixed(2)}px)`,at.fontFamily=Y.fontFamily,S.fontSize=q,U.setAttribute("role","presentation"),U.textContent=L.str,U.dir=L.dir,b._fontInspectorEnabled&&(U.dataset.fontName=L.fontName),z!==0&&(S.angle=z*(180/Math.PI));let pt=!1;if(L.str.length>1)pt=!0;else if(L.str!==" "&&L.transform[0]!==L.transform[3]){const W=Math.abs(L.transform[0]),F=Math.abs(L.transform[3]);W!==F&&Math.max(W,F)/Math.min(W,F)>1.5&&(pt=!0)}pt&&(S.canvasWidth=Y.vertical?L.height:L.width),b._textDivProperties.set(U,S),b._isReadableStream&&b._layoutText(U)}function m(b){const{div:L,scale:N,properties:U,ctx:S,prevFontSize:P,prevFontFamily:z}=b,{style:Y}=L;let q="";if(U.canvasWidth!==0&&U.hasText){const{fontFamily:K}=Y,{canvasWidth:Z,fontSize:it}=U;(P!==it||z!==K)&&(S.font=`${it*N}px ${K}`,b.prevFontSize=it,b.prevFontFamily=K);const{width:nt}=S.measureText(L.textContent);nt>0&&(q=`scaleX(${Z*N/nt})`)}U.angle!==0&&(q=`rotate(${U.angle}deg) ${q}`),q.length>0&&(Y.transform=q)}function x(b){if(b._canceled)return;const L=b._textDivs,N=b._capability;if(L.length>E){N.resolve();return}if(!b._isReadableStream)for(const S of L)b._layoutText(S);N.resolve()}class p{constructor({textContentSource:L,container:N,viewport:U,textDivs:S,textDivProperties:P,textContentItemsStr:z,isOffscreenCanvasSupported:Y}){this._textContentSource=L,this._isReadableStream=L instanceof ReadableStream,this._container=this._rootContainer=N,this._textDivs=S||[],this._textContentItemsStr=z||[],this._isOffscreenCanvasSupported=Y,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=P||new WeakMap,this._canceled=!1,this._capability=new i.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:U.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:u(0,Y)};const{pageWidth:q,pageHeight:K,pageX:Z,pageY:it}=U.rawDims;this._transform=[1,0,0,-1,-Z,it+K],this._pageWidth=q,this._pageHeight=K,(0,h.setLayerDimensions)(N,U),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new i.AbortException("TextLayer task cancelled."))}_processItems(L,N){for(const U of L){if(U.str===void 0){if(U.type==="beginMarkedContentProps"||U.type==="beginMarkedContent"){const S=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),U.id!==null&&this._container.setAttribute("id",`${U.id}`),S.append(this._container)}else U.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(U.str),c(this,U,N)}}_layoutText(L){const N=this._layoutTextParams.properties=this._textDivProperties.get(L);if(this._layoutTextParams.div=L,m(this._layoutTextParams),N.hasText&&this._container.append(L),N.hasEOL){const U=document.createElement("br");U.setAttribute("role","presentation"),this._container.append(U)}}_render(){const L=new i.PromiseCapability;let N=Object.create(null);if(this._isReadableStream){const U=()=>{this._reader.read().then(({value:S,done:P})=>{if(P){L.resolve();return}Object.assign(N,S.styles),this._processItems(S.items,N),U()},L.reject)};this._reader=this._textContentSource.getReader(),U()}else if(this._textContentSource){const{items:U,styles:S}=this._textContentSource;this._processItems(U,S),L.resolve()}else throw new Error('No "textContentSource" parameter specified.');L.promise.then(()=>{N=null,x(this)},this._capability.reject)}}a.TextLayerRenderTask=p;function _(b){!b.textContentSource&&(b.textContent||b.textContentStream)&&((0,h.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),b.textContentSource=b.textContent||b.textContentStream);const{container:L,viewport:N}=b,U=getComputedStyle(L),S=U.getPropertyValue("visibility"),P=parseFloat(U.getPropertyValue("--scale-factor"));S==="visible"&&(!P||Math.abs(P-N.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const z=new p(b);return z._render(),z}function D({container:b,viewport:L,textDivs:N,textDivProperties:U,isOffscreenCanvasSupported:S,mustRotate:P=!0,mustRescale:z=!0}){if(P&&(0,h.setLayerDimensions)(b,{rotation:L.rotation}),z){const Y=u(0,S),K={prevFontSize:null,prevFontFamily:null,div:null,scale:L.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:Y};for(const Z of N)K.properties=U.get(Z),K.div=Z,m(K)}}}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationEditorLayer=void 0;var i=d(1),h=d(4),E=d(28),R=d(33),M=d(6),C=d(34);class u{#t;#e=!1;#n=null;#s=this.pointerup.bind(this);#o=this.pointerdown.bind(this);#r=new Map;#a=!1;#l=!1;#c=!1;#i;static _initialized=!1;constructor({uiManager:c,pageIndex:m,div:x,accessibilityManager:p,annotationLayer:_,viewport:D,l10n:b}){const L=[E.FreeTextEditor,R.InkEditor,C.StampEditor];if(!u._initialized){u._initialized=!0;for(const N of L)N.initialize(b)}c.registerEditorTypes(L),this.#i=c,this.pageIndex=m,this.div=x,this.#t=p,this.#n=_,this.viewport=D,this.#i.addLayer(this)}get isEmpty(){return this.#r.size===0}updateToolbar(c){this.#i.updateToolbar(c)}updateMode(c=this.#i.getMode()){this.#p(),c===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),c!==i.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",c===i.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",c===i.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",c===i.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(c){if(!c&&this.#i.getMode()!==i.AnnotationEditorType.INK)return;if(!c){for(const x of this.#r.values())if(x.isEmpty()){x.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(c){this.#i.setEditingState(c)}addCommands(c){this.#i.addCommands(c)}enable(){this.div.style.pointerEvents="auto";const c=new Set;for(const x of this.#r.values())x.enableEditing(),x.annotationElementId&&c.add(x.annotationElementId);if(!this.#n)return;const m=this.#n.getEditableAnnotations();for(const x of m){if(x.hide(),this.#i.isDeletedAnnotationElement(x.data.id)||c.has(x.data.id))continue;const p=this.deserialize(x);p&&(this.addOrRebuild(p),p.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";const c=new Set;for(const m of this.#r.values()){if(m.disableEditing(),!m.annotationElementId||m.serialize()!==null){c.add(m.annotationElementId);continue}this.getEditableAnnotation(m.annotationElementId)?.show(),m.remove()}if(this.#n){const m=this.#n.getEditableAnnotations();for(const x of m){const{id:p}=x.data;c.has(p)||this.#i.isDeletedAnnotationElement(p)||x.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(c){return this.#n?.getEditableAnnotation(c)||null}setActiveEditor(c){this.#i.getActive()!==c&&this.#i.setActiveEditor(c)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#s)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#s)}attach(c){this.#r.set(c.id,c);const{annotationElementId:m}=c;m&&this.#i.isDeletedAnnotationElement(m)&&this.#i.removeDeletedAnnotationElement(c)}detach(c){this.#r.delete(c.id),this.#t?.removePointerInTextLayer(c.contentDiv),!this.#c&&c.annotationElementId&&this.#i.addDeletedAnnotationElement(c)}remove(c){this.detach(c),this.#i.removeEditor(c),c.div.contains(document.activeElement)&&setTimeout(()=>{this.#i.focusMainContainer()},0),c.div.remove(),c.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(c){c.parent!==this&&(c.annotationElementId&&(this.#i.addDeletedAnnotationElement(c.annotationElementId),h.AnnotationEditor.deleteAnnotationElement(c),c.annotationElementId=null),this.attach(c),c.parent?.detach(c),c.setParent(this),c.div&&c.isAttachedToDOM&&(c.div.remove(),this.div.append(c.div)))}add(c){if(this.changeParent(c),this.#i.addEditor(c),this.attach(c),!c.isAttachedToDOM){const m=c.render();this.div.append(m),c.isAttachedToDOM=!0}c.fixAndSetPosition(),c.onceAdded(),this.#i.addToAnnotationStorage(c)}moveEditorInDOM(c){if(!c.isAttachedToDOM)return;const{activeElement:m}=document;c.div.contains(m)&&(c._focusEventsAllowed=!1,setTimeout(()=>{c.div.contains(document.activeElement)?c._focusEventsAllowed=!0:(c.div.addEventListener("focusin",()=>{c._focusEventsAllowed=!0},{once:!0}),m.focus())},0)),c._structTreeParentId=this.#t?.moveElementInDOM(this.div,c.div,c.contentDiv,!0)}addOrRebuild(c){c.needsToBeRebuilt()?c.rebuild():this.add(c)}addUndoableEditor(c){const m=()=>c._uiManager.rebuild(c),x=()=>{c.remove()};this.addCommands({cmd:m,undo:x,mustExec:!1})}getNextId(){return this.#i.getId()}#f(c){switch(this.#i.getMode()){case i.AnnotationEditorType.FREETEXT:return new E.FreeTextEditor(c);case i.AnnotationEditorType.INK:return new R.InkEditor(c);case i.AnnotationEditorType.STAMP:return new C.StampEditor(c)}return null}pasteEditor(c,m){this.#i.updateToolbar(c),this.#i.updateMode(c);const{offsetX:x,offsetY:p}=this.#h(),_=this.getNextId(),D=this.#f({parent:this,id:_,x,y:p,uiManager:this.#i,isCentered:!0,...m});D&&this.add(D)}deserialize(c){switch(c.annotationType??c.annotationEditorType){case i.AnnotationEditorType.FREETEXT:return E.FreeTextEditor.deserialize(c,this,this.#i);case i.AnnotationEditorType.INK:return R.InkEditor.deserialize(c,this,this.#i);case i.AnnotationEditorType.STAMP:return C.StampEditor.deserialize(c,this,this.#i)}return null}#d(c,m){const x=this.getNextId(),p=this.#f({parent:this,id:x,x:c.offsetX,y:c.offsetY,uiManager:this.#i,isCentered:m});return p&&this.add(p),p}#h(){const{x:c,y:m,width:x,height:p}=this.div.getBoundingClientRect(),_=Math.max(0,c),D=Math.max(0,m),b=Math.min(window.innerWidth,c+x),L=Math.min(window.innerHeight,m+p),N=(_+b)/2-c,U=(D+L)/2-m,[S,P]=this.viewport.rotation%180===0?[N,U]:[U,N];return{offsetX:S,offsetY:P}}addNewEditor(){this.#d(this.#h(),!0)}setSelected(c){this.#i.setSelected(c)}toggleSelected(c){this.#i.toggleSelected(c)}isSelected(c){return this.#i.isSelected(c)}unselect(c){this.#i.unselect(c)}pointerup(c){const{isMac:m}=i.FeatureTest.platform;if(!(c.button!==0||c.ctrlKey&&m)&&c.target===this.div&&this.#a){if(this.#a=!1,!this.#e){this.#e=!0;return}if(this.#i.getMode()===i.AnnotationEditorType.STAMP){this.#i.unselectAll();return}this.#d(c,!1)}}pointerdown(c){if(this.#a){this.#a=!1;return}const{isMac:m}=i.FeatureTest.platform;if(c.button!==0||c.ctrlKey&&m||c.target!==this.div)return;this.#a=!0;const x=this.#i.getActive();this.#e=!x||x.isEmpty()}findNewParent(c,m,x){const p=this.#i.findParent(m,x);return p===null||p===this?!1:(p.changeParent(c),!0)}destroy(){this.#i.getActive()?.parent===this&&(this.#i.commitOrRemove(),this.#i.setActiveEditor(null));for(const c of this.#r.values())this.#t?.removePointerInTextLayer(c.contentDiv),c.setParent(null),c.isAttachedToDOM=!1,c.div.remove();this.div=null,this.#r.clear(),this.#i.removeLayer(this)}#p(){this.#l=!0;for(const c of this.#r.values())c.isEmpty()&&c.remove();this.#l=!1}render({viewport:c}){this.viewport=c,(0,M.setLayerDimensions)(this.div,c);for(const m of this.#i.getEditors(this.pageIndex))this.add(m);this.updateMode()}update({viewport:c}){this.#i.commitOrRemove(),this.viewport=c,(0,M.setLayerDimensions)(this.div,{rotation:c.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:c,pageHeight:m}=this.viewport.rawDims;return[c,m]}}a.AnnotationEditorLayer=u}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FreeTextEditor=void 0;var i=d(1),h=d(5),E=d(4),R=d(29);class M extends E.AnnotationEditor{#t=this.editorDivBlur.bind(this);#e=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#s=this.editorDivKeydown.bind(this);#o;#r="";#a=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const u=M.prototype,l=x=>x.isEmpty(),c=h.AnnotationEditorUIManager.TRANSLATE_SMALL,m=h.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new h.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],u.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],u.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],u._translateEmpty,{args:[-c,0],checker:l}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],u._translateEmpty,{args:[-m,0],checker:l}],[["ArrowRight","mac+ArrowRight"],u._translateEmpty,{args:[c,0],checker:l}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],u._translateEmpty,{args:[m,0],checker:l}],[["ArrowUp","mac+ArrowUp"],u._translateEmpty,{args:[0,-c],checker:l}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],u._translateEmpty,{args:[0,-m],checker:l}],[["ArrowDown","mac+ArrowDown"],u._translateEmpty,{args:[0,c],checker:l}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],u._translateEmpty,{args:[0,m],checker:l}]]))}static _type="freetext";constructor(u){super({...u,name:"freeTextEditor"}),this.#o=u.color||M._defaultColor||E.AnnotationEditor._defaultLineColor,this.#l=u.fontSize||M._defaultFontSize}static initialize(u){E.AnnotationEditor.initialize(u,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const l=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(l.getPropertyValue("--freetext-padding"))}static updateDefaultParams(u,l){switch(u){case i.AnnotationEditorParamsType.FREETEXT_SIZE:M._defaultFontSize=l;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:M._defaultColor=l;break}}updateParams(u,l){switch(u){case i.AnnotationEditorParamsType.FREETEXT_SIZE:this.#i(l);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(l);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,M._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,M._defaultColor||E.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[i.AnnotationEditorParamsType.FREETEXT_COLOR,this.#o]]}#i(u){const l=m=>{this.editorDiv.style.fontSize=`calc(${m}px * var(--scale-factor))`,this.translate(0,-(m-this.#l)*this.parentScale),this.#l=m,this.#h()},c=this.#l;this.addCommands({cmd:()=>{l(u)},undo:()=>{l(c)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(u){const l=this.#o;this.addCommands({cmd:()=>{this.#o=this.editorDiv.style.color=u},undo:()=>{this.#o=this.editorDiv.style.color=l},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(u,l){this._uiManager.translateSelectedEditors(u,l,!0)}getInitialTranslation(){const u=this.parentScale;return[-M._internalPadding*u,-(M._internalPadding+this.#l)*u]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#s),this.editorDiv.addEventListener("focus",this.#e),this.editorDiv.addEventListener("blur",this.#t),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#a),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#s),this.editorDiv.removeEventListener("focus",this.#e),this.editorDiv.removeEventListener("blur",this.#t),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(u){this._focusEventsAllowed&&(super.focusin(u),u.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#m();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){const u=this.editorDiv.getElementsByTagName("div");if(u.length===0)return this.editorDiv.innerText;const l=[];for(const c of u)l.push(c.innerText.replace(/\r\n?|\n/,""));return l.join(`
`)}#h(){const[u,l]=this.parentDimensions;let c;if(this.isAttachedToDOM)c=this.div.getBoundingClientRect();else{const{currentLayer:m,div:x}=this,p=x.style.display;x.style.display="hidden",m.div.append(this.div),c=x.getBoundingClientRect(),x.remove(),x.style.display=p}this.rotation%180===this.parentRotation%180?(this.width=c.width/u,this.height=c.height/l):(this.width=c.height/u,this.height=c.width/l),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const u=this.#r,l=this.#r=this.#d().trimEnd();if(u===l)return;const c=m=>{if(this.#r=m,!m){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{c(l)},undo:()=>{c(u)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(u){this.enterInEditMode()}keydown(u){u.target===this.div&&u.key==="Enter"&&(this.enterInEditMode(),u.preventDefault())}editorDivKeydown(u){M._keyboardManager.exec(this,u)}editorDivFocus(u){this.isEditing=!0}editorDivBlur(u){this.isEditing=!1}editorDivInput(u){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let u,l;this.width&&(u=this.x,l=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#a),this.enableEditing(),E.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(m=>this.editorDiv?.setAttribute("aria-label",m)),E.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(m=>this.editorDiv?.setAttribute("default-content",m)),this.editorDiv.contentEditable=!0;const{style:c}=this.editorDiv;if(c.fontSize=`calc(${this.#l}px * var(--scale-factor))`,c.color=this.#o,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,h.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[m,x]=this.parentDimensions;if(this.annotationElementId){const{position:p}=this.#c;let[_,D]=this.getInitialTranslation();[_,D]=this.pageTranslationToScreen(_,D);const[b,L]=this.pageDimensions,[N,U]=this.pageTranslation;let S,P;switch(this.rotation){case 0:S=u+(p[0]-N)/b,P=l+this.height-(p[1]-U)/L;break;case 90:S=u+(p[0]-N)/b,P=l-(p[1]-U)/L,[_,D]=[D,-_];break;case 180:S=u-this.width+(p[0]-N)/b,P=l-(p[1]-U)/L,[_,D]=[-_,-D];break;case 270:S=u+(p[0]-N-this.height*L)/b,P=l+(p[1]-U-this.width*b)/L,[_,D]=[-D,_];break}this.setAt(S*m,P*x,_,D)}else this.setAt(u*m,l*x,this.width*m,this.height*x);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#r)for(const u of this.#r.split(`
`)){const l=document.createElement("div");l.append(u?document.createTextNode(u):document.createElement("br")),this.editorDiv.append(l)}}get contentDiv(){return this.editorDiv}static deserialize(u,l,c){let m=null;if(u instanceof R.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:p,fontColor:_},rect:D,rotation:b,id:L},textContent:N,textPosition:U,parent:{page:{pageNumber:S}}}=u;if(!N||N.length===0)return null;m=u={annotationType:i.AnnotationEditorType.FREETEXT,color:Array.from(_),fontSize:p,value:N.join(`
`),position:U,pageIndex:S-1,rect:D,rotation:b,id:L,deleted:!1}}const x=super.deserialize(u,l,c);return x.#l=u.fontSize,x.#o=i.Util.makeHexColor(...u.color),x.#r=u.value,x.annotationElementId=u.id||null,x.#c=m,x}serialize(u=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const l=M._internalPadding*this.parentScale,c=this.getRect(l,l),m=E.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#o),x={annotationType:i.AnnotationEditorType.FREETEXT,color:m,fontSize:this.#l,value:this.#r,pageIndex:this.pageIndex,rect:c,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return u?x:this.annotationElementId&&!this.#y(x)?null:(x.id=this.annotationElementId,x)}#y(u){const{value:l,fontSize:c,color:m,rect:x,pageIndex:p}=this.#c;return u.value!==l||u.fontSize!==c||u.rect.some((_,D)=>Math.abs(_-x[D])>=1)||u.color.some((_,D)=>_!==m[D])||u.pageIndex!==p}#m(u=!1){if(!this.annotationElementId)return;if(this.#h(),!u&&(this.width===0||this.height===0)){setTimeout(()=>this.#m(!0),0);return}const l=M._internalPadding*this.parentScale;this.#c.rect=this.getRect(l,l)}}a.FreeTextEditor=M}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.StampAnnotationElement=a.InkAnnotationElement=a.FreeTextAnnotationElement=a.AnnotationLayer=void 0;var i=d(1),h=d(6),E=d(3),R=d(30),M=d(31),C=d(32);const u=1e3,l=9,c=new WeakSet;function m(H){return{width:H[2]-H[0],height:H[3]-H[1]}}class x{static create(v){switch(v.data.annotationType){case i.AnnotationType.LINK:return new _(v);case i.AnnotationType.TEXT:return new D(v);case i.AnnotationType.WIDGET:switch(v.data.fieldType){case"Tx":return new L(v);case"Btn":return v.data.radioButton?new S(v):v.data.checkBox?new U(v):new P(v);case"Ch":return new z(v);case"Sig":return new N(v)}return new b(v);case i.AnnotationType.POPUP:return new Y(v);case i.AnnotationType.FREETEXT:return new K(v);case i.AnnotationType.LINE:return new Z(v);case i.AnnotationType.SQUARE:return new it(v);case i.AnnotationType.CIRCLE:return new nt(v);case i.AnnotationType.POLYLINE:return new at(v);case i.AnnotationType.CARET:return new W(v);case i.AnnotationType.INK:return new F(v);case i.AnnotationType.POLYGON:return new pt(v);case i.AnnotationType.HIGHLIGHT:return new O(v);case i.AnnotationType.UNDERLINE:return new T(v);case i.AnnotationType.SQUIGGLY:return new g(v);case i.AnnotationType.STRIKEOUT:return new w(v);case i.AnnotationType.STAMP:return new I(v);case i.AnnotationType.FILEATTACHMENT:return new B(v);default:return new p(v)}}}class p{#t=!1;constructor(v,{isRenderable:A=!1,ignoreBorder:k=!1,createQuadrilaterals:G=!1}={}){this.isRenderable=A,this.data=v.data,this.layer=v.layer,this.linkService=v.linkService,this.downloadManager=v.downloadManager,this.imageResourcesPath=v.imageResourcesPath,this.renderForms=v.renderForms,this.svgFactory=v.svgFactory,this.annotationStorage=v.annotationStorage,this.enableScripting=v.enableScripting,this.hasJSActions=v.hasJSActions,this._fieldObjects=v.fieldObjects,this.parent=v.parent,A&&(this.container=this._createContainer(k)),G&&this._createQuadrilaterals()}static _hasPopupData({titleObj:v,contentsObj:A,richText:k}){return!!(v?.str||A?.str||k?.str)}get hasPopupData(){return p._hasPopupData(this.data)}_createContainer(v){const{data:A,parent:{page:k,viewport:G}}=this,V=document.createElement("section");V.setAttribute("data-annotation-id",A.id),this instanceof b||(V.tabIndex=u),V.style.zIndex=this.parent.zIndex++,this.data.popupRef&&V.setAttribute("aria-haspopup","dialog"),A.noRotate&&V.classList.add("norotate");const{pageWidth:Q,pageHeight:et,pageX:ot,pageY:At}=G.rawDims;if(!A.rect||this instanceof Y){const{rotation:Et}=A;return!A.hasOwnCanvas&&Et!==0&&this.setRotation(Et,V),V}const{width:ct,height:dt}=m(A.rect),ht=i.Util.normalizeRect([A.rect[0],k.view[3]-A.rect[1]+k.view[1],A.rect[2],k.view[3]-A.rect[3]+k.view[1]]);if(!v&&A.borderStyle.width>0){V.style.borderWidth=`${A.borderStyle.width}px`;const Et=A.borderStyle.horizontalCornerRadius,Rt=A.borderStyle.verticalCornerRadius;if(Et>0||Rt>0){const Mt=`calc(${Et}px * var(--scale-factor)) / calc(${Rt}px * var(--scale-factor))`;V.style.borderRadius=Mt}else if(this instanceof S){const Mt=`calc(${ct}px * var(--scale-factor)) / calc(${dt}px * var(--scale-factor))`;V.style.borderRadius=Mt}switch(A.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:V.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:V.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:V.style.borderBottomStyle="solid";break}const wt=A.borderColor||null;wt?(this.#t=!0,V.style.borderColor=i.Util.makeHexColor(wt[0]|0,wt[1]|0,wt[2]|0)):V.style.borderWidth=0}V.style.left=`${100*(ht[0]-ot)/Q}%`,V.style.top=`${100*(ht[1]-At)/et}%`;const{rotation:yt}=A;return A.hasOwnCanvas||yt===0?(V.style.width=`${100*ct/Q}%`,V.style.height=`${100*dt/et}%`):this.setRotation(yt,V),V}setRotation(v,A=this.container){if(!this.data.rect)return;const{pageWidth:k,pageHeight:G}=this.parent.viewport.rawDims,{width:V,height:Q}=m(this.data.rect);let et,ot;v%180===0?(et=100*V/k,ot=100*Q/G):(et=100*Q/k,ot=100*V/G),A.style.width=`${et}%`,A.style.height=`${ot}%`,A.setAttribute("data-main-rotation",(360-v)%360)}get _commonActions(){const v=(A,k,G)=>{const V=G.detail[A],Q=V[0],et=V.slice(1);G.target.style[k]=R.ColorConverters[`${Q}_HTML`](et),this.annotationStorage.setValue(this.data.id,{[k]:R.ColorConverters[`${Q}_rgb`](et)})};return(0,i.shadow)(this,"_commonActions",{display:A=>{const{display:k}=A.detail,G=k%2===1;this.container.style.visibility=G?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:G,noPrint:k===1||k===2})},print:A=>{this.annotationStorage.setValue(this.data.id,{noPrint:!A.detail.print})},hidden:A=>{const{hidden:k}=A.detail;this.container.style.visibility=k?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:k,noView:k})},focus:A=>{setTimeout(()=>A.target.focus({preventScroll:!1}),0)},userName:A=>{A.target.title=A.detail.userName},readonly:A=>{A.target.disabled=A.detail.readonly},required:A=>{this._setRequired(A.target,A.detail.required)},bgColor:A=>{v("bgColor","backgroundColor",A)},fillColor:A=>{v("fillColor","backgroundColor",A)},fgColor:A=>{v("fgColor","color",A)},textColor:A=>{v("textColor","color",A)},borderColor:A=>{v("borderColor","borderColor",A)},strokeColor:A=>{v("strokeColor","borderColor",A)},rotation:A=>{const k=A.detail.rotation;this.setRotation(k),this.annotationStorage.setValue(this.data.id,{rotation:k})}})}_dispatchEventFromSandbox(v,A){const k=this._commonActions;for(const G of Object.keys(A.detail))(v[G]||k[G])?.(A)}_setDefaultPropertiesFromJS(v){if(!this.enableScripting)return;const A=this.annotationStorage.getRawValue(this.data.id);if(!A)return;const k=this._commonActions;for(const[G,V]of Object.entries(A)){const Q=k[G];if(Q){const et={detail:{[G]:V},target:v};Q(et),delete A[G]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:v}=this.data;if(!v)return;const[A,k,G,V]=this.data.rect;if(v.length===1){const[,{x:Rt,y:wt},{x:Mt,y:kt}]=v[0];if(G===Rt&&V===wt&&A===Mt&&k===kt)return}const{style:Q}=this.container;let et;if(this.#t){const{borderColor:Rt,borderWidth:wt}=Q;Q.borderWidth=0,et=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Rt}" stroke-width="${wt}">`],this.container.classList.add("hasBorder")}const ot=G-A,At=V-k,{svgFactory:ct}=this,dt=ct.createElement("svg");dt.classList.add("quadrilateralsContainer"),dt.setAttribute("width",0),dt.setAttribute("height",0);const ht=ct.createElement("defs");dt.append(ht);const yt=ct.createElement("clipPath"),Et=`clippath_${this.data.id}`;yt.setAttribute("id",Et),yt.setAttribute("clipPathUnits","objectBoundingBox"),ht.append(yt);for(const[,{x:Rt,y:wt},{x:Mt,y:kt}]of v){const Dt=ct.createElement("rect"),Ft=(Mt-A)/ot,$t=(V-wt)/At,Ut=(Rt-Mt)/ot,Kt=(wt-kt)/At;Dt.setAttribute("x",Ft),Dt.setAttribute("y",$t),Dt.setAttribute("width",Ut),Dt.setAttribute("height",Kt),yt.append(Dt),et?.push(`<rect vector-effect="non-scaling-stroke" x="${Ft}" y="${$t}" width="${Ut}" height="${Kt}"/>`)}this.#t&&(et.push("</g></svg>')"),Q.backgroundImage=et.join("")),this.container.append(dt),this.container.style.clipPath=`url(#${Et})`}_createPopup(){const{container:v,data:A}=this;v.setAttribute("aria-haspopup","dialog");const k=new Y({data:{color:A.color,titleObj:A.titleObj,modificationDate:A.modificationDate,contentsObj:A.contentsObj,richText:A.richText,parentRect:A.rect,borderStyle:0,id:`popup_${A.id}`,rotation:A.rotation},parent:this.parent,elements:[this]});this.parent.div.append(k.render())}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(v,A=null){const k=[];if(this._fieldObjects){const G=this._fieldObjects[v];if(G)for(const{page:V,id:Q,exportValues:et}of G){if(V===-1||Q===A)continue;const ot=typeof et=="string"?et:null,At=document.querySelector(`[data-element-id="${Q}"]`);if(At&&!c.has(At)){(0,i.warn)(`_getElementsByName - element not allowed: ${Q}`);continue}k.push({id:Q,exportValue:ot,domElement:At})}return k}for(const G of document.getElementsByName(v)){const{exportValue:V}=G,Q=G.getAttribute("data-element-id");Q!==A&&c.has(G)&&k.push({id:Q,exportValue:V,domElement:G})}return k}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const v=this.getElementsToTriggerPopup();if(Array.isArray(v))for(const A of v)A.classList.add("highlightArea");else v.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:v,data:{id:A}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:v,editId:A})})}}class _ extends p{constructor(v,A=null){super(v,{isRenderable:!0,ignoreBorder:!!A?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=v.data.isTooltipOnly}render(){const{data:v,linkService:A}=this,k=document.createElement("a");k.setAttribute("data-element-id",v.id);let G=!1;return v.url?(A.addLinkAttributes(k,v.url,v.newWindow),G=!0):v.action?(this._bindNamedAction(k,v.action),G=!0):v.attachment?(this._bindAttachment(k,v.attachment),G=!0):v.setOCGState?(this.#e(k,v.setOCGState),G=!0):v.dest?(this._bindLink(k,v.dest),G=!0):(v.actions&&(v.actions.Action||v.actions["Mouse Up"]||v.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(k,v),G=!0),v.resetForm?(this._bindResetFormAction(k,v.resetForm),G=!0):this.isTooltipOnly&&!G&&(this._bindLink(k,""),G=!0)),this.container.classList.add("linkAnnotation"),G&&this.container.append(k),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(v,A){v.href=this.linkService.getDestinationHash(A),v.onclick=()=>(A&&this.linkService.goToDestination(A),!1),(A||A==="")&&this.#t()}_bindNamedAction(v,A){v.href=this.linkService.getAnchorUrl(""),v.onclick=()=>(this.linkService.executeNamedAction(A),!1),this.#t()}_bindAttachment(v,A){v.href=this.linkService.getAnchorUrl(""),v.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,A.content,A.filename),!1),this.#t()}#e(v,A){v.href=this.linkService.getAnchorUrl(""),v.onclick=()=>(this.linkService.executeSetOCGState(A),!1),this.#t()}_bindJSAction(v,A){v.href=this.linkService.getAnchorUrl("");const k=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const G of Object.keys(A.actions)){const V=k.get(G);V&&(v[V]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A.id,name:G}}),!1))}v.onclick||(v.onclick=()=>!1),this.#t()}_bindResetFormAction(v,A){const k=v.onclick;if(k||(v.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),k||(v.onclick=()=>!1);return}v.onclick=()=>{k?.();const{fields:G,refs:V,include:Q}=A,et=[];if(G.length!==0||V.length!==0){const ct=new Set(V);for(const dt of G){const ht=this._fieldObjects[dt]||[];for(const{id:yt}of ht)ct.add(yt)}for(const dt of Object.values(this._fieldObjects))for(const ht of dt)ct.has(ht.id)===Q&&et.push(ht)}else for(const ct of Object.values(this._fieldObjects))et.push(...ct);const ot=this.annotationStorage,At=[];for(const ct of et){const{id:dt}=ct;switch(At.push(dt),ct.type){case"text":{const yt=ct.defaultValue||"";ot.setValue(dt,{value:yt});break}case"checkbox":case"radiobutton":{const yt=ct.defaultValue===ct.exportValues;ot.setValue(dt,{value:yt});break}case"combobox":case"listbox":{const yt=ct.defaultValue||"";ot.setValue(dt,{value:yt});break}default:continue}const ht=document.querySelector(`[data-element-id="${dt}"]`);if(ht){if(!c.has(ht)){(0,i.warn)(`_bindResetFormAction - element not allowed: ${dt}`);continue}}else continue;ht.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:At,name:"ResetForm"}}),!1}}}class D extends p{constructor(v){super(v,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const v=document.createElement("img");return v.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",v.alt="[{{type}} Annotation]",v.dataset.l10nId="text_annotation_type",v.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(v),this.container}}class b extends p{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(v){this.data.hasOwnCanvas&&(v.previousSibling?.nodeName==="CANVAS"&&(v.previousSibling.hidden=!0),v.hidden=!1)}_getKeyModifier(v){const{isWin:A,isMac:k}=i.FeatureTest.platform;return A&&v.ctrlKey||k&&v.metaKey}_setEventListener(v,A,k,G,V){k.includes("mouse")?v.addEventListener(k,Q=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:G,value:V(Q),shift:Q.shiftKey,modifier:this._getKeyModifier(Q)}})}):v.addEventListener(k,Q=>{if(k==="blur"){if(!A.focused||!Q.relatedTarget)return;A.focused=!1}else if(k==="focus"){if(A.focused)return;A.focused=!0}V&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:G,value:V(Q)}})})}_setEventListeners(v,A,k,G){for(const[V,Q]of k)(Q==="Action"||this.data.actions?.[Q])&&((Q==="Focus"||Q==="Blur")&&(A||={focused:!1}),this._setEventListener(v,A,V,Q,G),Q==="Focus"&&!this.data.actions?.Blur?this._setEventListener(v,A,"blur","Blur",null):Q==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(v,A,"focus","Focus",null))}_setBackgroundColor(v){const A=this.data.backgroundColor||null;v.style.backgroundColor=A===null?"transparent":i.Util.makeHexColor(A[0],A[1],A[2])}_setTextStyle(v){const A=["left","center","right"],{fontColor:k}=this.data.defaultAppearanceData,G=this.data.defaultAppearanceData.fontSize||l,V=v.style;let Q;const et=2,ot=At=>Math.round(10*At)/10;if(this.data.multiLine){const At=Math.abs(this.data.rect[3]-this.data.rect[1]-et),ct=Math.round(At/(i.LINE_FACTOR*G))||1,dt=At/ct;Q=Math.min(G,ot(dt/i.LINE_FACTOR))}else{const At=Math.abs(this.data.rect[3]-this.data.rect[1]-et);Q=Math.min(G,ot(At/i.LINE_FACTOR))}V.fontSize=`calc(${Q}px * var(--scale-factor))`,V.color=i.Util.makeHexColor(k[0],k[1],k[2]),this.data.textAlignment!==null&&(V.textAlign=A[this.data.textAlignment])}_setRequired(v,A){A?v.setAttribute("required",!0):v.removeAttribute("required"),v.setAttribute("aria-required",A)}}class L extends b{constructor(v){const A=v.renderForms||!v.data.hasAppearance&&!!v.data.fieldValue;super(v,{isRenderable:A})}setPropertyOnSiblings(v,A,k,G){const V=this.annotationStorage;for(const Q of this._getElementsByName(v.name,v.id))Q.domElement&&(Q.domElement[A]=k),V.setValue(Q.id,{[G]:k})}render(){const v=this.annotationStorage,A=this.data.id;this.container.classList.add("textWidgetAnnotation");let k=null;if(this.renderForms){const G=v.getValue(A,{value:this.data.fieldValue});let V=G.value||"";const Q=v.getValue(A,{charLimit:this.data.maxLen}).charLimit;Q&&V.length>Q&&(V=V.slice(0,Q));let et=G.formattedValue||this.data.textContent?.join(`
`)||null;et&&this.data.comb&&(et=et.replaceAll(/\s+/g,""));const ot={userValue:V,formattedValue:et,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(k=document.createElement("textarea"),k.textContent=et??V,this.data.doNotScroll&&(k.style.overflowY="hidden")):(k=document.createElement("input"),k.type="text",k.setAttribute("value",et??V),this.data.doNotScroll&&(k.style.overflowX="hidden")),this.data.hasOwnCanvas&&(k.hidden=!0),c.add(k),k.setAttribute("data-element-id",A),k.disabled=this.data.readOnly,k.name=this.data.fieldName,k.tabIndex=u,this._setRequired(k,this.data.required),Q&&(k.maxLength=Q),k.addEventListener("input",ct=>{v.setValue(A,{value:ct.target.value}),this.setPropertyOnSiblings(k,"value",ct.target.value,"value"),ot.formattedValue=null}),k.addEventListener("resetform",ct=>{const dt=this.data.defaultFieldValue??"";k.value=ot.userValue=dt,ot.formattedValue=null});let At=ct=>{const{formattedValue:dt}=ot;dt!=null&&(ct.target.value=dt),ct.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){k.addEventListener("focus",dt=>{if(ot.focused)return;const{target:ht}=dt;ot.userValue&&(ht.value=ot.userValue),ot.lastCommittedValue=ht.value,ot.commitKey=1,ot.focused=!0}),k.addEventListener("updatefromsandbox",dt=>{this.showElementAndHideCanvas(dt.target);const ht={value(yt){ot.userValue=yt.detail.value??"",v.setValue(A,{value:ot.userValue.toString()}),yt.target.value=ot.userValue},formattedValue(yt){const{formattedValue:Et}=yt.detail;ot.formattedValue=Et,Et!=null&&yt.target!==document.activeElement&&(yt.target.value=Et),v.setValue(A,{formattedValue:Et})},selRange(yt){yt.target.setSelectionRange(...yt.detail.selRange)},charLimit:yt=>{const{charLimit:Et}=yt.detail,{target:Rt}=yt;if(Et===0){Rt.removeAttribute("maxLength");return}Rt.setAttribute("maxLength",Et);let wt=ot.userValue;!wt||wt.length<=Et||(wt=wt.slice(0,Et),Rt.value=ot.userValue=wt,v.setValue(A,{value:wt}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:wt,willCommit:!0,commitKey:1,selStart:Rt.selectionStart,selEnd:Rt.selectionEnd}}))}};this._dispatchEventFromSandbox(ht,dt)}),k.addEventListener("keydown",dt=>{ot.commitKey=1;let ht=-1;if(dt.key==="Escape"?ht=0:dt.key==="Enter"&&!this.data.multiLine?ht=2:dt.key==="Tab"&&(ot.commitKey=3),ht===-1)return;const{value:yt}=dt.target;ot.lastCommittedValue!==yt&&(ot.lastCommittedValue=yt,ot.userValue=yt,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:yt,willCommit:!0,commitKey:ht,selStart:dt.target.selectionStart,selEnd:dt.target.selectionEnd}}))});const ct=At;At=null,k.addEventListener("blur",dt=>{if(!ot.focused||!dt.relatedTarget)return;ot.focused=!1;const{value:ht}=dt.target;ot.userValue=ht,ot.lastCommittedValue!==ht&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:ht,willCommit:!0,commitKey:ot.commitKey,selStart:dt.target.selectionStart,selEnd:dt.target.selectionEnd}}),ct(dt)}),this.data.actions?.Keystroke&&k.addEventListener("beforeinput",dt=>{ot.lastCommittedValue=null;const{data:ht,target:yt}=dt,{value:Et,selectionStart:Rt,selectionEnd:wt}=yt;let Mt=Rt,kt=wt;switch(dt.inputType){case"deleteWordBackward":{const Dt=Et.substring(0,Rt).match(/\w*[^\w]*$/);Dt&&(Mt-=Dt[0].length);break}case"deleteWordForward":{const Dt=Et.substring(Rt).match(/^[^\w]*\w*/);Dt&&(kt+=Dt[0].length);break}case"deleteContentBackward":Rt===wt&&(Mt-=1);break;case"deleteContentForward":Rt===wt&&(kt+=1);break}dt.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:Et,change:ht||"",willCommit:!1,selStart:Mt,selEnd:kt}})}),this._setEventListeners(k,ot,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],dt=>dt.target.value)}if(At&&k.addEventListener("blur",At),this.data.comb){const dt=(this.data.rect[2]-this.data.rect[0])/Q;k.classList.add("comb"),k.style.letterSpacing=`calc(${dt}px * var(--scale-factor) - 1ch)`}}else k=document.createElement("div"),k.textContent=this.data.fieldValue,k.style.verticalAlign="middle",k.style.display="table-cell";return this._setTextStyle(k),this._setBackgroundColor(k),this._setDefaultPropertiesFromJS(k),this.container.append(k),this.container}}class N extends b{constructor(v){super(v,{isRenderable:!!v.data.hasOwnCanvas})}}class U extends b{constructor(v){super(v,{isRenderable:v.renderForms})}render(){const v=this.annotationStorage,A=this.data,k=A.id;let G=v.getValue(k,{value:A.exportValue===A.fieldValue}).value;typeof G=="string"&&(G=G!=="Off",v.setValue(k,{value:G})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const V=document.createElement("input");return c.add(V),V.setAttribute("data-element-id",k),V.disabled=A.readOnly,this._setRequired(V,this.data.required),V.type="checkbox",V.name=A.fieldName,G&&V.setAttribute("checked",!0),V.setAttribute("exportValue",A.exportValue),V.tabIndex=u,V.addEventListener("change",Q=>{const{name:et,checked:ot}=Q.target;for(const At of this._getElementsByName(et,k)){const ct=ot&&At.exportValue===A.exportValue;At.domElement&&(At.domElement.checked=ct),v.setValue(At.id,{value:ct})}v.setValue(k,{value:ot})}),V.addEventListener("resetform",Q=>{const et=A.defaultFieldValue||"Off";Q.target.checked=et===A.exportValue}),this.enableScripting&&this.hasJSActions&&(V.addEventListener("updatefromsandbox",Q=>{const et={value(ot){ot.target.checked=ot.detail.value!=="Off",v.setValue(k,{value:ot.target.checked})}};this._dispatchEventFromSandbox(et,Q)}),this._setEventListeners(V,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Q=>Q.target.checked)),this._setBackgroundColor(V),this._setDefaultPropertiesFromJS(V),this.container.append(V),this.container}}class S extends b{constructor(v){super(v,{isRenderable:v.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const v=this.annotationStorage,A=this.data,k=A.id;let G=v.getValue(k,{value:A.fieldValue===A.buttonValue}).value;typeof G=="string"&&(G=G!==A.buttonValue,v.setValue(k,{value:G}));const V=document.createElement("input");if(c.add(V),V.setAttribute("data-element-id",k),V.disabled=A.readOnly,this._setRequired(V,this.data.required),V.type="radio",V.name=A.fieldName,G&&V.setAttribute("checked",!0),V.tabIndex=u,V.addEventListener("change",Q=>{const{name:et,checked:ot}=Q.target;for(const At of this._getElementsByName(et,k))v.setValue(At.id,{value:!1});v.setValue(k,{value:ot})}),V.addEventListener("resetform",Q=>{const et=A.defaultFieldValue;Q.target.checked=et!=null&&et===A.buttonValue}),this.enableScripting&&this.hasJSActions){const Q=A.buttonValue;V.addEventListener("updatefromsandbox",et=>{const ot={value:At=>{const ct=Q===At.detail.value;for(const dt of this._getElementsByName(At.target.name)){const ht=ct&&dt.id===k;dt.domElement&&(dt.domElement.checked=ht),v.setValue(dt.id,{value:ht})}}};this._dispatchEventFromSandbox(ot,et)}),this._setEventListeners(V,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],et=>et.target.checked)}return this._setBackgroundColor(V),this._setDefaultPropertiesFromJS(V),this.container.append(V),this.container}}class P extends _{constructor(v){super(v,{ignoreBorder:v.data.hasAppearance})}render(){const v=super.render();v.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(v.title=this.data.alternativeText);const A=v.lastChild;return this.enableScripting&&this.hasJSActions&&A&&(this._setDefaultPropertiesFromJS(A),A.addEventListener("updatefromsandbox",k=>{this._dispatchEventFromSandbox({},k)})),v}}class z extends b{constructor(v){super(v,{isRenderable:v.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const v=this.annotationStorage,A=this.data.id,k=v.getValue(A,{value:this.data.fieldValue}),G=document.createElement("select");c.add(G),G.setAttribute("data-element-id",A),G.disabled=this.data.readOnly,this._setRequired(G,this.data.required),G.name=this.data.fieldName,G.tabIndex=u;let V=this.data.combo&&this.data.options.length>0;this.data.combo||(G.size=this.data.options.length,this.data.multiSelect&&(G.multiple=!0)),G.addEventListener("resetform",ct=>{const dt=this.data.defaultFieldValue;for(const ht of G.options)ht.selected=ht.value===dt});for(const ct of this.data.options){const dt=document.createElement("option");dt.textContent=ct.displayValue,dt.value=ct.exportValue,k.value.includes(ct.exportValue)&&(dt.setAttribute("selected",!0),V=!1),G.append(dt)}let Q=null;if(V){const ct=document.createElement("option");ct.value=" ",ct.setAttribute("hidden",!0),ct.setAttribute("selected",!0),G.prepend(ct),Q=()=>{ct.remove(),G.removeEventListener("input",Q),Q=null},G.addEventListener("input",Q)}const et=ct=>{const dt=ct?"value":"textContent",{options:ht,multiple:yt}=G;return yt?Array.prototype.filter.call(ht,Et=>Et.selected).map(Et=>Et[dt]):ht.selectedIndex===-1?null:ht[ht.selectedIndex][dt]};let ot=et(!1);const At=ct=>{const dt=ct.target.options;return Array.prototype.map.call(dt,ht=>({displayValue:ht.textContent,exportValue:ht.value}))};return this.enableScripting&&this.hasJSActions?(G.addEventListener("updatefromsandbox",ct=>{const dt={value(ht){Q?.();const yt=ht.detail.value,Et=new Set(Array.isArray(yt)?yt:[yt]);for(const Rt of G.options)Rt.selected=Et.has(Rt.value);v.setValue(A,{value:et(!0)}),ot=et(!1)},multipleSelection(ht){G.multiple=!0},remove(ht){const yt=G.options,Et=ht.detail.remove;yt[Et].selected=!1,G.remove(Et),yt.length>0&&Array.prototype.findIndex.call(yt,wt=>wt.selected)===-1&&(yt[0].selected=!0),v.setValue(A,{value:et(!0),items:At(ht)}),ot=et(!1)},clear(ht){for(;G.length!==0;)G.remove(0);v.setValue(A,{value:null,items:[]}),ot=et(!1)},insert(ht){const{index:yt,displayValue:Et,exportValue:Rt}=ht.detail.insert,wt=G.children[yt],Mt=document.createElement("option");Mt.textContent=Et,Mt.value=Rt,wt?wt.before(Mt):G.append(Mt),v.setValue(A,{value:et(!0),items:At(ht)}),ot=et(!1)},items(ht){const{items:yt}=ht.detail;for(;G.length!==0;)G.remove(0);for(const Et of yt){const{displayValue:Rt,exportValue:wt}=Et,Mt=document.createElement("option");Mt.textContent=Rt,Mt.value=wt,G.append(Mt)}G.options.length>0&&(G.options[0].selected=!0),v.setValue(A,{value:et(!0),items:At(ht)}),ot=et(!1)},indices(ht){const yt=new Set(ht.detail.indices);for(const Et of ht.target.options)Et.selected=yt.has(Et.index);v.setValue(A,{value:et(!0)}),ot=et(!1)},editable(ht){ht.target.disabled=!ht.detail.editable}};this._dispatchEventFromSandbox(dt,ct)}),G.addEventListener("input",ct=>{const dt=et(!0);v.setValue(A,{value:dt}),ct.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:ot,changeEx:dt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(G,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ct=>ct.target.value)):G.addEventListener("input",function(ct){v.setValue(A,{value:et(!0)})}),this.data.combo&&this._setTextStyle(G),this._setBackgroundColor(G),this._setDefaultPropertiesFromJS(G),this.container.append(G),this.container}}class Y extends p{constructor(v){const{data:A,elements:k}=v;super(v,{isRenderable:p._hasPopupData(A)}),this.elements=k}render(){this.container.classList.add("popupAnnotation");const v=new q({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),A=[];for(const k of this.elements)k.popup=v,A.push(k.data.id),k.addHighlightArea();return this.container.setAttribute("aria-controls",A.map(k=>`${i.AnnotationPrefix}${k}`).join(",")),this.container}}class q{#t=null;#e=this.#u.bind(this);#n=this.#_.bind(this);#s=this.#S.bind(this);#o=this.#x.bind(this);#r=null;#a=null;#l=null;#c=null;#i=null;#f=null;#d=!1;#h=null;#p=null;#y=null;#m=null;#g=!1;constructor({container:v,color:A,elements:k,titleObj:G,modificationDate:V,contentsObj:Q,richText:et,parent:ot,rect:At,parentRect:ct,open:dt}){this.#a=v,this.#m=G,this.#l=Q,this.#y=et,this.#i=ot,this.#r=A,this.#p=At,this.#f=ct,this.#c=k;const ht=h.PDFDateString.toDateObject(V);ht&&(this.#t=ot.l10n.get("annotation_date_string",{date:ht.toLocaleDateString(),time:ht.toLocaleTimeString()})),this.trigger=k.flatMap(yt=>yt.getElementsToTriggerPopup());for(const yt of this.trigger)yt.addEventListener("click",this.#o),yt.addEventListener("mouseenter",this.#s),yt.addEventListener("mouseleave",this.#n),yt.classList.add("popupTriggerArea");for(const yt of k)yt.container?.addEventListener("keydown",this.#e);this.#a.hidden=!0,dt&&this.#x()}render(){if(this.#h)return;const{page:{view:v},viewport:{rawDims:{pageWidth:A,pageHeight:k,pageX:G,pageY:V}}}=this.#i,Q=this.#h=document.createElement("div");if(Q.className="popup",this.#r){const Dt=Q.style.outlineColor=i.Util.makeHexColor(...this.#r);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Q.style.backgroundColor=`color-mix(in srgb, ${Dt} 30%, white)`:Q.style.backgroundColor=i.Util.makeHexColor(...this.#r.map($t=>Math.floor(.7*(255-$t)+$t)))}const et=document.createElement("span");et.className="header";const ot=document.createElement("h1");if(et.append(ot),{dir:ot.dir,str:ot.textContent}=this.#m,Q.append(et),this.#t){const Dt=document.createElement("span");Dt.classList.add("popupDate"),this.#t.then(Ft=>{Dt.textContent=Ft}),et.append(Dt)}const At=this.#l,ct=this.#y;if(ct?.str&&(!At?.str||At.str===ct.str))C.XfaLayer.render({xfaHtml:ct.html,intent:"richText",div:Q}),Q.lastChild.classList.add("richText","popupContent");else{const Dt=this._formatContents(At);Q.append(Dt)}let dt=!!this.#f,ht=dt?this.#f:this.#p;for(const Dt of this.#c)if(!ht||i.Util.intersect(Dt.data.rect,ht)!==null){ht=Dt.data.rect,dt=!0;break}const yt=i.Util.normalizeRect([ht[0],v[3]-ht[1]+v[1],ht[2],v[3]-ht[3]+v[1]]),Rt=dt?ht[2]-ht[0]+5:0,wt=yt[0]+Rt,Mt=yt[1],{style:kt}=this.#a;kt.left=`${100*(wt-G)/A}%`,kt.top=`${100*(Mt-V)/k}%`,this.#a.append(Q)}_formatContents({str:v,dir:A}){const k=document.createElement("p");k.classList.add("popupContent"),k.dir=A;const G=v.split(/(?:\r\n?|\n)/);for(let V=0,Q=G.length;V<Q;++V){const et=G[V];k.append(document.createTextNode(et)),V<Q-1&&k.append(document.createElement("br"))}return k}#u(v){v.altKey||v.shiftKey||v.ctrlKey||v.metaKey||(v.key==="Enter"||v.key==="Escape"&&this.#d)&&this.#x()}#x(){this.#d=!this.#d,this.#d?(this.#S(),this.#a.addEventListener("click",this.#o),this.#a.addEventListener("keydown",this.#e)):(this.#_(),this.#a.removeEventListener("click",this.#o),this.#a.removeEventListener("keydown",this.#e))}#S(){this.#h||this.render(),this.isVisible?this.#d&&this.#a.classList.add("focused"):(this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#_(){this.#a.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#g=this.isVisible,this.#g&&(this.#a.hidden=!0)}maybeShow(){this.#g&&(this.#g=!1,this.#a.hidden=!1)}get isVisible(){return this.#a.hidden===!1}}class K extends p{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0}),this.textContent=v.data.textContent,this.textPosition=v.data.textPosition,this.annotationEditorType=i.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const v=document.createElement("div");v.classList.add("annotationTextContent"),v.setAttribute("role","comment");for(const A of this.textContent){const k=document.createElement("span");k.textContent=A,v.append(k)}this.container.append(v)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}a.FreeTextAnnotationElement=K;class Z extends p{#t=null;constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const v=this.data,{width:A,height:k}=m(v.rect),G=this.svgFactory.create(A,k,!0),V=this.#t=this.svgFactory.createElement("svg:line");return V.setAttribute("x1",v.rect[2]-v.lineCoordinates[0]),V.setAttribute("y1",v.rect[3]-v.lineCoordinates[1]),V.setAttribute("x2",v.rect[2]-v.lineCoordinates[2]),V.setAttribute("y2",v.rect[3]-v.lineCoordinates[3]),V.setAttribute("stroke-width",v.borderStyle.width||1),V.setAttribute("stroke","transparent"),V.setAttribute("fill","transparent"),G.append(V),this.container.append(G),!v.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class it extends p{#t=null;constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const v=this.data,{width:A,height:k}=m(v.rect),G=this.svgFactory.create(A,k,!0),V=v.borderStyle.width,Q=this.#t=this.svgFactory.createElement("svg:rect");return Q.setAttribute("x",V/2),Q.setAttribute("y",V/2),Q.setAttribute("width",A-V),Q.setAttribute("height",k-V),Q.setAttribute("stroke-width",V||1),Q.setAttribute("stroke","transparent"),Q.setAttribute("fill","transparent"),G.append(Q),this.container.append(G),!v.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class nt extends p{#t=null;constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const v=this.data,{width:A,height:k}=m(v.rect),G=this.svgFactory.create(A,k,!0),V=v.borderStyle.width,Q=this.#t=this.svgFactory.createElement("svg:ellipse");return Q.setAttribute("cx",A/2),Q.setAttribute("cy",k/2),Q.setAttribute("rx",A/2-V/2),Q.setAttribute("ry",k/2-V/2),Q.setAttribute("stroke-width",V||1),Q.setAttribute("stroke","transparent"),Q.setAttribute("fill","transparent"),G.append(Q),this.container.append(G),!v.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class at extends p{#t=null;constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const v=this.data,{width:A,height:k}=m(v.rect),G=this.svgFactory.create(A,k,!0);let V=[];for(const et of v.vertices){const ot=et.x-v.rect[0],At=v.rect[3]-et.y;V.push(ot+","+At)}V=V.join(" ");const Q=this.#t=this.svgFactory.createElement(this.svgElementName);return Q.setAttribute("points",V),Q.setAttribute("stroke-width",v.borderStyle.width||1),Q.setAttribute("stroke","transparent"),Q.setAttribute("fill","transparent"),G.append(Q),this.container.append(G),!v.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class pt extends at{constructor(v){super(v),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class W extends p{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class F extends p{#t=[];constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=i.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const v=this.data,{width:A,height:k}=m(v.rect),G=this.svgFactory.create(A,k,!0);for(const V of v.inkLists){let Q=[];for(const ot of V){const At=ot.x-v.rect[0],ct=v.rect[3]-ot.y;Q.push(`${At},${ct}`)}Q=Q.join(" ");const et=this.svgFactory.createElement(this.svgElementName);this.#t.push(et),et.setAttribute("points",Q),et.setAttribute("stroke-width",v.borderStyle.width||1),et.setAttribute("stroke","transparent"),et.setAttribute("fill","transparent"),!v.popupRef&&this.hasPopupData&&this._createPopup(),G.append(et)}return this.container.append(G),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}a.InkAnnotationElement=F;class O extends p{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class T extends p{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class g extends p{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class w extends p{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class I extends p{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}a.StampAnnotationElement=I;class B extends p{#t=null;constructor(v){super(v,{isRenderable:!0});const{filename:A,content:k}=this.data.file;this.filename=(0,h.getFilenameFromUrl)(A,!0),this.content=k,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:A,content:k})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:v,data:A}=this;let k;A.hasAppearance||A.fillAlpha===0?k=document.createElement("div"):(k=document.createElement("img"),k.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(A.name)?"paperclip":"pushpin"}.svg`,A.fillAlpha&&A.fillAlpha<1&&(k.style=`filter: opacity(${Math.round(A.fillAlpha*100)}%);`)),k.addEventListener("dblclick",this.#e.bind(this)),this.#t=k;const{isMac:G}=i.FeatureTest.platform;return v.addEventListener("keydown",V=>{V.key==="Enter"&&(G?V.metaKey:V.ctrlKey)&&this.#e()}),!A.popupRef&&this.hasPopupData?this._createPopup():k.classList.add("popupTriggerArea"),v.append(k),v}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class X{#t=null;#e=null;#n=new Map;constructor({div:v,accessibilityManager:A,annotationCanvasMap:k,l10n:G,page:V,viewport:Q}){this.div=v,this.#t=A,this.#e=k,this.l10n=G,this.page=V,this.viewport=Q,this.zIndex=0,this.l10n||=M.NullL10n}#s(v,A){const k=v.firstChild||v;k.id=`${i.AnnotationPrefix}${A}`,this.div.append(v),this.#t?.moveElementInDOM(this.div,v,k,!1)}async render(v){const{annotations:A}=v,k=this.div;(0,h.setLayerDimensions)(k,this.viewport);const G=new Map,V={data:null,layer:k,linkService:v.linkService,downloadManager:v.downloadManager,imageResourcesPath:v.imageResourcesPath||"",renderForms:v.renderForms!==!1,svgFactory:new h.DOMSVGFactory,annotationStorage:v.annotationStorage||new E.AnnotationStorage,enableScripting:v.enableScripting===!0,hasJSActions:v.hasJSActions,fieldObjects:v.fieldObjects,parent:this,elements:null};for(const Q of A){if(Q.noHTML)continue;const et=Q.annotationType===i.AnnotationType.POPUP;if(et){const ct=G.get(Q.id);if(!ct)continue;V.elements=ct}else{const{width:ct,height:dt}=m(Q.rect);if(ct<=0||dt<=0)continue}V.data=Q;const ot=x.create(V);if(!ot.isRenderable)continue;if(!et&&Q.popupRef){const ct=G.get(Q.popupRef);ct?ct.push(ot):G.set(Q.popupRef,[ot])}ot.annotationEditorType>0&&this.#n.set(ot.data.id,ot);const At=ot.render();Q.hidden&&(At.style.visibility="hidden"),this.#s(At,Q.id)}this.#o(),await this.l10n.translate(k)}update({viewport:v}){const A=this.div;this.viewport=v,(0,h.setLayerDimensions)(A,{rotation:v.rotation}),this.#o(),A.hidden=!1}#o(){if(!this.#e)return;const v=this.div;for(const[A,k]of this.#e){const G=v.querySelector(`[data-annotation-id="${A}"]`);if(!G)continue;const{firstChild:V}=G;V?V.nodeName==="CANVAS"?V.replaceWith(k):V.before(k):G.append(k)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(v){return this.#n.get(v)}}a.AnnotationLayer=X}),((y,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorConverters=void 0;function d(E){return Math.floor(Math.max(0,Math.min(1,E))*255).toString(16).padStart(2,"0")}function i(E){return Math.max(0,Math.min(255,255*E))}class h{static CMYK_G([R,M,C,u]){return["G",1-Math.min(1,.3*R+.59*C+.11*M+u)]}static G_CMYK([R]){return["CMYK",0,0,0,1-R]}static G_RGB([R]){return["RGB",R,R,R]}static G_rgb([R]){return R=i(R),[R,R,R]}static G_HTML([R]){const M=d(R);return`#${M}${M}${M}`}static RGB_G([R,M,C]){return["G",.3*R+.59*M+.11*C]}static RGB_rgb(R){return R.map(i)}static RGB_HTML(R){return`#${R.map(d).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([R,M,C,u]){return["RGB",1-Math.min(1,R+u),1-Math.min(1,C+u),1-Math.min(1,M+u)]}static CMYK_rgb([R,M,C,u]){return[i(1-Math.min(1,R+u)),i(1-Math.min(1,C+u)),i(1-Math.min(1,M+u))]}static CMYK_HTML(R){const M=this.CMYK_RGB(R).slice(1);return this.RGB_HTML(M)}static RGB_CMYK([R,M,C]){const u=1-R,l=1-M,c=1-C,m=Math.min(u,l,c);return["CMYK",u,l,c,m]}}a.ColorConverters=h}),((y,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NullL10n=void 0,a.getL10nFallback=i;const d={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};d.print_progress_percent="{{progress}}%";function i(R,M){switch(R){case"find_match_count":R=`find_match_count[${M.total===1?"one":"other"}]`;break;case"find_match_count_limit":R=`find_match_count_limit[${M.limit===1?"one":"other"}]`;break}return d[R]||""}function h(R,M){return M?R.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(C,u)=>u in M?M[u]:"{{"+u+"}}"):R}const E={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(R,M=null,C=i(R,M)){return h(C,M)},async translate(R){}};a.NullL10n=E}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.XfaLayer=void 0;var i=d(25);class h{static setupStorage(R,M,C,u,l){const c=u.getValue(M,{value:null});switch(C.name){case"textarea":if(c.value!==null&&(R.textContent=c.value),l==="print")break;R.addEventListener("input",m=>{u.setValue(M,{value:m.target.value})});break;case"input":if(C.attributes.type==="radio"||C.attributes.type==="checkbox"){if(c.value===C.attributes.xfaOn?R.setAttribute("checked",!0):c.value===C.attributes.xfaOff&&R.removeAttribute("checked"),l==="print")break;R.addEventListener("change",m=>{u.setValue(M,{value:m.target.checked?m.target.getAttribute("xfaOn"):m.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&R.setAttribute("value",c.value),l==="print")break;R.addEventListener("input",m=>{u.setValue(M,{value:m.target.value})})}break;case"select":if(c.value!==null){R.setAttribute("value",c.value);for(const m of C.children)m.attributes.value===c.value?m.attributes.selected=!0:m.attributes.hasOwnProperty("selected")&&delete m.attributes.selected}R.addEventListener("input",m=>{const x=m.target.options,p=x.selectedIndex===-1?"":x[x.selectedIndex].value;u.setValue(M,{value:p})});break}}static setAttributes({html:R,element:M,storage:C=null,intent:u,linkService:l}){const{attributes:c}=M,m=R instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${u}`);for(const[x,p]of Object.entries(c))if(p!=null)switch(x){case"class":p.length&&R.setAttribute(x,p.join(" "));break;case"dataId":break;case"id":R.setAttribute("data-element-id",p);break;case"style":Object.assign(R.style,p);break;case"textContent":R.textContent=p;break;default:(!m||x!=="href"&&x!=="newWindow")&&R.setAttribute(x,p)}m&&l.addLinkAttributes(R,c.href,c.newWindow),C&&c.dataId&&this.setupStorage(R,c.dataId,M,C)}static render(R){const M=R.annotationStorage,C=R.linkService,u=R.xfaHtml,l=R.intent||"display",c=document.createElement(u.name);u.attributes&&this.setAttributes({html:c,element:u,intent:l,linkService:C});const m=[[u,-1,c]],x=R.div;if(x.append(c),R.viewport){const _=`matrix(${R.viewport.transform.join(",")})`;x.style.transform=_}l!=="richText"&&x.setAttribute("class","xfaLayer xfaFont");const p=[];for(;m.length>0;){const[_,D,b]=m.at(-1);if(D+1===_.children.length){m.pop();continue}const L=_.children[++m.at(-1)[1]];if(L===null)continue;const{name:N}=L;if(N==="#text"){const S=document.createTextNode(L.value);p.push(S),b.append(S);continue}const U=L?.attributes?.xmlns?document.createElementNS(L.attributes.xmlns,N):document.createElement(N);if(b.append(U),L.attributes&&this.setAttributes({html:U,element:L,storage:M,intent:l,linkService:C}),L.children&&L.children.length>0)m.push([L,-1,U]);else if(L.value){const S=document.createTextNode(L.value);i.XfaText.shouldBuildText(N)&&p.push(S),U.append(S)}}for(const _ of x.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:p}}static update(R){const M=`matrix(${R.viewport.transform.join(",")})`;R.div.style.transform=M,R.div.hidden=!1}}a.XfaLayer=h}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.InkEditor=void 0;var i=d(1),h=d(4),E=d(29),R=d(6),M=d(5);class C extends h.AnnotationEditor{#t=0;#e=0;#n=this.canvasPointermove.bind(this);#s=this.canvasPointerleave.bind(this);#o=this.canvasPointerup.bind(this);#r=this.canvasPointerdown.bind(this);#a=new Path2D;#l=!1;#c=!1;#i=!1;#f=null;#d=0;#h=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(l){super({...l,name:"inkEditor"}),this.color=l.color||null,this.thickness=l.thickness||null,this.opacity=l.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(l){h.AnnotationEditor.initialize(l,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(l,c){switch(l){case i.AnnotationEditorParamsType.INK_THICKNESS:C._defaultThickness=c;break;case i.AnnotationEditorParamsType.INK_COLOR:C._defaultColor=c;break;case i.AnnotationEditorParamsType.INK_OPACITY:C._defaultOpacity=c/100;break}}updateParams(l,c){switch(l){case i.AnnotationEditorParamsType.INK_THICKNESS:this.#y(c);break;case i.AnnotationEditorParamsType.INK_COLOR:this.#m(c);break;case i.AnnotationEditorParamsType.INK_OPACITY:this.#g(c);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,C._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,C._defaultColor||h.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(C._defaultOpacity*100)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||C._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||C._defaultColor||h.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??C._defaultOpacity))]]}#y(l){const c=this.thickness;this.addCommands({cmd:()=>{this.thickness=l,this.#T()},undo:()=>{this.thickness=c,this.#T()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(l){const c=this.color;this.addCommands({cmd:()=>{this.color=l,this.#v()},undo:()=>{this.color=c,this.#v()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(l){l/=100;const c=this.opacity;this.addCommands({cmd:()=>{this.opacity=l,this.#v()},undo:()=>{this.opacity=c,this.#v()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#M(),this.#D()),this.isAttachedToDOM||(this.parent.add(this),this.#b()),this.#T()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(l){!this.parent&&l?this._uiManager.removeShouldRescale(this):this.parent&&l===null&&this._uiManager.addShouldRescale(this),super.setParent(l)}onScaleChanging(){const[l,c]=this.parentDimensions,m=this.width*l,x=this.height*c;this.setDimensions(m,x)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#r))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#r))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#u(){const{parentRotation:l,parentDimensions:[c,m]}=this;switch(l){case 90:return[0,m,m,c];case 180:return[c,m,c,m];case 270:return[c,0,m,c];default:return[0,0,c,m]}}#x(){const{ctx:l,color:c,opacity:m,thickness:x,parentScale:p,scaleFactor:_}=this;l.lineWidth=x*p/_,l.lineCap="round",l.lineJoin="round",l.miterLimit=10,l.strokeStyle=`${c}${(0,M.opacityToHex)(m)}`}#S(l,c){this.canvas.addEventListener("contextmenu",R.noContextMenu),this.canvas.addEventListener("pointerleave",this.#s),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#o),this.canvas.removeEventListener("pointerdown",this.#r),this.isEditing=!0,this.#i||(this.#i=!0,this.#b(),this.thickness||=C._defaultThickness,this.color||=C._defaultColor||h.AnnotationEditor._defaultLineColor,this.opacity??=C._defaultOpacity),this.currentPath.push([l,c]),this.#c=!1,this.#x(),this.#p=()=>{this.#j(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#_(l,c){const[m,x]=this.currentPath.at(-1);if(this.currentPath.length>1&&l===m&&c===x)return;const p=this.currentPath;let _=this.#a;if(p.push([l,c]),this.#c=!0,p.length<=2){_.moveTo(...p[0]),_.lineTo(l,c);return}p.length===3&&(this.#a=_=new Path2D,_.moveTo(...p[0])),this.#L(_,...p.at(-3),...p.at(-2),l,c)}#R(){if(this.currentPath.length===0)return;const l=this.currentPath.at(-1);this.#a.lineTo(...l)}#C(l,c){this.#p=null,l=Math.min(Math.max(l,0),this.canvas.width),c=Math.min(Math.max(c,0),this.canvas.height),this.#_(l,c),this.#R();let m;if(this.currentPath.length!==1)m=this.#N();else{const b=[l,c];m=[[b,b.slice(),b.slice(),b]]}const x=this.#a,p=this.currentPath;this.currentPath=[],this.#a=new Path2D;const _=()=>{this.allRawPaths.push(p),this.paths.push(m),this.bezierPath2D.push(x),this.rebuild()},D=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#M(),this.#D()),this.#T())};this.addCommands({cmd:_,undo:D,mustExec:!0})}#j(){if(!this.#c)return;this.#c=!1;const l=Math.ceil(this.thickness*this.parentScale),c=this.currentPath.slice(-3),m=c.map(_=>_[0]),x=c.map(_=>_[1]);Math.min(...m)-l,Math.max(...m)+l,Math.min(...x)-l,Math.max(...x)+l;const{ctx:p}=this;p.save(),p.clearRect(0,0,this.canvas.width,this.canvas.height);for(const _ of this.bezierPath2D)p.stroke(_);p.stroke(this.#a),p.restore()}#L(l,c,m,x,p,_,D){const b=(c+x)/2,L=(m+p)/2,N=(x+_)/2,U=(p+D)/2;l.bezierCurveTo(b+2*(x-b)/3,L+2*(p-L)/3,N+2*(x-N)/3,U+2*(p-U)/3,N,U)}#N(){const l=this.currentPath;if(l.length<=2)return[[l[0],l[0],l.at(-1),l.at(-1)]];const c=[];let m,[x,p]=l[0];for(m=1;m<l.length-2;m++){const[S,P]=l[m],[z,Y]=l[m+1],q=(S+z)/2,K=(P+Y)/2,Z=[x+2*(S-x)/3,p+2*(P-p)/3],it=[q+2*(S-q)/3,K+2*(P-K)/3];c.push([[x,p],Z,it,[q,K]]),[x,p]=[q,K]}const[_,D]=l[m],[b,L]=l[m+1],N=[x+2*(_-x)/3,p+2*(D-p)/3],U=[b+2*(_-b)/3,L+2*(D-L)/3];return c.push([[x,p],N,U,[b,L]]),c}#v(){if(this.isEmpty()){this.#A();return}this.#x();const{canvas:l,ctx:c}=this;c.setTransform(1,0,0,1,0,0),c.clearRect(0,0,l.width,l.height),this.#A();for(const m of this.bezierPath2D)c.stroke(m)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#T(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(l){this._focusEventsAllowed&&(super.focusin(l),this.enableEditMode())}canvasPointerdown(l){l.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),l.preventDefault(),l.type!=="mouse"&&this.div.focus(),this.#S(l.offsetX,l.offsetY))}canvasPointermove(l){l.preventDefault(),this.#_(l.offsetX,l.offsetY)}canvasPointerup(l){l.preventDefault(),this.#k(l)}canvasPointerleave(l){this.#k(l)}#k(l){this.canvas.removeEventListener("pointerleave",this.#s),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#o),this.canvas.addEventListener("pointerdown",this.#r),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",R.noContextMenu)},10),this.#C(l.offsetX,l.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#M(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",h.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(l=>this.canvas?.setAttribute("aria-label",l)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#D(){this.#f=new ResizeObserver(l=>{const c=l[0].contentRect;c.width&&c.height&&this.setDimensions(c.width,c.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let l,c;this.width&&(l=this.x,c=this.y),super.render(),h.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(D=>this.div?.setAttribute("aria-label",D));const[m,x,p,_]=this.#u();if(this.setAt(m,x,0,0),this.setDims(p,_),this.#M(),this.width){const[D,b]=this.parentDimensions;this.setAspectRatio(this.width*D,this.height*b),this.setAt(l*D,c*b,this.width*D,this.height*b),this.#i=!0,this.#b(),this.setDims(this.width*D,this.height*b),this.#v(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#D(),this.div}#b(){if(!this.#i)return;const[l,c]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*l),this.canvas.height=Math.ceil(this.height*c),this.#A()}setDimensions(l,c){const m=Math.round(l),x=Math.round(c);if(this.#d===m&&this.#h===x)return;this.#d=m,this.#h=x,this.canvas.style.visibility="hidden";const[p,_]=this.parentDimensions;this.width=l/p,this.height=c/_,this.fixAndSetPosition(),this.#l&&this.#w(l,c),this.#b(),this.#v(),this.canvas.style.visibility="visible",this.fixDims()}#w(l,c){const m=this.#O(),x=(l-m)/this.#e,p=(c-m)/this.#t;this.scaleFactor=Math.min(x,p)}#A(){const l=this.#O()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+l,this.translationY*this.scaleFactor+l)}static#F(l){const c=new Path2D;for(let m=0,x=l.length;m<x;m++){const[p,_,D,b]=l[m];m===0&&c.moveTo(...p),c.bezierCurveTo(_[0],_[1],D[0],D[1],b[0],b[1])}return c}static#U(l,c,m){const[x,p,_,D]=c;switch(m){case 0:for(let b=0,L=l.length;b<L;b+=2)l[b]+=x,l[b+1]=D-l[b+1];break;case 90:for(let b=0,L=l.length;b<L;b+=2){const N=l[b];l[b]=l[b+1]+x,l[b+1]=N+p}break;case 180:for(let b=0,L=l.length;b<L;b+=2)l[b]=_-l[b],l[b+1]+=p;break;case 270:for(let b=0,L=l.length;b<L;b+=2){const N=l[b];l[b]=_-l[b+1],l[b+1]=D-N}break;default:throw new Error("Invalid rotation")}return l}static#I(l,c,m){const[x,p,_,D]=c;switch(m){case 0:for(let b=0,L=l.length;b<L;b+=2)l[b]-=x,l[b+1]=D-l[b+1];break;case 90:for(let b=0,L=l.length;b<L;b+=2){const N=l[b];l[b]=l[b+1]-p,l[b+1]=N-x}break;case 180:for(let b=0,L=l.length;b<L;b+=2)l[b]=_-l[b],l[b+1]-=p;break;case 270:for(let b=0,L=l.length;b<L;b+=2){const N=l[b];l[b]=D-l[b+1],l[b+1]=_-N}break;default:throw new Error("Invalid rotation")}return l}#B(l,c,m,x){const p=[],_=this.thickness/2,D=l*c+_,b=l*m+_;for(const L of this.paths){const N=[],U=[];for(let S=0,P=L.length;S<P;S++){const[z,Y,q,K]=L[S],Z=l*z[0]+D,it=l*z[1]+b,nt=l*Y[0]+D,at=l*Y[1]+b,pt=l*q[0]+D,W=l*q[1]+b,F=l*K[0]+D,O=l*K[1]+b;S===0&&(N.push(Z,it),U.push(Z,it)),N.push(nt,at,pt,W,F,O),U.push(nt,at),S===P-1&&U.push(F,O)}p.push({bezier:C.#U(N,x,this.rotation),points:C.#U(U,x,this.rotation)})}return p}#P(){let l=1/0,c=-1/0,m=1/0,x=-1/0;for(const p of this.paths)for(const[_,D,b,L]of p){const N=i.Util.bezierBoundingBox(..._,...D,...b,...L);l=Math.min(l,N[0]),m=Math.min(m,N[1]),c=Math.max(c,N[2]),x=Math.max(x,N[3])}return[l,m,c,x]}#O(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#T(l=!1){if(this.isEmpty())return;if(!this.#l){this.#v();return}const c=this.#P(),m=this.#O();this.#e=Math.max(h.AnnotationEditor.MIN_SIZE,c[2]-c[0]),this.#t=Math.max(h.AnnotationEditor.MIN_SIZE,c[3]-c[1]);const x=Math.ceil(m+this.#e*this.scaleFactor),p=Math.ceil(m+this.#t*this.scaleFactor),[_,D]=this.parentDimensions;this.width=x/_,this.height=p/D,this.setAspectRatio(x,p);const b=this.translationX,L=this.translationY;this.translationX=-c[0],this.translationY=-c[1],this.#b(),this.#v(),this.#d=x,this.#h=p,this.setDims(x,p);const N=l?m/this.scaleFactor/2:0;this.translate(b-this.translationX-N,L-this.translationY-N)}static deserialize(l,c,m){if(l instanceof E.InkAnnotationElement)return null;const x=super.deserialize(l,c,m);x.thickness=l.thickness,x.color=i.Util.makeHexColor(...l.color),x.opacity=l.opacity;const[p,_]=x.pageDimensions,D=x.width*p,b=x.height*_,L=x.parentScale,N=l.thickness/2;x.#l=!0,x.#d=Math.round(D),x.#h=Math.round(b);const{paths:U,rect:S,rotation:P}=l;for(let{bezier:Y}of U){Y=C.#I(Y,S,P);const q=[];x.paths.push(q);let K=L*(Y[0]-N),Z=L*(Y[1]-N);for(let nt=2,at=Y.length;nt<at;nt+=6){const pt=L*(Y[nt]-N),W=L*(Y[nt+1]-N),F=L*(Y[nt+2]-N),O=L*(Y[nt+3]-N),T=L*(Y[nt+4]-N),g=L*(Y[nt+5]-N);q.push([[K,Z],[pt,W],[F,O],[T,g]]),K=T,Z=g}const it=this.#F(q);x.bezierPath2D.push(it)}const z=x.#P();return x.#e=Math.max(h.AnnotationEditor.MIN_SIZE,z[2]-z[0]),x.#t=Math.max(h.AnnotationEditor.MIN_SIZE,z[3]-z[1]),x.#w(D,b),x}serialize(){if(this.isEmpty())return null;const l=this.getRect(0,0),c=h.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:c,thickness:this.thickness,opacity:this.opacity,paths:this.#B(this.scaleFactor/this.parentScale,this.translationX,this.translationY,l),pageIndex:this.pageIndex,rect:l,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}a.InkEditor=C}),((y,a,d)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.StampEditor=void 0;var i=d(1),h=d(4),E=d(6),R=d(29);class M extends h.AnnotationEditor{#t=null;#e=null;#n=null;#s=null;#o=null;#r=null;#a=null;#l=null;#c=!1;#i=!1;static _type="stamp";constructor(u){super({...u,name:"stampEditor"}),this.#s=u.bitmapUrl,this.#o=u.bitmapFile}static initialize(u){h.AnnotationEditor.initialize(u)}static get supportedTypes(){const u=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,i.shadow)(this,"supportedTypes",u.map(l=>`image/${l}`))}static get supportedTypesStr(){return(0,i.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(u){return this.supportedTypes.includes(u)}static paste(u,l){l.pasteEditor(i.AnnotationEditorType.STAMP,{bitmapFile:u.getAsFile()})}#f(u,l=!1){if(!u){this.remove();return}this.#t=u.bitmap,l||(this.#e=u.id,this.#c=u.isSvg),this.#p()}#d(){this.#n=null,this._uiManager.enableWaiting(!1),this.#r&&this.div.focus()}#h(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(l=>this.#f(l,!0)).finally(()=>this.#d());return}if(this.#s){const l=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(l).then(c=>this.#f(c)).finally(()=>this.#d());return}if(this.#o){const l=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(l).then(c=>this.#f(c)).finally(()=>this.#d());return}const u=document.createElement("input");u.type="file",u.accept=M.supportedTypesStr,this.#n=new Promise(l=>{u.addEventListener("change",async()=>{if(!u.files||u.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const c=await this._uiManager.imageManager.getFromFile(u.files[0]);this.#f(c)}l()}),u.addEventListener("cancel",()=>{this.remove(),l()})}).finally(()=>this.#d()),u.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#r?.remove(),this.#r=null,this.#a?.disconnect(),this.#a=null),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#h();return}super.rebuild(),this.div!==null&&(this.#e&&this.#h(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#s||this.#o)}get isResizable(){return!0}render(){if(this.div)return this.div;let u,l;if(this.width&&(u=this.x,l=this.y),super.render(),this.div.hidden=!0,this.#t?this.#p():this.#h(),this.width){const[c,m]=this.parentDimensions;this.setAt(u*c,l*m,this.width*c,this.height*m)}return this.div}#p(){const{div:u}=this;let{width:l,height:c}=this.#t;const[m,x]=this.pageDimensions,p=.75;if(this.width)l=this.width*m,c=this.height*x;else if(l>p*m||c>p*x){const L=Math.min(p*m/l,p*x/c);l*=L,c*=L}const[_,D]=this.parentDimensions;this.setDims(l*_/m,c*D/x),this._uiManager.enableWaiting(!1);const b=this.#r=document.createElement("canvas");u.append(b),u.hidden=!1,this.#g(l,c),this.#x(),this.#i||(this.parent.addUndoableEditor(this),this.#i=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#y(u,l){const[c,m]=this.parentDimensions;this.width=u/c,this.height=l/m,this.setDims(u,l),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);const x=200;this.#l=setTimeout(()=>{this.#l=null,this.#g(u,l)},x)}#m(u,l){const{width:c,height:m}=this.#t;let x=c,p=m,_=this.#t;for(;x>2*u||p>2*l;){const D=x,b=p;x>2*u&&(x=x>=16384?Math.floor(x/2)-1:Math.ceil(x/2)),p>2*l&&(p=p>=16384?Math.floor(p/2)-1:Math.ceil(p/2));const L=new OffscreenCanvas(x,p);L.getContext("2d").drawImage(_,0,0,D,b,0,0,x,p),_=L.transferToImageBitmap()}return _}#g(u,l){u=Math.ceil(u),l=Math.ceil(l);const c=this.#r;if(!c||c.width===u&&c.height===l)return;c.width=u,c.height=l;const m=this.#c?this.#t:this.#m(u,l),x=c.getContext("2d");x.filter=this._uiManager.hcmFilter,x.drawImage(m,0,0,m.width,m.height,0,0,u,l)}#u(u){if(u){if(this.#c){const m=this._uiManager.imageManager.getSvgUrl(this.#e);if(m)return m}const l=document.createElement("canvas");return{width:l.width,height:l.height}=this.#t,l.getContext("2d").drawImage(this.#t,0,0),l.toDataURL()}if(this.#c){const[l,c]=this.pageDimensions,m=Math.round(this.width*l*E.PixelsPerInch.PDF_TO_CSS_UNITS),x=Math.round(this.height*c*E.PixelsPerInch.PDF_TO_CSS_UNITS),p=new OffscreenCanvas(m,x);return p.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,m,x),p.transferToImageBitmap()}return structuredClone(this.#t)}#x(){this.#a=new ResizeObserver(u=>{const l=u[0].contentRect;l.width&&l.height&&this.#y(l.width,l.height)}),this.#a.observe(this.div)}static deserialize(u,l,c){if(u instanceof R.StampAnnotationElement)return null;const m=super.deserialize(u,l,c),{rect:x,bitmapUrl:p,bitmapId:_,isSvg:D,accessibilityData:b}=u;_&&c.imageManager.isValidId(_)?m.#e=_:m.#s=p,m.#c=D;const[L,N]=m.pageDimensions;return m.width=(x[2]-x[0])/L,m.height=(x[3]-x[1])/N,b&&(m.altTextData=b),m}serialize(u=!1,l=null){if(this.isEmpty())return null;const c={annotationType:i.AnnotationEditorType.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(u)return c.bitmapUrl=this.#u(!0),c.accessibilityData=this.altTextData,c;const{decorative:m,altText:x}=this.altTextData;if(!m&&x&&(c.accessibilityData={type:"Figure",alt:x}),l===null)return c;l.stamps||=new Map;const p=this.#c?(c.rect[2]-c.rect[0])*(c.rect[3]-c.rect[1]):null;if(!l.stamps.has(this.#e))l.stamps.set(this.#e,{area:p,serialized:c}),c.bitmap=this.#u(!1);else if(this.#c){const _=l.stamps.get(this.#e);p>_.area&&(_.area=p,_.serialized.bitmap.close(),_.serialized.bitmap=this.#u(!1))}return c}}a.StampEditor=M})],__webpack_module_cache__={};function __w_pdfjs_require__(y){var a=__webpack_module_cache__[y];if(a!==void 0)return a.exports;var d=__webpack_module_cache__[y]={exports:{}};return __webpack_modules__[y](d,d.exports,__w_pdfjs_require__),d.exports}var __webpack_exports__={};return(()=>{var y=__webpack_exports__;Object.defineProperty(y,"__esModule",{value:!0}),Object.defineProperty(y,"AbortException",{enumerable:!0,get:function(){return a.AbortException}}),Object.defineProperty(y,"AnnotationEditorLayer",{enumerable:!0,get:function(){return E.AnnotationEditorLayer}}),Object.defineProperty(y,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return a.AnnotationEditorParamsType}}),Object.defineProperty(y,"AnnotationEditorType",{enumerable:!0,get:function(){return a.AnnotationEditorType}}),Object.defineProperty(y,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return R.AnnotationEditorUIManager}}),Object.defineProperty(y,"AnnotationLayer",{enumerable:!0,get:function(){return M.AnnotationLayer}}),Object.defineProperty(y,"AnnotationMode",{enumerable:!0,get:function(){return a.AnnotationMode}}),Object.defineProperty(y,"CMapCompressionType",{enumerable:!0,get:function(){return a.CMapCompressionType}}),Object.defineProperty(y,"DOMSVGFactory",{enumerable:!0,get:function(){return i.DOMSVGFactory}}),Object.defineProperty(y,"FeatureTest",{enumerable:!0,get:function(){return a.FeatureTest}}),Object.defineProperty(y,"GlobalWorkerOptions",{enumerable:!0,get:function(){return C.GlobalWorkerOptions}}),Object.defineProperty(y,"ImageKind",{enumerable:!0,get:function(){return a.ImageKind}}),Object.defineProperty(y,"InvalidPDFException",{enumerable:!0,get:function(){return a.InvalidPDFException}}),Object.defineProperty(y,"MissingPDFException",{enumerable:!0,get:function(){return a.MissingPDFException}}),Object.defineProperty(y,"OPS",{enumerable:!0,get:function(){return a.OPS}}),Object.defineProperty(y,"PDFDataRangeTransport",{enumerable:!0,get:function(){return d.PDFDataRangeTransport}}),Object.defineProperty(y,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(y,"PDFWorker",{enumerable:!0,get:function(){return d.PDFWorker}}),Object.defineProperty(y,"PasswordResponses",{enumerable:!0,get:function(){return a.PasswordResponses}}),Object.defineProperty(y,"PermissionFlag",{enumerable:!0,get:function(){return a.PermissionFlag}}),Object.defineProperty(y,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(y,"PromiseCapability",{enumerable:!0,get:function(){return a.PromiseCapability}}),Object.defineProperty(y,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(y,"SVGGraphics",{enumerable:!0,get:function(){return d.SVGGraphics}}),Object.defineProperty(y,"UnexpectedResponseException",{enumerable:!0,get:function(){return a.UnexpectedResponseException}}),Object.defineProperty(y,"Util",{enumerable:!0,get:function(){return a.Util}}),Object.defineProperty(y,"VerbosityLevel",{enumerable:!0,get:function(){return a.VerbosityLevel}}),Object.defineProperty(y,"XfaLayer",{enumerable:!0,get:function(){return u.XfaLayer}}),Object.defineProperty(y,"build",{enumerable:!0,get:function(){return d.build}}),Object.defineProperty(y,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return a.createValidAbsoluteUrl}}),Object.defineProperty(y,"getDocument",{enumerable:!0,get:function(){return d.getDocument}}),Object.defineProperty(y,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(y,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(y,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(y,"isDataScheme",{enumerable:!0,get:function(){return i.isDataScheme}}),Object.defineProperty(y,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(y,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(y,"noContextMenu",{enumerable:!0,get:function(){return i.noContextMenu}}),Object.defineProperty(y,"normalizeUnicode",{enumerable:!0,get:function(){return a.normalizeUnicode}}),Object.defineProperty(y,"renderTextLayer",{enumerable:!0,get:function(){return h.renderTextLayer}}),Object.defineProperty(y,"setLayerDimensions",{enumerable:!0,get:function(){return i.setLayerDimensions}}),Object.defineProperty(y,"shadow",{enumerable:!0,get:function(){return a.shadow}}),Object.defineProperty(y,"updateTextLayer",{enumerable:!0,get:function(){return h.updateTextLayer}}),Object.defineProperty(y,"version",{enumerable:!0,get:function(){return d.version}});var a=__w_pdfjs_require__(1),d=__w_pdfjs_require__(2),i=__w_pdfjs_require__(6),h=__w_pdfjs_require__(26),E=__w_pdfjs_require__(27),R=__w_pdfjs_require__(5),M=__w_pdfjs_require__(29),C=__w_pdfjs_require__(14),u=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1)),pdf$1.exports}var pdfExports=requirePdf();const pdf=getDefaultExportFromCjs(pdfExports),pdfjs=pdf;var __spreadArray=function(y,a,d){if(d||arguments.length===2)for(var i=0,h=a.length,E;i<h;i++)(E||!(i in a))&&(E||(E=Array.prototype.slice.call(a,0,i)),E[i]=a[i]);return y.concat(E||Array.prototype.slice.call(a))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(y,a){var d={};return allEvents.forEach(function(i){var h=y[i];h&&(a?d[i]=(function(E){return h(E,a(i))}):d[i]=h)}),d}function makeCancellablePromise(y){var a=!1,d=new Promise(function(i,h){y.then(function(E){return!a&&i(E)}).catch(function(E){return!a&&h(E)})});return{promise:d,cancel:function(){a=!0}}}function r(y){var a,d,i="";if(typeof y=="string"||typeof y=="number")i+=y;else if(typeof y=="object")if(Array.isArray(y)){var h=y.length;for(a=0;a<h;a++)y[a]&&(d=r(y[a]))&&(i&&(i+=" "),i+=d)}else for(d in y)y[d]&&(i&&(i+=" "),i+=d);return i}function clsx(){for(var y,a,d=0,i="",h=arguments.length;d<h;d++)(y=arguments[d])&&(a=r(y))&&(i&&(i+=" "),i+=a);return i}var prefix="Invariant failed";function invariant(y,a){if(!y)throw new Error(prefix)}var warning_1,hasRequiredWarning;function requireWarning(){if(hasRequiredWarning)return warning_1;hasRequiredWarning=1;var y=function(){};return warning_1=y,warning_1}var warningExports=requireWarning();const warning=getDefaultExportFromCjs(warningExports);var has=Object.prototype.hasOwnProperty;function find(y,a,d){for(d of y.keys())if(dequal(d,a))return d}function dequal(y,a){var d,i,h;if(y===a)return!0;if(y&&a&&(d=y.constructor)===a.constructor){if(d===Date)return y.getTime()===a.getTime();if(d===RegExp)return y.toString()===a.toString();if(d===Array){if((i=y.length)===a.length)for(;i--&&dequal(y[i],a[i]););return i===-1}if(d===Set){if(y.size!==a.size)return!1;for(i of y)if(h=i,h&&typeof h=="object"&&(h=find(a,h),!h)||!a.has(h))return!1;return!0}if(d===Map){if(y.size!==a.size)return!1;for(i of y)if(h=i[0],h&&typeof h=="object"&&(h=find(a,h),!h)||!dequal(i[1],a.get(h)))return!1;return!0}if(d===ArrayBuffer)y=new Uint8Array(y),a=new Uint8Array(a);else if(d===DataView){if((i=y.byteLength)===a.byteLength)for(;i--&&y.getInt8(i)===a.getInt8(i););return i===-1}if(ArrayBuffer.isView(y)){if((i=y.byteLength)===a.byteLength)for(;i--&&y[i]===a[i];);return i===-1}if(!d||typeof y=="object"){i=0;for(d in y)if(has.call(y,d)&&++i&&!has.call(a,d)||!(d in a)||!dequal(y[d],a[d]))return!1;return Object.keys(a).length===i}}return y!==y&&a!==a}const DocumentContext=reactExports.createContext(null);function Message({children:y,type:a}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${a}`},y)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(a){this.pdfDocument=a}setViewer(a){this.pdfViewer=a}setExternalLinkRel(a){this.externalLinkRel=a}setExternalLinkTarget(a){this.externalLinkTarget=a}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(a){invariant(this.pdfViewer),this.pdfViewer.currentPageNumber=a}get rotation(){return 0}set rotation(a){}goToDestination(a){return new Promise(d=>{invariant(this.pdfDocument),invariant(a),typeof a=="string"?this.pdfDocument.getDestination(a).then(d):Array.isArray(a)?d(a):a.then(d)}).then(d=>{invariant(Array.isArray(d));const i=d[0];new Promise(h=>{invariant(this.pdfDocument),i instanceof Object?this.pdfDocument.getPageIndex(i).then(E=>{h(E)}).catch(()=>{invariant(!1)}):typeof i=="number"?h(i):invariant(!1)}).then(h=>{const E=h+1;invariant(this.pdfViewer),invariant(E>=1&&E<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:d,pageIndex:h,pageNumber:E})})})}navigateTo(a){this.goToDestination(a)}goToPage(a){const d=a-1;invariant(this.pdfViewer),invariant(a>=1&&a<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:d,pageNumber:a})}addLinkAttributes(a,d,i){a.href=d,a.rel=this.externalLinkRel||DEFAULT_LINK_REL,a.target=i?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(y){return typeof y<"u"}function isProvided(y){return isDefined(y)&&y!==null}function isString(y){return typeof y=="string"}function isArrayBuffer(y){return y instanceof ArrayBuffer}function isBlob(y){return invariant(isBrowser),y instanceof Blob}function isDataURI(y){return isString(y)&&/^data:/.test(y)}function dataURItoByteString(y){invariant(isDataURI(y));const[a="",d=""]=y.split(",");return a.split(";").indexOf("base64")!==-1?atob(d):unescape(d)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(y){y&&y.cancel&&y.cancel()}function makePageCallback(y,a){return Object.defineProperty(y,"width",{get(){return this.view[2]*a},configurable:!0}),Object.defineProperty(y,"height",{get(){return this.view[3]*a},configurable:!0}),Object.defineProperty(y,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(y,"originalHeight",{get(){return this.view[3]},configurable:!0}),y}function isCancelException(y){return y.name==="RenderingCancelledException"}function loadFromFile(y){return new Promise((a,d)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return d(new Error("Error while reading a file."));a(i.result)},i.onerror=h=>{if(!h.target)return d(new Error("Error while reading a file."));const{error:E}=h.target;if(!E)return d(new Error("Error while reading a file."));switch(E.code){case E.NOT_FOUND_ERR:return d(new Error("Error while reading a file: File not found."));case E.SECURITY_ERR:return d(new Error("Error while reading a file: Security error."));case E.ABORT_ERR:return d(new Error("Error while reading a file: Aborted."));default:return d(new Error("Error while reading a file."))}},i.readAsArrayBuffer(y)})}function reducer(y,a){switch(a.type){case"RESOLVE":return{value:a.value,error:void 0};case"REJECT":return{value:!1,error:a.error};case"RESET":return{value:void 0,error:void 0};default:return y}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs,eventProps=(()=>{const y={};return allEvents.forEach(a=>{y[a]=PropTypes.func}),y})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function y(a,d,i){const{[d]:h,pageNumber:E,pdf:R}=a;if(!isDefined(R))return null;if(isDefined(h)){if(typeof h!="number")return new Error(`\`${d}\` of type \`${typeof h}\` supplied to \`${i}\`, expected \`number\`.`);if(h<0)return new Error(`Expected \`${d}\` to be greater or equal to 0.`);const{numPages:M}=R;if(h+1>M)return new Error(`Expected \`${d}\` to be less or equal to ${M-1}.`)}else if(!isDefined(E))return new Error(`\`${d}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${i}\`.`);return null},isPageNumber=function y(a,d,i){const{[d]:h,pageIndex:E,pdf:R}=a;if(!isDefined(R))return null;if(isDefined(h)){if(typeof h!="number")return new Error(`\`${d}\` of type \`${typeof h}\` supplied to \`${i}\`, expected \`number\`.`);if(h<1)return new Error(`Expected \`${d}\` to be greater or equal to 1.`);const{numPages:M}=R;if(h>M)return new Error(`Expected \`${d}\` to be less or equal to ${M}.`)}else if(!isDefined(E))return new Error(`\`${d}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${i}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=function(y,a,d,i){function h(E){return E instanceof d?E:new d(function(R){R(E)})}return new(d||(d=Promise))(function(E,R){function M(l){try{u(i.next(l))}catch(c){R(c)}}function C(l){try{u(i.throw(l))}catch(c){R(c)}}function u(l){l.done?E(l.value):h(l.value).then(M,C)}u((i=i.apply(y,a||[])).next())})},__rest$1=function(y,a){var d={};for(var i in y)Object.prototype.hasOwnProperty.call(y,i)&&a.indexOf(i)<0&&(d[i]=y[i]);if(y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,i=Object.getOwnPropertySymbols(y);h<i.length;h++)a.indexOf(i[h])<0&&Object.prototype.propertyIsEnumerable.call(y,i[h])&&(d[i[h]]=y[i[h]]);return d};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(y,a)=>{switch(a){case PasswordResponses.NEED_PASSWORD:{const d=prompt("Enter the password to open this PDF file.");y(d);break}case PasswordResponses.INCORRECT_PASSWORD:{const d=prompt("Invalid password. Please try again.");y(d);break}}};function isParameterObject(y){return typeof y=="object"&&y!==null&&("data"in y||"range"in y||"url"in y)}const Document=reactExports.forwardRef(function y(a,d){var{children:i,className:h,error:E="Failed to load PDF file.",externalLinkRel:R,externalLinkTarget:M,file:C,inputRef:u,imageResourcesPath:l,loading:c="Loading PDF",noData:m="No PDF file specified.",onItemClick:x,onLoadError:p,onLoadProgress:_,onLoadSuccess:D,onPassword:b=defaultOnPassword,onSourceError:L,onSourceSuccess:N,options:U,renderMode:S,rotate:P}=a,z=__rest$1(a,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[Y,q]=useResolver(),{value:K,error:Z}=Y,[it,nt]=useResolver(),{value:at,error:pt}=it,W=reactExports.useRef(new LinkService),F=reactExports.useRef([]),O=reactExports.useRef(),T=reactExports.useRef();reactExports.useEffect(()=>{C&&C!==O.current&&isParameterObject(C)&&(warning(!dequal(C,O.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),O.current=C)},[C]),reactExports.useEffect(()=>{U&&U!==T.current&&(warning(!dequal(U,T.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),T.current=U)},[U]);const g=reactExports.useRef({scrollPageIntoView:dt=>{const{dest:ht,pageNumber:yt,pageIndex:Et=yt-1}=dt;if(x){x({dest:ht,pageIndex:Et,pageNumber:yt});return}const Rt=F.current[Et];if(Rt){Rt.scrollIntoView();return}warning(!1,`An internal link leading to page ${yt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(d,()=>({linkService:W,pages:F,viewer:g}),[]);function w(){N&&N()}function I(){Z&&(warning(!1,Z.toString()),L&&L(Z))}function B(){q({type:"RESET"})}reactExports.useEffect(B,[C,q]);const X=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!C)return null;if(typeof C=="string")return isDataURI(C)?{data:dataURItoByteString(C)}:(displayCORSWarning(),{url:C});if(C instanceof PDFDataRangeTransport)return{range:C};if(isArrayBuffer(C))return{data:C};if(isBrowser&&isBlob(C))return{data:yield loadFromFile(C)};if(invariant(typeof C=="object"),invariant(isParameterObject(C)),"url"in C&&typeof C.url=="string"){if(isDataURI(C.url)){const{url:dt}=C,ht=__rest$1(C,["url"]),yt=dataURItoByteString(dt);return Object.assign({data:yt},ht)}displayCORSWarning()}return C}),[C]);reactExports.useEffect(()=>{const dt=makeCancellablePromise(X());return dt.promise.then(ht=>{q({type:"RESOLVE",value:ht})}).catch(ht=>{q({type:"REJECT",error:ht})}),()=>{cancelRunningTask(dt)}},[X,q]),reactExports.useEffect(()=>{if(!(typeof K>"u")){if(K===!1){I();return}w()}},[K]);function H(){at&&(D&&D(at),F.current=new Array(at.numPages),W.current.setDocument(at))}function v(){pt&&(warning(!1,pt.toString()),p&&p(pt))}function A(){nt({type:"RESET"})}reactExports.useEffect(A,[nt,K]);function k(){if(!K)return;const dt=U?Object.assign(Object.assign({},K),U):K,ht=pdfjs.getDocument(dt);_&&(ht.onProgress=_),b&&(ht.onPassword=b);const yt=ht;return yt.promise.then(Et=>{nt({type:"RESOLVE",value:Et})}).catch(Et=>{yt.destroyed||nt({type:"REJECT",error:Et})}),()=>{yt.destroy()}}reactExports.useEffect(k,[U,nt,K]),reactExports.useEffect(()=>{if(!(typeof at>"u")){if(at===!1){v();return}H()}},[at]);function G(){W.current.setViewer(g.current),W.current.setExternalLinkRel(R),W.current.setExternalLinkTarget(M)}reactExports.useEffect(G,[R,M]);function V(dt,ht){F.current[dt]=ht}function Q(dt){delete F.current[dt]}const et=reactExports.useMemo(()=>({imageResourcesPath:l,linkService:W.current,onItemClick:x,pdf:at,registerPage:V,renderMode:S,rotate:P,unregisterPage:Q}),[l,x,at,S,P]),ot=reactExports.useMemo(()=>makeEventProps(z,()=>at),[z,at]);function At(){return React.createElement(DocumentContext.Provider,{value:et},i)}function ct(){return C?at==null?React.createElement(Message,{type:"loading"},typeof c=="function"?c():c):at===!1?React.createElement(Message,{type:"error"},typeof E=="function"?E():E):At():React.createElement(Message,{type:"no-data"},typeof m=="function"?m():m)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",h),ref:u,style:{"--scale-factor":"1"}},ot),ct())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var y=[],a=0;a<arguments.length;a++)y[a]=arguments[a];var d=y.filter(Boolean);if(d.length<=1){var i=d[0];return i||null}return function(E){d.forEach(function(R){typeof R=="function"?R(E):R&&(R.current=E)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(y){return y in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(y){return"children"in y}function isStructTreeNodeWithOnlyContentChild(y){return isStructTreeNode(y)?y.children.length===1&&0 in y.children&&"id"in y.children[0]:!1}function getRoleAttributes(y){const a={};if(isStructTreeNode(y)){const{role:d}=y,i=d.match(HEADING_PATTERN);if(i)a.role="heading",a["aria-level"]=Number(i[1]);else if(isPdfRole(d)){const h=PDF_ROLE_TO_HTML_ROLE[d];h&&(a.role=h)}}return a}function getBaseAttributes(y){const a={};if(isStructTreeNode(y)){if(y.alt!==void 0&&(a["aria-label"]=y.alt),y.lang!==void 0&&(a.lang=y.lang),isStructTreeNodeWithOnlyContentChild(y)){const[d]=y.children;if(d){const i=getBaseAttributes(d);return Object.assign(Object.assign({},a),i)}}}else"id"in y&&(a["aria-owns"]=y.id);return a}function getAttributes(y){return y?Object.assign(Object.assign({},getRoleAttributes(y)),getBaseAttributes(y)):null}function StructTreeItem({className:y,node:a}){const d=reactExports.useMemo(()=>getAttributes(a),[a]),i=reactExports.useMemo(()=>!isStructTreeNode(a)||isStructTreeNodeWithOnlyContentChild(a)?null:a.children.map((h,E)=>React.createElement(StructTreeItem,{key:E,node:h})),[a]);return React.createElement("span",Object.assign({className:y},d),i)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const y=usePageContext();invariant(y);const{onGetStructTreeError:a,onGetStructTreeSuccess:d}=y,[i,h]=useResolver(),{value:E,error:R}=i,{customTextRenderer:M,page:C}=y;function u(){E&&d&&d(E)}function l(){R&&(warning(!1,R.toString()),a&&a(R))}function c(){h({type:"RESET"})}reactExports.useEffect(c,[h,C]);function m(){if(M||!C)return;const x=makeCancellablePromise(C.getStructTree()),p=x;return x.promise.then(_=>{h({type:"RESOLVE",value:_})}).catch(_=>{h({type:"REJECT",error:_})}),()=>cancelRunningTask(p)}return reactExports.useEffect(m,[M,C,h]),reactExports.useEffect(()=>{if(E!==void 0){if(E===!1){l();return}u()}},[E]),E?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:E}):null}const ANNOTATION_MODE=pdfjs.AnnotationMode;function PageCanvas(y){const a=usePageContext();invariant(a);const d=Object.assign(Object.assign({},a),y),{_className:i,canvasBackground:h,devicePixelRatio:E=getDevicePixelRatio(),onRenderError:R,onRenderSuccess:M,page:C,renderForms:u,renderTextLayer:l,rotate:c,scale:m}=d,{canvasRef:x}=y;invariant(C);const p=reactExports.useRef(null);function _(){C&&M&&M(makePageCallback(C,m))}function D(S){isCancelException(S)||(warning(!1,S.toString()),R&&R(S))}const b=reactExports.useMemo(()=>C.getViewport({scale:m*E,rotation:c}),[E,C,c,m]),L=reactExports.useMemo(()=>C.getViewport({scale:m,rotation:c}),[C,c,m]);function N(){if(!C)return;C.cleanup();const{current:S}=p;if(!S)return;S.width=b.width,S.height=b.height,S.style.width=`${Math.floor(L.width)}px`,S.style.height=`${Math.floor(L.height)}px`,S.style.visibility="hidden";const P={annotationMode:u?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:S.getContext("2d",{alpha:!1}),viewport:b};h&&(P.background=h);const z=C.render(P),Y=z;return z.promise.then(()=>{S.style.visibility="",_()}).catch(D),()=>cancelRunningTask(Y)}reactExports.useEffect(N,[h,p,E,C,u,b,L]);const U=reactExports.useCallback(()=>{const{current:S}=p;S&&(S.width=0,S.height=0)},[p]);return reactExports.useEffect(()=>U,[U]),React.createElement("canvas",{className:`${i}__canvas`,dir:"ltr",ref:mergeRefs(x,p),style:{display:"block",userSelect:"none"}},l?React.createElement(StructTree,null):null)}function PageSVG(){const y=usePageContext();invariant(y);const{_className:a,onRenderSuccess:d,onRenderError:i,page:h,rotate:E,scale:R}=y;invariant(h);const[M,C]=useResolver(),{value:u,error:l}=M;function c(){h&&d&&d(makePageCallback(h,R))}function m(){l&&(isCancelException(l)||(warning(!1,l.toString()),i&&i(l)))}const x=reactExports.useMemo(()=>h.getViewport({scale:R,rotation:E}),[h,E,R]);function p(){C({type:"RESET"})}reactExports.useEffect(p,[h,C,x]);function _(){if(!h)return;const N=makeCancellablePromise(h.getOperatorList());return N.promise.then(U=>{new pdfjs.SVGGraphics(h.commonObjs,h.objs).getSVG(U,x).then(P=>{if(!(P instanceof SVGElement))throw new Error("getSVG returned unexpected result.");C({type:"RESOLVE",value:P})}).catch(P=>{C({type:"REJECT",error:P})})}).catch(U=>{C({type:"REJECT",error:U})}),()=>cancelRunningTask(N)}reactExports.useEffect(_,[h,C,x]),reactExports.useEffect(()=>{if(u!==void 0){if(u===!1){m();return}c()}},[u]);function D(N){if(!N||!u)return;N.firstElementChild||N.appendChild(u);const{width:U,height:S}=x;u.setAttribute("width",`${U}`),u.setAttribute("height",`${S}`)}const{width:b,height:L}=x;return React.createElement("div",{className:`${a}__svg`,ref:N=>D(N),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:b,height:L,userSelect:"none"}})}function isTextItem(y){return"str"in y}function TextLayer(){const y=usePageContext();invariant(y);const{customTextRenderer:a,onGetTextError:d,onGetTextSuccess:i,onRenderTextLayerError:h,onRenderTextLayerSuccess:E,page:R,pageIndex:M,pageNumber:C,rotate:u,scale:l}=y;invariant(R);const[c,m]=useResolver(),{value:x,error:p}=c,_=reactExports.useRef(null),D=reactExports.useRef();warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function b(){x&&i&&i(x)}function L(){p&&(warning(!1,p.toString()),d&&d(p))}function N(){m({type:"RESET"})}reactExports.useEffect(N,[R,m]);function U(){if(!R)return;const Z=makeCancellablePromise(R.getTextContent()),it=Z;return Z.promise.then(nt=>{m({type:"RESOLVE",value:nt})}).catch(nt=>{m({type:"REJECT",error:nt})}),()=>cancelRunningTask(it)}reactExports.useEffect(U,[R,m]),reactExports.useEffect(()=>{if(x!==void 0){if(x===!1){L();return}b()}},[x]);const S=reactExports.useCallback(()=>{E&&E()},[E]),P=reactExports.useCallback(Z=>{warning(!1,Z.toString()),h&&h(Z)},[h]);function z(){const Z=D.current;Z&&Z.classList.add("active")}function Y(){const Z=D.current;Z&&Z.classList.remove("active")}const q=reactExports.useMemo(()=>R.getViewport({scale:l,rotation:u}),[R,u,l]);function K(){if(!R||!x)return;const{current:Z}=_;if(!Z)return;Z.innerHTML="";const it=R.streamTextContent({includeMarkedContent:!0}),nt={container:Z,textContentSource:it,viewport:q},at=pdfjs.renderTextLayer(nt),pt=at;return at.promise.then(()=>{const W=document.createElement("div");W.className="endOfContent",Z.append(W),D.current=W;const F=Z.querySelectorAll('[role="presentation"]');if(a){let O=0;x.items.forEach((T,g)=>{if(!isTextItem(T))return;const w=F[O];if(!w)return;const I=a(Object.assign({pageIndex:M,pageNumber:C,itemIndex:g},T));w.innerHTML=I,O+=T.str&&T.hasEOL?2:1})}S()}).catch(P),()=>cancelRunningTask(pt)}return reactExports.useLayoutEffect(K,[a,P,S,R,M,C,x,q]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:Y,onMouseDown:z,ref:_})}function AnnotationLayer(){const y=useDocumentContext(),a=usePageContext();invariant(a);const d=Object.assign(Object.assign({},y),a),{imageResourcesPath:i,linkService:h,onGetAnnotationsError:E,onGetAnnotationsSuccess:R,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:C,page:u,pdf:l,renderForms:c,rotate:m,scale:x=1}=d;invariant(l),invariant(u),invariant(h);const[p,_]=useResolver(),{value:D,error:b}=p,L=reactExports.useRef(null);warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function N(){D&&R&&R(D)}function U(){b&&(warning(!1,b.toString()),E&&E(b))}function S(){_({type:"RESET"})}reactExports.useEffect(S,[_,u]);function P(){if(!u)return;const Z=makeCancellablePromise(u.getAnnotations()),it=Z;return Z.promise.then(nt=>{_({type:"RESOLVE",value:nt})}).catch(nt=>{_({type:"REJECT",error:nt})}),()=>{cancelRunningTask(it)}}reactExports.useEffect(P,[_,u,c]),reactExports.useEffect(()=>{if(D!==void 0){if(D===!1){U();return}N()}},[D]);function z(){C&&C()}function Y(Z){warning(!1,`${Z}`),M&&M(Z)}const q=reactExports.useMemo(()=>u.getViewport({scale:x,rotation:m}),[u,m,x]);function K(){if(!l||!u||!h||!D)return;const{current:Z}=L;if(!Z)return;const it=q.clone({dontFlip:!0}),nt={accessibilityManager:null,annotationCanvasMap:null,div:Z,l10n:null,page:u,viewport:it},at={annotations:D,annotationStorage:l.annotationStorage,div:Z,downloadManager:null,imageResourcesPath:i,linkService:h,page:u,renderForms:c,viewport:it};Z.innerHTML="";try{new pdfjs.AnnotationLayer(nt).render(at),z()}catch(pt){Y(pt)}return()=>{}}return reactExports.useEffect(K,[D,i,h,u,c,q]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:L})}var __rest=function(y,a){var d={};for(var i in y)Object.prototype.hasOwnProperty.call(y,i)&&a.indexOf(i)<0&&(d[i]=y[i]);if(y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,i=Object.getOwnPropertySymbols(y);h<i.length;h++)a.indexOf(i[h])<0&&Object.prototype.propertyIsEnumerable.call(y,i[h])&&(d[i[h]]=y[i[h]]);return d};const defaultScale=1,Page=function y(a){const d=useDocumentContext(),i=Object.assign(Object.assign({},d),a),{_className:h="react-pdf__Page",_enableRegisterUnregisterPage:E=!0,canvasBackground:R,canvasRef:M,children:C,className:u,customRenderer:l,customTextRenderer:c,devicePixelRatio:m,error:x="Failed to load the page.",height:p,inputRef:_,loading:D="Loading page",noData:b="No page specified.",onGetAnnotationsError:L,onGetAnnotationsSuccess:N,onGetStructTreeError:U,onGetStructTreeSuccess:S,onGetTextError:P,onGetTextSuccess:z,onLoadError:Y,onLoadSuccess:q,onRenderAnnotationLayerError:K,onRenderAnnotationLayerSuccess:Z,onRenderError:it,onRenderSuccess:nt,onRenderTextLayerError:at,onRenderTextLayerSuccess:pt,pageIndex:W,pageNumber:F,pdf:O,registerPage:T,renderAnnotationLayer:g=!0,renderForms:w=!1,renderMode:I="canvas",renderTextLayer:B=!0,rotate:X,scale:H=defaultScale,unregisterPage:v,width:A}=i,k=__rest(i,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[G,V]=useResolver(),{value:Q,error:et}=G,ot=reactExports.useRef(null);invariant(O);const At=isProvided(F)?F-1:W??null,ct=F??(isProvided(W)?W+1:null),dt=X??(Q?Q.rotate:null),ht=reactExports.useMemo(()=>{if(!Q)return null;let $e=1;const De=H??defaultScale;if(A||p){const St=Q.getViewport({scale:1,rotation:dt});A?$e=A/St.width:p&&($e=p/St.height)}return De*$e},[p,Q,dt,H,A]);function yt(){return()=>{isProvided(At)&&E&&v&&v(At)}}reactExports.useEffect(yt,[E,O,At,v]);function Et(){if(q){if(!Q||!ht)return;q(makePageCallback(Q,ht))}if(E&&T){if(!isProvided(At)||!ot.current)return;T(At,ot.current)}}function Rt(){et&&(warning(!1,et.toString()),Y&&Y(et))}function wt(){V({type:"RESET"})}reactExports.useEffect(wt,[V,O,At]);function Mt(){if(!O||!ct)return;const $e=makeCancellablePromise(O.getPage(ct)),De=$e;return $e.promise.then(St=>{V({type:"RESOLVE",value:St})}).catch(St=>{V({type:"REJECT",error:St})}),()=>cancelRunningTask(De)}reactExports.useEffect(Mt,[V,O,At,ct,T]),reactExports.useEffect(()=>{if(Q!==void 0){if(Q===!1){Rt();return}Et()}},[Q,ht]);const kt=reactExports.useMemo(()=>Q&&isProvided(At)&&ct&&isProvided(dt)&&isProvided(ht)?{_className:h,canvasBackground:R,customTextRenderer:c,devicePixelRatio:m,onGetAnnotationsError:L,onGetAnnotationsSuccess:N,onGetStructTreeError:U,onGetStructTreeSuccess:S,onGetTextError:P,onGetTextSuccess:z,onRenderAnnotationLayerError:K,onRenderAnnotationLayerSuccess:Z,onRenderError:it,onRenderSuccess:nt,onRenderTextLayerError:at,onRenderTextLayerSuccess:pt,page:Q,pageIndex:At,pageNumber:ct,renderForms:w,renderTextLayer:B,rotate:dt,scale:ht}:null,[h,R,c,m,L,N,U,S,P,z,K,Z,it,nt,at,pt,Q,At,ct,w,B,dt,ht]),Dt=reactExports.useMemo(()=>makeEventProps(k,()=>Q&&(ht?makePageCallback(Q,ht):void 0)),[k,Q,ht]),Ft=`${At}@${ht}/${dt}`,$t=`${At}/${dt}`;function Ut(){switch(I){case"custom":return invariant(l),React.createElement(l,{key:`${Ft}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${$t}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${Ft}_canvas`,canvasRef:M})}}function Kt(){return B?React.createElement(TextLayer,{key:`${Ft}_text`}):null}function Bt(){return g?React.createElement(AnnotationLayer,{key:`${Ft}_annotations`}):null}function Me(){return React.createElement(PageContext.Provider,{value:kt},Ut(),Kt(),Bt(),C)}function hn(){return ct?O===null||Q===void 0||Q===null?React.createElement(Message,{type:"loading"},typeof D=="function"?D():D):O===!1||Q===!1?React.createElement(Message,{type:"error"},typeof x=="function"?x():x):Me():React.createElement(Message,{type:"no-data"},typeof b=="function"?b():b)}return React.createElement("div",Object.assign({className:clsx(h,u),"data-page-number":ct,ref:mergeRefs(_,ot),style:{"--scale-factor":`${ht}`,backgroundColor:R||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Dt),hn())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});displayWorkerWarning();pdfjs.GlobalWorkerOptions.workerSrc="pdf.worker.js";const PdfDocument=({file:y,toolMode:a,isScreenshotMode:d,screenshotArea:i,onScreenshotStart:h,onScreenshotMove:E,onScreenshotEnd:R,isHighlightMode:M,onHighlightMouseDown:C,onHighlightMouseMove:u,onHighlightMouseUp:l,isMagicWandMode:c,onMagicWandMouseDown:m,onMagicWandMouseMove:x,onMagicWandMouseUp:p,children:_})=>{const{scale:D,numPages:b,error:L,dispatch:N,viewerRef:U,pdfDocRef:S}=usePdfViewer(),P=reactExports.useRef(y);reactExports.useEffect(()=>{if(P.current!==y){if(N({type:PDF_ACTIONS.SET_NUM_PAGES,payload:0}),N({type:PDF_ACTIONS.SET_ERROR,payload:null}),S.current){try{S.current.destroy()}catch{}S.current=null}P.current=y}},[y,N,S]);const z=async K=>{try{N({type:PDF_ACTIONS.SET_NUM_PAGES,payload:K.numPages}),N({type:PDF_ACTIONS.SET_ERROR,payload:null}),S.current=K}catch{N({type:PDF_ACTIONS.SET_ERROR,payload:"Unable to initialize PDF document"})}},Y=K=>{N({type:PDF_ACTIONS.SET_ERROR,payload:`Unable to load PDF file: ${K.message||"Unknown error"}`})};if(L)return jsxRuntimeExports.jsx("div",{className:"error",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{children:"Loading Failed"}),jsxRuntimeExports.jsx("p",{children:L}),jsxRuntimeExports.jsx("button",{onClick:()=>window.location.reload(),children:"Reload Page"})]})});const q=()=>({cursor:a==="screenshot"?"crosshair":"default",touchAction:a==="screenshot"?"manipulation":"auto",msContentZooming:"none",msUserSelect:"text",WebkitUserSelect:"text"});return jsxRuntimeExports.jsx(Document,{file:y,onLoadSuccess:z,onLoadError:Y,loading:jsxRuntimeExports.jsx("div",{className:"loading",children:"Loading PDF document..."}),error:jsxRuntimeExports.jsx("div",{className:"error",children:"Unable to load PDF file, please check if the file is corrupted"}),children:jsxRuntimeExports.jsxs("div",{className:"pdf-document-container",ref:U,"data-tool-mode":a||"",onMouseDown:K=>{a==="screenshot"&&h&&h(K),M&&C&&C(K),c&&m&&m(K)},onMouseMove:K=>{a==="screenshot"&&E&&E(K),M&&u&&u(K),c&&x&&x(K)},onMouseUp:K=>{a==="screenshot"&&R&&R(K),M&&l&&l(K),c&&p&&p(K)},style:q(),children:[d&&i&&jsxRuntimeExports.jsx("div",{className:"screenshot-overlay",style:{position:"absolute",left:Math.min(i.startX,i.endX),top:Math.min(i.startY,i.endY),width:Math.abs(i.endX-i.startX),height:Math.abs(i.endY-i.startY),border:"2px dashed #059669",backgroundColor:"rgba(5, 150, 105, 0.1)",zIndex:1e3,pointerEvents:"none"}}),_,jsxRuntimeExports.jsx("div",{className:"all-pages-container",children:Array.from(new Array(b),(K,Z)=>jsxRuntimeExports.jsx("div",{className:"page-container",children:jsxRuntimeExports.jsx(Page,{pageNumber:Z+1,scale:D,renderTextLayer:!0,renderAnnotationLayer:!1,loading:jsxRuntimeExports.jsxs("div",{className:"loading",children:["Loading page ",Z+1,"..."]}),error:jsxRuntimeExports.jsxs("div",{className:"error",children:["Unable to load page ",Z+1]}),className:"pdf-page",onLoadSuccess:()=>{},onLoadError:it=>{console.warn(`Page ${Z+1} load error:`,it)}})},`page_${Z+1}`))})]})})};PdfDocument.propTypes={file:PropTypes.oneOfType([PropTypes.string,PropTypes.object,PropTypes.instanceOf(File)]).isRequired,toolMode:PropTypes.string,isScreenshotMode:PropTypes.bool,screenshotArea:PropTypes.object,onScreenshotStart:PropTypes.func,onScreenshotMove:PropTypes.func,onScreenshotEnd:PropTypes.func,isHighlightMode:PropTypes.bool,onHighlightMouseDown:PropTypes.func,onHighlightMouseMove:PropTypes.func,onHighlightMouseUp:PropTypes.func,isMagicWandMode:PropTypes.bool,onMagicWandMouseDown:PropTypes.func,onMagicWandMouseMove:PropTypes.func,onMagicWandMouseUp:PropTypes.func,children:PropTypes.node};const PdfOverlays=({searchResults:y,currentSearchIndex:a,viewerRef:d})=>{if(!y||y.length===0||!d?.current)return null;const i=(l,c)=>{if(!l||!d.current||!c)return null;try{const m=document.createRange(),x=l.firstChild||l;if(x.nodeType===Node.TEXT_NODE)m.setStart(x,c.start),m.setEnd(x,c.end);else{const D=document.createTreeWalker(l,NodeFilter.SHOW_TEXT,null,!1);let b=0,L=null,N=0,U=0;for(;D.nextNode();){const S=D.currentNode,P=S.textContent.length;if(b+P>c.start){L=S,N=c.start-b,U=Math.min(c.end-b,P);break}b+=P}if(!L)return null;m.setStart(L,N),m.setEnd(L,U)}const p=m.getBoundingClientRect(),_=d.current.getBoundingClientRect();return{left:p.left-_.left+d.current.scrollLeft,top:p.top-_.top+d.current.scrollTop,width:p.width,height:p.height}}catch(m){console.warn("Error calculating match position:",m);const x=l.getBoundingClientRect(),p=d.current.getBoundingClientRect();return{left:x.left-p.left+d.current.scrollLeft,top:x.top-p.top+d.current.scrollTop,width:x.width,height:x.height}}},h=l=>l.toLowerCase().replace(/\u00A0/g," ").replace(/[\u2010\u2011\u2012\u2013\u2014]/g,"-").replace(/[\u200B\u200C\u200D\uFEFF\u00AD]/g,""),E=l=>{const c=l.toLowerCase().replace(/\u00A0/g," ").replace(/[\u2010\u2011\u2012\u2013\u2014]/g,"-"),m=[];let x="";for(let p=0;p<c.length;p++){const _=c[p];_===""||_===""||_===""||_==="\uFEFF"||c.charCodeAt(p)!==173&&(x+=_,m.push(p))}return{search:x,map:m}},R=(l,{order:c,query:m,length:x,offset:p})=>{if(!d.current)return null;const b=d.current.querySelectorAll(".page-container")[l-1];if(!b)return null;const L=b.querySelector(".react-pdf__Page__textContent");if(!L)return null;const N=document.createTreeWalker(L,NodeFilter.SHOW_TEXT),U=[];let S="";for(;N.nextNode();){const I=N.currentNode,B=S.length,X=I.textContent||"";S+=X,U.push({node:I,start:B,end:B+X.length})}const P=h(m||""),{search:z,map:Y}=E(S),q=x||P.length;let K=-1;if(typeof c=="number"){let I=0;for(let B=0;B<=c;B++){if(K=z.indexOf(P,I),K===-1)return null;I=K+1}}else if(typeof p=="number")K=p;else return null;const Z=K+q,it=I=>{for(let X=0;X<U.length;X++){const H=U[X];if(I>=H.start&&I<H.end)return{node:H.node,offset:I-H.start}}const B=U[U.length-1];return{node:B?.node,offset:Math.max(0,(B?.end||0)-(B?.start||0))}},nt=I=>{const B=Math.min(Math.max(0,I),Y.length-1);return Y[B]},at=nt(K),pt=nt(Z-1)+1,W=it(at),F=it(pt);if(!W.node||!F.node)return null;const O=document.createRange();try{O.setStart(W.node,W.offset),O.setEnd(F.node,F.offset)}catch{return null}const T=Array.from(O.getClientRects()),g=d.current.getBoundingClientRect(),w=T.map(I=>({left:I.left-g.left+d.current.scrollLeft,top:I.top-g.top+d.current.scrollTop,width:I.width,height:I.height}));return w.length?w:null},C=(()=>{if(!d.current)return new Set;const l=d.current,c=l.getBoundingClientRect(),m=l.querySelectorAll(".page-container"),x=new Set;return m.forEach((p,_)=>{const D=p.getBoundingClientRect();D.bottom>c.top&&D.top<c.bottom&&x.add(_+1)}),x})(),u=y.filter(l=>C.has(l.page));return jsxRuntimeExports.jsx("div",{className:"pdf-overlays",style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none",zIndex:10},children:u.map(l=>{let c=null;if(l.element&&l.match){const x=i(l.element,l.match);c=x?[x]:null}else typeof l.page=="number"&&(c=R(l.page,l));if(!c||c.length===0)return null;const m=y.indexOf(l)===a;return c.map((x,p)=>jsxRuntimeExports.jsx("div",{className:`search-highlight-overlay ${m?"current":""}`,style:{position:"absolute",left:x.left,top:x.top,width:x.width,height:x.height,backgroundColor:m?"rgba(76, 175, 80, 0.45)":"rgba(139, 195, 74, 0.35)",border:m?"1.5px solid #4caf50":"1px solid #8bc34a",borderRadius:"2px",pointerEvents:"none",transition:"all 0.12s ease"}},`${l.id}-${p}`))})})};PdfOverlays.propTypes={searchResults:PropTypes.arrayOf(PropTypes.shape({id:PropTypes.string.isRequired,element:PropTypes.object.isRequired,page:PropTypes.number.isRequired})).isRequired,currentSearchIndex:PropTypes.number.isRequired,viewerRef:PropTypes.object.isRequired};const VerticalToolbar=({onSearch:y,onScreenshot:a,onToggleHighlight:d,isHighlightActive:i,onOverview:h,onMagicWand:E,isMagicWandActive:R})=>jsxRuntimeExports.jsxs("div",{className:"vertical-toolbar",children:[jsxRuntimeExports.jsx("button",{className:"toolbar-btn"+(R?" active":""),title:"Magic Wand",onClick:E,children:jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",role:"img","aria-label":"Magic wand with halo stars",children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("path",{id:"star",d:"M0,-1.5 L0.44,-0.46 L1.43,-0.46 L0.61,0.18 L0.88,1.21 L0,0.68 L-0.88,1.21 L-0.61,0.18 L-1.43,-0.46 L-0.44,-0.46 Z",fill:"currentColor"})}),jsxRuntimeExports.jsxs("g",{transform:"translate(7.5,7.5) rotate(45)",children:[jsxRuntimeExports.jsx("rect",{x:"0",y:"-1.0",width:"15",height:"2.0",rx:"1.0",fill:"currentColor"}),jsxRuntimeExports.jsx("rect",{x:"-1.5",y:"-1.0",width:"3.5",height:"2.0",rx:"1.0",fill:"currentColor"})]}),jsxRuntimeExports.jsxs("g",{transform:"translate(7.5,7.5)",children:[jsxRuntimeExports.jsx("use",{href:"#star",transform:"translate(0,-4.2) scale(1.40)"}),jsxRuntimeExports.jsx("use",{href:"#star",transform:"translate(3.75,-1.2) scale(1.25)"}),jsxRuntimeExports.jsx("use",{href:"#star",transform:"translate(2.7,6.6) scale(1.15)"}),jsxRuntimeExports.jsx("use",{href:"#star",transform:"translate(-2.4,3.9) scale(1.30)"}),jsxRuntimeExports.jsx("use",{href:"#star",transform:"translate(-4.2,-1.2) scale(1.20)"})]})]})}),jsxRuntimeExports.jsx("button",{className:"toolbar-btn",title:"Search",onClick:y,children:jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"11",cy:"11",r:"8"}),jsxRuntimeExports.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),jsxRuntimeExports.jsx("button",{className:"toolbar-btn",title:"Screenshot",onClick:a,children:jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("path",{d:"M4 9V6a2 2 0 0 1 2-2h3"}),jsxRuntimeExports.jsx("path",{d:"M20 9V6a2 2 0 0 0-2-2h-3"}),jsxRuntimeExports.jsx("path",{d:"M4 15v3a2 2 0 0 0 2 2h3"}),jsxRuntimeExports.jsx("path",{d:"M20 15v3a2 2 0 0 1-2 2h-3"})]})}),jsxRuntimeExports.jsx("button",{className:"toolbar-btn"+(i?" highlight-active":""),title:"Highlight",onClick:d,children:jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("path",{d:"M3.5 16.5L14 6l4 4L7.5 20.5H4v-3.5z"}),jsxRuntimeExports.jsx("polygon",{points:"14 6 16.5 3.5 21 8 18 10"}),jsxRuntimeExports.jsx("line",{x1:"6.5",y1:"17.5",x2:"9",y2:"20"})]})}),jsxRuntimeExports.jsx("button",{className:"toolbar-btn",title:"Overview",onClick:h,children:jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),jsxRuntimeExports.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),jsxRuntimeExports.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),jsxRuntimeExports.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]})})]});VerticalToolbar.propTypes={onSearch:PropTypes.func.isRequired,onScreenshot:PropTypes.func.isRequired,onToggleHighlight:PropTypes.func.isRequired,isHighlightActive:PropTypes.bool,onOverview:PropTypes.func.isRequired,onMagicWand:PropTypes.func.isRequired,isMagicWandActive:PropTypes.bool};var reactDomExports=requireReactDom();const DraggableModal=({isOpen:y,initialPosition:a,onClose:d,children:i,className:h="",draggableHandle:E=".draggable-modal-header"})=>{const[R,M]=reactExports.useState(a||{x:100,y:100}),[C,u]=reactExports.useState(!1),[l,c]=reactExports.useState({x:0,y:0}),m=reactExports.useRef(null),x=reactExports.useRef({x:0,y:0});reactExports.useEffect(()=>{y&&a&&M(a)},[y]);const p=reactExports.useCallback((N,U)=>{if(!m.current)return{x:N,y:U};const P=m.current.getBoundingClientRect(),z=window.innerWidth,Y=window.innerHeight,q=Math.max(0,Math.min(N,z-P.width)),K=Math.max(0,Math.min(U,Y-P.height));return{x:q,y:K}},[]),_=reactExports.useCallback(N=>{const U=N.currentTarget.querySelector(E);if(!U||!U.contains(N.target)||N.target.tagName==="BUTTON"||N.target.closest("button"))return;N.preventDefault(),N.stopPropagation();const S=m.current.getBoundingClientRect(),P=N.clientX-S.left,z=N.clientY-S.top;u(!0),c({x:P,y:z}),x.current={x:N.clientX,y:N.clientY},N.currentTarget.setPointerCapture(N.pointerId),document.body.style.userSelect="none"},[E]),D=reactExports.useCallback(N=>{if(!C)return;N.preventDefault();const U=N.clientX-l.x,S=N.clientY-l.y,P=p(U,S);M(P)},[C,l,p]),b=reactExports.useCallback(N=>{C&&(u(!1),N.currentTarget.releasePointerCapture(N.pointerId),document.body.style.userSelect="")},[C]);if(reactExports.useEffect(()=>{if(!y)return;const N=U=>{m.current&&!m.current.contains(U.target)&&d?.()};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[y,d]),reactExports.useEffect(()=>{if(!y)return;const N=U=>{U.key==="Escape"&&d?.()};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[y,d]),!y)return null;const L=jsxRuntimeExports.jsx("div",{ref:m,className:`draggable-modal ${h} ${C?"dragging":""}`,style:{position:"fixed",left:R.x,top:R.y,zIndex:11e3},onMouseDown:N=>{N.stopPropagation()},onClick:N=>{N.stopPropagation()},onPointerDown:_,onPointerMove:D,onPointerUp:b,role:"dialog","aria-modal":"true",children:i});return reactDomExports.createPortal(L,document.body)};DraggableModal.propTypes={isOpen:PropTypes.bool.isRequired,initialPosition:PropTypes.shape({x:PropTypes.number.isRequired,y:PropTypes.number.isRequired}),onClose:PropTypes.func,children:PropTypes.node.isRequired,className:PropTypes.string,draggableHandle:PropTypes.string};DraggableModal.defaultProps={initialPosition:{x:100,y:100},onClose:null,className:"",draggableHandle:".draggable-modal-header"};const TranslationDialog=({isOpen:y,onClose:a,selectedText:d,onTranslate:i})=>{const[h,E]=reactExports.useState("ja"),[R,M]=reactExports.useState({text:"",source:""}),[C,u]=reactExports.useState(!1),l=[{code:"zh",name:"Chinese",flag:""},{code:"en",name:"English",flag:""},{code:"ja",name:"Japanese",flag:""}];reactExports.useEffect(()=>{console.log("TranslationDialog useEffect:",{isOpen:y,selectedText:d,targetLang:h}),y&&d&&(console.log("Auto-translating on dialog open"),c())},[y,d,h]);const c=async()=>{if(d){u(!0);try{const x=await i(d,h);M(x)}catch(x){const p=x?.status;let _=x?.message||"Translation failed, please try again";if(p>=500){_="Translation service temporarily unavailable. Using mock translation instead.";const D=`[Mock translation to ${h}: ${d}]`;M({text:D,source:"Mock Translation"})}else M({text:_,source:"Error"});console.error("Translation error:",x)}finally{u(!1)}}},m=x=>{E(x)};return y?jsxRuntimeExports.jsxs(DraggableModal,{isOpen:y,initialPosition:{x:200,y:150},onClose:a,className:"translation-dialog",draggableHandle:".dialog-header",children:[jsxRuntimeExports.jsxs("div",{className:"dialog-header draggable-modal-header",children:[jsxRuntimeExports.jsx("h3",{children:"Translation"}),jsxRuntimeExports.jsx("button",{className:"close-btn",onClick:a,children:""})]}),jsxRuntimeExports.jsxs("div",{className:"dialog-content",children:[jsxRuntimeExports.jsxs("div",{className:"language-selector",children:[jsxRuntimeExports.jsx("label",{children:"Target Language:"}),jsxRuntimeExports.jsx("div",{className:"language-buttons",children:l.map(x=>jsxRuntimeExports.jsxs("button",{className:`lang-btn ${h===x.code?"active":""}`,onClick:()=>m(x.code),title:x.name,children:[jsxRuntimeExports.jsx("span",{className:"flag",children:x.flag}),jsxRuntimeExports.jsx("span",{className:"lang-name",children:x.name})]},x.code))})]}),jsxRuntimeExports.jsxs("div",{className:"translation-result",children:[jsxRuntimeExports.jsx("label",{children:"Translation Result:"}),jsxRuntimeExports.jsx("div",{className:"result-display",children:C?jsxRuntimeExports.jsx("div",{className:"loading",children:"Translating..."}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"translation-text",children:R.text||"Please select a language to translate"}),R.source&&jsxRuntimeExports.jsxs("div",{className:"translation-source",children:["Source: ",R.source]})]})})]})]}),jsxRuntimeExports.jsx("div",{className:"dialog-footer",children:jsxRuntimeExports.jsx("button",{className:"translate-btn",onClick:c,disabled:C,children:C?"Translating...":"Re-translate"})})]}):null};TranslationDialog.propTypes={isOpen:PropTypes.bool.isRequired,onClose:PropTypes.func.isRequired,selectedText:PropTypes.string.isRequired,onTranslate:PropTypes.func.isRequired};const OverviewDialog=({isOpen:y,onClose:a,onConfirm:d})=>{const[i,h]=reactExports.useState("zh"),E=[{code:"zh",name:"Chinese",flag:""},{code:"en",name:"English",flag:""},{code:"ja",name:"Japanese",flag:""}],R=()=>{d(i),a()};return y?jsxRuntimeExports.jsx("div",{className:"overview-overlay",children:jsxRuntimeExports.jsxs("div",{className:"overview-dialog",children:[jsxRuntimeExports.jsxs("div",{className:"dialog-header",children:[jsxRuntimeExports.jsx("h3",{children:"Overview Language"}),jsxRuntimeExports.jsx("button",{className:"close-btn",onClick:a,children:""})]}),jsxRuntimeExports.jsx("div",{className:"dialog-content",children:jsxRuntimeExports.jsxs("div",{className:"language-selector",children:[jsxRuntimeExports.jsx("label",{children:"Select Language:"}),jsxRuntimeExports.jsx("div",{className:"language-options",children:E.map(M=>jsxRuntimeExports.jsxs("button",{className:`lang-option ${i===M.code?"active":""}`,onClick:()=>h(M.code),children:[jsxRuntimeExports.jsx("span",{className:"flag",children:M.flag}),jsxRuntimeExports.jsx("span",{className:"lang-name",children:M.name})]},M.code))})]})}),jsxRuntimeExports.jsxs("div",{className:"dialog-footer",children:[jsxRuntimeExports.jsx("button",{className:"cancel-btn",onClick:a,children:"Cancel"}),jsxRuntimeExports.jsx("button",{className:"confirm-btn",onClick:R,children:"Confirm"})]})]})}):null};OverviewDialog.propTypes={isOpen:PropTypes.bool.isRequired,onClose:PropTypes.func.isRequired,onConfirm:PropTypes.func.isRequired,documentId:PropTypes.string};const MagicWandLayer=({drawnPaths:y,currentPath:a,isDrawing:d,generatePathString:i,onPathClick:h})=>{const{viewerRef:E}=usePdfViewer(),R=E?.current,M=R?R.scrollWidth:"100%",C=R?R.scrollHeight:"100%";return!y.length&&!d?null:jsxRuntimeExports.jsxs("svg",{className:"magic-wand-layer",style:{position:"absolute",top:0,left:0,width:typeof M=="number"?`${M}px`:M,height:typeof C=="number"?`${C}px`:C,pointerEvents:"none",zIndex:5},children:[y.map(u=>{const l=`page-clip-${u.pageIndex}-${u.id}`;return jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("clipPath",{id:l,clipPathUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("rect",{x:u.pageRect?.left||0,y:u.pageRect?.top||0,width:u.pageRect?.width||"100%",height:u.pageRect?.height||"100%"})})}),jsxRuntimeExports.jsxs("g",{clipPath:`url(#${l})`,children:[jsxRuntimeExports.jsx("path",{d:i(u.points),stroke:u.color,strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.2",filter:"blur(2px)"}),jsxRuntimeExports.jsx("path",{d:i(u.points),stroke:u.color,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.6",style:{pointerEvents:"stroke",cursor:"pointer"},onClick:()=>h&&h(u.id)}),u.points.filter((c,m)=>m%10===0).map((c,m)=>jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("path",{d:`M ${c.x} ${c.y-2} L ${c.x+.7} ${c.y-.7} L ${c.x+2} ${c.y} L ${c.x+.7} ${c.y+.7} L ${c.x} ${c.y+2} L ${c.x-.7} ${c.y+.7} L ${c.x-2} ${c.y} L ${c.x-.7} ${c.y-.7} Z`,fill:u.color,opacity:"0.4"}),jsxRuntimeExports.jsx("path",{d:`M ${c.x-1.5} ${c.y} L ${c.x+1.5} ${c.y} M ${c.x} ${c.y-1.5} L ${c.x} ${c.y+1.5}`,stroke:u.color,strokeWidth:"0.5",opacity:"0.3"})]},m))]})]},u.id)}),d&&a.length>1&&(()=>{const u=a[0],l=`current-page-clip-${u.pageIndex||0}`;return jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("clipPath",{id:l,clipPathUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("rect",{x:u.pageRect?.left||0,y:u.pageRect?.top||0,width:u.pageRect?.width||"100%",height:u.pageRect?.height||"100%"})})}),jsxRuntimeExports.jsxs("g",{clipPath:`url(#${l})`,children:[jsxRuntimeExports.jsx("path",{d:i(a),stroke:"#00FF7F",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.2",filter:"blur(2px)"}),jsxRuntimeExports.jsx("path",{d:i(a),stroke:"#00FF7F",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.6"}),a.filter((c,m)=>m%5===0).map((c,m)=>jsxRuntimeExports.jsx("circle",{cx:c.x,cy:c.y,r:"1.5",fill:"#00FF7F",opacity:"0.4",children:jsxRuntimeExports.jsx("animate",{attributeName:"opacity",values:"0.4;0.7;0.4",dur:"1s",repeatCount:"indefinite"})},m))]})]})})()]})};MagicWandLayer.propTypes={drawnPaths:PropTypes.array.isRequired,currentPath:PropTypes.array.isRequired,isDrawing:PropTypes.bool.isRequired,generatePathString:PropTypes.func.isRequired,onPathClick:PropTypes.func};const MagicActionDialog=({isOpen:y,selectedText:a,initialPosition:d,needsManualDrop:i,onTranslate:h,onExplain:E,onAnnotate:R,onClose:M})=>{const[C,u]=reactExports.useState(!1),[l,c]=reactExports.useState(!1),[m,x]=reactExports.useState(""),p=reactExports.useCallback(async()=>{if(a.trim()){c(!0),x("translate");try{await h(a,"ja")}catch(P){console.error("Translation failed:",P)}finally{c(!1),x("")}}},[a,h]),_=reactExports.useCallback(async()=>{if(a.trim()){c(!0),x("explain");try{await E(a)}catch(P){console.error("Explain failed:",P)}finally{c(!1),x("")}}},[a,E]),D=reactExports.useCallback(async()=>{if(a.trim()){c(!0),x("annotate");try{await R(a)}catch(P){console.error("Annotate failed:",P)}finally{c(!1),x("")}}},[a,R]),b=reactExports.useCallback(()=>{console.log("Manual drop requested")},[]);if(!y)return null;const L=a&&a.trim().length>0,N=a?a.length:0,U=N>500,S=U?a.substring(0,500)+"...":a;return jsxRuntimeExports.jsxs(DraggableModal,{isOpen:y,initialPosition:d,onClose:M,className:"magic-action-dialog",draggableHandle:".magic-dialog-header",children:[jsxRuntimeExports.jsxs("div",{className:"magic-dialog-header",children:[jsxRuntimeExports.jsx("button",{className:"magic-dialog-collapse-btn",onClick:()=>u(!C),"aria-label":C?"Expand text preview":"Collapse text preview",children:jsxRuntimeExports.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{transform:C?"rotate(-90deg)":"rotate(0deg)"},children:jsxRuntimeExports.jsx("polyline",{points:"6,9 12,15 18,9"})})}),jsxRuntimeExports.jsx("h3",{id:"magic-dialog-title",className:"magic-dialog-title",children:L?"Selected Text":"No Text Found"}),jsxRuntimeExports.jsx("button",{className:"magic-dialog-close-btn",onClick:P=>{P.preventDefault(),P.stopPropagation(),M()},"aria-label":"Close dialog",children:jsxRuntimeExports.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),jsxRuntimeExports.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),!C&&jsxRuntimeExports.jsx("div",{className:"magic-dialog-text-preview",children:L?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"magic-dialog-text-content",children:S}),jsxRuntimeExports.jsxs("div",{className:"magic-dialog-text-info",children:[U&&jsxRuntimeExports.jsxs("span",{className:"magic-dialog-truncation-notice",children:["Text truncated to first 500 characters (original ",N," characters)"]}),jsxRuntimeExports.jsxs("span",{className:"magic-dialog-text-stats",children:[a.split(`
`).length," lines, ",N," characters"]})]})]}):jsxRuntimeExports.jsxs("div",{className:"magic-dialog-no-text",children:[jsxRuntimeExports.jsx("p",{children:"No text was found below the drawn line."}),i&&jsxRuntimeExports.jsx("button",{className:"magic-dialog-manual-drop-btn",onClick:b,children:"Try dropping selection down"})]})}),jsxRuntimeExports.jsxs("div",{className:"magic-dialog-actions",children:[jsxRuntimeExports.jsxs("button",{className:"magic-dialog-action-btn magic-dialog-translate-btn",onClick:p,disabled:!L||l,"aria-label":"Translate selected text (T)",children:[l&&m==="translate"?jsxRuntimeExports.jsx("div",{className:"magic-dialog-loading-spinner"}):jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10"}),jsxRuntimeExports.jsx("path",{d:"M2 12h20"}),jsxRuntimeExports.jsx("path",{d:"M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"})]}),"Translate"]}),jsxRuntimeExports.jsxs("button",{className:"magic-dialog-action-btn magic-dialog-explain-btn",onClick:_,disabled:!L||l,"aria-label":"Explain selected text (E)",children:[l&&m==="explain"?jsxRuntimeExports.jsx("div",{className:"magic-dialog-loading-spinner"}):jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10"}),jsxRuntimeExports.jsx("path",{d:"M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),"Explain"]}),jsxRuntimeExports.jsxs("button",{className:"magic-dialog-action-btn magic-dialog-highlight-btn",onClick:D,disabled:!L||l,"aria-label":"Highlight selected text (A)",children:[l&&m==="annotate"?jsxRuntimeExports.jsx("div",{className:"magic-dialog-loading-spinner"}):jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("path",{d:"M3.5 16.5L14 6l4 4L7.5 20.5H4v-3.5z"}),jsxRuntimeExports.jsx("polygon",{points:"14 6 16.5 3.5 21 8 18 10"}),jsxRuntimeExports.jsx("line",{x1:"6.5",y1:"17.5",x2:"9",y2:"20"})]}),"Highlight"]})]}),jsxRuntimeExports.jsx("div",{className:"magic-dialog-shortcuts"})]})};MagicActionDialog.propTypes={isOpen:PropTypes.bool.isRequired,selectedText:PropTypes.string,initialPosition:PropTypes.shape({x:PropTypes.number.isRequired,y:PropTypes.number.isRequired}),needsManualDrop:PropTypes.bool,onTranslate:PropTypes.func.isRequired,onExplain:PropTypes.func.isRequired,onAnnotate:PropTypes.func.isRequired,onClose:PropTypes.func.isRequired};MagicActionDialog.defaultProps={selectedText:"",initialPosition:null,needsManualDrop:!1};function ActionInputDialog({isOpen:y,initialPosition:a,selectedText:d,onClose:i,onCopy:h,onTranslate:E,onQuery:R,onSend:M}){const[C,u]=reactExports.useState(d||""),[l,c]=reactExports.useState(!1),m=reactExports.useRef(null);return reactExports.useEffect(()=>{y&&(u(d||""),requestAnimationFrame(()=>{const x=m.current;if(x){x.focus();const p=document.createRange();p.selectNodeContents(x),p.collapse(!1);const _=window.getSelection();_.removeAllRanges(),_.addRange(p)}}))},[y,d]),y?jsxRuntimeExports.jsxs(DraggableModal,{isOpen:y,initialPosition:a,onClose:i,className:"action-input-dialog",draggableHandle:".aid-header",children:[jsxRuntimeExports.jsx("div",{className:"aid-header","aria-hidden":"true"}),jsxRuntimeExports.jsx("div",{className:"aid-body",children:jsxRuntimeExports.jsxs("div",{className:"aid-input-wrap",children:[jsxRuntimeExports.jsx("div",{ref:m,className:"aid-input",contentEditable:!0,role:"textbox","aria-label":"Message input","data-placeholder":"Ask me anything...",suppressContentEditableWarning:!0,onInput:x=>{u(x.currentTarget.textContent||"")},onKeyDown:x=>{if(x.key==="Enter"&&!x.shiftKey){x.preventDefault(),x.stopPropagation(),!l&&C.trim()&&(c(!0),Promise.resolve(M?.(C.trim(),d)).catch(()=>{}).finally(()=>{c(!1),u(""),m.current&&(m.current.textContent="")}));return}if(x.key==="Enter"){x.preventDefault(),x.stopPropagation();return}x.stopPropagation()},onPaste:x=>{x.preventDefault();const p=(x.clipboardData.getData("text")||"").replace(/\s+/g," ");if(document.queryCommandSupported("insertText"))document.execCommand("insertText",!1,p);else{const _=m.current;_&&(_.textContent=(_.textContent||"")+p)}u(m.current?.textContent||"")},onMouseDown:x=>{x.stopPropagation()}}),jsxRuntimeExports.jsx("button",{className:"aid-send-btn",onClick:x=>{x.stopPropagation(),!l&&C.trim()&&(c(!0),Promise.resolve(M?.(C.trim(),d)).catch(()=>{}).finally(()=>{c(!1),u(""),m.current&&(m.current.textContent="")}))},"aria-label":"Send",title:"Send",disabled:l||!C.trim(),children:jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":!0,focusable:"false",style:{display:"block"},children:[jsxRuntimeExports.jsx("path",{d:"M22 2L11 13",fill:"none",stroke:"currentColor",strokeWidth:"1.6"}),jsxRuntimeExports.jsx("path",{d:"M22 2l-7 20-4-9-9-4 20-7z",fill:"currentColor"})]})})]})}),jsxRuntimeExports.jsxs("div",{className:"aid-footer",children:[jsxRuntimeExports.jsx("button",{className:"aid-icon-btn",onClick:h,"aria-label":"Copy",title:"Copy",children:jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#0f172a",strokeWidth:"2",children:[jsxRuntimeExports.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),jsxRuntimeExports.jsx("path",{d:"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"})]})}),jsxRuntimeExports.jsx("button",{className:"aid-icon-btn",onClick:()=>E&&E(d||C),"aria-label":"Translate",title:"",children:jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#0f172a",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10"}),jsxRuntimeExports.jsx("path",{d:"M2 12h20"}),jsxRuntimeExports.jsx("path",{d:"M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"})]})}),jsxRuntimeExports.jsx("button",{className:"aid-icon-btn",onClick:R,"aria-label":"Search",title:"",children:jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#0f172a",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"11",cy:"11",r:"8"}),jsxRuntimeExports.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})]}):null}ActionInputDialog.propTypes={isOpen:PropTypes.bool.isRequired,initialPosition:PropTypes.shape({x:PropTypes.number,y:PropTypes.number}),selectedText:PropTypes.string,onClose:PropTypes.func.isRequired,onCopy:PropTypes.func.isRequired,onTranslate:PropTypes.func.isRequired,onQuery:PropTypes.func.isRequired,onSend:PropTypes.func};ActionInputDialog.defaultProps={selectedText:"",initialPosition:{x:120,y:120}};const API_ROOT="http://localhost:8080".replace(/\/$/,""),API_KEY="0403e9262cb81a32d5dcf83e62b29feddf27237fe4bcb2032eae4dfc96f37591",apiV1=(y="")=>`${API_ROOT}/api/v1${y}`,API_BASE_URL$5=apiV1();class DocumentService{getHeaders(){return{"X-API-Key":API_KEY}}getHeadersWithContentType(){return{"Content-Type":"application/json","X-API-Key":API_KEY}}async uploadDocument(a,d=null){const i=new FormData;i.append("file",a),d&&i.append("workspace_id",d);const h=await fetch(`${API_BASE_URL$5}/documents/upload`,{method:"POST",headers:this.getHeaders(),body:i});if(!h.ok){const E=await h.json();throw new Error(E.detail||"Upload failed")}return await h.json()}async createWorkspace(a=null){const d=await fetch(`${API_BASE_URL$5}/workspaces`,{method:"POST",headers:this.getHeadersWithContentType(),body:JSON.stringify({name:a})});if(!d.ok){const i=await d.json();throw new Error(i.detail||"Failed to create workspace")}return await d.json()}async getWorkspaceDocuments(a,d=100,i=0){const h=await fetch(`${API_BASE_URL$5}/workspaces/${a}/documents?limit=${d}&offset=${i}`,{headers:this.getHeaders()});if(!h.ok){const E=await h.json();throw new Error(E.detail||"Failed to fetch workspace documents")}return await h.json()}async listWorkspaces(a=100,d=0){const i=await fetch(`${API_BASE_URL$5}/workspaces?limit=${a}&offset=${d}`,{headers:this.getHeaders()});if(!i.ok){const h=await i.json();throw new Error(h.detail||"Failed to fetch workspaces")}return await i.json()}async updateWorkspaceName(a,d){const i=await fetch(`${API_BASE_URL$5}/workspaces/${a}`,{method:"PATCH",headers:this.getHeadersWithContentType(),body:JSON.stringify({name:d})});if(!i.ok){const h=await i.json();throw new Error(h.detail||"Failed to update workspace")}return await i.json()}async deleteWorkspace(a){const d=await fetch(`${API_BASE_URL$5}/workspaces/${a}`,{method:"DELETE",headers:this.getHeaders()});if(!d.ok){const i=await d.json();throw new Error(i.detail||"Failed to delete workspace")}return await d.json()}async getDocuments(a=100,d=0){const i=await fetch(`${API_BASE_URL$5}/documents?limit=${a}&offset=${d}`,{headers:this.getHeaders()});if(!i.ok){const h=await i.json();throw new Error(h.detail||"Failed to fetch documents")}return await i.json()}async getDocument(a){const d=await fetch(`${API_BASE_URL$5}/documents/${a}`,{headers:this.getHeaders()});if(!d.ok){const i=await d.json();throw new Error(i.detail||"Failed to fetch document")}return await d.json()}async deleteDocument(a){const d=await fetch(`${API_BASE_URL$5}/documents/${a}`,{method:"DELETE",headers:this.getHeaders()});if(!d.ok){const i=await d.json();throw new Error(i.detail||"Failed to delete document")}return await d.json()}async updateDocument(a,d={}){const i=await fetch(`${API_BASE_URL$5}/documents/${a}`,{method:"PATCH",headers:this.getHeadersWithContentType(),body:JSON.stringify(d)});if(!i.ok){const h=await i.json();throw new Error(h.detail||"Failed to update document")}return await i.json()}async downloadDocument(a){const d=await fetch(`${API_BASE_URL$5}/documents/${a}/download`,{headers:this.getHeaders()});if(!d.ok){const i=await d.json();throw new Error(i.detail||"Failed to download document")}return d.blob()}getDownloadUrl(a){return`${API_BASE_URL$5}/documents/${a}/download?api_key=${API_KEY}`}async uploadToGemini(a,d={}){try{const{language:i="Chinese",format:h="markdown"}=d,E=await fetch(`${API_BASE_URL$5}/documents/${a}/upload-to-gemini`,{method:"POST",headers:this.getHeadersWithContentType(),body:JSON.stringify({language:i,format:h})});if(!E.ok)throw new Error(`HTTP error! status: ${E.status}`);return await E.json()}catch(i){throw console.error("Error uploading to Gemini:",i),i}}async createNote({title:a=null,content:d="",workspaceId:i=null,color:h=null}={}){const E={title:a,content:d,workspace_id:i,color:h},R=await fetch(`${API_BASE_URL$5}/documents/create-note`,{method:"POST",headers:this.getHeadersWithContentType(),body:JSON.stringify(E)});if(!R.ok){const M=await R.json();throw new Error(M.detail||"Failed to create note")}return await R.json()}}const documentService=new DocumentService;class LRUCache{constructor(a=50,d=10){this.maxSize=a,this.maxMemoryBytes=d*1024*1024,this.cache=new Map,this.accessOrder=new Map,this.memoryUsage=0,this.hits=0,this.misses=0}get(a){return this.cache.has(a)?(this.accessOrder.set(a,Date.now()),this.hits++,this.cache.get(a)):(this.misses++,null)}set(a,d){const i=this._estimateSize(d);if(this.cache.has(a)){const E=this.cache.get(a)._cacheSize||0;this.memoryUsage-=E}for(;this.cache.size>=this.maxSize||this.memoryUsage+i>this.maxMemoryBytes;)this._evictLRU();const h={...d,_cacheSize:i,_cacheTime:Date.now()};this.cache.set(a,h),this.accessOrder.set(a,Date.now()),this.memoryUsage+=i}delete(a){if(this.cache.has(a)){const d=this.cache.get(a);return this.memoryUsage-=d._cacheSize||0,this.cache.delete(a),this.accessOrder.delete(a),!0}return!1}clear(){this.cache.clear(),this.accessOrder.clear(),this.memoryUsage=0,this.hits=0,this.misses=0}getStats(){const a=this.hits+this.misses>0?this.hits/(this.hits+this.misses):0;return{size:this.cache.size,memoryUsageMB:(this.memoryUsage/(1024*1024)).toFixed(2),hitRate:(a*100).toFixed(1)+"%",hits:this.hits,misses:this.misses}}_evictLRU(){if(this.accessOrder.size===0)return;let a=null,d=1/0;for(const[i,h]of this.accessOrder)h<d&&(d=h,a=i);a&&this.delete(a)}_estimateSize(a){return JSON.stringify(a).length*2}}class PDFCacheManager{constructor(){this.caches=new Map,this.caches.set("spans",new LRUCache(100,10)),this.caches.set("layout",new LRUCache(50,5)),this.caches.set("highlights",new LRUCache(200,8)),this.spanDataCache=this.caches.get("spans"),this.layoutCache=this.caches.get("layout"),this.columnCache=new LRUCache(15,2),this.highlightCache=this.caches.get("highlights"),this.domRefCache=new WeakMap,this.performanceMetrics={cacheHits:0,cacheMisses:0,avgLookupTime:0,totalLookups:0,totalRequests:0,avgResponseTime:0},this.invalidationReasons=new Map,this.getSpanData=this.getSpanData.bind(this),this.setSpanData=this.setSpanData.bind(this),this.getLayoutAnalysis=this.getLayoutAnalysis.bind(this),this.setLayoutAnalysis=this.setLayoutAnalysis.bind(this),this.cleanupInterval=setInterval(()=>{this.cleanup()},6e4)}_generateSpanKey(a,d,i){return`span_${a}_${d.toFixed(2)}_${i}`}_generateLayoutKey(a,d,i){return`layout_${a}_${d.toFixed(2)}_${i}`}_generateColumnKey(a,d,i){return`column_${a}_${d.toFixed(2)}_${Math.round(i)}`}_generateHighlightKey(a,d,i){return`highlight_${a}_${d}_${i.toFixed(2)}`}_calculateTextLayerHash(a){if(!a)return"0";const d=a.querySelectorAll("span");let i=d.length.toString();const h=[0,Math.floor(d.length/2),d.length-1];for(const E of h)if(d[E]){const R=d[E].getBoundingClientRect();i+=`_${Math.round(R.left)}_${Math.round(R.top)}_${d[E].textContent.length}`}return i}getSpanData(a,d,i){const h=performance.now(),E=this._calculateTextLayerHash(i),R=this._generateSpanKey(a,d,E),M=this.spanDataCache.get(R);return this._updatePerformanceMetrics(h,M!==null),M?(console.log(`Cache HIT for span data: page ${a}, scale ${d}`),M):(console.log(`Cache MISS for span data: page ${a}, scale ${d}`),null)}setSpanData(a,d,i,h){const E=this._calculateTextLayerHash(i),R=this._generateSpanKey(a,d,E);this.spanDataCache.set(R,{spanData:h,pageIndex:a,scale:d,timestamp:Date.now()}),console.log(`Cached span data: page ${a}, scale ${d}, ${h.length} spans`)}getLayoutAnalysis(a,d,i){const h=performance.now(),E=this._generateLayoutKey(a,d,i),R=this.layoutCache.get(E);return this._updatePerformanceMetrics(h,R!==null),R?(console.log(`Cache HIT for layout analysis: page ${a}`),R):(console.log(`Cache MISS for layout analysis: page ${a}`),null)}setLayoutAnalysis(a,d,i,h){const E=this._generateLayoutKey(a,d,i);this.layoutCache.set(E,{layoutData:h,pageIndex:a,scale:d,spanCount:i,timestamp:Date.now()}),console.log(`Cached layout analysis: page ${a}, columns: ${h.columns?.length||0}`)}getColumnDetection(a,d,i){const h=performance.now(),E=this._generateColumnKey(a,d,i),R=this.columnCache.get(E);return this._updatePerformanceMetrics(h,R!==null),R}setColumnDetection(a,d,i,h){const E=this._generateColumnKey(a,d,i);this.columnCache.set(E,{columnData:h,pageIndex:a,scale:d,pageWidth:i,timestamp:Date.now()})}getHighlightData(a,d,i){const h=performance.now(),E=this._generateHighlightKey(a,d,i),R=this.highlightCache.get(E);return this._updatePerformanceMetrics(h,R!==null),R}setHighlightData(a,d,i,h){const E=this._generateHighlightKey(a,d,i);this.highlightCache.set(E,{highlightData:h,documentId:a,pageIndex:d,scale:i,timestamp:Date.now()})}setDOMRef(a,d){a&&typeof a=="object"&&this.domRefCache.set(a,d)}getDOMRef(a){return this.domRefCache.get(a)||null}invalidate(a){const{pageIndex:d,scale:i,documentId:h,reason:E="manual"}=a;let R=0;if(d!==void 0||i!==void 0)for(const M of this.spanDataCache.cache.keys())this._shouldInvalidateKey(M,a)&&(this.spanDataCache.delete(M),R++);if(d!==void 0||i!==void 0)for(const M of this.layoutCache.cache.keys())this._shouldInvalidateKey(M,a)&&(this.layoutCache.delete(M),R++);if(d!==void 0||i!==void 0)for(const M of this.columnCache.cache.keys())this._shouldInvalidateKey(M,a)&&(this.columnCache.delete(M),R++);if(h!==void 0||d!==void 0||i!==void 0)for(const M of this.highlightCache.cache.keys())this._shouldInvalidateKey(M,a)&&(this.highlightCache.delete(M),R++);return this.invalidationReasons.set(Date.now(),{reason:E,criteria:a,count:R}),console.log(`Cache invalidation: ${R} entries removed (reason: ${E})`),R}_shouldInvalidateKey(a,d){const{pageIndex:i,scale:h,documentId:E}=d;return!!(i!==void 0&&a.includes(`_${i}_`)||h!==void 0&&a.includes(`_${h.toFixed(2)}_`)||E!==void 0&&a.includes(`_${E}_`))}_updatePerformanceMetrics(a,d){const i=performance.now()-a;this.performanceMetrics.totalLookups++,d?this.performanceMetrics.cacheHits++:this.performanceMetrics.cacheMisses++;const h=this.performanceMetrics.avgLookupTime*(this.performanceMetrics.totalLookups-1)+i;this.performanceMetrics.avgLookupTime=h/this.performanceMetrics.totalLookups}getStats(){return{spanData:this.spanDataCache.getStats(),layout:this.layoutCache.getStats(),column:this.columnCache.getStats(),highlight:this.highlightCache.getStats(),performance:{...this.performanceMetrics,avgLookupTime:this.performanceMetrics.avgLookupTime.toFixed(3)+"ms"},totalMemoryMB:(parseFloat(this.spanDataCache.getStats().memoryUsageMB)+parseFloat(this.layoutCache.getStats().memoryUsageMB)+parseFloat(this.columnCache.getStats().memoryUsageMB)+parseFloat(this.highlightCache.getStats().memoryUsageMB)).toFixed(2)}}get(a,d){const i=performance.now();this.performanceMetrics.totalRequests++;const h=this.caches.get(a);if(!h)return console.warn(`Unknown cache type: ${a}`),null;const E=h.get(d),R=performance.now()-i,M=this.performanceMetrics.avgResponseTime*(this.performanceMetrics.totalRequests-1)+R;return this.performanceMetrics.avgResponseTime=M/this.performanceMetrics.totalRequests,E!==null?(this.performanceMetrics.cacheHits++,console.log(`Cache HIT for ${a}:${d} (${R.toFixed(2)}ms)`)):(this.performanceMetrics.cacheMisses++,console.log(`Cache MISS for ${a}:${d} (${R.toFixed(2)}ms)`)),E}set(a,d,i,h={}){const E=this.caches.get(a);return E?(E.set(d,i),console.log(`Cached ${a}:${d} (size: ${this._getValueSize(i)})`),!0):(console.warn(`Unknown cache type: ${a}`),!1)}has(a,d){const i=this.caches.get(a);return i?i.cache.has(d):!1}delete(a,d){const i=this.caches.get(a);if(!i)return!1;const h=i.delete(d);return h&&console.log(`Deleted cache entry ${a}:${d}`),h}_getValueSize(a){try{return JSON.stringify(a).length+" bytes"}catch{return"unknown size"}}clearCache(a){const d=this.caches.get(a);d?(d.clear(),console.log(`Cleared ${a} cache`)):console.warn(`Unknown cache type: ${a}`)}clearAllCaches(){this.clearAll()}clearAll(){this.columnCache.clear(),this.domRefCache=new WeakMap;for(const[a,d]of this.caches)d.clear(),console.log(`Cleared ${a} cache`);this.performanceMetrics={cacheHits:0,cacheMisses:0,avgLookupTime:0,totalLookups:0,totalRequests:0,avgResponseTime:0},this.invalidationReasons.clear(),console.log("All caches cleared")}setDocumentInfo(a){this.documentInfo={...this.documentInfo,...a,timestamp:Date.now()},console.log("Document info updated:",this.documentInfo)}async preloadPageData(a){try{const d=`page_${a}_spans`,i=`page_${a}_dimensions`,h=this.spanDataCache.cache.has(d),E=this.layoutCache.cache.has(i);if(h&&E){console.log(`Page ${a} data already cached`);return}const R=document.querySelector(`[data-page-number="${a+1}"]`);if(!R){console.warn(`Page container not found for preload: ${a+1}`);return}if(!E){const M=R.getBoundingClientRect(),C={width:M.width,height:M.height,rect:M};this.layoutCache.set(i,C)}if(!h){const M=R.querySelector(".react-pdf__Page__textContent");if(M){const C=Array.from(M.querySelectorAll("span")).filter(u=>{const l=u.textContent?.trim();return l&&l.length>0}).map(u=>{const l=u.getBoundingClientRect(),c=R.getBoundingClientRect();return{element:u,text:u.textContent,rect:{left:l.left-c.left,top:l.top-c.top,right:l.right-c.left,bottom:l.bottom-c.top,width:l.width,height:l.height},absoluteRect:l}});this.spanDataCache.set(d,C),console.log(`Preloaded ${C.length} spans for page ${a+1}`)}}}catch(d){console.error(`Error preloading page ${a} data:`,d)}}cleanup(a=300*1e3){const d=Date.now();let i=0;const h=[this.spanDataCache,this.layoutCache,this.columnCache,this.highlightCache];for(const E of h)for(const[R,M]of E.cache)M._cacheTime&&d-M._cacheTime>a&&(E.delete(R),i++);return i>0&&console.log(`Cache cleanup: removed ${i} expired entries`),i}}const cacheManager=new PDFCacheManager;cacheManager.documentInfo={numPages:0,documentId:null,timestamp:Date.now()};typeof window<"u"&&setInterval(()=>{cacheManager.cleanup()},300*1e3);function calculateCorridorSelection({pageElement:y,textLayer:a,minX:d,maxX:i,minY:h,maxY:E,autoDropThreshold:R=20}){if(console.log("=== Enhanced Magic Wand Text Selection Debug ==="),console.log("Input parameters:",{minX:d,maxX:i,minY:h,maxY:E,autoDropThreshold:R}),!y||!a)return console.log("Missing pageElement or textLayer"),{selectedText:"",rectsNorm:[],spansUsed:[],lines:[],isEmpty:!0};const M=y.dataset.pageNumber||"unknown",C=`page_${M}_dimensions`;let u=cacheManager.get("layout",C);if(!u){const b=y.getBoundingClientRect();u={width:b.width,height:b.height,rect:b},cacheManager.set("layout",C,u,{ttl:3e4})}const{width:l,height:c,rect:m}=u;console.log("Page dimensions:",{pageWidth:l,pageHeight:c}),console.log("Page rect:",m);const x=`page_${M}_spans`;let p=cacheManager.get("spans",x);if(!p||!Array.isArray(p)){const b=Array.from(a.querySelectorAll("span"));console.log(`Found ${b.length} text spans in text layer`),p=b.map((L,N)=>{const U=L.getBoundingClientRect(),S={left:U.left-m.left,top:U.top-m.top,right:U.right-m.left,bottom:U.bottom-m.top,width:U.width,height:U.height},P={span:L,rect:S,text:L.textContent||"",centerX:S.left+S.width/2,centerY:S.top+S.height/2,index:N};return N<5&&console.log(`Span ${N}:`,{text:P.text.substring(0,20)+(P.text.length>20?"...":""),rect:S}),P}),cacheManager.set("spans",x,p,{ttl:6e4}),console.log(`Cached ${p.length} spans for page ${M}`)}else console.log(`Using cached spans for page ${M}: ${p.length} spans`);console.log("Selection corridor:",{minX:d,maxX:i,yRange:[h,E]});const _=detectAndSelectMultiColumn(p,d,i,h,E,l);if(_.isMultiColumn)return console.log("Multi-column layout detected, using column-aware selection"),processMultiColumnSelection(_,l,c);console.log("Single-column layout detected, using standard selection");let D=selectSpansInCorridor(p,d,i,h,E);return console.log(`First attempt: found ${D.length} spans`),D.length===0&&(console.log(`No spans found, trying expanded range [${h}, ${E+R}]`),D=selectSpansInCorridor(p,d,i,h,E+R),console.log(`Expanded range attempt: found ${D.length} spans`)),D.length===0?(console.log("No spans selected, returning empty result"),{selectedText:"",rectsNorm:[],spansUsed:[],lines:[],isEmpty:!0,needsManualDrop:!0}):processSingleColumnSelection(D,l,c)}function detectAndSelectMultiColumn(y,a,d,i,h,E){if(!Array.isArray(y))return console.warn("spanData is not an array, returning empty result"),{selectedSpans:[],isMultiColumn:!1,columns:[],layoutAnalysis:{isMultiColumn:!1,columns:[]}};const R=analyzeTextLayout(y,E);if(!R.isMultiColumn)return{isMultiColumn:!1};console.log(`Detected ${R.columns.length} columns:`,R.columns.map(l=>`[${Math.round(l.left)}-${Math.round(l.right)}]`).join(", "));const M=R.columns.filter(l=>!(d<l.left||a>l.right));if(M.length===0)return{isMultiColumn:!0,selectedSpans:[]};const C=applyEndpointColumnPriority(M,a,d);console.log("Column priority order:",C.map(l=>`[${Math.round(l.left)}-${Math.round(l.right)}] (priority: ${l.priority})`).join(", "));let u=[];for(const l of C){const c=selectSpansInColumnCorridor(y,Math.max(a,l.left),Math.min(d,l.right),i,h);if(c.length>0&&(u.push(...c),console.log(`Selected ${c.length} spans from column [${Math.round(l.left)}-${Math.round(l.right)}]`),l.priority==="high"&&c.length>0))break}return{isMultiColumn:!0,selectedSpans:u,columns:R.columns,prioritizedColumns:C}}function analyzeTextLayout(y,a){if(!Array.isArray(y)||y.length<10)return{isMultiColumn:!1,columns:[]};const d=new Map,i=5;y.forEach(M=>{const C=Math.round(M.rect.top/i)*i;d.has(C)||d.set(C,[]),d.get(C).push(M)});const h=Array.from(d.values()).filter(M=>M.length>0).map(M=>(M.sort((C,u)=>C.rect.left-u.rect.left),{spans:M,left:M[0].rect.left,right:M[M.length-1].rect.right,top:Math.min(...M.map(C=>C.rect.top)),width:M[M.length-1].rect.right-M[0].rect.left})),E=detectColumnBoundaries(h,a);if(E.length<2)return{isMultiColumn:!1,columns:[]};const R=[];for(let M=0;M<E.length-1;M++)R.push({left:E[M],right:E[M+1],index:M});return{isMultiColumn:R.length>1,columns:R,lines:h}}function detectColumnBoundaries(y,a){const d=a*.05,i=[0],h=Math.max(1,Math.floor(a/100)),E=new Array(Math.ceil(a/h)).fill(0);y.forEach(C=>{const u=Math.floor(C.left/h),l=Math.floor(C.right/h);for(let c=u;c<=l&&c<E.length;c++)E[c]++});let R=!1,M=0;for(let C=0;C<E.length;C++){const u=C*h;if(E[C]===0&&!R)R=!0,M=u;else if(E[C]>0&&R){const l=u-M;l>=d&&i.push(M+l/2),R=!1}}return i.push(a),i.sort((C,u)=>C-u)}function applyEndpointColumnPriority(y,a,d){const i=(a+d)/2;return y.map(h=>{const E=(h.left+h.right)/2,R=Math.abs(E-d),M=Math.abs(E-a);let C="low";return R<M?C="high":Math.abs(E-i)<(d-a)*.3&&(C="medium"),{...h,priority:C,distanceFromEnd:R,distanceFromStart:M}}).sort((h,E)=>{const R={high:3,medium:2,low:1},M=R[E.priority]-R[h.priority];return M!==0?M:h.distanceFromEnd-E.distanceFromEnd})}function selectSpansInColumnCorridor(y,a,d,i,h){return Array.isArray(y)?y.filter(E=>{const R=E.rect,M=R.left,C=R.right,u=R.top,l=R.bottom,c=!(C<a||M>d),m=!(l<i||u>h);return c&&m}):[]}function processMultiColumnSelection(y,a,d){const{selectedSpans:i}=y;return i.length===0?{selectedText:"",rectsNorm:[],spansUsed:[],lines:[],isEmpty:!0,isMultiColumn:!0}:processSingleColumnSelection(i,a,d,!0)}function processSingleColumnSelection(y,a,d,i=!1){console.log("Selected spans:"),y.forEach((M,C)=>{console.log(`  ${C}: "${M.text}" at (${Math.round(M.rect.left)}, ${Math.round(M.rect.top)})`)}),y.sort((M,C)=>{const u=M.rect.top-C.rect.top;return Math.abs(u)<5?M.rect.left-C.rect.left:u});const h=groupSpansIntoLines(y);console.log(`Grouped into ${h.length} lines`);const E=extractTextFromLines(h);console.log("Final selected text:",E),console.log("=== End Debug ===");const R=y.map(M=>({x:M.rect.left/a,y:M.rect.top/d,w:M.rect.width/a,h:M.rect.height/d}));return{selectedText:E,rectsNorm:R,spansUsed:y.map(M=>M.span),lines:h,isEmpty:!1,isMultiColumn:i}}function selectSpansInCorridor(y,a,d,i,h){if(!Array.isArray(y))return console.warn("spanData is not an array in selectSpansInCorridor"),[];const E=10,R=i-E,M=h+E;console.log(`
--- Filtering spans with corridor (${a}, ${d}) and Y range ${i} to ${h} (adjusted: ${R} to ${M}) ---`);const C=y.filter((u,l)=>{const{rect:c,text:m}=u;if(!(c.top>=R&&c.top<=M))return l<10&&console.log(`  Span ${l} REJECTED (outside Y range): "${m.substring(0,15)}..." top=${Math.round(c.top)} not in [${R}, ${M}]`),!1;const p=c.left,_=c.right,D=!(_<a||p>d);return D?console.log(`  Span ${l} SELECTED: "${m.substring(0,20)}..." at (${Math.round(p)}-${Math.round(_)}, ${Math.round(c.top)})`):l<10&&console.log(`  Span ${l} REJECTED (outside corridor): "${m.substring(0,15)}..." x=${Math.round(p)}-${Math.round(_)} vs corridor ${a}-${d}`),D});return console.log(`--- End filtering: ${C.length} spans selected ---
`),C}function groupSpansIntoLines(y){if(y.length===0)return[];const a=[];let d=[y[0]];for(let i=1;i<y.length;i++){const h=y[i],E=d[d.length-1];Math.abs(h.rect.top-E.rect.top)<5?d.push(h):(a.push(d),d=[h])}return a.push(d),a}function extractTextFromLines(y){return y.map(a=>{a.sort((i,h)=>i.rect.left-h.rect.left);let d="";for(let i=0;i<a.length;i++){const h=a[i];let E=h.text;if(E.endsWith("-")&&i<a.length-1){const M=a[i+1].text;M&&M[0]&&M[0]===M[0].toLowerCase()&&(E=E.slice(0,-1))}if(i>0){const R=a[i-1];h.rect.left-R.rect.right>2&&(d+=" ")}d+=E}return d.trim()}).join(`
`)}class ObserverManager{constructor(){this.observers=new Map,this.callbacks=new Map,this.debounceTimers=new Map,this.performanceMetrics={totalObservations:0,avgProcessingTime:0,observerCount:0},this.createResizeObserver=this.createResizeObserver.bind(this),this.createMutationObserver=this.createMutationObserver.bind(this),this.createIntersectionObserver=this.createIntersectionObserver.bind(this)}_createDebouncedCallback(a,d=100,i=!1){return(...h)=>{const E=a.toString();this.debounceTimers.has(E)&&clearTimeout(this.debounceTimers.get(E));const R=()=>{const M=performance.now();try{a(...h);const C=performance.now()-M;this.performanceMetrics.totalObservations++;const u=this.performanceMetrics.avgProcessingTime*(this.performanceMetrics.totalObservations-1)+C;this.performanceMetrics.avgProcessingTime=u/this.performanceMetrics.totalObservations}catch(C){console.error("Observer callback error:",C)}this.debounceTimers.delete(E)};if(i&&!this.debounceTimers.has(E))R();else{const M=setTimeout(R,d);this.debounceTimers.set(E,M)}}}createResizeObserver({elements:a,callback:d,debounceDelay:i=100,immediate:h=!1,observerId:E=null}){const R=E||`resize_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;if(this.observers.has(R))return console.warn(`Observer with id '${R}' already exists`),R;const M=this._createDebouncedCallback(l=>{const c=l.map(x=>({element:x.target,contentRect:x.contentRect,borderBoxSize:x.borderBoxSize,contentBoxSize:x.contentBoxSize,devicePixelContentBoxSize:x.devicePixelContentBoxSize})),m=c.map(x=>x.element).filter(x=>x.classList.contains("page-container"));m.length>0&&m.forEach(x=>{const p=x.getAttribute("data-page-number");if(p){const _=parseInt(p)-1;cacheManager.invalidate({pageIndex:_,reason:"page_resize"})}}),d(c)},i,h),C=new ResizeObserver(M),u=Array.isArray(a)?a:[a];return u.forEach(l=>{l&&l.nodeType===Node.ELEMENT_NODE&&C.observe(l)}),this.observers.set(R,C),this.callbacks.set(R,d),this.performanceMetrics.observerCount++,console.log(`Created ResizeObserver '${R}' for ${u.length} elements`),R}createMutationObserver({element:a,callback:d,options:i={},debounceDelay:h=150,immediate:E=!1,observerId:R=null}){const M=R||`mutation_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;if(this.observers.has(M))return console.warn(`Observer with id '${M}' already exists`),M;const u={...{childList:!0,subtree:!0,attributes:!1,attributeOldValue:!1,characterData:!1,characterDataOldValue:!1},...i},l=this._createDebouncedCallback(m=>{const x=m.map(_=>({type:_.type,target:_.target,addedNodes:Array.from(_.addedNodes),removedNodes:Array.from(_.removedNodes),attributeName:_.attributeName,oldValue:_.oldValue}));x.some(_=>_.addedNodes.some(D=>D.classList&&D.classList.contains("react-pdf__Page__textContent"))||_.removedNodes.some(D=>D.classList&&D.classList.contains("react-pdf__Page__textContent")))&&cacheManager.invalidate({reason:"text_layer_mutation"}),d(x)},h,E),c=new MutationObserver(l);return a&&a.nodeType===Node.ELEMENT_NODE&&c.observe(a,u),this.observers.set(M,c),this.callbacks.set(M,d),this.performanceMetrics.observerCount++,console.log(`Created MutationObserver '${M}' for element:`,a),M}createIntersectionObserver({elements:a,callback:d,options:i={},debounceDelay:h=50,immediate:E=!0,observerId:R=null}){const M=R||`intersection_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;if(this.observers.has(M))return console.warn(`Observer with id '${M}' already exists`),M;const u={...{root:null,rootMargin:"0px",threshold:[0,.1,.25,.5,.75,1]},...i},l=this._createDebouncedCallback(x=>{const p=x.map(_=>({element:_.target,isIntersecting:_.isIntersecting,intersectionRatio:_.intersectionRatio,intersectionRect:_.intersectionRect,boundingClientRect:_.boundingClientRect,rootBounds:_.rootBounds,time:_.time}));d(p)},h,E),c=new IntersectionObserver(l,u),m=Array.isArray(a)?a:[a];return m.forEach(x=>{x&&x.nodeType===Node.ELEMENT_NODE&&c.observe(x)}),this.observers.set(M,c),this.callbacks.set(M,d),this.performanceMetrics.observerCount++,console.log(`Created IntersectionObserver '${M}' for ${m.length} elements`),M}createEventObserver({element:a=window,eventType:d,callback:i,options:h={},debounceDelay:E=100,immediate:R=!1,observerId:M=null}){const C=M||`event_${d}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;if(this.observers.has(C))return console.warn(`Observer with id '${C}' already exists`),C;const u=this._createDebouncedCallback(i,E,R);a.addEventListener(d,u,h);const l={type:"event",element:a,eventType:d,callback:u,options:h,cleanup:()=>a.removeEventListener(d,u,h)};return this.observers.set(C,l),this.callbacks.set(C,i),this.performanceMetrics.observerCount++,console.log(`Created EventObserver '${C}' for '${d}' on:`,a),C}addElements(a,d){const i=this.observers.get(a);if(!i)return console.warn(`Observer '${a}' not found`),!1;if(i.type==="event")return console.warn(`Cannot add elements to event observer '${a}'`),!1;const h=Array.isArray(d)?d:[d];return h.forEach(E=>{E&&E.nodeType===Node.ELEMENT_NODE&&i.observe(E)}),console.log(`Added ${h.length} elements to observer '${a}'`),!0}removeElements(a,d){const i=this.observers.get(a);if(!i)return console.warn(`Observer '${a}' not found`),!1;if(i.type==="event")return console.warn(`Cannot remove elements from event observer '${a}'`),!1;const h=Array.isArray(d)?d:[d];return h.forEach(E=>{E&&E.nodeType===Node.ELEMENT_NODE&&i.unobserve(E)}),console.log(`Removed ${h.length} elements from observer '${a}'`),!0}disconnect(a){const d=this.observers.get(a);if(!d)return console.warn(`Observer '${a}' not found`),!1;const i=this.callbacks.get(a);if(i){const h=i.toString();this.debounceTimers.has(h)&&(clearTimeout(this.debounceTimers.get(h)),this.debounceTimers.delete(h))}return d.type==="event"?d.cleanup():d.disconnect(),this.observers.delete(a),this.callbacks.delete(a),this.performanceMetrics.observerCount--,console.log(`Disconnected observer '${a}'`),!0}disconnectAll(){const a=Array.from(this.observers.keys());a.forEach(d=>{this.disconnect(d)});for(const d of this.debounceTimers.values())clearTimeout(d);this.debounceTimers.clear(),console.log(`Disconnected all ${a.length} observers`)}getObserverInfo(a){const d=this.observers.get(a),i=this.callbacks.get(a);return d?{id:a,type:d.type||d.constructor.name,hasCallback:!!i,isActive:!0}:null}listObservers(){const a=[];for(const[d,i]of this.observers)a.push({id:d,type:i.type||i.constructor.name,hasCallback:this.callbacks.has(d)});return a}getStats(){return{...this.performanceMetrics,avgProcessingTime:this.performanceMetrics.avgProcessingTime.toFixed(3)+"ms",activeObservers:this.observers.size,pendingCallbacks:this.debounceTimers.size}}setupPDFViewerObservers(a,d={}){const{onResize:i=()=>{},onMutation:h=()=>{},onPageVisibility:E=()=>{},onScroll:R=()=>{},debounceDelays:M={}}=d,u={...{resize:100,mutation:150,intersection:50,scroll:50},...M},l={};if(!a.current)return console.warn("Viewer ref not available for observer setup"),l;l.resize=this.createResizeObserver({elements:[a.current],callback:m=>{console.log("PDF viewer resize detected"),i(m)},debounceDelay:u.resize,observerId:"pdf_viewer_resize"}),l.mutation=this.createMutationObserver({element:a.current,callback:m=>{console.log("PDF viewer DOM mutation detected"),h(m)},options:{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-page-number","class"]},debounceDelay:u.mutation,observerId:"pdf_viewer_mutation"});const c=a.current.querySelectorAll(".page-container");return c.length>0&&(l.intersection=this.createIntersectionObserver({elements:Array.from(c),callback:m=>{console.log("PDF page visibility changed"),E(m)},options:{root:a.current,rootMargin:"50px",threshold:[0,.1,.5,.9]},debounceDelay:u.intersection,observerId:"pdf_page_visibility"})),l.scroll=this.createEventObserver({element:a.current,eventType:"scroll",callback:m=>{console.log("PDF viewer scroll detected"),R(m)},options:{passive:!0},debounceDelay:u.scroll,observerId:"pdf_viewer_scroll"}),console.log("PDF viewer observers setup complete:",l),l}}const observerManager=new ObserverManager;typeof window<"u"&&window.addEventListener("beforeunload",()=>{observerManager.disconnectAll()});class ErrorBoundary extends React.Component{constructor(a){super(a),this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,d){console.error("PDFViewer error boundary caught:",a,d)}render(){return this.state.hasError?jsxRuntimeExports.jsx("div",{className:"error",role:"alert",style:{margin:"1rem"},children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{children:"Something went wrong"}),jsxRuntimeExports.jsx("p",{children:this.state.error?.message||"Unknown error"}),jsxRuntimeExports.jsx("button",{onClick:()=>window.location.reload(),children:"Reload Page"})]})}):this.props.children}}ErrorBoundary.propTypes={children:PropTypes.node.isRequired};const useTextSelection=y=>{const[a,d]=reactExports.useState(""),[i,h]=reactExports.useState({show:!1,x:0,y:0,selectedText:"",rects:[]});return reactExports.useEffect(()=>{const M=u=>{if(u.target.closest&&u.target.closest(".action-input-dialog"))return;const l=window.getSelection();if(l&&l.toString().trim()){const c=l.toString().trim(),m=l.getRangeAt(0),x=m.getClientRects();let _=m.getBoundingClientRect();if(x&&x.length>0){const b=Array.from(x),L=Math.max(...b.map(S=>S.bottom)),N=b.filter(S=>Math.abs(S.bottom-L)<=2);_=N.reduce((S,P)=>P.left<S.left?P:S,N[0])||b[0]}const D=y.current;if(D&&D.contains(m.commonAncestorContainer)){const b=window.innerWidth,L=window.innerHeight,N=420,U=72;let S=_.left,P=_.bottom+8;S+N>b-8&&(S=Math.max(8,b-N-8)),S<8&&(S=8),P+U>L-8&&(P=Math.max(8,_.top-U-8)),d(c);const z=Array.from(x||[]).map(Y=>({left:Y.left,top:Y.top,width:Y.width,height:Y.height}));h({show:!0,x:S,y:P,selectedText:c,rects:z})}}else h({show:!1,x:0,y:0,selectedText:"",rects:[]}),d("")},C=u=>{u.target.closest&&u.target.closest(".context-menu")||u.target.closest&&u.target.closest(".action-input-dialog")||(h({show:!1,x:0,y:0,selectedText:"",rects:[]}),d(""))};return document.addEventListener("mouseup",M),document.addEventListener("mousedown",C),document.addEventListener("selectstart",u=>{const l=y.current;l&&l.contains(u.target)&&u.stopPropagation()}),()=>{document.removeEventListener("mouseup",M),document.removeEventListener("mousedown",C)}},[y]),{selectedText:a,contextMenu:i,handleCopyText:async()=>{if(!(!a||a.trim()==="")){try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(a);else{const M=document.createElement("textarea");M.value=a,M.style.position="fixed",M.style.left="-999999px",M.style.top="-999999px",M.style.opacity="0",document.body.appendChild(M),M.focus(),M.select(),M.setSelectionRange(0,a.length);const C=document.execCommand("copy");if(document.body.removeChild(M),!C)throw new Error("Copy command was unsuccessful")}}catch(M){console.error("Failed to copy text:",M)}h({show:!1,x:0,y:0}),setTimeout(()=>{window.getSelection()?.removeAllRanges()},100)}},handleTranslateText:()=>{h({show:!1,x:0,y:0,selectedText:""})},setContextMenu:h}};function normalizeForSearch(y){return(y||"").toLowerCase().replace(/\u00A0/g," ").replace(/[\u2010\u2011\u2012\u2013\u2014]/g,"-").replace(/[\u200B\u200C\u200D\uFEFF\u00AD]/g,"")}function buildSearchIndex(y){const a=(y||"").toLowerCase().replace(/\u00A0/g," ").replace(/[\u2010\u2011\u2012\u2013\u2014]/g,"-"),d=[];let i="";for(let h=0;h<a.length;h++){const E=a.charCodeAt(h);E===8203||E===8204||E===8205||E===65279||E===173||(i+=a[h],d.push(h))}return{search:i,map:d}}const useSearchOverlay=y=>{const[a,d]=reactExports.useState(""),[i,h]=reactExports.useState([]),[E,R]=reactExports.useState(-1),M=reactExports.useRef(null),{numPages:C,pdfDocRef:u}=usePdfViewer(),l=reactExports.useRef(""),c=reactExports.useRef(null),m=reactExports.useRef([]),x=reactExports.useRef(!1),p=reactExports.useCallback(async()=>{if(!(!u?.current||!C||x.current||m.current&&m.current.length>=C+1&&m.current.slice(1,C+1).every(P=>typeof P=="string"))){x.current=!0;try{m.current=[],m.current.length=C+1;for(let P=1;P<=C;P++)try{const q=(await(await u.current.getPage(P)).getTextContent()).items.map(K=>K.str).join("");m.current[P]=q}catch{m.current[P]=""}}finally{x.current=!1}}},[u,C]),_=reactExports.useCallback(S=>{if(S<0||S>=i.length||!y.current)return;const P=y.current,z=i[S],q=P.querySelectorAll(".page-container")[z.page-1];if(!q)return;const K=()=>{const F=q.querySelector(".react-pdf__Page__textContent");if(!F)return!1;const O=document.createTreeWalker(F,NodeFilter.SHOW_TEXT),T=[];let g="";for(;O.nextNode();){const $t=O.currentNode,Ut=g.length,Kt=$t.textContent||"";g+=Kt,T.push({node:$t,start:Ut,end:Ut+Kt.length})}const w=normalizeForSearch(z.query||""),{search:I,map:B}=buildSearchIndex(g),X=w.length;let H=-1,v=0;const A=typeof z.order=="number"?z.order:0;for(let $t=0;$t<=A;$t++){if(H=I.indexOf(w,v),H===-1)return!1;v=H+1}const k=H,G=H+X,V=$t=>{for(let Kt=0;Kt<T.length;Kt++){const Bt=T[Kt];if($t>=Bt.start&&$t<Bt.end)return{node:Bt.node,offset:$t-Bt.start}}const Ut=T[T.length-1];return{node:Ut?.node,offset:Math.max(0,(Ut?.end||0)-(Ut?.start||0))}},Q=$t=>{const Ut=Math.min(Math.max(0,$t),B.length-1);return B[Ut]},et=Q(k),ot=Q(G-1)+1,At=V(et),ct=V(ot);if(!At.node||!ct.node)return!1;const dt=document.createRange();try{dt.setStart(At.node,At.offset),dt.setEnd(ct.node,ct.offset)}catch{return!1}const yt=Array.from(dt.getClientRects())[0]||dt.getBoundingClientRect(),Et=P.getBoundingClientRect(),Rt=yt.top-Et.top+P.scrollTop,wt=Rt+yt.height,Mt=P.scrollTop,kt=Mt+P.clientHeight,Dt=16;if(Rt>=Mt+Dt&&wt<=kt-Dt)return!0;const Ft=Math.max(0,Rt-P.clientHeight/2);return P.scrollTo({top:Ft,behavior:"smooth"}),!0},Z=P.getBoundingClientRect(),it=q.getBoundingClientRect();if(!(it.bottom>Z.top&&it.top<Z.bottom)){const F=Math.max(0,q.offsetTop-24);P.scrollTo({top:F,behavior:"smooth"})}let at=0;const pt=20,W=()=>{K()||(at++,at<pt&&setTimeout(W,120))};setTimeout(W,150)},[i,y]),D=reactExports.useCallback(async S=>{if(!S.trim()){h([]),R(-1);return}try{const P=[],z=normalizeForSearch(S.trim()),Y=z.length;await p();for(let it=1;it<=(C||0);it++){const nt=m.current[it]||"",{search:at}=buildSearchIndex(nt);if(!at||at.indexOf(z)===-1)continue;let pt=0,W=0;for(;;){const F=at.indexOf(z,pt);if(F===-1)break;P.push({id:`${it}-${W}`,page:it,order:W,query:S,length:Y}),W+=1,pt=F+1}}const q=z;let K;const Z=c.current;if(Z!=null){const it=P.findIndex(nt=>nt.page===Z);K=it>=0?it:P.length>0?0:-1}else l.current!==q?K=P.length>0?0:-1:P.length===0?K=-1:E<0?K=0:K=Math.min(E,P.length-1);if(h(P),R(K),l.current=q,c.current=null,P.length>0){const it=K>=0?K:0;setTimeout(()=>_(it),100)}}catch(P){console.error("Search failed:",P)}},[p,C,E,_]),b=reactExports.useCallback(S=>{M.current&&clearTimeout(M.current),M.current=setTimeout(()=>{D(S)},300)},[D]),L=reactExports.useCallback(()=>{if(i.length===0)return;const S=(E+1)%i.length;R(S),_(S)},[i,E,_]),N=reactExports.useCallback(()=>{if(i.length===0)return;const S=E===0?i.length-1:E-1;R(S),_(S)},[i,E,_]),U=reactExports.useCallback(()=>{d(""),h([]),R(-1),M.current&&clearTimeout(M.current)},[]);return{searchTerm:a,setSearchTerm:d,searchResults:i,currentSearchIndex:E,debouncedSearch:b,nextSearchResult:L,prevSearchResult:N,clearSearch:U}},useScreenshot=(y,a)=>{const[d,i]=reactExports.useState(!1),[h,E]=reactExports.useState(null),R=c=>{const m=c.currentTarget.getBoundingClientRect(),x=c.clientX-m.left,p=c.clientY-m.top;E({startX:x,startY:p,endX:x,endY:p,isSelecting:!0}),i(!0)},M=c=>{if(!d||!h)return;const m=c.currentTarget.getBoundingClientRect(),x=c.clientX-m.left,p=c.clientY-m.top;E(_=>({..._,endX:x,endY:p}))},C=()=>{!d||!h||(u(),i(!1),E(null))},u=async()=>{if(h)try{const{startX:c,startY:m,endX:x,endY:p}=h,_=Math.abs(x-c),D=Math.abs(p-m);if(_<10||D<10){alert("Selection area too small, please select again");return}const b=window.devicePixelRatio||1,L=Math.max(2,b),N=document.createElement("canvas"),U=N.getContext("2d");if(N.width=_*L,N.height=D*L,U.imageSmoothingEnabled=!1,U.webkitImageSmoothingEnabled=!1,U.mozImageSmoothingEnabled=!1,U.msImageSmoothingEnabled=!1,!y.current){console.error("PDF viewer reference not available");return}const S=y.current,P=S.querySelectorAll(".react-pdf__Page__canvas");if(P.length===0){console.error("No PDF pages found for screenshot");return}const z=S.getBoundingClientRect(),Y=S.scrollTop,q=S.scrollLeft;for(const Z of P){if(!Z.closest(".page-container"))continue;const nt=Z.getBoundingClientRect(),at=nt.top-z.top+Y,pt=nt.left-z.left+q,W=Math.min(c,x),F=Math.min(m,p),O=W+_,T=F+D,g=pt,w=at,I=g+Z.width,B=w+Z.height;if(O>g&&W<I&&T>w&&F<B){const X=Math.max(W,g),H=Math.max(F,w),v=Math.min(O,I),A=Math.min(T,B),k=v-X,G=A-H;if(k>0&&G>0){const V=(X-g)*(Z.width/nt.width),Q=(H-w)*(Z.height/nt.height),et=k*(Z.width/nt.width),ot=G*(Z.height/nt.height),At=(X-W)*L,ct=(H-F)*L,dt=k*L,ht=G*L;U.drawImage(Z,V,Q,et,ot,At,ct,dt,ht)}}}const K=document.createElement("a");K.download=`pdf-screenshot-${Date.now()}.png`,K.href=N.toDataURL("image/png",1),K.click(),setTimeout(()=>{i(!1),E(null),a&&a()},100)}catch(c){console.error("Screenshot capture failed:",c),alert("Screenshot failed, please try again")}};return{isScreenshotMode:d,screenshotArea:h,handleScreenshotStart:R,handleScreenshotMove:M,handleScreenshotEnd:C,setIsScreenshotMode:i,setScreenshotArea:E,exitScreenshotMode:()=>{i(!1),E(null)}}},API_BASE_URL$4=apiV1();class HighlightService{getHeaders(){return{"X-API-Key":API_KEY}}getHeadersWithContentType(){return{"Content-Type":"application/json","X-API-Key":API_KEY}}async createHighlight(a){try{const d=await fetch(`${API_BASE_URL$4}/highlights`,{method:"POST",headers:this.getHeadersWithContentType(),body:JSON.stringify(a)});if(!d.ok)throw new Error(`Failed to create highlight: ${d.statusText}`);return await d.json()}catch(d){throw console.error("Error creating highlight:",d),d}}async getDocumentHighlights(a){try{const d=await fetch(`${API_BASE_URL$4}/documents/${a}/highlights`,{headers:this.getHeaders()});if(!d.ok)throw new Error(`Failed to get highlights: ${d.statusText}`);return await d.json()}catch(d){throw console.error("Error getting document highlights:",d),d}}async getPageHighlights(a,d){try{const i=await fetch(`${API_BASE_URL$4}/documents/${a}/highlights/page/${d}`,{headers:this.getHeaders()});if(!i.ok)throw new Error(`Failed to get page highlights: ${i.statusText}`);return await i.json()}catch(i){throw console.error("Error getting page highlights:",i),i}}async updateHighlight(a,d){try{const i=await fetch(`${API_BASE_URL$4}/highlights/${a}`,{method:"PUT",headers:this.getHeadersWithContentType(),body:JSON.stringify(d)});if(!i.ok)throw new Error(`Failed to update highlight: ${i.statusText}`);return await i.json()}catch(i){throw console.error("Error updating highlight:",i),i}}async deleteHighlight(a){try{const d=await fetch(`${API_BASE_URL$4}/highlights/${a}`,{method:"DELETE",headers:this.getHeaders()});if(!d.ok)throw new Error(`Failed to delete highlight: ${d.statusText}`);return await d.json()}catch(d){throw console.error("Error deleting highlight:",d),d}}async deleteDocumentHighlights(a){try{const d=await fetch(`${API_BASE_URL$4}/documents/${a}/highlights`,{method:"DELETE",headers:this.getHeaders()});if(!d.ok)throw new Error(`Failed to delete document highlights: ${d.statusText}`);return await d.json()}catch(d){throw console.error("Error deleting document highlights:",d),d}}}const highlightService=new HighlightService,useHighlight=(y,a,d,i)=>{const[h,E]=reactExports.useState([]),[R,M]=reactExports.useState(!1),C=a==="highlight",[u,l]=reactExports.useState(!1),c=reactExports.useCallback(async(z,Y,q,K)=>{const Z=y.current;if(!Z)return[];const it=async(g=10)=>{for(let w=0;w<g;w++){const I=Z.querySelector(`[data-page-number="${z}"]`),B=I?.querySelector(".textLayer");if(B&&B.children.length>0)return{pageElement:I,textLayer:B};await new Promise(X=>setTimeout(X,100))}return{pageElement:null,textLayer:null}},{pageElement:nt,textLayer:at}=await it();if(!nt||!at)return console.warn(`Page ${z} or text layer not found after waiting`),[];const W=(g=>{const w=[];return Array.from(g.querySelectorAll("span")).forEach(B=>{const X=document.createTreeWalker(B,NodeFilter.SHOW_TEXT,null,!1);let H;for(;H=X.nextNode();)H.textContent.trim()&&w.push({node:H,span:B,text:H.textContent})}),w})(at);if(W.length===0)return console.warn("No text nodes found in text layer"),[];let F="",O=null,T=null;for(const g of W){const w=g.text,I=F.length,B=I+w.length;if(Y>=I&&Y<=B&&!O&&(O={...g,offset:Math.max(0,Math.min(Y-I,w.length))}),q>=I&&q<=B&&!T&&(T={...g,offset:Math.max(0,Math.min(q-I,w.length))}),F+=w,O&&T)break}if(!O&&W.length>0&&(O={...W[0],offset:0}),!T&&W.length>0){const g=W[W.length-1];T={...g,offset:g.text.length}}if(!O||!T)return console.warn("Could not find start or end nodes for offsets",{startOffset:Y,endOffset:q}),[];try{const g=document.createRange(),w=O.node,I=T.node,B=Math.min(O.offset,w.textContent.length),X=Math.min(T.offset,I.textContent.length);g.setStart(w,B),g.setEnd(I,X);const H=g.toString();K&&H!==K&&console.warn("Range text mismatch:",{expected:K,actual:H,startOffset:Y,endOffset:q});const v=Array.from(g.getClientRects());if(v.length===0)return console.warn("No client rects found for range"),[];const A=nt.getBoundingClientRect(),k=v.filter(G=>G.width>0&&G.height>0).map(G=>({nLeft:Math.max(0,Math.min(1,(G.left-A.left)/A.width)),nTop:Math.max(0,Math.min(1,(G.top-A.top)/A.height)),nWidth:Math.max(0,Math.min(1,G.width/A.width)),nHeight:Math.max(0,Math.min(1,G.height/A.height))}));return console.log(`Successfully calculated ${k.length} rects for page ${z}`,{startOffset:Y,endOffset:q,selectedText:K?.substring(0,50)+(K?.length>50?"...":"")}),k}catch(g){return console.error("Error calculating highlight rects:",g,{pageNumber:z,startOffset:Y,endOffset:q,selectedText:K?.substring(0,50)}),[]}},[y]);reactExports.useEffect(()=>{if(!i){E([]);return}(async()=>{M(!0);try{const Y=`highlights_${i}`;let q=cacheManager.get("highlights",Y);if(q){console.log("Using cached highlights:",q.length),E(q),M(!1);return}const K=await highlightService.getDocumentHighlights(i);if(K.length===0){E([]);return}const it=await(async(nt,at=5)=>{const pt=[];for(let W=0;W<nt.length;W+=at){const F=nt.slice(W,W+at),T=(await Promise.allSettled(F.map(async g=>{try{const w=`highlight_rects_${g.id}`;let I=cacheManager.get("highlights",w);return I?console.log(`Using cached rects for highlight ${g.id}`):(I=await c(g.page_number,g.start_offset,g.end_offset,g.selected_text),I&&I.length>0&&cacheManager.set("highlights",w,I,{ttl:3e5})),{id:g.id,text:g.selected_text,page:g.page_number,rects:I,range:{startOffset:g.start_offset,endOffset:g.end_offset},timestamp:g.created_at,comment:g.note||"",color:g.color||"rgba(34, 197, 94, 0.3)",source:g.source||"manual"}}catch(w){return console.warn(`Failed to process highlight ${g.id}:`,w),null}}))).filter(g=>g.status==="fulfilled"&&g.value!==null).map(g=>g.value);pt.push(...T),pt.length>0&&E(g=>{const w=new Set(g.map(B=>B.id)),I=pt.filter(B=>!w.has(B.id));return[...g,...I]}),W+at<nt.length&&await new Promise(g=>setTimeout(g,50))}return pt})(K);console.log(`Successfully loaded ${it.length}/${K.length} highlights`),E(it),it.length>0&&(cacheManager.set("highlights",Y,it,{ttl:3e5}),console.log(`Cached ${it.length} processed highlights`))}catch(Y){console.error("Failed to load highlights:",Y),E([])}finally{M(!1)}})()},[i,c]);const m=reactExports.useCallback(()=>{if(E([]),i){const z=`highlights_${i}`;cacheManager.delete("highlights",z),console.log("Cleared highlight caches")}},[i]),x=reactExports.useCallback((z,Y)=>{const q=Y.querySelector(".textLayer");if(!q)return{startOffset:0,endOffset:0};const K=document.createTreeWalker(q,NodeFilter.SHOW_TEXT,null,!1),Z=[];let it;for(;it=K.nextNode();)Z.push(it);let nt="",at=0,pt=0,W=!1,F=!1;const O=(w,I)=>{if(w.nodeType===Node.TEXT_NODE)return{node:w,offset:I};const B=document.createTreeWalker(w,NodeFilter.SHOW_TEXT,null,!1);let X=0,H;for(;H=B.nextNode();){const v=H.textContent.length;if(X+v>=I)return{node:H,offset:I-X};X+=v}return null},T=O(z.startContainer,z.startOffset),g=O(z.endContainer,z.endOffset);if(!T||!g)return console.warn("Could not find text nodes for range"),{startOffset:0,endOffset:0};for(const w of Z){const I=w.textContent,B=nt.length;if(B+I.length,!W&&w===T.node&&(at=B+T.offset,W=!0),!F&&w===g.node&&(pt=B+g.offset,F=!0),nt+=I,W&&F)break}if(pt<at){console.warn("End offset is less than start offset, swapping values");const w=at;at=pt,pt=w}return console.log("Calculated offsets:",{startOffset:at,endOffset:pt,selectedText:nt.substring(at,pt)}),{startOffset:at,endOffset:pt}},[]),p=reactExports.useCallback(async z=>{if(console.log("applyHighlight called with documentId:",i),!z||z.rangeCount===0){console.log("applyHighlight early return - selection:",!!z,"rangeCount:",z?.rangeCount);return}const Y=z.getRangeAt(0),q=Y.toString().trim();if(q)try{const K=Y.getClientRects(),Z=y.current,it=Z?.getBoundingClientRect();if(!Z||!it||K.length===0)return;const nt=Array.from(K);let at=Y.commonAncestorContainer;at&&at.nodeType!==1&&at.parentNode&&(at=at.parentNode);let pt=at&&at.closest?at.closest(".page-container"):null;if(!pt&&nt.length>0){const H=nt[0].left+Math.min(4,nt[0].width/2),v=nt[0].top+Math.min(4,nt[0].height/2),A=document.elementFromPoint(H,v);A&&A.closest&&(pt=A.closest(".page-container"))}if(!pt)return;const W=pt.getBoundingClientRect(),F=Z.querySelectorAll(".page-container"),O=Math.max(0,Array.from(F).indexOf(pt))+1,{startOffset:T,endOffset:g}=x(Y,pt),w=nt.map(H=>({nLeft:(H.left-W.left)/W.width,nTop:(H.top-W.top)/W.height,nWidth:H.width/W.width,nHeight:H.height/W.height})),I="rgba(34, 197, 94, 0.3)",B=Date.now()+Math.random(),X={id:B,text:q,page:O,rects:w,range:{startOffset:T,endOffset:g},timestamp:new Date().toISOString(),comment:"",color:I};if(E(H=>[...H,X]),i)try{console.log("Attempting to save highlight with data:",{doc_id:i,page_number:O,start_offset:T,end_offset:g,selected_text:q,color:I,note:""}),console.log("Creating highlight with data:",{doc_id:i,page_number:O,start_offset:T,end_offset:g,selected_text:q,color:I,note:""});const H=await highlightService.createHighlight({doc_id:i,page_number:O,start_offset:T,end_offset:g,selected_text:q,color:I,note:""});console.log("Created highlight response:",H),E(v=>v.map(A=>A.id===B?{...A,id:H.id,serverData:H}:A)),console.log("Highlight saved successfully:",H.id)}catch(H){console.error("Failed to save highlight to server:",H),console.error("Error details:",H.message,H.response?.data),E(v=>v.filter(A=>A.id!==B)),alert("Failed to save highlight: "+(H.message||"Unknown error"))}else console.log("No documentId provided, highlight saved locally only");z.removeAllRanges()}catch(K){console.error("Error applying highlight:",K)}},[y,i]),_=reactExports.useCallback(z=>{!C||z.button!==0||!z.target.closest(".react-pdf__Page__textContent span")||l(!0)},[C]),D=reactExports.useCallback(()=>{if(!C||!u)return;l(!1);const z=window.getSelection();z&&z.rangeCount>0&&(z.getRangeAt(0).toString().trim().length>0&&p(z),z.removeAllRanges())},[C,u,p]),b=reactExports.useCallback(()=>{},[C,u]),L=reactExports.useCallback(()=>{d(Y=>Y==="highlight"?"normal":"highlight"),l(!1);const z=window.getSelection();z&&z.removeAllRanges()},[d]),N=reactExports.useCallback(async z=>{try{E(Y=>Y.filter(q=>q.id!==z)),await highlightService.deleteHighlight(z),console.log("Highlight deleted successfully:",z)}catch(Y){console.error("Failed to delete highlight:",Y)}},[]),U=reactExports.useCallback(async(z,Y)=>{try{E(q=>q.map(K=>K.id===z?{...K,comment:Y}:K)),await highlightService.updateHighlight(z,{note:Y}),console.log("Highlight comment updated successfully:",z)}catch(q){console.error("Failed to update highlight comment:",q)}},[]),S=reactExports.useCallback(async(z,Y)=>{try{E(q=>q.map(K=>K.id===z?{...K,color:Y}:K)),await highlightService.updateHighlight(z,{color:Y}),console.log("Highlight color updated successfully:",z)}catch(q){console.error("Failed to update highlight color:",q)}},[]),P=reactExports.useCallback(()=>{const z=y.current;if(!z)return[];const Y=[],q=z.querySelectorAll(".page-container");for(const K of h){const Z=(K.page||1)-1,it=q[Z];if(it&&K.rects&&K.rects.length>0){const nt=it.getBoundingClientRect(),at=z.getBoundingClientRect(),pt=z.scrollTop,W=z.scrollLeft;K.rects.map(O=>({left:nt.left-at.left+W+O.nLeft*nt.width,top:nt.top-at.top+pt+O.nTop*nt.height,width:O.nWidth*nt.width,height:O.nHeight*nt.height})).forEach((O,T)=>{Y.push({key:`${K.id}-${T}`,rect:O,id:K.id,color:K.color})})}}return Y},[h,y]);return{highlights:h,applyHighlight:p,isHighlightMode:C,isLoading:R,toggleHighlightMode:L,clearHighlights:m,removeHighlight:N,updateHighlightComment:U,updateHighlightColor:S,getHighlightOverlays:P,handleMouseDown:_,handleMouseUp:D,handleMouseMove:b}},useMagicWand=(y,a,d)=>{const[i,h]=reactExports.useState(!1),[E,R]=reactExports.useState([]),[M,C]=reactExports.useState([]);reactExports.useRef(null);const u=reactExports.useRef(null),l=reactExports.useRef(d);reactExports.useEffect(()=>{l.current=d},[d]);const c=a==="magicwand",m=reactExports.useCallback(N=>{if(!y.current)return null;const S=document.elementFromPoint(N.clientX,N.clientY)?.closest(".page-container");if(!S)return null;const P=S.querySelector(".react-pdf__Page");if(!P)return null;const z=y.current.querySelectorAll(".page-container");let Y=-1;for(let T=0;T<z.length;T++)if(z[T]===S){Y=T;break}const q=P.getBoundingClientRect(),K=y.current.getBoundingClientRect(),Z=y.current.scrollLeft,it=y.current.scrollTop,nt=N.clientX-K.left+Z,at=N.clientY-K.top+it,pt=N.clientX-q.left,W=N.clientY-q.top,F={left:q.left-K.left+Z,top:q.top-K.top+it,width:q.width,height:q.height};return{x:nt,y:at,pageX:pt,pageY:W,pageIndex:Y,pageRect:F}},[y]),x=reactExports.useCallback(N=>{if(!c)return;N.preventDefault();const U=m(N);U&&(h(!0),R([U]),u.current=U)},[c,m,a]),p=reactExports.useCallback(N=>{if(!c||!i)return;N.preventDefault();const U=m(N);if(!U||!u.current)return;Math.sqrt(Math.pow(U.x-u.current.x,2)+Math.pow(U.y-u.current.y,2))>2&&(R(P=>[...P,U]),u.current=U)},[c,i,m]),_=reactExports.useCallback(N=>{!c||!i||(N.preventDefault(),h(!1),R(U=>{if(U.length>1){const S=U[0],P=U[U.length-1],z=Math.min(...U.map(it=>it.pageX)),Y=Math.max(...U.map(it=>it.pageX)),q=Math.min(...U.map(it=>it.pageY)),K=Math.max(...U.map(it=>it.pageY)),Z={id:Date.now()+Math.random(),points:[...U],color:"#00FF7F",timestamp:Date.now(),pageIndex:S.pageIndex||0,pageRect:S.pageRect};if(C(it=>[...it,Z]),l.current){const it=y.current.getBoundingClientRect(),nt=P.x-y.current.scrollLeft+it.left,at=P.y-y.current.scrollTop+it.top,pt={pageIndex:S.pageIndex||0,minX:z,maxX:Y,pathBounds:{minX:z,maxX:Y,minY:q,maxY:K},anchor:{x:nt,y:at,pageX:P.pageX,pageY:P.pageY},pageRect:S.pageRect};l.current(pt)}}return[]}),u.current=null)},[c,i,d,a]),D=reactExports.useCallback(()=>{C([]),R([]),h(!1),u.current=null},[]),b=reactExports.useCallback(N=>{C(U=>U.filter(S=>S.id!==N))},[]),L=reactExports.useCallback(N=>{if(N.length<2)return"";let U=`M ${N[0].x} ${N[0].y}`;for(let S=1;S<N.length;S++)U+=` L ${N[S].x} ${N[S].y}`;return U},[]);return{isMagicWandMode:c,isDrawing:i,currentPath:E,drawnPaths:M,handleMouseDown:x,handleMouseMove:p,handleMouseUp:_,clearAllPaths:D,removePath:b,generatePathString:L}},API_BASE_URL$3=API_ROOT,translateText=async(y,a)=>{console.log("translateText called with:",{text:y,targetLang:a});try{const d=`${API_BASE_URL$3}/api/v1/translate`;console.log("Making translation API request to:",d);const i=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":API_KEY},body:JSON.stringify({text:y,target_langs:[a]})});if(console.log("Translation API response status:",i.status),!i.ok){let E="";try{if((i.headers.get("content-type")||"").includes("application/json")){const C=await i.json();E=C?.detail||C?.error||JSON.stringify(C)}else E=await i.text()}catch{}const R=new Error(`Translation failed: ${i.status} ${i.statusText||""}${E?`  ${E}`:""}`);throw R.status=i.status,R.detail=E,R}const h=await i.json();if(console.log("Translation API response data:",h),h?.translations&&h.translations[a]){const E=h.translations[a];return{text:String(E.text||""),source:String(E.source||"")}}if(h?.translation?.text||h?.text){const E=h.translation||h;return{text:String(E.text||""),source:String(E.source||"")}}if(Array.isArray(h?.translations)&&h.translations.length>0){const E=h.translations.find(R=>R.lang===a)||h.translations[0];return{text:String(E.text||""),source:String(E.source||"")}}throw console.log("Translation result not found in response:",h),new Error("Translation result not found")}catch(d){if(console.error("Translation service error:",d),d instanceof TypeError&&d.message.includes("fetch"))return{text:`[Mock translation to ${a}: ${y}]`,source:"Network Error - Mock Translation"};if(d.status>=500)return{text:`[Mock translation to ${a}: ${y}]`,source:"Server Error - Mock Translation"};throw d}},API_BASE_URL$2=apiV1(),explainText=async(y,a={})=>{try{const d=await fetch(`${API_BASE_URL$2}/api/v1/explain`,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":API_KEY},body:JSON.stringify({text:y.trim(),context:{document_id:a.documentId,page_index:a.pageIndex,rects_norm:a.rectsNorm,source:"magic_wand"}})});if(!d.ok){const h=await d.json().catch(()=>({}));throw new Error(h.message||`HTTP error! status: ${d.status}`)}const i=await d.json();return{success:!0,explanation:i.explanation,metadata:i.metadata||{}}}catch(d){return console.error("Explain text failed:",d),{success:!1,error:d.message||"Failed to explain text"}}};function configurePdfWorker(){if(typeof window>"u")return;const y=console.warn,a=console.error;console.warn=function(...d){const i=d.join(" ");i.includes("TextLayer task cancelled")||i.includes("AbortException")||i.includes("TextLayer")&&i.includes("cancelled")||y.apply(console,d)},console.error=function(...d){d.join(" ").includes("AbortException: TextLayer task cancelled")||a.apply(console,d)};try{const d=pdfjs.version,i=[`https://unpkg.com/pdfjs-dist@${d}/build/pdf.worker.min.js`,`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${d}/pdf.worker.min.js`,"https://unpkg.com/pdfjs-dist@5.4.54/build/pdf.worker.min.js"],h=!1;pdfjs.GlobalWorkerOptions.workerSrc=i[0],testWorkerAvailability()}catch(d){console.error("Error configuring PDF.js worker:",d);try{const i="https://unpkg.com/pdfjs-dist@4.0.379/build/pdf.worker.min.js";pdfjs.GlobalWorkerOptions.workerSrc=i,console.warn("Using emergency fallback worker:",i)}catch(i){console.error("Emergency fallback worker configuration failed:",i)}}}function testWorkerAvailability(){if(!pdfjs.GlobalWorkerOptions.workerSrc){console.warn("No PDF.js worker configured");return}}configurePdfWorker();const PDFViewerContent=({file:y,documentId:a,onMarkdownUpdate:d})=>{const{scale:i,numPages:h,toolMode:E,showSearchPanel:R,dispatch:M,viewerRef:C,pdfDocRef:u}=usePdfViewer(),[l,c]=reactExports.useState(0),[m,x]=reactExports.useState([]),[p,_]=reactExports.useState({isOpen:!1,selectedText:""}),[D,b]=reactExports.useState({isOpen:!1}),[L,N]=reactExports.useState({text:"",pageIndex:-1,rectsNorm:[],anchor:null,isOpen:!1}),{contextMenu:U,handleCopyText:S,setContextMenu:P}=useTextSelection(C),z=()=>{if(U.show&&U.selectedText){M({type:PDF_ACTIONS.SET_SHOW_SEARCH_PANEL,payload:!0});const J=U.selectedText;Z(J),at(J),P({show:!1,x:0,y:0,selectedText:""})}},Y=()=>{_({isOpen:!1,selectedText:""})},q=async(J,xt)=>await translateText(J,xt),{searchTerm:K,setSearchTerm:Z,searchResults:it,currentSearchIndex:nt,debouncedSearch:at,nextSearchResult:pt,prevSearchResult:W,clearSearch:F}=useSearchOverlay(C);reactExports.useEffect(()=>{if(!h||!C.current)return;const J=C.current;if(!J)return;const xt=new IntersectionObserver(Ot=>{let Jt=1,Xt=0;Ot.forEach(Se=>{if(Se.isIntersecting&&Se.intersectionRatio>Xt){Xt=Se.intersectionRatio;const ae=Se.target;Jt=Array.from(ae.parentNode.children).indexOf(ae)+1}}),Xt>0&&M({type:PDF_ACTIONS.SET_CURRENT_PAGE,payload:Jt})},{root:J,rootMargin:"0px",threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]}),Tt=()=>{J.querySelectorAll(".page-container").forEach(Jt=>xt.observe(Jt))};Tt();const It=new MutationObserver(()=>{Tt()});return It.observe(J,{childList:!0,subtree:!0}),()=>{xt.disconnect(),It.disconnect()}},[h,M,C]);const O=()=>{M({type:PDF_ACTIONS.SET_TOOL_MODE,payload:null})},{isScreenshotMode:T,screenshotArea:g,handleScreenshotStart:w,handleScreenshotMove:I,handleScreenshotEnd:B,exitScreenshotMode:X}=useScreenshot(C,O),{highlights:H,applyHighlight:v,removeHighlight:A,updateHighlightComment:k,updateHighlightColor:G,getHighlightOverlays:V,handleMouseDown:Q,handleMouseUp:et,handleMouseMove:ot}=useHighlight(C,E,J=>{const xt=typeof J=="function"?J(E):J;M({type:PDF_ACTIONS.SET_TOOL_MODE,payload:xt})},a),At=reactExports.useCallback(({pageIndex:J,minX:xt,maxX:Tt,pathBounds:It,anchor:Ot,pageRect:Jt})=>{const Xt=C.current?.querySelector(`[data-page-number="${J+1}"]`),Se=Xt?.querySelector(".react-pdf__Page__textContent");if(!Xt||!Se){console.warn("Page element or text layer not found for magic wand selection");return}const ae=calculateCorridorSelection({pageElement:Xt,textLayer:Se,minX:xt,maxX:Tt,minY:It.minY,maxY:It.maxY});if(ae.isEmpty){const Oe={text:"",pageIndex:J,rectsNorm:[],anchor:Ot,isOpen:!0,needsManualDrop:ae.needsManualDrop};N(Oe)}else{const Oe={text:ae.selectedText,pageIndex:J,rectsNorm:ae.rectsNorm,anchor:Ot,isOpen:!0};N(Oe)}},[C]),{drawnPaths:ct,currentPath:dt,isDrawing:ht,generatePathString:yt,handleMouseDown:Et,handleMouseMove:Rt,handleMouseUp:wt,clearAllPaths:Mt,removePath:kt}=useMagicWand(C,E,At);reactExports.useEffect(()=>{if(L.isOpen){const J=setTimeout(()=>{Mt()},100);return()=>clearTimeout(J)}},[L.isOpen,Mt]);const[Dt,Ft]=reactExports.useState({show:!1,id:null,left:0,top:0}),$t=J=>{Ft({show:!0,id:J.id,left:J.rect.left,top:J.rect.top+J.rect.height+6})};reactExports.useEffect(()=>{const J=xt=>{if(!Dt.show)return;const Tt=document.querySelector(".highlight-popover"),It=Tt&&Tt.contains(xt.target),Ot=xt.target.classList&&xt.target.classList.contains("highlight-overlay");!It&&!Ot&&Ft({show:!1,id:null,left:0,top:0})};return document.addEventListener("mousedown",J),()=>document.removeEventListener("mousedown",J)},[Dt.show]),reactExports.useEffect(()=>{h&&(async()=>{if(u.current)try{const xt=await u.current.getOutline();x(Array.isArray(xt)?xt:[])}catch{x([])}})()},[h,u]),reactExports.useEffect(()=>{const J=requestAnimationFrame(()=>c(xt=>xt+1));return()=>cancelAnimationFrame(J)},[i,h]),reactExports.useEffect(()=>{x([]),Ft({show:!1,id:null,left:0,top:0}),_({isOpen:!1,selectedText:""}),b({isOpen:!1}),N({text:"",pageIndex:-1,rectsNorm:[],anchor:null,isOpen:!1}),M({type:PDF_ACTIONS.SET_TOOL_MODE,payload:null}),M({type:PDF_ACTIONS.SET_SEARCH_PANEL,payload:!1}),cacheManager.clearAllCaches(),h&&(cacheManager.setDocumentInfo({numPages:h,documentId:a||`doc_${Date.now()}`}),console.log("PDF document loaded, cache initialized for",h,"pages"))},[y,a,M,h]),reactExports.useEffect(()=>{const J=C.current;if(!J)return;const xt=observerManager.setupPDFViewerObservers({current:J},{onResize:Tt=>{requestAnimationFrame(()=>c(Ot=>Ot+1)),Tt.some(Ot=>Math.abs(Ot.contentRect.width-(Ot.element._lastWidth||0))>50||Math.abs(Ot.contentRect.height-(Ot.element._lastHeight||0))>50)&&(cacheManager.clearCache("layout"),Tt.forEach(Ot=>{Ot.element._lastWidth=Ot.contentRect.width,Ot.element._lastHeight=Ot.contentRect.height}))},onMutation:Tt=>{Tt.some(Ot=>Ot.addedNodes.some(Jt=>Jt.classList&&(Jt.classList.contains("react-pdf__Page__textContent")||Jt.classList.contains("textLayer"))))&&(cacheManager.clearCache("spans"),requestAnimationFrame(()=>c(Ot=>Ot+1)))},onPageVisibility:Tt=>{Tt.forEach(It=>{if(It.isIntersecting&&It.intersectionRatio>.1){const Jt=It.element.getAttribute("data-page-number");if(Jt){const Xt=parseInt(Jt)-1;setTimeout(()=>{cacheManager.preloadPageData(Xt)},100)}}})},onScroll:()=>{requestAnimationFrame(()=>c(Tt=>Tt+1))},debounceDelays:{resize:100,mutation:200,intersection:150,scroll:50}});return()=>{Object.values(xt).forEach(Tt=>{observerManager.disconnect(Tt)})}},[h,C]);const Ut=reactExports.useMemo(()=>V(),[V,l,H]);reactExports.useEffect(()=>{if(!Dt.show)return;const J=Ut.find(It=>It.id===Dt.id);if(!J)return;const xt=J.rect.left,Tt=J.rect.top+J.rect.height+6;(Dt.left!==xt||Dt.top!==Tt)&&Ft(It=>({...It,left:xt,top:Tt}))},[Ut,Dt.show,Dt.id,Dt.left,Dt.top]),reactExports.useEffect(()=>{const J=xt=>{const Tt=Number(xt.detail)||1;C.current&&C.current.scrollTo({top:0,behavior:"smooth"}),M({type:PDF_ACTIONS.SET_CURRENT_PAGE,payload:Tt})};return window.addEventListener("pdf:goToPage",J),()=>window.removeEventListener("pdf:goToPage",J)},[M,C]),reactExports.useEffect(()=>{const J=xt=>{const Tt=Number(xt.detail);Tt&&Tt>=.5&&Tt<=2&&M({type:PDF_ACTIONS.SET_SCALE,payload:Tt})};return window.addEventListener("pdf:setScale",J),()=>window.removeEventListener("pdf:setScale",J)},[M]);const Kt=reactExports.useCallback(()=>{M({type:PDF_ACTIONS.SET_SHOW_SEARCH_PANEL,payload:!1}),F(),setTimeout(()=>{const J=document.getElementById("search-input");J&&(J.value="")},0)},[F,M]),Bt=reactExports.useCallback(()=>{R?Kt():M({type:PDF_ACTIONS.SET_SHOW_SEARCH_PANEL,payload:!0})},[R,Kt,M]),Me=reactExports.useCallback(()=>{b({isOpen:!0})},[]),hn=()=>{b({isOpen:!1})},$e=async J=>{if(!a){b({isOpen:!1});return}try{const xt=await documentService.uploadToGemini(a,{language:J,format:"markdown"});xt.success&&xt.summary&&d&&d(xt.summary)}catch{}b({isOpen:!1})};reactExports.useEffect(()=>{const J=xt=>{if(xt.key==="Escape"){let Tt=!1;E==="screenshot"?(X(),M({type:PDF_ACTIONS.SET_TOOL_MODE,payload:null}),Tt=!0):E==="highlight"&&(M({type:PDF_ACTIONS.SET_TOOL_MODE,payload:null}),Tt=!0),R&&(Kt(),Tt=!0),Dt.show&&(Ft({show:!1,id:null,left:0,top:0}),Tt=!0),Tt&&(xt.preventDefault(),xt.stopPropagation())}};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[E,R,X,Kt,Dt.show,M]);const De=reactExports.useRef({last:0,pending:null,debounceId:null}),St=reactExports.useRef(null),lt=reactExports.useCallback(J=>{if(!(J.ctrlKey||J.metaKey))return;J.preventDefault();const xt=.2;let Tt=i+(J.deltaY<0?xt:-xt);Tt=Math.max(.5,Math.min(2,parseFloat(Tt.toFixed(2))));const It=performance.now(),Ot=De.current;Ot.pending=Tt,It-Ot.last>=120&&(M({type:PDF_ACTIONS.SET_SCALE,payload:Ot.pending}),Ot.last=It,Ot.pending=null),Ot.debounceId&&clearTimeout(Ot.debounceId),Ot.debounceId=setTimeout(()=>{const Jt=De.current.pending;Jt!=null&&Jt!==i&&(M({type:PDF_ACTIONS.SET_SCALE,payload:Jt}),De.current.last=performance.now(),De.current.pending=null)},220)},[i,M]);return jsxRuntimeExports.jsxs("div",{className:"pdf-viewer",children:[jsxRuntimeExports.jsx(PdfToolbar,{onToggleSearchPanel:Bt}),jsxRuntimeExports.jsx(SearchPanel,{searchTerm:K,onSearchTermChange:Z,onDebouncedSearch:at,searchResults:it,currentSearchIndex:nt,onNextResult:pt,onPrevResult:W,onClose:Kt}),U.show&&U.rects&&U.rects.length>0&&jsxRuntimeExports.jsx("div",{className:"active-selection-overlay",style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",pointerEvents:"none",zIndex:9998},children:U.rects.map((J,xt)=>jsxRuntimeExports.jsx("div",{style:{position:"fixed",left:J.left,top:J.top,width:J.width,height:J.height,background:"rgba(59,130,246,0.25)"}},xt))}),jsxRuntimeExports.jsx(ActionInputDialog,{isOpen:U.show,initialPosition:{x:U.x,y:U.y},selectedText:U.selectedText,onClose:()=>P({show:!1,x:0,y:0,selectedText:""}),onCopy:()=>{S()},onTranslate:J=>{const xt=J||U.selectedText||"";xt&&(_({isOpen:!0,selectedText:xt}),P({show:!1,x:0,y:0,selectedText:""}))},onQuery:()=>{z()},onSend:async(J,xt)=>{try{await(await __vitePreload(async()=>{const{default:It}=await import("./simService-Y1Jb71fn.js");return{default:It}},[])).default.sendMessage({source:"pdf",message:J,documentId:a,context:xt||U.selectedText||""})}catch(Tt){console.warn("Send failed:",Tt)}}}),jsxRuntimeExports.jsx("div",{className:"pdf-zoom-preview",ref:St,onWheel:lt,children:jsxRuntimeExports.jsxs(PdfDocument,{file:y,toolMode:E,isScreenshotMode:T,screenshotArea:g,onScreenshotStart:w,onScreenshotMove:I,onScreenshotEnd:B,isHighlightMode:E==="highlight",onHighlightMouseDown:Q,onHighlightMouseMove:ot,onHighlightMouseUp:et,isMagicWandMode:E==="magicwand",onMagicWandMouseDown:Et,onMagicWandMouseMove:Rt,onMagicWandMouseUp:wt,children:[jsxRuntimeExports.jsx(PdfOverlays,{searchResults:it,currentSearchIndex:nt,viewerRef:C}),jsxRuntimeExports.jsx(HighlightLayer,{overlays:Ut,onOverlayClick:$t,magicSelection:L.isOpen?L:null}),jsxRuntimeExports.jsx(MagicWandLayer,{drawnPaths:ct,currentPath:dt,isDrawing:ht,generatePathString:yt,onPathClick:kt}),Dt.show&&(()=>{const J=H.find(xt=>xt.id===Dt.id);return J?jsxRuntimeExports.jsx(HighlightPopover,{highlight:J,position:{left:Dt.left,top:Dt.top},onDelete:xt=>{A(xt),Ft({show:!1,id:null,left:0,top:0})},onChangeColor:G,onChangeComment:k,onRequestClose:()=>Ft({show:!1,id:null,left:0,top:0})}):null})()]})}),jsxRuntimeExports.jsx(VerticalToolbar,{onSearch:Bt,onScreenshot:()=>M({type:PDF_ACTIONS.SET_TOOL_MODE,payload:"screenshot"}),onToggleHighlight:()=>{const J=E==="highlight"?null:"highlight";M({type:PDF_ACTIONS.SET_TOOL_MODE,payload:J})},isHighlightActive:E==="highlight",onOverview:Me,onMagicWand:()=>{const J=E==="magicwand"?null:"magicwand";M({type:PDF_ACTIONS.SET_TOOL_MODE,payload:J})},isMagicWandActive:E==="magicwand"}),jsxRuntimeExports.jsx(PdfOutlineDrawer,{outline:m}),jsxRuntimeExports.jsx(TranslationDialog,{isOpen:p.isOpen,selectedText:p.selectedText,onClose:Y,onTranslate:q}),jsxRuntimeExports.jsx(OverviewDialog,{isOpen:D.isOpen,onClose:hn,onConfirm:$e,documentId:a}),jsxRuntimeExports.jsx(MagicActionDialog,{isOpen:L.isOpen,selectedText:L.text,initialPosition:L.anchor,needsManualDrop:L.needsManualDrop,onTranslate:(J,xt)=>{_({isOpen:!0,selectedText:J}),N(Tt=>({...Tt,isOpen:!1}))},onExplain:async J=>{try{const xt=await explainText(J,{documentId:a,pageIndex:L.pageIndex,rectsNorm:L.rectsNorm});xt.success?console.log("Explanation:",xt.explanation):console.error("Explain failed:",xt.error)}catch(xt){console.error("Explain error:",xt)}},onAnnotate:async J=>{try{const xt=C.current?.querySelector(`[data-page-number="${L.pageIndex+1}"]`);if(!xt){console.error("Page element not found for highlight");return}const Tt=xt.getBoundingClientRect(),It=C.current.getBoundingClientRect(),Ot=L.rectsNorm.map(Xt=>({left:Tt.left+Xt.x*Tt.width,top:Tt.top+Xt.y*Tt.height,width:Xt.w*Tt.width,height:Xt.h*Tt.height,right:Tt.left+Xt.x*Tt.width+Xt.w*Tt.width,bottom:Tt.top+Xt.y*Tt.height+Xt.h*Tt.height}));await v({rangeCount:1,getRangeAt:()=>({toString:()=>J,getClientRects:()=>Ot,commonAncestorContainer:xt,startContainer:xt,endContainer:xt,startOffset:0,endOffset:J.length}),removeAllRanges:()=>{}}),N(Xt=>({...Xt,isOpen:!1})),console.log("Text highlighted successfully:",J)}catch(xt){console.error("Annotate error:",xt)}},onClose:()=>{N({text:"",pageIndex:-1,rectsNorm:[],anchor:null,isOpen:!1}),Mt()}})]})};PDFViewerContent.propTypes={file:PropTypes.oneOfType([PropTypes.string,PropTypes.object,PropTypes.instanceOf(File)]).isRequired,documentId:PropTypes.string,onMarkdownUpdate:PropTypes.func};const PDFViewer=({file:y,documentId:a,onMarkdownUpdate:d})=>{const i=reactExports.useRef(null),h=reactExports.useRef(null);return jsxRuntimeExports.jsx(PdfViewerProvider,{viewerRef:i,pdfDocRef:h,children:jsxRuntimeExports.jsx(ErrorBoundary,{children:jsxRuntimeExports.jsx(PDFViewerContent,{file:y,documentId:a,onMarkdownUpdate:d})})})};PDFViewer.propTypes={file:PropTypes.oneOfType([PropTypes.string,PropTypes.object,PropTypes.instanceOf(File)]).isRequired,documentId:PropTypes.string,onMarkdownUpdate:PropTypes.func};const API_BASE_URL$1=apiV1();class NoteService{async getNotes(a){try{const d=await fetch(`${API_BASE_URL$1}/documents/${a}/notes`,{method:"GET",headers:{"Content-Type":"application/json","X-API-Key":API_KEY}});if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);const i=await d.json();return i.content?[i]:[]}catch(d){throw console.error("Error fetching note:",d),d}}async createNote(a,d){try{const i=await fetch(`${API_BASE_URL$1}/documents/${a}/notes`,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":API_KEY},body:JSON.stringify({content:d})});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const h=await i.json();return{...h,id:h.doc_id}}catch(i){throw console.error("Error creating note:",i),i}}async updateNote(a,d,i){try{const h=await fetch(`${API_BASE_URL$1}/documents/${a}/notes`,{method:"PUT",headers:{"Content-Type":"application/json","X-API-Key":API_KEY},body:JSON.stringify({content:i})});if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);const E=await h.json();return{...E,id:E.doc_id}}catch(h){throw console.error("Error updating note:",h),h}}async deleteNote(a,d){try{const i=await fetch(`${API_BASE_URL$1}/documents/${a}/notes`,{method:"DELETE",headers:{"Content-Type":"application/json","X-API-Key":API_KEY}});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);return await i.json()}catch(i){throw console.error("Error deleting note:",i),i}}}const noteService=new NoteService,ToolbarButton=({title:y,onClick:a,children:d,disabled:i})=>jsxRuntimeExports.jsx("button",{className:"md-btn",type:"button",title:y,onClick:a,disabled:i,children:d});ToolbarButton.propTypes={title:PropTypes.string.isRequired,onClick:PropTypes.func.isRequired,children:PropTypes.node.isRequired,disabled:PropTypes.bool};ToolbarButton.defaultProps={disabled:!1};function MarkdownEditor({externalContent:y,onContentChange:a,documentId:d}){const[i,h]=reactExports.useState(""),[E,R]=reactExports.useState(!1),[M,C]=reactExports.useState(""),[u,l]=reactExports.useState(null),[c,m]=reactExports.useState(!1),x="markdown-editor-content",p=async(F,O=!1)=>{if(!(!d||c))try{if(console.log("MarkdownEditor: Saving content to database for documentId:",d,"currentNoteId:",u,"content length:",F.length,"forceCreate:",O),F.trim()){console.log("MarkdownEditor: Creating or updating note");const T=await noteService.createNote(d,F);l(T.id),console.log("MarkdownEditor: Created/updated note:",T),localStorage.removeItem(x)}else console.log("MarkdownEditor: Skipping save, no content to save")}catch(T){console.error("Failed to save note to database:",T),console.log("MarkdownEditor: Falling back to localStorage"),localStorage.setItem(x,F)}};reactExports.useEffect(()=>{if(console.log("MarkdownEditor: documentId changed to:",d),d)_();else{console.log("MarkdownEditor: No documentId, loading from localStorage");const F=localStorage.getItem(x);F?(console.log("MarkdownEditor: Loaded content from localStorage, length:",F.length),h(F)):console.log("MarkdownEditor: No content in localStorage")}},[d]);const _=async()=>{if(d){console.log("MarkdownEditor: Loading note for documentId:",d),m(!0);try{const F=await noteService.getNotes(d);if(console.log("MarkdownEditor: Loaded note:",F),F&&F.length>0){const O=F[0];h(O.content),l(O.id),console.log("MarkdownEditor: Set note content and ID:",O.id),localStorage.removeItem(x)}else{h(""),l(null),console.log("MarkdownEditor: No note found, starting with empty content");const O=localStorage.getItem(x);O&&(console.log("MarkdownEditor: Found content in localStorage, importing it"),h(O))}}catch(F){console.error("Failed to load note:",F),console.log("MarkdownEditor: Falling back to localStorage due to error");const O=localStorage.getItem(x);O&&(console.log("MarkdownEditor: Loaded content from localStorage after error, length:",O.length),h(O))}finally{m(!1)}}};reactExports.useEffect(()=>{y&&(console.log("MarkdownEditor: Received external content:",y.substring(0,100)+"..."),h(y),R(!0),C(pt(y)))},[y]),reactExports.useEffect(()=>{console.log("MarkdownEditor: Checking if should save external content:",{hasExternalContent:!!y,documentId:d,isLoading:c,currentNoteId:u}),y&&d&&!c&&(console.log("MarkdownEditor: Saving external content to database"),setTimeout(()=>{p(y,!0)},100))},[y,d,c]),reactExports.useEffect(()=>{if(console.log("MarkdownEditor: Auto-save useEffect triggered",{valueLength:i.length,externalContentLength:y?.length,documentId:d,isLoading:c}),!d||c){console.log("MarkdownEditor: Skipping auto-save, no documentId or still loading");return}if(i===y){console.log("MarkdownEditor: Skipping auto-save, content matches externalContent");return}console.log("MarkdownEditor: Setting up auto-save timeout");const F=setTimeout(async()=>{console.log("MarkdownEditor: Auto-save timeout triggered, saving content");try{await p(i,!1),console.log("MarkdownEditor: Auto-save completed successfully")}catch(O){console.error("MarkdownEditor: Auto-save failed:",O)}a&&(console.log("MarkdownEditor: Notifying parent of content change"),a(i))},1e3);return()=>{console.log("MarkdownEditor: Clearing auto-save timeout"),clearTimeout(F)}},[i,d,c,y]);const D=(F="",O=F,T="")=>{h(g=>`${g}${F}${T}${O}`)},b=(F="")=>{h(O=>O?`${F} ${O}`:`${F} `)},L=(F=1)=>b("#".repeat(F)),N=()=>D("**"),U=()=>D("*"),S=()=>D("~~"),P=()=>b("-"),z=()=>b("1."),Y=()=>b(">"),q=()=>D("\n```\n","\n```\n","code"),K=()=>D("`","`","code"),Z=()=>{const F=prompt("Link URL:");F&&D("[",`](${F})`,"text")},it=()=>{D(`
| Header 1 | Header 2 |
|----------|----------|
| Cell 1   | Cell 2   |
`,"","")},nt=()=>{D(`
---
`,"","")},at=F=>F.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),pt=F=>{if(!F)return"";let O=at(F);const T=[];O=O.replace(/```([\s\S]*?)```/g,(B,X)=>{const H=T.length;return T.push(`<pre class="md-code-block"><code>${X}</code></pre>`),`CODEBLOCK_${H}`});let I=O.split(/\n\s*\n/).map(B=>{const X=B.split(/\n/),H=[],v=(V,Q=!1)=>{if(!V.length)return;const et=V.map(ot=>`<li>${ot}</li>`).join("");H.push(Q?`<ol>${et}</ol>`:`<ul>${et}</ul>`),V.length=0};let A=[],k=[];const G=V=>V.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/~~(.+?)~~/g,"<del>$1</del>").replace(/`([^`]+)`/g,"<code>$1</code>").replace(/\[([^\]]+)\]\(([^)\s]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>');for(const V of X){if(/^---+$/.test(V.trim())){v(A),v(k,!0),H.push("<hr />");continue}const Q=V.match(/^(#{1,6})\s+(.+)$/);if(Q){v(A),v(k,!0),H.push(`<h${Q[1].length}>${Q[2]}</h${Q[1].length}>`);continue}if(/^>\s?/.test(V)){v(A),v(k,!0),H.push(`<blockquote>${V.replace(/^>\s?/,"")}</blockquote>`);continue}const et=V.match(/^\s*[-*]\s+(.+)/);if(et){A.push(G(et[1].trim()));continue}else A.length&&v(A);const ot=V.match(/^\s*\d+\.\s+(.+)/);if(ot){k.push(G(ot[1].trim()));continue}else k.length&&v(k,!0);V.trim()&&H.push(`<p>${G(V)}</p>`)}return v(A),v(k,!0),H.join("")}).join(`
`);return I=I.replace(/CODEBLOCK_(\d+)/g,(B,X)=>T[Number(X)]||""),I},W=()=>{E?R(!1):(C(pt(i)),R(!0))};return jsxRuntimeExports.jsxs("div",{className:"md-editor",role:"region","aria-label":"Markdown editor",children:[jsxRuntimeExports.jsxs("div",{className:"md-toolbar",children:[jsxRuntimeExports.jsxs("div",{className:"md-group",children:[jsxRuntimeExports.jsx(ToolbarButton,{title:"Heading 1",onClick:()=>L(1),children:"H1"}),jsxRuntimeExports.jsx(ToolbarButton,{title:"Heading 2",onClick:()=>L(2),children:"H2"}),jsxRuntimeExports.jsx(ToolbarButton,{title:"Heading 3",onClick:()=>L(3),children:"H3"})]}),jsxRuntimeExports.jsx("div",{className:"md-divider"}),jsxRuntimeExports.jsxs("div",{className:"md-group",children:[jsxRuntimeExports.jsx(ToolbarButton,{title:"Bold",onClick:N,children:jsxRuntimeExports.jsx("b",{children:"B"})}),jsxRuntimeExports.jsx(ToolbarButton,{title:"Italic",onClick:U,children:jsxRuntimeExports.jsx("i",{children:"I"})}),jsxRuntimeExports.jsx(ToolbarButton,{title:"Strike",onClick:S,children:jsxRuntimeExports.jsx("s",{children:"S"})}),jsxRuntimeExports.jsx(ToolbarButton,{title:"Inline code",onClick:K,children:"<>"})]}),jsxRuntimeExports.jsx("div",{className:"md-divider"}),jsxRuntimeExports.jsxs("div",{className:"md-group",children:[jsxRuntimeExports.jsx(ToolbarButton,{title:"Bullet list",onClick:P,children:" List"}),jsxRuntimeExports.jsx(ToolbarButton,{title:"Ordered list",onClick:z,children:"1. List"})]}),jsxRuntimeExports.jsx("div",{className:"md-divider"}),jsxRuntimeExports.jsxs("div",{className:"md-group",children:[jsxRuntimeExports.jsx(ToolbarButton,{title:"Quote",onClick:Y,children:""}),jsxRuntimeExports.jsx(ToolbarButton,{title:"Link",onClick:Z,children:"Link"}),jsxRuntimeExports.jsx(ToolbarButton,{title:"Table",onClick:it,children:"Tbl"}),jsxRuntimeExports.jsx(ToolbarButton,{title:"Code block",onClick:q,children:"Code"}),jsxRuntimeExports.jsx(ToolbarButton,{title:"Horizontal rule",onClick:nt,children:""})]}),jsxRuntimeExports.jsx("div",{className:"md-divider"}),jsxRuntimeExports.jsx("div",{className:"md-group",children:jsxRuntimeExports.jsx(ToolbarButton,{title:E?"Back to edit":"Preview",onClick:W,children:jsxRuntimeExports.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:E?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),jsxRuntimeExports.jsx("path",{d:"m15 5 4 4"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})})})]}),jsxRuntimeExports.jsx("div",{className:"md-content",children:E?jsxRuntimeExports.jsx("div",{className:"md-preview",dangerouslySetInnerHTML:{__html:M}}):jsxRuntimeExports.jsx("textarea",{className:"md-textarea",value:i,onChange:F=>{console.log("MarkdownEditor: Textarea value changed, new length:",F.target.value.length),h(F.target.value)},spellCheck:!0,placeholder:"Write markdown here..."})})]})}MarkdownEditor.propTypes={externalContent:PropTypes.string,onContentChange:PropTypes.func,documentId:PropTypes.string};MarkdownEditor.defaultProps={externalContent:null,onContentChange:null,documentId:null};const FileUpload=({onFileSelect:y,onUploadComplete:a,workspaceId:d=null})=>{const i=reactExports.useRef(null),[h,E]=reactExports.useState(!1),R=async c=>{const m=c.target.files[0];m&&(m.type==="application/pdf"||m.name.toLowerCase().endsWith(".pdf")?(await M(m),c.target.value=""):(alert("Please select a valid PDF file"),c.target.value=""))},M=async c=>{try{E(!0);const m=await documentService.uploadDocument(c,d);if(m.message&&m.message.includes("already exists")){const x=documentService.getDownloadUrl(m.doc_id);y(x)}else{const x=URL.createObjectURL(c);y(x)}a&&a(m)}catch(m){alert("Upload failed: "+m.message)}finally{E(!1)}},C=()=>{i.current&&(i.current.value=""),i.current.click()},u=async c=>{c.preventDefault();const m=c.dataTransfer.files[0];m&&(m.type==="application/pdf"||m.name.toLowerCase().endsWith(".pdf")?(await M(m),i.current&&(i.current.value="")):alert("Please select a valid PDF file"))},l=c=>{c.preventDefault()};return jsxRuntimeExports.jsxs("div",{className:"file-upload",children:[jsxRuntimeExports.jsx("input",{ref:i,type:"file",accept:"application/pdf,.pdf",onChange:R,style:{display:"none"},disabled:h}),jsxRuntimeExports.jsx("button",{className:`upload-btn ${h?"uploading":""}`,onClick:C,onDrop:u,onDragOver:l,disabled:h,title:h?"Uploading":"Upload PDF File","aria-label":h?"Uploading":"Upload PDF File",children:h?" Uploading...":jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[jsxRuntimeExports.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),jsxRuntimeExports.jsx("polyline",{points:"7 10 12 5 17 10"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"16"})]}),jsxRuntimeExports.jsx("span",{children:"Upload PDF File"})]})})]})};FileUpload.propTypes={onFileSelect:PropTypes.func.isRequired,onUploadComplete:PropTypes.func,workspaceId:PropTypes.string};configurePdfWorker();const DocumentPreviewCard=({file:y,title:a,onOpen:d,onDelete:i})=>y?jsxRuntimeExports.jsxs("div",{className:"doc-preview-card clickable",role:"button",tabIndex:0,"aria-label":"Open document preview",onClick:d,onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),d&&d())},children:[i&&jsxRuntimeExports.jsx("button",{className:"delete-btn",title:"Delete",onClick:h=>{h.stopPropagation(),i()},children:jsxRuntimeExports.jsx("svg",{fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})}),jsxRuntimeExports.jsx("div",{className:"doc-preview-thumb",children:jsxRuntimeExports.jsx(Document,{file:y,loading:jsxRuntimeExports.jsx("div",{className:"doc-preview-loading",children:"Loading preview"}),children:jsxRuntimeExports.jsx(Page,{pageNumber:1,renderTextLayer:!1,renderAnnotationLayer:!1,width:160})})}),a&&jsxRuntimeExports.jsx("div",{className:"doc-preview-meta",title:a,children:a})]}):null;DocumentPreviewCard.propTypes={file:PropTypes.oneOfType([PropTypes.string,PropTypes.object,typeof File<"u"?PropTypes.instanceOf(File):PropTypes.any]),title:PropTypes.string,onOpen:PropTypes.func,onDelete:PropTypes.func};const renderTextWithMentions=y=>y.replace(/\[\[doc:([^\]|]+)\|([^\]]+)\]\]/g,(a,d,i)=>{const h=i.replace(/[&<>"']/g,E=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[E]);return`<span class="doc-mention" data-doc-id="${d}" contenteditable="false">${h}</span><span class="mention-guard">&nbsp;</span>`});function BottomInputBar({placeholder:y="",documents:a=[],onSend:d,disabled:i=!1}){const[h,E]=reactExports.useState(""),[R,M]=reactExports.useState(!1),[C,u]=reactExports.useState(""),[l,c]=reactExports.useState(0),[m,x]=reactExports.useState(!1),[p,_]=reactExports.useState(!1),D=reactExports.useRef(null),b=reactExports.useMemo(()=>{const P=D.current;if(!P)return{hasTrigger:!1};const z=window.getSelection();if(!z.rangeCount)return{hasTrigger:!1};const Y=z.getRangeAt(0),q=Y.cloneRange();q.selectNodeContents(P),q.setEnd(Y.endContainer,Y.endOffset);const K=q.toString().length,nt=(P.textContent||"").slice(0,K).match(/(^|\s)@([^\s@]*)$/);return nt?{hasTrigger:!0,raw:nt[0],prefix:nt[1]??"",q:nt[2]??"",start:K-(nt[2]?.length??0)-1}:{hasTrigger:!1}},[h]);reactExports.useEffect(()=>{b.hasTrigger?(M(!0),u(b.q),c(0)):(M(!1),u(""),c(0))},[b.hasTrigger,b.q]),reactExports.useEffect(()=>{if(p&&D.current){const P=D.current;h?P.innerHTML=renderTextWithMentions(h):P.innerHTML=`<span class="placeholder">${y}</span>`,_(!1)}},[p,h,y]),reactExports.useEffect(()=>{D.current&&!h&&(D.current.innerHTML=`<span class="placeholder">${y}</span>`)},[]);const L=reactExports.useMemo(()=>{const P=(a||[]).filter(Y=>Y&&(Y.title||Y.id));if(!C)return P.slice(0,8);const z=C.toLowerCase();return P.filter(Y=>(Y.title||"").toLowerCase().includes(z)||String(Y.id).toLowerCase().includes(z)).slice(0,8)},[a,C]),N=P=>{const z=P.title||"Document",Y=z.length>5?z.substring(0,5):z,q=`[[doc:${P.id}|${Y}]]`,K=D.current;if(!K)return;const Z=K.textContent||"";if(b.hasTrigger){const it=Z.substring(0,b.start),nt=Z.substring(b.start+1+b.q.length),at=it+q+" "+nt;E(at),_(!0),setTimeout(()=>{if(K){K.focus();const pt=K.querySelectorAll(".mention-guard");if(pt.length>0){const W=pt[pt.length-1],F=document.createRange(),O=window.getSelection();F.setStart(W,1),F.collapse(!0),O.removeAllRanges(),O.addRange(F)}}},50)}M(!1)},U=async()=>{const P=h.trim();if(!(!P||m||i)){console.log("BottomInputBar - Sending message:",P),console.log("BottomInputBar - Message length:",P.length),console.log("BottomInputBar - Message characters:",[...P].map((z,Y)=>`${Y}: '${z}' (${z.charCodeAt(0)})`));try{x(!0),await d?.(P),E(""),M(!1),_(!0)}catch(z){alert(z.message||"Failed to send")}finally{x(!1)}}},S=P=>{if(R&&L.length>0){if(P.key==="ArrowDown"){P.preventDefault(),c(z=>(z+1)%L.length);return}if(P.key==="ArrowUp"){P.preventDefault(),c(z=>(z-1+L.length)%L.length);return}if(P.key==="Enter"){P.preventDefault(),N(L[l]);return}if(P.key==="Escape"){P.preventDefault(),M(!1);return}}P.key==="Enter"&&!P.shiftKey&&!R&&(P.preventDefault(),U())};return jsxRuntimeExports.jsxs("div",{className:"bottom-input-bar",children:[jsxRuntimeExports.jsxs("div",{className:"bottom-bar-inner",children:[jsxRuntimeExports.jsx("div",{ref:D,className:"bottom-input",contentEditable:!0,suppressContentEditableWarning:!0,onInput:P=>{const z=P.target;let Y="";for(let q=0;q<z.childNodes.length;q++){const K=z.childNodes[q];if(K.nodeType===Node.TEXT_NODE)Y+=K.textContent;else if(K.nodeType===Node.ELEMENT_NODE)if(K.classList&&K.classList.contains("doc-mention")){const Z=K.getAttribute("data-doc-id"),it=K.textContent;Y+=`[[doc:${Z}|${it}]]`}else Y+=K.textContent||""}E(Y)},onFocus:P=>{h||(P.target.innerHTML="",E(""))},onBlur:P=>{h||_(!0)},onClick:P=>{!h&&P.target.querySelector(".placeholder")&&(P.target.innerHTML="",P.target.focus())},onKeyDown:S,style:{minHeight:"40px",maxHeight:"120px",overflowY:"auto",whiteSpace:"pre-wrap"}}),jsxRuntimeExports.jsx("button",{className:"bottom-send",onClick:U,disabled:m||i,"aria-label":"Send",children:jsxRuntimeExports.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":!0,style:{opacity:m?.6:1},children:[jsxRuntimeExports.jsx("path",{d:"M22 2L11 13"}),jsxRuntimeExports.jsx("path",{d:"M22 2l-7 20-4-9-9-4 20-7z"})]})})]}),R&&jsxRuntimeExports.jsx("div",{className:"mention-picker",children:L.length>0?L.map((P,z)=>jsxRuntimeExports.jsxs("div",{className:`mention-item ${z===l?"active":""}`,onMouseEnter:()=>c(z),onMouseDown:Y=>{Y.preventDefault(),N(P)},children:[jsxRuntimeExports.jsx("div",{className:"mi-title",children:P.title||"Untitled"}),jsxRuntimeExports.jsxs("div",{className:"mi-meta",children:[P.mime||"","  ",P.id]})]},P.id)):jsxRuntimeExports.jsxs("div",{className:"mention-item no-results",children:[jsxRuntimeExports.jsx("div",{className:"mi-title",children:"No documents found"}),jsxRuntimeExports.jsx("div",{className:"mi-meta",children:"Try uploading some documents first"})]})})]})}const NotePreviewCard=({title:y,onOpen:a,onDelete:d,onRename:i,noteId:h,color:E})=>{const[R,M]=reactExports.useState(!1),C=reactExports.useMemo(()=>{if(E)return E;const u=["#059669","#2563EB","#DB2777","#7C3AED","#EA580C","#16A34A","#0891B2","#9333EA","#D97706","#DC2626"],l=(h||y||"note")+"";let c=0;for(let m=0;m<l.length;m++)c=c*31+l.charCodeAt(m)>>>0;return u[c%u.length]},[h,y,E]);return reactExports.useEffect(()=>{const u=l=>{if(!R)return;const c=l.target,m=c.closest&&c.closest(".note-menu-popup"),x=c.closest&&c.closest(".note-menu-btn");!m&&!x&&M(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[R]),jsxRuntimeExports.jsxs("div",{className:"doc-preview-card clickable",role:"button",tabIndex:0,"aria-label":"Open note",onClick:a,onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),a&&a())},children:[(d||i)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{className:"note-menu-btn",title:"Options",onClick:u=>{u.stopPropagation(),M(l=>!l)},children:jsxRuntimeExports.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":!0,children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"5",r:"2"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"2"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"19",r:"2"})]})}),R&&jsxRuntimeExports.jsxs("div",{className:"note-menu-popup",onClick:u=>u.stopPropagation(),children:[i&&jsxRuntimeExports.jsx("button",{className:"ws-menu-item",onClick:()=>{M(!1),i()},children:"Rename"}),d&&jsxRuntimeExports.jsx("button",{className:"ws-menu-item",onClick:()=>{M(!1),d()},children:"Delete"})]})]}),jsxRuntimeExports.jsx("div",{className:"doc-preview-thumb",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 24 24",fill:"none",stroke:C,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[jsxRuntimeExports.jsx("path",{d:"M4 4h11l5 5v11a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z"}),jsxRuntimeExports.jsx("path",{d:"M14 4v6h6"}),jsxRuntimeExports.jsx("path",{d:"M8 13h8"}),jsxRuntimeExports.jsx("path",{d:"M8 17h5"})]})}),y&&jsxRuntimeExports.jsx("div",{className:"doc-preview-meta",title:y,children:y})]})};NotePreviewCard.propTypes={title:PropTypes.string,onOpen:PropTypes.func,onDelete:PropTypes.func,onRename:PropTypes.func,noteId:PropTypes.string,color:PropTypes.string};function RAGResponse({response:y,onClose:a}){const[d,i]=reactExports.useState(!1),[h,E]=reactExports.useState([]),R=reactExports.useRef(null);if(reactExports.useEffect(()=>{const c=localStorage.getItem("ragChatHistory");if(c)try{E(JSON.parse(c))}catch(m){console.error("Failed to parse chat history:",m),E([])}},[]),reactExports.useEffect(()=>{if(y&&y.query&&y.answer){const m=[{id:Date.now(),query:y.query,answer:y.answer,citations:y.citations||[],processing_time:y.processing_time,timestamp:new Date().toISOString()},...h].slice(0,50);E(m),localStorage.setItem("ragChatHistory",JSON.stringify(m))}},[y]),reactExports.useEffect(()=>{const c=m=>{if(R.current&&!R.current.contains(m.target)){const x=document.querySelector(".bottom-input-bar");if(x&&x.contains(m.target))return;a()}};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[a]),!y)return null;const{answer:M,citations:C=[],query:u,processing_time:l}=y;return jsxRuntimeExports.jsx("div",{className:"rag-response-overlay",children:jsxRuntimeExports.jsx("div",{className:"rag-response-modal",ref:R,children:jsxRuntimeExports.jsxs("div",{className:"rag-response-content",children:[jsxRuntimeExports.jsxs("div",{className:"chat-container",children:[h.length>1&&jsxRuntimeExports.jsxs("div",{className:"chat-history",children:[jsxRuntimeExports.jsx("div",{className:"history-header",children:jsxRuntimeExports.jsx("span",{children:"Previous Conversations"})}),h.slice(1,4).map(c=>jsxRuntimeExports.jsxs("div",{className:"history-conversation",children:[jsxRuntimeExports.jsx("div",{className:"user-message",children:jsxRuntimeExports.jsx("div",{className:"message-bubble user-bubble history-bubble",children:c.query})}),jsxRuntimeExports.jsx("div",{className:"ai-message",children:jsxRuntimeExports.jsx("div",{className:"message-bubble ai-bubble history-bubble",children:c.answer})})]},c.id)),jsxRuntimeExports.jsx("div",{className:"history-divider"})]}),jsxRuntimeExports.jsx("div",{className:"user-message",children:jsxRuntimeExports.jsx("div",{className:"message-bubble user-bubble",children:u})}),jsxRuntimeExports.jsxs("div",{className:"ai-message",children:[jsxRuntimeExports.jsx("div",{className:"message-bubble ai-bubble",children:M}),C&&C.length>0&&jsxRuntimeExports.jsxs("div",{className:"rag-citations",children:[jsxRuntimeExports.jsxs("button",{className:"cites-btn",onClick:()=>i(!d),children:["cites ",C.length]}),d&&jsxRuntimeExports.jsx("div",{className:"citations-list",children:C.map((c,m)=>jsxRuntimeExports.jsxs("div",{className:"citation-item",children:[jsxRuntimeExports.jsxs("div",{className:"citation-header",children:[jsxRuntimeExports.jsxs("span",{className:"citation-number",children:["[",m+1,"]"]}),c.document_title&&jsxRuntimeExports.jsx("span",{className:"citation-document",children:c.document_title}),jsxRuntimeExports.jsxs("span",{className:"citation-page",children:["Page ",c.page_number||"N/A"]}),c.similarity_score&&jsxRuntimeExports.jsxs("span",{className:"citation-score",children:[Math.round(c.similarity_score*100),"% match"]})]}),jsxRuntimeExports.jsx("div",{className:"citation-text",children:c.text})]},m))})]})]})]}),l&&jsxRuntimeExports.jsx("div",{className:"rag-meta",children:jsxRuntimeExports.jsxs("small",{children:["Processed in ",Math.round(l*1e3),"ms"]})})]})})})}PropTypes.func.isRequired,PropTypes.func,PropTypes.number.isRequired,PropTypes.number.isRequired,PropTypes.number,PropTypes.number;const API_BASE_URL=apiV1();class RAGService{getHeaders(){return{"X-API-Key":API_KEY}}getHeadersWithContentType(){return{"Content-Type":"application/json","X-API-Key":API_KEY}}async queryRAG(a,d=null){if(!a||!a.trim())throw new Error("Query cannot be empty");const i={query:a.trim()};d&&d.trim()&&(i.document_id=d.trim());const h=await fetch(`${API_BASE_URL}/rag/query`,{method:"POST",headers:this.getHeadersWithContentType(),body:JSON.stringify(i)});if(!h.ok){const E=await h.json();throw h.status===202?new Error(E.detail||"Document is being indexed. Please try again in a few moments."):new Error(E.detail||"RAG query failed")}return await h.json()}async queryWorkspace(a){return await this.queryRAG(a,null)}async indexDocument(a){if(!a||!a.trim())throw new Error("Document ID cannot be empty");const d=await fetch(`${API_BASE_URL}/rag/index?document_id=${encodeURIComponent(a)}`,{method:"POST",headers:this.getHeaders()});if(!d.ok){const i=await d.json();throw d.status===202?new Error(i.detail||"Document is being indexed by another process. Please wait."):new Error(i.detail||"Document indexing failed")}return await d.json()}async getRAGStatus(a){if(!a||!a.trim())throw new Error("Document ID cannot be empty");const d=await fetch(`${API_BASE_URL}/rag/status/${encodeURIComponent(a)}`,{method:"GET",headers:this.getHeaders()});if(!d.ok){const i=await d.json();throw new Error(i.detail||"Failed to get RAG status")}return await d.json()}async queryWithRetry(a,d,i={}){const{maxRetries:h=3,retryDelay:E=3e3,onRetry:R=null}=i;let M=null;for(let C=0;C<=h;C++)try{return await this.queryRAG(a,d)}catch(u){if(M=u,u.message.includes("being indexed")&&C<h){R&&R(C+1,h,u.message),await new Promise(l=>setTimeout(l,E));continue}throw u}throw M}async ensureIndexAndQuery(a,d,i=null){try{if(i&&i("Checking document status..."),!(await this.getRAGStatus(d)).indexed){i&&i("Indexing document...");try{await this.indexDocument(d),i&&i("Document indexed successfully")}catch(E){if(E.message.includes("being indexed"))i&&i("Document is being indexed by another process, waiting...");else throw E}}return i&&i("Querying document..."),await this.queryWithRetry(a,d,{onRetry:(E,R,M)=>{i&&i(`Retrying query (${E}/${R}): ${M}`)}})}catch(h){throw i&&i(`Error: ${h.message}`),h}}}const ragService=new RAGService,saveNoteToFile=async(y,a)=>{if(!y||!a)return;const d=apiV1(`/documents/${y}/save-note-to-file`);try{const i=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":API_KEY},body:JSON.stringify({content:a})});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const h=await i.json();console.log("Note saved to file:",h)}catch(i){console.error("Failed to save note to file:",i)}},sanitizeLabel=y=>y?String(y).replace(/_+/g,"_").replace(/-+/g,"-").replace(/\s+/g," ").trim():"";function App(){const[y,a]=reactExports.useState(null),[d,i]=reactExports.useState(null),[h,E]=reactExports.useState(0),[R,M]=reactExports.useState(0),[C,u]=reactExports.useState(0),[l,c]=reactExports.useState(""),[m,x]=reactExports.useState(null),[p,_]=reactExports.useState(!1),[D,b]=reactExports.useState(""),[L,N]=reactExports.useState(!1),[U,S]=reactExports.useState(null),[P,z]=reactExports.useState(!1),[Y,q]=reactExports.useState([]),[K,Z]=reactExports.useState(null),[it,nt]=reactExports.useState("Workspace"),[at,pt]=reactExports.useState([]),[W,F]=reactExports.useState(null),[O,T]=reactExports.useState(!1),[g,w]=reactExports.useState(!1),[I,B]=reactExports.useState("");reactExports.useEffect(()=>{if(!P)return;const A=k=>{k.key==="Escape"&&z(!1)};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[P]),reactExports.useEffect(()=>{const A=()=>{const k=window.innerWidth-4-12,G=Math.max(200,k/2),V=Math.max(200,k-G);E(G),M(V)};return A(),window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[]),reactExports.useEffect(()=>{if(y&&(L&&P||!L&&h>0)){const A=setTimeout(()=>{console.log("=== Layout Debug Info ==="),console.log("Window Width:",window.innerWidth),console.log("Resizer Position (Left Panel Width):",h),console.log("PDFViewer Width:",L?"workspace auto":h),console.log("MarkdownEditor Width:",R),console.log("Calculated Scale:",1.2),console.log("========================="),window.dispatchEvent(new CustomEvent("pdf:setScale",{detail:1.2}))},100);return()=>clearTimeout(A)}},[y,h,L,P]),reactExports.useEffect(()=>{let A=!1;async function k(){if(!(!L||!K))try{const G=await documentService.getWorkspaceDocuments(K);if(A)return;const V=Array.isArray(G.documents)?G.documents:[];q(V.map(Q=>({id:Q.id,mime:Q.mime,title:Q.title,color:Q.color||null,created_at:Q.created_at,url:Q.mime&&Q.mime.startsWith("application/pdf")?documentService.getDownloadUrl(Q.id):null})))}catch(G){console.warn("Failed to load workspace documents",G)}}return k(),()=>{A=!0}},[L,K]),reactExports.useEffect(()=>{let A=!1;async function k(){if(!L)try{const G=await documentService.listWorkspaces();if(A)return;const V=Array.isArray(G.workspaces)?G.workspaces:[];pt(V)}catch(G){console.warn("Failed to load workspaces",G)}}return k(),()=>{A=!0}},[L]),reactExports.useEffect(()=>{const A=k=>{if(!W)return;const G=k.target,V=G.closest&&G.closest(".ws-menu-popup"),Q=G.closest&&G.closest(".ws-menu-btn");!V&&!Q&&F(null)};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[W]);const X=A=>{d&&l&&saveNoteToFile(d,l),y&&URL.revokeObjectURL(y),c(""),L||(a(A),z(!1))},H=async A=>{if(A.doc_id&&i(A.doc_id),u(k=>k+1),L&&A.doc_id){const k=documentService.getDownloadUrl(A.doc_id);q(G=>{if(G.some(ot=>ot.id===A.doc_id))return G;const Q=sanitizeLabel(A.filename||"PDF");return[{id:A.doc_id,mime:"application/pdf",title:Q,url:k,created_at:new Date().toISOString()},...G]})}if(A.doc_id)try{console.log(`Starting auto-indexing for document ${A.doc_id}...`),await ragService.indexDocument(A.doc_id),console.log(`Document ${A.doc_id} indexed successfully`)}catch(k){console.warn(`Auto-indexing failed for document ${A.doc_id}:`,k.message)}};reactExports.useEffect(()=>()=>{d&&l&&saveNoteToFile(d,l),y&&URL.revokeObjectURL(y)},[y,d,l]);const v=Y.some(A=>A.mime&&A.mime.startsWith("text/"));return jsxRuntimeExports.jsxs("div",{className:"app",children:[jsxRuntimeExports.jsxs("header",{className:"app-header",children:[jsxRuntimeExports.jsx("h1",{onClick:()=>{L&&O&&K?T(!1):(L&&P||N(!1),z(!1))},children:L&&O&&K?it||"Workspace":jsxRuntimeExports.jsxs("svg",{width:"200",height:"50",viewBox:"0 0 1000 250",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-label":"Kakuti logo - aligned icon and cards",children:[jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsxs("linearGradient",{id:"cardGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#f3f4f6"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#ffffff"})]}),jsxRuntimeExports.jsx("filter",{id:"softShadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:jsxRuntimeExports.jsx("feDropShadow",{dx:"0",dy:"3",stdDeviation:"4",floodColor:"rgba(0,0,0,0.12)"})})]}),jsxRuntimeExports.jsx("style",{children:`.teal { fill:#0F766E; }
                .hexStroke { fill:none; stroke:#0F766E; stroke-width:7; stroke-linejoin:round; }
                .cardFill { fill:url(#cardGrad); }
                .glyph { fill:#0F766E; font:700 100px "Inter","Poppins","Helvetica Neue",Arial,sans-serif; }`}),jsxRuntimeExports.jsxs("g",{transform:"translate(70,64)",children:[jsxRuntimeExports.jsx("path",{className:"hexStroke",d:"M40,0 L80,23 L80,69 L40,92 L0,69 L0,23 Z"}),jsxRuntimeExports.jsx("circle",{className:"teal",cx:"40",cy:"46",r:"8"})]}),jsxRuntimeExports.jsxs("g",{transform:"translate(180,45)",children:[jsxRuntimeExports.jsxs("g",{transform:"translate(0,0)",children:[jsxRuntimeExports.jsx("rect",{x:"0",y:"0",rx:"12",ry:"12",width:"100",height:"130",className:"cardFill",filter:"url(#softShadow)"}),jsxRuntimeExports.jsx("text",{className:"glyph",x:"50",y:"95",textAnchor:"middle",children:"K"})]}),jsxRuntimeExports.jsxs("g",{transform:"translate(124,0)",children:[jsxRuntimeExports.jsx("rect",{x:"0",y:"0",rx:"12",ry:"12",width:"100",height:"130",className:"cardFill",filter:"url(#softShadow)"}),jsxRuntimeExports.jsx("text",{className:"glyph",x:"50",y:"95",textAnchor:"middle",children:"A"})]}),jsxRuntimeExports.jsxs("g",{transform:"translate(248,0)",children:[jsxRuntimeExports.jsx("rect",{x:"0",y:"0",rx:"12",ry:"12",width:"100",height:"130",className:"cardFill",filter:"url(#softShadow)"}),jsxRuntimeExports.jsx("text",{className:"glyph",x:"50",y:"95",textAnchor:"middle",children:"K"})]}),jsxRuntimeExports.jsxs("g",{transform:"translate(372,0)",children:[jsxRuntimeExports.jsx("rect",{x:"0",y:"0",rx:"12",ry:"12",width:"100",height:"130",className:"cardFill",filter:"url(#softShadow)"}),jsxRuntimeExports.jsx("text",{className:"glyph",x:"50",y:"95",textAnchor:"middle",children:"U"})]}),jsxRuntimeExports.jsxs("g",{transform:"translate(496,0)",children:[jsxRuntimeExports.jsx("rect",{x:"0",y:"0",rx:"12",ry:"12",width:"100",height:"130",className:"cardFill",filter:"url(#softShadow)"}),jsxRuntimeExports.jsx("text",{className:"glyph",x:"50",y:"95",textAnchor:"middle",children:"T"})]}),jsxRuntimeExports.jsxs("g",{transform:"translate(620,0)",children:[jsxRuntimeExports.jsx("rect",{x:"0",y:"0",rx:"12",ry:"12",width:"100",height:"130",className:"cardFill",filter:"url(#softShadow)"}),jsxRuntimeExports.jsx("text",{className:"glyph",x:"50",y:"95",textAnchor:"middle",children:"I"})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"header-center",children:L&&K?g?jsxRuntimeExports.jsx("input",{className:"ws-name-input",value:I,onChange:A=>B(A.target.value),autoFocus:!0,onBlur:async()=>{const A=I.trim();if(w(!1),!(!A||A===it))try{await documentService.updateWorkspaceName(K,A),nt(A),pt(k=>k.map(G=>G.id===K?{...G,name:A}:G))}catch(k){alert("Rename failed: "+k.message)}},onKeyDown:async A=>{A.key==="Enter"?(A.preventDefault(),A.currentTarget.blur()):A.key==="Escape"&&(A.preventDefault(),w(!1))}}):jsxRuntimeExports.jsx("span",{className:"ws-name-display",title:"Click to rename workspace",onClick:()=>{w(!0),B(it||"Workspace")},children:it||"Workspace"}):jsxRuntimeExports.jsx("span",{className:"slogan",children:"Focus to Know"})}),jsxRuntimeExports.jsx("div",{className:"header-controls",children:L&&!O&&jsxRuntimeExports.jsx(FileUpload,{onFileSelect:X,onUploadComplete:H,workspaceId:K})})]}),jsxRuntimeExports.jsx("main",{className:"app-main workspace",children:L?jsxRuntimeExports.jsxs("div",{className:"workspace-container",style:{height:"100%",width:"100%"},children:[jsxRuntimeExports.jsx("section",{className:"pane pane-left",style:{width:"100%",minWidth:"200px",position:"relative",height:"100%"},children:O&&d?jsxRuntimeExports.jsx(MarkdownEditor,{externalContent:l,onContentChange:c,documentId:d}):jsxRuntimeExports.jsxs("div",{className:"workspace-content",children:[jsxRuntimeExports.jsxs("div",{className:"preview-columns",style:{gridTemplateColumns:v?"220px 1fr":"1fr"},children:[v&&jsxRuntimeExports.jsx("div",{className:"notes-column",children:Y.filter(A=>A.mime&&A.mime.startsWith("text/")).sort((A,k)=>new Date(k.created_at||0)-new Date(A.created_at||0)).map(A=>jsxRuntimeExports.jsx(NotePreviewCard,{title:sanitizeLabel(A.title||"Note"),noteId:A.id,color:A.color,onOpen:async()=>{try{const k=await documentService.getDocument(A.id);i(A.id),c(k?.body||""),z(!1),T(!0)}catch(k){alert("Failed to open note: "+k.message)}},onDelete:async()=>{if(confirm("Are you sure you want to delete this note?"))try{await documentService.deleteDocument(A.id),q(k=>k.filter(G=>G.id!==A.id)),d===A.id&&(i(null),c(""),T(!1))}catch(k){alert("Failed to delete note: "+k.message)}},onRename:async()=>{const k=prompt("New note name",sanitizeLabel(A.title||"Note"));if(!(!k||!k.trim()))try{await documentService.updateDocument(A.id,{title:k.trim()}),q(G=>G.map(V=>V.id===A.id?{...V,title:k.trim()}:V))}catch(G){alert("Rename failed: "+G.message)}}},A.id))}),jsxRuntimeExports.jsx("div",{className:"pdfs-grid",children:Y.filter(A=>A.mime&&A.mime.startsWith("application/pdf")).sort((A,k)=>new Date(k.created_at||0)-new Date(A.created_at||0)).map(A=>jsxRuntimeExports.jsx(DocumentPreviewCard,{file:A.url,title:sanitizeLabel(A.title||"PDF"),onOpen:()=>{a(A.url),i(A.id),z(!0),T(!1)},onDelete:async()=>{if(confirm("Are you sure you want to delete this document?"))try{await documentService.deleteDocument(A.id),q(k=>k.filter(G=>G.id!==A.id)),y===A.url&&(a(null),i(null),z(!1),T(!1))}catch(k){alert("Failed to delete document: "+k.message)}}},A.id))})]}),P&&y&&jsxRuntimeExports.jsxs("div",{className:"pdf-overlay",children:[jsxRuntimeExports.jsx("div",{className:"pdf-overlay-backdrop",onClick:()=>{z(!1),a(null),i(null)}}),jsxRuntimeExports.jsx("div",{className:"pdf-overlay-container",children:jsxRuntimeExports.jsx(PDFViewer,{file:y,documentId:d,onMarkdownUpdate:c})})]})]})}),O&&jsxRuntimeExports.jsx(BottomInputBar,{placeholder:"Ask a question about this document",documents:Y,onSend:async A=>{const k=/\[\[doc:([^\]|]+)\|([^\]]+)\]\]/g;if([...A.matchAll(k)].length>0&&d)try{_(!0),b("Starting RAG query...");const V=A.replace(k,"").trim();if(!V){_(!1),b(""),alert("Please enter a question after selecting the document.");return}const Q=await ragService.ensureIndexAndQuery(V,d,et=>{b(et)});x({...Q,query:V}),_(!1),b("")}catch(V){console.error("RAG Error:",V),_(!1),b(""),alert(`RAG query failed: ${V.message}`)}else console.log("Using sim service for non-RAG query:",A),await(await __vitePreload(async()=>{const{default:Q}=await import("./simService-Y1Jb71fn.js");return{default:Q}},[])).default.sendMessage({source:"note",message:A,workspaceId:K,documentId:d})}}),!P&&!O&&jsxRuntimeExports.jsx(BottomInputBar,{documents:Y,onSend:async A=>{const k=/\[\[doc:([^\]|]+)\|([^\]]+)\]\]/g,G=[...A.matchAll(k)];if(G.length>0){const V=G[0][1];try{_(!0),b("Starting RAG query...");const Q=A.replace(k,"").trim();if(!Q){_(!1),b(""),alert("Please enter a question after selecting the document.");return}const et=await ragService.ensureIndexAndQuery(Q,V,ot=>{b(ot)});x({...et,query:Q}),_(!1),b("")}catch(Q){console.error("RAG Error:",Q),_(!1),b(""),alert(`RAG query failed: ${Q.message}`)}}else try{_(!0),b("Starting workspace RAG query...");const V=await ragService.queryWorkspace(A);x({...V,query:A}),_(!1),b("")}catch(V){console.error("Workspace RAG Error:",V),_(!1),b(""),console.log("Falling back to sim service for query:",A),await(await __vitePreload(async()=>{const{default:et}=await import("./simService-Y1Jb71fn.js");return{default:et}},[])).default.sendMessage({source:"workspace",message:A,workspaceId:K})}}})]}):jsxRuntimeExports.jsx("div",{className:"welcome-screen",style:{width:"100%",display:"flex",flexDirection:"column",height:"100%"},children:jsxRuntimeExports.jsx("div",{className:"welcome-content",style:{width:"100%",flex:"1 1 auto",minHeight:0},children:jsxRuntimeExports.jsxs("div",{className:"workspace-grid",children:[jsxRuntimeExports.jsxs("div",{className:"workspace-card create-workspace-card",role:"button",tabIndex:0,onClick:async()=>{try{const A=await documentService.createWorkspace();Z(A.workspace_id),nt(A.name||"WorkSpace"),N(!0),a(null),i(null),z(!1),S(k=>k||new Date().toISOString())}catch(A){alert("Failed to create workspace: "+A.message)}},onKeyDown:async A=>{if(A.key==="Enter"||A.key===" "){A.preventDefault();try{const k=await documentService.createWorkspace();Z(k.workspace_id),nt(k.name||"WorkSpace"),N(!0),a(null),i(null),z(!1),S(G=>G||new Date().toISOString())}catch(k){alert("Failed to create workspace: "+k.message)}}},title:"Create Workspace",children:[jsxRuntimeExports.jsx("div",{className:"create-workspace-plus","aria-hidden":!0,children:jsxRuntimeExports.jsxs("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",stroke:"#0f172a",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"9",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M12 7v10M7 12h10"})]})}),jsxRuntimeExports.jsx("div",{className:"create-workspace-label",children:"Create WorkSpace"})]}),at.map(A=>jsxRuntimeExports.jsxs("div",{className:"workspace-card",role:"button",tabIndex:0,onClick:()=>{Z(A.id),nt(A.name||"WorkSpace"),N(!0),a(null),i(null),z(!1)},onKeyDown:k=>{(k.key==="Enter"||k.key===" ")&&(k.preventDefault(),Z(A.id),nt(A.name||"WorkSpace"),N(!0),a(null),i(null),z(!1))},children:[jsxRuntimeExports.jsx("button",{className:"ws-menu-btn",title:"Workspace options",onClick:k=>{k.stopPropagation(),F(G=>G===A.id?null:A.id)},children:jsxRuntimeExports.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:jsxRuntimeExports.jsxs("g",{fill:"currentColor",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"5",r:"1.5"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"1.5"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"19",r:"1.5"})]})})}),W===A.id&&jsxRuntimeExports.jsxs("div",{className:"ws-menu-popup",onClick:k=>k.stopPropagation(),children:[jsxRuntimeExports.jsx("button",{className:"ws-menu-item",onClick:async()=>{const k=prompt("New name for workspace",A.name||"Workspace");if(k&&k.trim())try{await documentService.updateWorkspaceName(A.id,k.trim()),pt(G=>G.map(V=>V.id===A.id?{...V,name:k.trim()}:V))}catch(G){alert("RENAME FAILED:"+G.message)}F(null)},children:"Rename"}),jsxRuntimeExports.jsx("button",{className:"ws-menu-item",onClick:async()=>{if(confirm("Delete this workspace and all its documents?")){try{await documentService.deleteWorkspace(A.id),pt(k=>k.filter(G=>G.id!==A.id)),u(k=>k+1),K===A.id&&(N(!1),Z(null),q([]),a(null),z(!1))}catch(k){alert("Delete failed: "+k.message)}F(null)}},children:"Delete"})]}),jsxRuntimeExports.jsx("span",{className:"workspace-title",children:A.name||"WorkSpace"}),A.created_at&&jsxRuntimeExports.jsx("span",{className:"workspace-meta",children:new Date(A.created_at).toLocaleString()})]},A.id))]})})})}),m&&jsxRuntimeExports.jsx(RAGResponse,{response:m,onClose:()=>x(null)}),p&&jsxRuntimeExports.jsx("div",{className:"rag-loading-overlay",children:jsxRuntimeExports.jsxs("div",{className:"rag-loading-modal",children:[jsxRuntimeExports.jsx("div",{className:"rag-loading-spinner"}),jsxRuntimeExports.jsx("div",{className:"rag-loading-text",children:D})]})})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{API_KEY as A,apiV1 as a};
